var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}const a="undefined"!=typeof window;let c=a?()=>window.performance.now():()=>Date.now(),h=a?t=>requestAnimationFrame(t):t;const f=new Set;function l(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&h(l)}function p(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function b(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function I(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function E(t,e,n){t.classList[n?"add":"remove"](e)}function T(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const N=new Set;let S,A=0;function x(t,e,n,r,i,o,s,u=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const h=c+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${u}`,l=t.ownerDocument;N.add(l);const p=l.__svelte_stylesheet||(l.__svelte_stylesheet=l.head.appendChild(y("style")).sheet),d=l.__svelte_rules||(l.__svelte_rules={});d[f]||(d[f]=!0,p.insertRule(`@keyframes ${f} ${h}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?v+", ":""}${f} ${r}ms linear ${i}ms 1 both`,A+=1,f}function k(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),A-=i,A||h((()=>{A||(N.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),N.clear())})))}function D(t){S=t}function O(){if(!S)throw new Error("Function called outside component initialization");return S}const C=[],P=[],L=[],R=[],V=Promise.resolve();let M=!1;function U(t){L.push(t)}let j=!1;const F=new Set;function q(){if(!j){j=!0;do{for(let t=0;t<C.length;t+=1){const e=C[t];D(e),z(e.$$)}for(D(null),C.length=0;P.length;)P.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];F.has(e)||(F.add(e),e())}L.length=0}while(C.length);for(;R.length;)R.pop()();M=!1,j=!1,F.clear()}}function z(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}let H;function G(t,e,n){t.dispatchEvent(T(`${e?"intro":"outro"}${n}`))}const B=new Set;let K;function $(){K={r:0,c:[],p:K}}function J(){K.r||i(K.c),K=K.p}function W(t,e){t&&t.i&&(B.delete(t),t.i(e))}function X(t,e,n,r){if(t&&t.o){if(B.has(t))return;B.add(t),K.c.push((()=>{B.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const Y={duration:0};function Q(n,r,s,u){let a=r(n,s),p=u?0:1,d=null,v=null,y=null;function g(){y&&k(n,y)}function m(t,e){const n=t.b-p;return e*=Math.abs(n),{a:p,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(r){const{delay:o=0,duration:s=300,easing:u=e,tick:b=t,css:w}=a||Y,_={start:c()+o,b:r};r||(_.group=K,K.r+=1),d||v?v=_:(w&&(g(),y=x(n,p,r,s,o,u,w)),r&&b(0,1),d=m(_,s),U((()=>G(n,r,"start"))),function(t){let e;0===f.size&&h(l),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(v&&t>v.start&&(d=m(v,s),v=null,G(n,d.b,"start"),w&&(g(),y=x(n,p,d.b,d.duration,0,u,a.css))),d)if(t>=d.end)b(p=d.b,1-p),G(n,d.b,"end"),v||(d.b?g():--d.group.r||i(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;p=d.a+d.d*u(e/d.duration),b(p,1-p)}return!(!d&&!v)})))}return{run(t){o(a)?(H||(H=Promise.resolve(),H.then((()=>{H=null}))),H).then((()=>{a=a(),b(t)})):b(t)},end(){g(),d=v=null}}}const Z="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function tt(t,e){X(t,1,1,(()=>{e.delete(t.key)}))}function et(t){t&&t.c()}function nt(t,e,r){const{fragment:s,on_mount:u,on_destroy:a,after_update:c}=t.$$;s&&s.m(e,r),U((()=>{const e=u.map(n).filter(o);a?a.push(...e):i(e),t.$$.on_mount=[]})),c.forEach(U)}function rt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function it(t,e){-1===t.$$.dirty[0]&&(C.push(t),M||(M=!0,V.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(e,n,o,s,u,a,c=[-1]){const h=S;D(e);const f=n.props||{},l=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(l.ctx=o?o(e,f,((t,n,...r)=>{const i=r.length?r[0]:n;return l.ctx&&u(l.ctx[t],l.ctx[t]=i)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](i),p&&it(e,t)),n})):[],l.update(),p=!0,i(l.before_update),l.fragment=!!s&&s(l.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);l.fragment&&l.fragment.l(t),t.forEach(v)}else l.fragment&&l.fragment.c();n.intro&&W(e.$$.fragment),nt(e,n.target,n.anchor),q()}D(h)}class st{$destroy(){rt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ut(t){const e=t-1;return e*e*e+1}function at(t,{delay:e=0,duration:n=400,easing:r=ut,x:i=0,y:o=0,opacity:s=0}){const u=getComputedStyle(t),a=+u.opacity,c="none"===u.transform?"":u.transform,h=a*(1-s);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${a-h*e}`}}const ct=[];function ht(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!ct.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),ct.push(n,e)}if(t){for(let t=0;t<ct.length;t+=2)ct[t][0](ct[t+1]);ct.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,u=t){const a=[s,u];return i.push(a),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(a);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}var ft,lt=new Uint8Array(16);function pt(){if(!ft&&!(ft="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ft(lt)}var dt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function vt(t){return"string"==typeof t&&dt.test(t)}for(var yt=[],gt=0;gt<256;++gt)yt.push((gt+256).toString(16).substr(1));function mt(t,e,n){var r=(t=t||{}).random||(t.rng||pt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(yt[t[e+0]]+yt[t[e+1]]+yt[t[e+2]]+yt[t[e+3]]+"-"+yt[t[e+4]]+yt[t[e+5]]+"-"+yt[t[e+6]]+yt[t[e+7]]+"-"+yt[t[e+8]]+yt[t[e+9]]+"-"+yt[t[e+10]]+yt[t[e+11]]+yt[t[e+12]]+yt[t[e+13]]+yt[t[e+14]]+yt[t[e+15]]).toLowerCase();if(!vt(n))throw TypeError("Stringified UUID is invalid");return n}(r)}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var bt=function(t,e){return(bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function wt(t,e){function n(){this.constructor=t}bt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var _t=function(){return(_t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function It(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function Et(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function Tt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function St(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Nt(arguments[e]));return t}function At(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=xt(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var kt=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ot(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ct=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Pt.prototype.create),o}return wt(e,t),e}(Error),Pt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Lt(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new Ct(i,u,r);return a},t}();function Lt(t,e){return t.replace(Rt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Rt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mt(t,e){var n=new Ut(t,e);return n.subscribe.bind(n)}var Ut=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=jt),void 0===r.error&&(r.error=jt),void 0===r.complete&&(r.complete=jt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function jt(){}var Ft=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),qt="[DEFAULT]",zt=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=qt);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new kt;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=_t({identifier:qt,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService(qt)}catch(t){}try{for(var r=Tt(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Nt(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=qt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return It(this,void 0,void 0,(function(){var t;return Et(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(St(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===qt?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:qt:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ht,Gt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new zt(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Bt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Kt,$t=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Kt||(Kt={}));var Jt,Wt={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},Xt=Kt.INFO,Yt=((Ht={})[Kt.DEBUG]="log",Ht[Kt.VERBOSE]="log",Ht[Kt.INFO]="info",Ht[Kt.WARN]="warn",Ht[Kt.ERROR]="error",Ht),Qt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Yt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Bt(["["+i+"]  "+t.name+":"],n))}},Zt=function(){function t(t){this.name=t,this._logLevel=Xt,this._logHandler=Qt,this._userLogHandler=null,$t.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Kt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Wt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bt([this,Kt.DEBUG],t)),this._logHandler.apply(this,Bt([this,Kt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bt([this,Kt.VERBOSE],t)),this._logHandler.apply(this,Bt([this,Kt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bt([this,Kt.INFO],t)),this._logHandler.apply(this,Bt([this,Kt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bt([this,Kt.WARN],t)),this._logHandler.apply(this,Bt([this,Kt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bt([this,Kt.ERROR],t)),this._logHandler.apply(this,Bt([this,Kt.ERROR],t))},t}();function te(t){$t.forEach((function(e){e.setLogLevel(t)}))}var ee,ne=((Jt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Jt["bad-app-name"]="Illegal App name: '{$appName}",Jt["duplicate-app"]="Firebase App named '{$appName}' already exists",Jt["app-deleted"]="Firebase App named '{$appName}' already deleted",Jt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Jt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Jt),re=new Pt("app","Firebase",ne),ie="@firebase/app",oe="[DEFAULT]",se=((ee={})[ie]="fire-core",ee["@firebase/analytics"]="fire-analytics",ee["@firebase/auth"]="fire-auth",ee["@firebase/database"]="fire-rtdb",ee["@firebase/functions"]="fire-fn",ee["@firebase/installations"]="fire-iid",ee["@firebase/messaging"]="fire-fcm",ee["@firebase/performance"]="fire-perf",ee["@firebase/remote-config"]="fire-rc",ee["@firebase/storage"]="fire-gcs",ee["@firebase/firestore"]="fire-fst",ee["fire-js"]="fire-js",ee["firebase-wrapper"]="fire-js-all",ee),ue=new Zt("@firebase/app"),ae=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=xt(void 0,t),this.container=new Gt(e.name),this._addComponent(new Ft("app",(function(){return o}),"PUBLIC"));try{for(var s=Tt(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=oe),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=oe),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){ue.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw re.create("app-deleted",{appName:this.name_})},t}();ae.prototype.name&&ae.prototype.options||ae.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ce(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=oe);var s=o.name;if("string"!=typeof s||!s)throw re.create("bad-app-name",{appName:String(s)});if(Vt(e,s))throw re.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=se[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ue.warn(a.join(" "))}o(new Ft(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:te,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw re.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Wt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Kt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=$t;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Vt(e,t=t||oe))throw re.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return ue.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw re.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&xt(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=Tt(Object.keys(e)),f=h.next();!f.done;f=h.next()){var l=f.value;e[l]._addComponent(o)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var he=function t(){var e=ce(ae);return e.INTERNAL=_t(_t({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){xt(e,t)},createSubscribe:Mt,ErrorFactory:Pt,deepExtend:xt}),e}(),fe=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var le=self.firebase.SDK_VERSION;le&&le.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var pe=he.initializeApp;he.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ot()&&ue.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),pe.apply(void 0,t)};var de=he;!function(t,e){t.INTERNAL.registerComponent(new Ft("platform-logger",(function(t){return new fe(t)}),"PRIVATE")),t.registerVersion(ie,"0.6.13",e),t.registerVersion("fire-js","")}(de);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
de.registerVersion("firebase","8.2.4","app");
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var ve=function(t,e){return(ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ye(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ge,me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},be=be||{},we=me||self;function _e(){}function Ie(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ee(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Te="closure_uid_"+(1e9*Math.random()>>>0),Ne=0;function Se(t,e,n){return t.call.apply(t.bind,arguments)}function Ae(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function xe(t,e,n){return(xe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Se:Ae).apply(null,arguments)}function ke(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function De(){return Date.now()}function Oe(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Ce(){this.j=this.j,this.i=this.i}Ce.prototype.j=!1,Ce.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Te)&&t[Te]||(t[Te]=++Ne))},Ce.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Pe=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Le=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Re(t){return Array.prototype.concat.apply([],arguments)}function Ve(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Me(t){return/^[\s\xa0]*$/.test(t)}var Ue,je=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Fe(t,e){return-1!=t.indexOf(e)}function qe(t,e){return t<e?-1:t>e?1:0}t:{var ze=we.navigator;if(ze){var He=ze.userAgent;if(He){Ue=He;break t}}Ue=""}function Ge(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Be(t){var e={};for(var n in t)e[n]=t[n];return e}var Ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ke.length;o++)n=Ke[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Je(t){return Je[" "](t),t}Je[" "]=_e;var We,Xe,Ye=Fe(Ue,"Opera"),Qe=Fe(Ue,"Trident")||Fe(Ue,"MSIE"),Ze=Fe(Ue,"Edge"),tn=Ze||Qe,en=Fe(Ue,"Gecko")&&!(Fe(Ue.toLowerCase(),"webkit")&&!Fe(Ue,"Edge"))&&!(Fe(Ue,"Trident")||Fe(Ue,"MSIE"))&&!Fe(Ue,"Edge"),nn=Fe(Ue.toLowerCase(),"webkit")&&!Fe(Ue,"Edge");function rn(){var t=we.document;return t?t.documentMode:void 0}t:{var on="",sn=(Xe=Ue,en?/rv:([^\);]+)(\)|;)/.exec(Xe):Ze?/Edge\/([\d\.]+)/.exec(Xe):Qe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xe):nn?/WebKit\/(\S+)/.exec(Xe):Ye?/(?:Version)[ \/]?(\S+)/.exec(Xe):void 0);if(sn&&(on=sn?sn[1]:""),Qe){var un=rn();if(null!=un&&un>parseFloat(on)){We=String(un);break t}}We=on}var an,cn={};function hn(t){return function(t,e){var n=cn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=je(String(We)).split("."),r=je(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=qe(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||qe(0==s[2].length,0==u[2].length)||qe(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(we.document&&Qe){var fn=rn();an=fn||(parseInt(We,10)||void 0)}else an=void 0;var ln=an,pn=!Qe||9<=Number(ln),dn=Qe&&!hn("9"),vn=function(){if(!we.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{we.addEventListener("test",_e,e),we.removeEventListener("test",_e,e)}catch(t){}return t}();function yn(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function gn(t,e){if(yn.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(en){t:{try{Je(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:mn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}yn.prototype.b=function(){this.defaultPrevented=!0},Oe(gn,yn);var mn={2:"touch",3:"pen",4:"mouse"};gn.prototype.b=function(){gn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,dn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var bn="closure_listenable_"+(1e6*Math.random()|0),wn=0;function _n(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++wn,this.Y=this.Z=!1}function In(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function En(t){this.src=t,this.a={},this.b=0}function Tn(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Pe(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(In(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Nn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}En.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Nn(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new _n(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Sn="closure_lm_"+(1e6*Math.random()|0),An={};function xn(t,e,n,r,i){if(r&&r.once)return Dn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xn(t,e[o],n,r,i);return null}return n=Un(n),t&&t[bn]?t.va(e,n,Ee(r)?!!r.capture:!!r,i):kn(t,e,n,!1,r,i)}function kn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ee(i)?!!i.capture:!!i;if(s&&!pn)return null;var u=Vn(t);if(u||(t[Sn]=u=new En(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Rn,e=pn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)vn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Dn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Dn(t,e[o],n,r,i);return null}return n=Un(n),t&&t[bn]?t.wa(e,n,Ee(r)?!!r.capture:!!r,i):kn(t,e,n,!0,r,i)}function On(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)On(t,e[o],n,r,i);else r=Ee(r)?!!r.capture:!!r,n=Un(n),t&&t[bn]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=Nn(o=t.a[e],n,r,i))&&(In(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Vn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Nn(e,n,r,i)),(n=-1<t?e[t]:null)&&Cn(n))}function Cn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[bn])Tn(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Vn(e))?(Tn(n,t),0==n.b&&(n.src=null,e[Sn]=null)):In(t)}}}function Pn(t){return t in An?An[t]:An[t]="on"+t}function Ln(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Cn(t),n.call(r,e)}function Rn(t,e){if(t.Y)return!0;if(!pn){if(!e)t:{e=["window","event"];for(var n=we,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ln(t,e=new gn(e,this))}return Ln(t,new gn(e,this))}function Vn(t){return(t=t[Sn])instanceof En?t:null}var Mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Un(t){return"function"==typeof t?t:(t[Mn]||(t[Mn]=function(e){return t.handleEvent(e)}),t[Mn])}function jn(){Ce.call(this),this.c=new En(this),this.J=this,this.C=null}function Fn(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new yn(e,t);else if(e instanceof yn)e.target=e.target||t;else{var i=e;$e(e=new yn(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=qn(s,r,!0,e)&&i}if(i=qn(s=e.a=t,r,!0,e)&&i,i=qn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=qn(s=e.a=n[o],r,!1,e)&&i}function qn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&Tn(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}Oe(jn,Ce),jn.prototype[bn]=!0,(ge=jn.prototype).addEventListener=function(t,e,n,r){xn(this,t,e,n,r)},ge.removeEventListener=function(t,e,n,r){On(this,t,e,n,r)},ge.G=function(){if(jn.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)In(n[r]);delete e.a[t],e.b--}}this.C=null},ge.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ge.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var zn=we.JSON.stringify;function Hn(){this.b=this.a=null}var Gn,Bn=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new $n}),(function(t){t.reset()}));function Kn(){var t=Yn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function $n(){this.next=this.b=this.a=null}function Jn(t){we.setTimeout((function(){throw t}),0)}function Wn(t,e){Gn||function(){var t=we.Promise.resolve(void 0);Gn=function(){t.then(Qn)}}(),Xn||(Gn(),Xn=!0),Yn.add(t,e)}Hn.prototype.add=function(t,e){var n=Bn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},$n.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},$n.prototype.reset=function(){this.next=this.b=this.a=null};var Xn=!1,Yn=new Hn;function Qn(){for(var t;t=Kn();){try{t.a.call(t.b)}catch(t){Jn(t)}var e=Bn;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Xn=!1}function Zn(t,e){jn.call(this),this.b=t||1,this.a=e||we,this.f=xe(this.Za,this),this.g=De()}function tr(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function er(t,e,n){if("function"==typeof t)n&&(t=xe(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=xe(t.handleEvent,t)}return 2147483647<Number(e)?-1:we.setTimeout(t,e||0)}function nr(t){t.a=er((function(){t.a=null,t.c&&(t.c=!1,nr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Oe(Zn,jn),(ge=Zn.prototype).aa=!1,ge.M=null,ge.Za=function(){if(this.aa){var t=De()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Fn(this,"tick"),this.aa&&(tr(this),this.start()))}},ge.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=De())},ge.G=function(){Zn.X.G.call(this),tr(this),delete this.a};var rr=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}ve(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:nr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(we.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Ce);function ir(t){Ce.call(this),this.b=t,this.a={}}Oe(ir,Ce);var or=[];function sr(t,e,n,r){Array.isArray(n)||(n&&(or[0]=n.toString()),n=or);for(var i=0;i<n.length;i++){var o=xn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ur(t){Ge(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Cn(t)}),t),t.a={}}function ar(){this.a=!0}function cr(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return zn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}ir.prototype.G=function(){ir.X.G.call(this),ur(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ar.prototype.info=function(){};var hr={},fr=null;function lr(){return fr=fr||new jn}function pr(t){yn.call(this,hr.Fa,t)}function dr(t){var e=lr();Fn(e,new pr(e,t))}function vr(t,e){yn.call(this,hr.STAT_EVENT,t),this.stat=e}function yr(t){var e=lr();Fn(e,new vr(e,t))}function gr(t){yn.call(this,hr.Ga,t)}function mr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return we.setTimeout((function(){t()}),e)}hr.Fa="serverreachability",Oe(pr,yn),hr.STAT_EVENT="statevent",Oe(vr,yn),hr.Ga="timingevent",Oe(gr,yn);var br={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},wr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function _r(){}function Ir(t){var e;return(e=t.a)||(e=t.a={}),e}function Er(){}_r.prototype.a=null;var Tr,Nr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Sr(){yn.call(this,"d")}function Ar(){yn.call(this,"c")}function xr(){}function kr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ir(this),this.P=Dr,t=tn?125:void 0,this.R=new Zn(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Oe(Sr,yn),Oe(Ar,yn),Oe(xr,_r),Tr=new xr;var Dr=45e3,Or={},Cr={};function Pr(t,e,n){t.H=1,t.i=ei(Wr(e)),t.j=n,t.I=!0,Lr(t,null)}function Lr(t,e){t.u=De(),Mr(t),t.l=Wr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),di(n.b,"t",r),t.D=0,t.a=ao(t.g,t.g.C?e:null),0<t.O&&(t.F=new rr(xe(t.Ca,t,t.a),t.O)),sr(t.J,t.a,"readystatechange",t.Xa),e=t.B?Be(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),dr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Rr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Vr(t,n);if(i==Cr){4==e&&(t.h=4,yr(14),r=!1),cr(t.c,t.f,null,"[Incomplete Response]");break}if(i==Or){t.h=4,yr(15),cr(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}cr(t.c,t.f,i,null),zr(t,i)}4==e&&0==n.length&&(t.h=1,yr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),to(e),e.F=!0,yr(11))):(cr(t.c,t.f,n,"[Invalid Chunked Response]"),qr(t),Fr(t))}function Vr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Cr:(n=Number(e.substring(n,r)),isNaN(n)?Or:(r+=1)+n>e.length?Cr:(e=e.substr(r,n),t.D=r+n,e))}function Mr(t){t.T=De()+t.P,Ur(t,t.P)}function Ur(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=mr(xe(t.Va,t),e)}function jr(t){t.o&&(we.clearTimeout(t.o),t.o=null)}function Fr(t){0==t.g.v||t.A||ro(t.g,t)}function qr(t){jr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,tr(t.R),ur(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function zr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||_i(n.b,t)))if(n.I=t.N,!t.C&&_i(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;no(n),Bi(n)}Zi(n),yr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=mr(xe(n.Sa,n),6e3));if(1>=wi(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else oo(n,11)}else if((t.C||n.a==t)&&no(n),!Me(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(Fe(h,"spdy")||Fe(h,"quic")||Fe(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(Ii(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,ti(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=De()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=uo(a,a.C?a.ga:null,a.fa),p.C){Ei(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(jr(d),Mr(d)),a.a=p}else Qi(a);0<n.g.length&&Ji(n)}else"stop"!=i[0]&&"close"!=i[0]||oo(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?oo(n,7):Gi(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);dr(4)}catch(t){}}function Hr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ie(t)||"string"==typeof t)Le(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ie(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ie(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Gr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Gr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Br(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Kr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Kr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Kr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ge=kr.prototype).setTimeout=function(t){this.P=t},ge.Xa=function(t){t=t.target;var e=this.F;e&&3==Fi(t)?e.f():this.Ca(t)},ge.Ca=function(t){try{if(t==this.a)t:{var e=Fi(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!tn&&!this.a.$())){this.A||4!=e||7==n||dr(8==n||0>=r?3:2),jr(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Me(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,yr(12),qr(this),Fr(this);break t}cr(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,zr(this,a)}this.I?(Rr(this,e,o),tn&&this.b&&3==e&&(sr(this.J,this.R,"tick",this.Wa),this.R.start())):(cr(this.c,this.f,o,null),zr(this,o)),4==e&&qr(this),this.b&&!this.A&&(4==e?ro(this.g,this):(this.b=!1,Mr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,yr(12)):(this.h=0,yr(13)),qr(this),Fr(this)}}}catch(t){}},ge.Wa=function(){if(this.a){var t=Fi(this.a),e=this.a.$();this.D<e.length&&(jr(this),Rr(this,t,e),this.b&&4!=t&&Mr(this))}},ge.cancel=function(){this.A=!0,qr(this)},ge.Va=function(){this.o=null;var t=De();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(dr(3),yr(17)),qr(this),this.h=2,Fr(this)):Ur(this,this.T-t)},(ge=Gr.prototype).K=function(){Br(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ge.L=function(){return Br(this),this.a.concat()},ge.get=function(t,e){return Kr(this.b,t)?this.b[t]:e},ge.set=function(t,e){Kr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ge.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var $r=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Jr){this.a=void 0!==e?e:t.a,Xr(this,t.f),this.j=t.j,Yr(this,t.c),Qr(this,t.h),this.g=t.g,e=t.b;var n=new hi;n.c=e.c,e.a&&(n.a=new Gr(e.a),n.b=e.b),Zr(this,n),this.i=t.i}else t&&(n=String(t).match($r))?(this.a=!!e,Xr(this,n[1]||"",!0),this.j=ni(n[2]||""),Yr(this,n[3]||"",!0),Qr(this,n[4]),this.g=ni(n[5]||"",!0),Zr(this,n[6]||"",!0),this.i=ni(n[7]||"")):(this.a=!!e,this.b=new hi(null,this.a))}function Wr(t){return new Jr(t)}function Xr(t,e,n){t.f=n?ni(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Yr(t,e,n){t.c=n?ni(e,!0):e}function Qr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Zr(t,e,n){e instanceof hi?(t.b=e,function(t,e){e&&!t.f&&(fi(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(li(this,e),di(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ri(e,ai)),t.b=new hi(e,t.a))}function ti(t,e,n){t.b.set(e,n)}function ei(t){return ti(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^De()).toString(36)),t}function ni(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ri(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ii),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ii(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Jr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ri(e,oi,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ri(e,oi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ri(n,"/"==n.charAt(0)?ui:si,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ri(n,ci)),t.join("")};var oi=/[#\/\?@]/g,si=/[#\?:]/g,ui=/[#\?]/g,ai=/[#\?@]/g,ci=/#/g;function hi(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function fi(t){t.a||(t.a=new Gr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function li(t,e){fi(t),e=vi(t,e),Kr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Kr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Br(t)))}function pi(t,e){return fi(t),e=vi(t,e),Kr(t.a.b,e)}function di(t,e,n){li(t,e),0<n.length&&(t.c=null,t.a.set(vi(t,e),Ve(n)),t.b+=n.length)}function vi(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ge=hi.prototype).add=function(t,e){fi(this),this.c=null,t=vi(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ge.forEach=function(t,e){fi(this),this.a.forEach((function(n,r){Le(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ge.L=function(){fi(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ge.K=function(t){fi(this);var e=[];if("string"==typeof t)pi(this,t)&&(e=Re(e,this.a.get(vi(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Re(e,t[n])}return e},ge.set=function(t,e){return fi(this),this.c=null,pi(this,t=vi(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ge.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ge.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var yi=function(t,e){this.b=t,this.a=e};function gi(t){this.g=t||mi,we.PerformanceNavigationTiming?t=0<(t=we.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(we.ia&&we.ia.ya&&we.ia.ya()&&we.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var mi=10;function bi(t){return!!t.b||!!t.a&&t.a.size>=t.f}function wi(t){return t.b?1:t.a?t.a.size:0}function _i(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ii(t,e){t.a?t.a.add(e):t.b=e}function Ei(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ti(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ye(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ve(t.c)}function Ni(){}function Si(){this.a=new Ni}function Ai(t,e,n){var r=n||"";try{Hr(t,(function(t,n){var i=t;Ee(t)&&(i=zn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function xi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}gi.prototype.cancel=function(){var t,e;if(this.c=Ti(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ye(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ni.prototype.stringify=function(t){return we.JSON.stringify(t,void 0)},Ni.prototype.parse=function(t){return we.JSON.parse(t,void 0)};var ki=we.JSON.parse;function Di(t){jn.call(this),this.headers=new Gr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Oi,this.D=this.F=!1}Oe(Di,jn);var Oi="",Ci=/^https?$/i,Pi=["POST","PUT"];function Li(t){return"content-type"==t.toLowerCase()}function Ri(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Vi(t),Ui(t)}function Vi(t){t.u||(t.u=!0,Fn(t,"complete"),Fn(t,"error"))}function Mi(t){if(t.b&&void 0!==be&&(!t.s[1]||4!=Fi(t)||2!=t.W()))if(t.l&&4==Fi(t))er(t.za,0,t);else if(Fn(t,"readystatechange"),4==Fi(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match($r)[1]||null;if(!o&&we.self&&we.self.location){var s=we.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ci.test(o?o.toLowerCase():"")}e=i}if(e)Fn(t,"complete"),Fn(t,"success");else{t.h=6;try{var u=2<Fi(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",Vi(t)}}finally{Ui(t)}}}function Ui(t,e){if(t.a){ji(t);var n=t.a,r=t.s[0]?_e:null;t.a=null,t.s=null,e||Fn(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function ji(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(we.clearTimeout(t.m),t.m=null)}function Fi(t){return t.a?t.a.readyState:0}function qi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ge(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ti(t,e,n))}function zi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Hi(t){this.pa=0,this.g=[],this.c=new ar,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=zi("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=zi("baseRetryDelayMs",5e3,t),this.Ra=zi("retryDelaySeedMs",1e4,t),this.Ma=zi("forwardChannelMaxRetries",2,t),this.ma=zi("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new gi(t&&t.concurrentRequestLimit),this.ka=new Si,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Gi(t){if(Ki(t),3==t.v){var e=t.R++,n=Wr(t.B);ti(n,"SID",t.J),ti(n,"RID",e),ti(n,"TYPE","terminate"),Xi(t,n),(e=new kr(t,t.c,e,void 0)).H=2,e.i=ei(Wr(n)),n=!1,we.navigator&&we.navigator.sendBeacon&&(n=we.navigator.sendBeacon(e.i.toString(),"")),!n&&we.Image&&((new Image).src=e.i,n=!0),n||(e.a=ao(e.g,null),e.a.ba(e.i)),e.u=De(),Mr(e)}so(t)}function Bi(t){t.a&&(to(t),t.a.cancel(),t.a=null)}function Ki(t){Bi(t),t.j&&(we.clearTimeout(t.j),t.j=null),no(t),t.b.cancel(),t.h&&("number"==typeof t.h&&we.clearTimeout(t.h),t.h=null)}function $i(t,e){t.g.push(new yi(t.Oa++,e)),3==t.v&&Ji(t)}function Ji(t){bi(t.b)||t.h||(t.h=!0,Wn(t.Ba,t),t.u=0)}function Wi(t,e){var n;n=e?e.f:t.R++;var r=Wr(t.B);ti(r,"SID",t.J),ti(r,"RID",n),ti(r,"AID",t.P),Xi(t,r),t.i&&t.l&&qi(r,t.i,t.l),n=new kr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Yi(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ii(t.b,n),Pr(n,r,e)}function Xi(t,e){t.f&&Hr({},(function(t,n){ti(e,n,t)}))}function Yi(t,e,n){n=Math.min(t.g.length,n);var r=t.f?xe(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Ai(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Qi(t){t.a||t.j||(t.T=1,Wn(t.Aa,t),t.o=0)}function Zi(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=mr(xe(t.Aa,t),io(t,t.o)),t.o++,!0)}function to(t){null!=t.s&&(we.clearTimeout(t.s),t.s=null)}function eo(t){t.a=new kr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Wr(t.la);ti(e,"RID","rpc"),ti(e,"SID",t.J),ti(e,"CI",t.H?"0":"1"),ti(e,"AID",t.P),Xi(t,e),ti(e,"TYPE","xmlhttp"),t.i&&t.l&&qi(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ei(Wr(e)),n.j=null,n.I=!0,Lr(n,t)}function no(t){null!=t.m&&(we.clearTimeout(t.m),t.m=null)}function ro(t,e){var n=null;if(t.a==e){no(t),to(t),t.a=null;var r=2}else{if(!_i(t.b,e))return;n=e.s,Ei(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=De()-e.u;var i=t.u;Fn(r=lr(),new gr(r,n,e,i)),Ji(t)}else Qi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(wi(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=mr(xe(t.Ba,t,e),io(t,t.u)),t.u++,0)))}(t,e)||2==r&&Zi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:oo(t,5);break;case 4:oo(t,10);break;case 3:oo(t,6);break;default:oo(t,2)}}function io(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function oo(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=xe(t.Ya,t);n||(n=new Jr("//www.google.com/images/cleardot.gif"),we.location&&"http"==we.location.protocol||Xr(n,"https"),ei(n)),function(t,e){var n=new ar;if(we.Image){var r=new Image;r.onload=ke(xi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ke(xi,n,r,"TestLoadImage: error",!1,e),r.onabort=ke(xi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ke(xi,n,r,"TestLoadImage: timeout",!1,e),we.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else yr(2);t.v=0,t.f&&t.f.ra(e),so(t),Ki(t)}function so(t){t.v=0,t.I=-1,t.f&&(0==Ti(t.b).length&&0==t.g.length||(t.b.c.length=0,Ve(t.g),t.g.length=0),t.f.qa())}function uo(t,e,n){var r=function(t){return t instanceof Jr?Wr(t):new Jr(t,void 0)}(n);if(""!=r.c)e&&Yr(r,e+"."+r.c),Qr(r,r.h);else{var i=we.location;r=function(t,e,n,r){var i=new Jr(null,void 0);return t&&Xr(i,t),e&&Yr(i,e),n&&Qr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ge(t.V,(function(t,e){ti(r,e,t)})),e=t.A,n=t.na,e&&n&&ti(r,e,n),ti(r,"VER",t.ha),Xi(t,r),r}function ao(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Di(t.Na)).F=t.C,e}function co(){}function ho(){if(Qe&&!(10<=Number(ln)))throw Error("Environmental error: no available transport.")}function fo(t,e){jn.call(this),this.a=new Hi(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Me(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Me(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new vo(this)}function lo(t){Sr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function po(){Ar.call(this),this.status=1}function vo(t){this.a=t}(ge=Di.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Ir(this.H):Ir(Tr),this.a.onreadystatechange=xe(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ri(this,t)}t=n||"";var i=new Gr(this.headers);r&&Hr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Li,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=we.FormData&&t instanceof we.FormData,!(0<=Pe(Pi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ji(this),0<this.o&&((this.D=function(t){return Qe&&hn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=xe(this.xa,this)):this.m=er(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ri(this,t)}},ge.xa=function(){void 0!==be&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Fn(this,"timeout"),this.abort(8))},ge.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Fn(this,"complete"),Fn(this,"abort"),Ui(this))},ge.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ui(this,!0)),Di.X.G.call(this)},ge.za=function(){this.j||(this.A||this.l||this.g?Mi(this):this.Ua())},ge.Ua=function(){Mi(this)},ge.W=function(){try{return 2<Fi(this)?this.a.status:-1}catch(t){return-1}},ge.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ge.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ki(e)}},ge.ua=function(){return this.h},ge.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ge=Hi.prototype).ha=8,ge.v=1,ge.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new kr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?$e(r=Be(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Yi(this,n,e),ti(i=Wr(this.B),"RID",t),ti(i,"CVER",22),this.A&&ti(i,"X-HTTP-Session-Id",this.A),Xi(this,i),this.i&&r&&qi(i,this.i,r),Ii(this.b,n),this.Ia&&ti(i,"TYPE","init"),this.da?(ti(i,"$req",e),ti(i,"SID","null"),n.U=!0,Pr(n,i,null)):Pr(n,i,e),this.v=2}}else 3==this.v&&(t?Wi(this,t):0==this.g.length||bi(this.b)||Wi(this))},ge.Aa=function(){if(this.j=null,eo(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=mr(xe(this.Ta,this),t)}},ge.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,yr(10),Bi(this),eo(this))},ge.Sa=function(){null!=this.m&&(this.m=null,Bi(this),Zi(this),yr(19))},ge.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),yr(2)):(this.c.info("Failed to ping google.com"),yr(1))},(ge=co.prototype).ta=function(){},ge.sa=function(){},ge.ra=function(){},ge.qa=function(){},ge.Ja=function(){},ho.prototype.a=function(t,e){return new fo(t,e)},Oe(fo,jn),fo.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;yr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=uo(t,null,t.fa),Ji(t)},fo.prototype.close=function(){Gi(this.a)},fo.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,$i(this.a,e)}else this.l?((e={}).__data__=zn(t),$i(this.a,e)):$i(this.a,t)},fo.prototype.G=function(){this.a.f=null,delete this.f,Gi(this.a),delete this.a,fo.X.G.call(this)},Oe(lo,Sr),Oe(po,Ar),Oe(vo,co),vo.prototype.ta=function(){Fn(this.a,"a")},vo.prototype.sa=function(t){Fn(this.a,new lo(t))},vo.prototype.ra=function(t){Fn(this.a,new po(t))},vo.prototype.qa=function(){Fn(this.a,"b")},ho.prototype.createWebChannel=ho.prototype.a,fo.prototype.send=fo.prototype.h,fo.prototype.open=fo.prototype.g,fo.prototype.close=fo.prototype.close,br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,wr.COMPLETE="complete",Er.EventType=Nr,Nr.OPEN="a",Nr.CLOSE="b",Nr.ERROR="c",Nr.MESSAGE="d",jn.prototype.listen=jn.prototype.va,Di.prototype.listenOnce=Di.prototype.wa,Di.prototype.getLastError=Di.prototype.Qa,Di.prototype.getLastErrorCode=Di.prototype.ua,Di.prototype.getStatus=Di.prototype.W,Di.prototype.getResponseJson=Di.prototype.Pa,Di.prototype.getResponseText=Di.prototype.$,Di.prototype.send=Di.prototype.ba;var yo=br,go=wr,mo=hr,bo=10,wo=11,_o=Er,Io=Di,Eo=new Zt("@firebase/firestore");function To(){return Eo.logLevel}function No(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Eo.logLevel<=Kt.DEBUG){var r=e.map(xo);Eo.debug.apply(Eo,At(["Firestore (8.2.4): "+t],r))}}function So(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Eo.logLevel<=Kt.ERROR){var r=e.map(xo);Eo.error.apply(Eo,At(["Firestore (8.2.4): "+t],r))}}function Ao(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Eo.logLevel<=Kt.WARN){var r=e.map(xo);Eo.warn.apply(Eo,At(["Firestore (8.2.4): "+t],r))}}function xo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ko(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.4) INTERNAL ASSERTION FAILED: "+t;throw So(e),new Error(e)}function Do(t,e){t||ko()}function Oo(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Co(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Po=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Co(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Lo(t,e){return t<e?-1:t>e?1:0}function Ro(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Vo(t){return t+"\0"}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Mo=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return Lo(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Mo.h=new Mo("");var Uo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return wt(e,t),e}(Error),Fo=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Mo.fromBase64String(e))}catch(e){throw new jo(Uo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Mo.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),qo=function(t){this._=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zo(){if("undefined"==typeof Uint8Array)throw new jo(Uo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ho(){if("undefined"==typeof atob)throw new jo(Uo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.fromBase64String=function(t){return Ho(),new e(Fo.fromBase64String(t))},e.fromUint8Array=function(t){return zo(),new e(Fo.fromUint8Array(t))},e.prototype.toBase64=function(){return Ho(),this._.toBase64()},e.prototype.toUint8Array=function(){return zo(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(qo),Bo=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},Ko=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),$o=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */$o.UNAUTHENTICATED=new $o(null),$o.P=new $o("google-credentials-uid"),$o.g=new $o("first-party-uid");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Jo=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},Wo=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t($o.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),Xo=function(){function t(t){var e=this;this.C=null,this.currentUser=$o.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(No("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Do("string"==typeof n.accessToken),new Jo(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return Do(null===t||"string"==typeof t),new $o(t)},t}(),Yo=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=$o.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Qo=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new Yo(this.k,this.M))},t.prototype.S=function(t){t($o.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),Zo=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();Zo.U=-1;var ts=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new jo(Uo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new jo(Uo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new jo(Uo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new jo(Uo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?Lo(this.nanoseconds,t.nanoseconds):Lo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),es=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new ts(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),ns=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ko(),void 0===n?n=t.length-e:n>t.length-e&&ko(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),rs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new jo(Uo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(ns),is=/^[_a-zA-Z][_a-zA-Z0-9]*$/,os=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return is.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new jo(Uo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new jo(Uo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new jo(Uo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new jo(Uo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(ns),ss=function(){function t(t){this.path=t}return t.ft=function(e){return new t(rs.ct(e))},t.dt=function(e){return new t(rs.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===rs.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return rs.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new rs(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function us(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function as(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hs=function(){function t(t){this.fields=t,t.sort(os.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return Ro(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),fs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ls(t){if(Do(!!t),"string"==typeof t){var e=0,n=fs.exec(t);if(Do(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ps(t.seconds),nanos:ps(t.nanos)}}function ps(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ds(t){return"string"==typeof t?Mo.fromBase64String(t):Mo.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ys(t){var e=t.mapValue.fields.__previous_value__;return vs(e)?ys(e):e}function gs(t){var e=ls(t.mapValue.fields.__local_write_time__.timestampValue);return new ts(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ms(t){return null==t}function bs(t){return 0===t&&1/t==-1/0}function ws(t){return"number"==typeof t&&Number.isInteger(t)&&!bs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vs(t)?4:10:ko()}function Is(t,e){var n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gs(t).isEqual(gs(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ls(t.timestampValue),r=ls(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ds(t.bytesValue).isEqual(ds(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ps(t.geoPointValue.latitude)===ps(e.geoPointValue.latitude)&&ps(t.geoPointValue.longitude)===ps(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ps(t.integerValue)===ps(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ps(t.doubleValue),r=ps(e.doubleValue);return n===r?bs(n)===bs(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ro(t.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(us(n)!==us(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Is(n[i],r[i])))return!1;return!0}(t,e);default:return ko()}}function Es(t,e){return void 0!==(t.values||[]).find((function(t){return Is(t,e)}))}function Ts(t,e){var n=_s(t),r=_s(e);if(n!==r)return Lo(n,r);switch(n){case 0:return 0;case 1:return Lo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ps(t.integerValue||t.doubleValue),r=ps(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ns(t.timestampValue,e.timestampValue);case 4:return Ns(gs(t),gs(e));case 5:return Lo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ds(t),r=ds(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Lo(n[i],r[i]);if(0!==o)return o}return Lo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Lo(ps(t.latitude),ps(e.latitude));return 0!==n?n:Lo(ps(t.longitude),ps(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ts(n[i],r[i]);if(o)return o}return Lo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Lo(r[s],o[s]);if(0!==u)return u;var a=Ts(n[r[s]],i[o[s]]);if(0!==a)return a}return Lo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ko()}}function Ns(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Lo(t,e);var n=ls(t),r=ls(e),i=Lo(n.seconds,r.seconds);return 0!==i?i:Lo(n.nanos,r.nanos)}function Ss(t){return As(t)}function As(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ls(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ds(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ss.dt(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=As(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+As(t.fields[o])}return e+"}"}(t.mapValue):ko();var e,n}function xs(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function ks(t){return!!t&&"integerValue"in t}function Ds(t){return!!t&&"arrayValue"in t}function Os(t){return!!t&&"nullValue"in t}function Cs(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ps(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ls=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ps(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return Is(this.proto,t.proto)},t}(),Rs=function(){function t(t){void 0===t&&(t=Ls.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===_s(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(os.at(),this.Rt);return null!=t?new Ls(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=Ps(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Vs(t){var e=[];return as(t.fields||{},(function(t,n){var r=new os([t]);if(Ps(n)){var i=Vs(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new hs(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Ms=function(t,e){this.key=t,this.version=e},Us=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return wt(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Ms),js=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return wt(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ms),Fs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ms),qs=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function zs(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new qs(t,e,n,r,i,o,s)}function Hs(t){var e=Oo(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+Ss(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),ms(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=nu(e.startAt)),e.endAt&&(n+="|ub:",n+=nu(e.endAt)),e.St=n}return e.St}function Gs(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!iu(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Is(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!su(t.startAt,e.startAt)&&su(t.endAt,e.endAt)}function Bs(t){return ss.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ks=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return wt(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new $s(t,n,r):"array-contains"===n?new Ys(t,r):"in"===n?new Qs(t,r):"not-in"===n?new Zs(t,r):"array-contains-any"===n?new tu(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new Js(t,n):new Ws(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(Ts(e,this.value)):null!==e&&_s(this.value)===_s(e)&&this.Ct(Ts(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ko()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),$s=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ss.dt(r.referenceValue),i}return wt(e,t),e.prototype.matches=function(t){var e=ss.J(t.key,this.key);return this.Ct(e)},e}(Ks),Js=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Xs("in",n),r}return wt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ks),Ws=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Xs("not-in",n),r}return wt(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ks);function Xs(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ss.dt(t.referenceValue)}))}var Ys=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return wt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ds(e)&&Es(e.arrayValue,this.value)},e}(Ks),Qs=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return wt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Es(this.value.arrayValue,e)},e}(Ks),Zs=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return wt(e,t),e.prototype.matches=function(t){if(Es(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Es(this.value.arrayValue,e)},e}(Ks),tu=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return wt(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ds(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Es(e.value.arrayValue,t)}))},e}(Ks),eu=function(t,e){this.position=t,this.before=e};function nu(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ss(t)})).join(",")}var ru=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function iu(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ou(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?ss.J(ss.dt(s.referenceValue),n.key):Ts(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function su(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Is(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uu=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Ft=null,this.Ot=null,this.startAt,this.endAt};function au(t,e,n,r,i,o,s,u){return new uu(t,e,n,r,i,o,s,u)}function cu(t){return new uu(t)}function hu(t){return!ms(t.limit)&&"F"===t.limitType}function fu(t){return!ms(t.limit)&&"L"===t.limitType}function lu(t){return t.Nt.length>0?t.Nt[0].field:null}function pu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function du(t){return null!==t.collectionGroup}function vu(t){var e=Oo(t);if(null===e.Ft){e.Ft=[];var n=pu(e),r=lu(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new ru(n)),e.Ft.push(new ru(os.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var u=s[o];e.Ft.push(u),u.field.ht()&&(i=!0)}if(!i){var a=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new ru(os.lt(),a))}}}return e.Ft}function yu(t){var e=Oo(t);if(!e.Ot)if("F"===e.limitType)e.Ot=zs(e.path,e.collectionGroup,vu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=vu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new ru(o.field,s))}var u=e.endAt?new eu(e.endAt.position,!e.endAt.before):null,a=e.startAt?new eu(e.startAt.position,!e.startAt.before):null;e.Ot=zs(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.Ot}function gu(t,e,n){return new uu(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mu(t,e){return Gs(yu(t),yu(e))&&t.limitType===e.limitType}function bu(t){return Hs(yu(t))+"|lt:"+t.limitType}function wu(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+Ss(e.value);var e})).join(", ")+"]"),ms(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+nu(t.startAt)),t.endAt&&(e+=", endAt: "+nu(t.endAt)),"Target("+e+")"}(yu(t))+"; limitType="+t.limitType+")"}function _u(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):ss.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ou(t.startAt,vu(t),e)||t.endAt&&ou(t.endAt,vu(t),e))}(t,e)}function Iu(t){return function(e,n){for(var r=!1,i=0,o=vu(t);i<o.length;i++){var s=o[i],u=Eu(s,e,n);if(0!==u)return u;r=r||s.field.ht()}return 0}}function Eu(t,e,n){var r=t.field.ht()?ss.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ts(r,i):ko()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ko()}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Tu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=es.min()),void 0===o&&(o=es.min()),void 0===s&&(s=Mo.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nu(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bs(e)?"-0":e}}function Su(t){return{integerValue:""+t}}function Au(t,e){return ws(e)?Su(e):Nu(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xu=function(){this.Ut=void 0};function ku(t,e,n){return t instanceof Cu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Pu?Lu(t,e):t instanceof Ru?Vu(t,e):function(t,e){var n=Ou(t,e),r=Uu(n)+Uu(t.Qt);return ks(n)&&ks(t.Qt)?Su(r):Nu(t.Kt,r)}(t,e)}function Du(t,e,n){return t instanceof Pu?Lu(t,e):t instanceof Ru?Vu(t,e):n}function Ou(t,e){return t instanceof Mu?ks(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e}(xu),Pu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return wt(e,t),e}(xu);function Lu(t,e){for(var n=ju(e),r=function(t){n.some((function(e){return Is(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ru=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return wt(e,t),e}(xu);function Vu(t,e){for(var n=ju(e),r=function(t){n=n.filter((function(e){return!Is(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Mu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return wt(e,t),e}(xu);function Uu(t){return ps(t.integerValue||t.doubleValue)}function ju(t){return Ds(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fu=function(t,e){this.field=t,this.transform=e},qu=function(t,e){this.version=t,this.transformResults=e},zu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Hu(t,e){return void 0!==t.updateTime?e instanceof Us&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Us}var Gu=function(){};function Bu(t,e,n){return t instanceof Xu?function(t,e,n){var r=t.value;if(n.transformResults){var i=Zu(t.fieldTransforms,e,n.transformResults);r=ea(t.fieldTransforms,r,i)}return new Us(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Yu?function(t,e,n){if(!Hu(t.Gt,e))return new Fs(t.key,n.version);var r=Qu(t,e,n.transformResults?Zu(t.fieldTransforms,e,n.transformResults):[]);return new Us(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new js(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ku(t,e,n,r){return t instanceof Xu?function(t,e,n,r){if(!Hu(t.Gt,e))return e;var i=t.value,o=ta(t.fieldTransforms,n,e);i=ea(t.fieldTransforms,i,o);var s=Wu(e);return new Us(t.key,s,i,{bt:!0})}(t,e,r):t instanceof Yu?function(t,e,n,r){if(!Hu(t.Gt,e))return e;var i=Wu(e),o=Qu(t,e,ta(t.fieldTransforms,n,e));return new Us(t.key,i,o,{bt:!0})}(t,e,r):function(t,e){return Hu(t.Gt,e)?new js(t.key,es.min()):e}(t,e)}function $u(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Us?e.field(o.field):void 0,u=Ou(o.transform,s||null);null!=u&&(n=null==n?(new Rs).set(o.field,u):n.set(o.field,u))}return n?n.yt():null}(t.fieldTransforms,e)}function Ju(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ro(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Pu&&e instanceof Pu||t instanceof Ru&&e instanceof Ru?Ro(t.elements,e.elements,Is):t instanceof Mu&&e instanceof Mu?Is(t.Qt,e.Qt):t instanceof Cu&&e instanceof Cu}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function Wu(t){return t instanceof Us?t.version:es.min()}var Xu=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return wt(e,t),e}(Gu),Yu=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return wt(e,t),e}(Gu);function Qu(t,e,n){var r;return r=function(t,e){var n=new Rs(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof Us?e.data():Ls.empty()),ea(t.fieldTransforms,r,n)}function Zu(t,e,n){var r=[];Do(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof Us&&(u=e.field(o.field)),r.push(Du(s,u,n[i]))}return r}function ta(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof Us&&(c=n.field(u.field)),i.push(ku(a,c,e))}return i}function ea(t,e,n){for(var r=new Rs(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}var na,ra,ia=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return wt(e,t),e}(Gu),oa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return wt(e,t),e}(Gu),sa=function(t){this.count=t};function ua(t){switch(t){case Uo.OK:return ko();case Uo.CANCELLED:case Uo.UNKNOWN:case Uo.DEADLINE_EXCEEDED:case Uo.RESOURCE_EXHAUSTED:case Uo.INTERNAL:case Uo.UNAVAILABLE:case Uo.UNAUTHENTICATED:return!1;case Uo.INVALID_ARGUMENT:case Uo.NOT_FOUND:case Uo.ALREADY_EXISTS:case Uo.PERMISSION_DENIED:case Uo.FAILED_PRECONDITION:case Uo.ABORTED:case Uo.OUT_OF_RANGE:case Uo.UNIMPLEMENTED:case Uo.DATA_LOSS:return!0;default:return ko()}}function aa(t){if(void 0===t)return So("GRPC error has no .code"),Uo.UNKNOWN;switch(t){case na.OK:return Uo.OK;case na.CANCELLED:return Uo.CANCELLED;case na.UNKNOWN:return Uo.UNKNOWN;case na.DEADLINE_EXCEEDED:return Uo.DEADLINE_EXCEEDED;case na.RESOURCE_EXHAUSTED:return Uo.RESOURCE_EXHAUSTED;case na.INTERNAL:return Uo.INTERNAL;case na.UNAVAILABLE:return Uo.UNAVAILABLE;case na.UNAUTHENTICATED:return Uo.UNAUTHENTICATED;case na.INVALID_ARGUMENT:return Uo.INVALID_ARGUMENT;case na.NOT_FOUND:return Uo.NOT_FOUND;case na.ALREADY_EXISTS:return Uo.ALREADY_EXISTS;case na.PERMISSION_DENIED:return Uo.PERMISSION_DENIED;case na.FAILED_PRECONDITION:return Uo.FAILED_PRECONDITION;case na.ABORTED:return Uo.ABORTED;case na.OUT_OF_RANGE:return Uo.OUT_OF_RANGE;case na.UNIMPLEMENTED:return Uo.UNIMPLEMENTED;case na.DATA_LOSS:return Uo.DATA_LOSS;default:return ko()}}(ra=na||(na={}))[ra.OK=0]="OK",ra[ra.CANCELLED=1]="CANCELLED",ra[ra.UNKNOWN=2]="UNKNOWN",ra[ra.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ra[ra.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ra[ra.NOT_FOUND=5]="NOT_FOUND",ra[ra.ALREADY_EXISTS=6]="ALREADY_EXISTS",ra[ra.PERMISSION_DENIED=7]="PERMISSION_DENIED",ra[ra.UNAUTHENTICATED=16]="UNAUTHENTICATED",ra[ra.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ra[ra.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ra[ra.ABORTED=10]="ABORTED",ra[ra.OUT_OF_RANGE=11]="OUT_OF_RANGE",ra[ra.UNIMPLEMENTED=12]="UNIMPLEMENTED",ra[ra.INTERNAL=13]="INTERNAL",ra[ra.UNAVAILABLE=14]="UNAVAILABLE",ra[ra.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ca=function(){function t(t,e){this.J=t,this.root=e||fa.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,fa.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,fa.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new ha(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new ha(this.root,t,this.J,!1)},t.prototype.se=function(){return new ha(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new ha(this.root,t,this.J,!0)},t}(),ha=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),fa=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw ko();if(this.right._e())throw ko();var t=this.left.me();if(t!==this.right.me())throw ko();return t+(this._e()?0:1)},t}();fa.EMPTY=null,fa.RED=!0,fa.Jt=!1,fa.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ko()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ko()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ko()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ko()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ko()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new fa(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var la=function(){function t(t){this.J=t,this.data=new ca(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new pa(this.data.ee())},t.prototype.ne=function(t){return new pa(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),pa=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),da=new ca(ss.J);function va(){return da}function ya(){return va()}var ga=new ca(ss.J);function ma(){return ga}var ba=new ca(ss.J);var wa=new la(ss.J);function _a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=wa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ia=new la(Lo);function Ea(){return Ia}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ta=function(){function t(t){this.J=t?function(e,n){return t(e,n)||ss.J(e.key,n.key)}:function(t,e){return ss.J(t.key,e.key)},this.Ve=ma(),this.pe=new ca(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),Na=function(){function t(){this.ve=new ca(ss.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):ko():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),Sa=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=u}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ta.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&mu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Aa=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,xa.Be(e,n)),new t(es.min(),r,Ea(),va(),_a())},t}(),xa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(Mo.h,n,_a(),_a(),_a())},t}(),ka=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},Da=function(t,e){this.targetId=t,this.Ge=e},Oa=function(t,e,n,r){void 0===n&&(n=Mo.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ca=function(){function t(){this.ze=0,this.He=Ra(),this.Je=Mo.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=_a(),e=_a(),n=_a();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ko()}})),new xa(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=Ra()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),Pa=function(){function t(t){this.hn=t,this.ln=new Map,this._n=va(),this.fn=La(),this.dn=new la(Lo)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof Us?this.En(r,t.je):t.je instanceof js&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:ko()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Bs(i))if(0===n){var o=new ss(i.path);this.Tn(e,o,new js(o,es.min()))}else Do(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&Bs(o.target)){var s=new ss(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new js(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=_a();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Aa(t,n,this.dn,this._n,r);return this._n=va(),this.fn=La(),this.dn=new la(Lo),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new Ca,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new la(Lo),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||No("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new Ca),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function La(){return new ca(ss.J)}function Ra(){return new ca(ss.J)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Va={asc:"ASCENDING",desc:"DESCENDING"},Ma={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ua=function(t,e){this.T=t,this.qt=e};function ja(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fa(t,e){return t.qt?e.toBase64():e.toUint8Array()}function qa(t,e){return ja(t,e.G())}function za(t){return Do(!!t),es.W(function(t){var e=ls(t);return new ts(e.seconds,e.nanos)}(t))}function Ha(t,e){return function(t){return new rs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function Ga(t){var e=rs.ct(t);return Do(pc(e)),e}function Ba(t,e){return Ha(t.T,e.path)}function Ka(t,e){var n=Ga(e);if(n.get(1)!==t.T.projectId)throw new jo(Uo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new jo(Uo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new ss(Xa(n))}function $a(t,e){return Ha(t.T,e)}function Ja(t){var e=Ga(t);return 4===e.length?rs.at():Xa(e)}function Wa(t){return new rs(["projects",t.T.projectId,"databases",t.T.database]).ot()}function Xa(t){return Do(t.length>4&&"documents"===t.get(4)),t.X(5)}function Ya(t,e,n){return{name:Ba(t,e),fields:n.proto.mapValue.fields}}function Qa(t,e){var n;if(e instanceof Xu)n={update:Ya(t,e.key,e.value)};else if(e instanceof ia)n={delete:Ba(t,e.key)};else if(e instanceof Yu)n={update:Ya(t,e.key,e.data),updateMask:lc(e.zt)};else{if(!(e instanceof oa))return ko();n={verify:Ba(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Cu)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pu)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof Ru)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof Mu)return{fieldPath:e.field.ot(),increment:n.Qt};throw ko()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:qa(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ko()}(t,e.Gt)),n}function Za(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?zu.updateTime(za(t.updateTime)):void 0!==t.exists?zu.exists(t.exists):zu.Wt()}(e.currentDocument):zu.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Do("REQUEST_TIME"===e.setToServerValue),n=new Cu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Pu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Ru(i)}else"increment"in e?n=new Mu(t,e.increment):ko();var o=os._t(e.fieldPath);return new Fu(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ka(t,e.update.name),o=new Ls({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new hs(e.map((function(t){return os._t(t)})))}(e.updateMask);return new Yu(i,o,s,n,r)}return new Xu(i,o,n,r)}if(e.delete){var u=Ka(t,e.delete);return new ia(u,n)}if(e.verify){var a=Ka(t,e.verify);return new oa(a,n)}return ko()}function tc(t,e){return{documents:[$a(t,e.path)]}}function ec(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=$a(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$a(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Cs(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NAN"}};if(Os(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Cs(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NOT_NAN"}};if(Os(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ac(t.field),op:uc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:ac(t.field),direction:sc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||ms(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=ic(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ic(e.endAt)),n}function nc(t){var e=Ja(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Do(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=rc(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new ru(cc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return ms(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=oc(n.startAt));var h=null;return n.endAt&&(h=oc(n.endAt)),au(e,i,u,s,a,"F",c,h)}function rc(t){return t?void 0!==t.unaryFilter?[fc(t)]:void 0!==t.fieldFilter?[hc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return rc(t)})).reduce((function(t,e){return t.concat(e)})):ko():[]}function ic(t){return{before:t.before,values:t.position}}function oc(t){var e=!!t.before,n=t.values||[];return new eu(n,e)}function sc(t){return Va[t]}function uc(t){return Ma[t]}function ac(t){return{fieldPath:t.ot()}}function cc(t){return os._t(t.fieldPath)}function hc(t){return Ks.create(cc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ko()}}(t.fieldFilter.op),t.fieldFilter.value)}function fc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=cc(t.unaryFilter.field);return Ks.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=cc(t.unaryFilter.field);return Ks.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=cc(t.unaryFilter.field);return Ks.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=cc(t.unaryFilter.field);return Ks.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ko()}}function lc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function pc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var dc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},vc=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&ko(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),yc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new dc,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new bc(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=Tc(e.target.error);n.qn.reject(new bc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new bc(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(No("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new _c(e)},t}(),gc=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(Dt())&&So("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return No("SimpleDb","Removing database:",t),Ic(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=Dt(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return It(this,void 0,void 0,(function(){var e,n=this;return Et(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(No("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new bc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new jo(Uo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new bc(t,n))},i.onupgradeneeded=function(t){No("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Qn.Yn(e,i.transaction,t.oldVersion,n.version).next((function(){No("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,s,u,a;return Et(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return Et(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Jn(t)];case 2:return u.db=f.sent(),e=yc.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),vc.reject(t)})).Mn(),a={},s.catch((function(){})),[4,e.Un];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,No("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),mc=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return Ic(this.ts.delete())},t}(),bc=function(t){function e(e,n){var r=this;return(r=t.call(this,Uo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return wt(e,t),e}(jo);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wc(t){return"IndexedDbTransactionError"===t.name}var _c=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(No("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(No("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ic(n)},t.prototype.add=function(t){return No("SimpleDb","ADD",this.store.name,t,t),Ic(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ic(this.store.get(t)).next((function(n){return void 0===n&&(n=null),No("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return No("SimpleDb","DELETE",this.store.name,t),Ic(this.store.delete(t))},t.prototype.count=function(){return No("SimpleDb","COUNT",this.store.name),Ic(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){No("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new vc((function(n,r){e.onerror=function(t){var e=Tc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new vc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new mc(i),s=e(i.primaryKey,i.value,o);if(s instanceof vc){var u=s.catch((function(t){return o.done(),vc.reject(t)}));n.push(u)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return vc.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ic(t){return new vc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Tc(t.target.error);n(e)}}))}var Ec=!1;function Tc(t){var e=gc.Kn(Dt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new jo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ec||(Ec=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Nc=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new dc,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new jo(Uo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function Sc(t,e){if(So("AsyncQueue",e+": "+t),wc(t))return new jo(Uo.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ac="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xc=function(){function t(){this.gs=[]}return t.prototype.Vs=function(t){this.gs.push(t)},t.prototype.ps=function(){this.gs.forEach((function(t){return t()}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Oc(e)),e=Dc(t.get(n),e);return Oc(e)}function Dc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Oc(t){return t+""}function Cc(t){var e=t.length;if(Do(e>=2),2===e)return Do(""===t.charAt(0)&&""===t.charAt(1)),rs.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ko(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ko()}o=s+2}return new rs(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Pc=function(t,e){this.seconds=t,this.nanoseconds=e},Lc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Lc.store="owner",Lc.key="owner";var Rc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Rc.store="mutationQueues",Rc.keyPath="userId";var Vc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Vc.store="mutations",Vc.keyPath="batchId",Vc.userMutationsIndex="userMutationsIndex",Vc.userMutationsKeyPath=["userId","batchId"];var Mc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,kc(e)]},t.key=function(t,e,n){return[t,kc(e),n]},t}();Mc.store="documentMutations",Mc.PLACEHOLDER=new Mc;var Uc=function(t,e){this.path=t,this.readTime=e},jc=function(t,e){this.path=t,this.version=e},Fc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Fc.store="remoteDocuments",Fc.readTimeIndex="readTimeIndex",Fc.readTimeIndexPath="readTime",Fc.collectionReadTimeIndex="collectionReadTimeIndex",Fc.collectionReadTimeIndexPath=["parentPath","readTime"];var qc=function(t){this.byteSize=t};qc.store="remoteDocumentGlobal",qc.key="remoteDocumentGlobalKey";var zc=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};zc.store="targets",zc.keyPath="targetId",zc.queryTargetsIndexName="queryTargetsIndex",zc.queryTargetsKeyPath=["canonicalId","targetId"];var Hc=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Hc.store="targetDocuments",Hc.keyPath=["targetId","path"],Hc.documentTargetsIndex="documentTargetsIndex",Hc.documentTargetsKeyPath=["path","targetId"];var Gc=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Gc.key="targetGlobalKey",Gc.store="targetGlobal";var Bc=function(t,e){this.collectionId=t,this.parent=e};Bc.store="collectionParents",Bc.keyPath=["collectionId","parent"];var Kc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Kc.store="clientMetadata",Kc.keyPath="clientId";var $c=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};$c.store="bundles",$c.keyPath="bundleId";var Jc=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Jc.store="namedQueries",Jc.keyPath="name";var Wc=At(At(At(At([Rc.store,Vc.store,Mc.store,Fc.store,zc.store,Lc.store,Gc.store,Hc.store],[Kc.store]),[qc.store]),[Bc.store]),[$c.store,Jc.store]),Xc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bs=e,r.vs=n,r}return wt(e,t),e}(xc);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Yc(t,e){var n=Oo(t);return gc.Hn(n.bs,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qc=function(){function t(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ds=function(t,e,n){for(var r=n.Cs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Bu(o,e,r[i]))}return e},t.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Ku(s,e,0,this.Ss));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Ku(s,e,0,this.Ss))}return e},t.prototype.Ns=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.xs(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),_a())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ro(this.mutations,t.mutations,(function(t,e){return Ju(t,e)}))&&Ro(this.baseMutations,t.baseMutations,(function(t,e){return Ju(t,e)}))},t}(),Zc=function(){function t(t,e,n,r){this.batch=t,this.Fs=e,this.Cs=n,this.Os=r}return t.from=function(e,n,r){Do(e.mutations.length===r.length);for(var i=ba,o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),th=function(t){this.ks=t};function eh(t,e){if(e.document)return function(t,e,n){var r=Ka(t,e.name),i=za(e.updateTime),o=new Ls({mapValue:{fields:e.fields}});return new Us(r,i,o,{hasCommittedMutations:!!n})}(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ss.Tt(e.noDocument.path),r=sh(e.noDocument.readTime);return new js(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ss.Tt(e.unknownDocument.path);return r=sh(e.unknownDocument.version),new Fs(i,r)}return ko()}function nh(t,e,n){var r=rh(n),i=e.key.path.Z().rt();if(e instanceof Us){var o=function(t,e){return{name:Ba(t,e.key),fields:e.vt().mapValue.fields,updateTime:ja(t,e.version.G())}}(t.ks,e),s=e.hasCommittedMutations;return new Fc(null,null,o,s,r,i)}if(e instanceof js){var u=e.key.path.rt(),a=oh(e.version);return s=e.hasCommittedMutations,new Fc(null,new Uc(u,a),null,s,r,i)}if(e instanceof Fs){var c=e.key.path.rt(),h=oh(e.version);return new Fc(new jc(c,h),null,null,!0,r,i)}return ko()}function rh(t){var e=t.G();return[e.seconds,e.nanoseconds]}function ih(t){var e=new ts(t[0],t[1]);return es.W(e)}function oh(t){var e=t.G();return new Pc(e.seconds,e.nanoseconds)}function sh(t){var e=new ts(t.seconds,t.nanoseconds);return es.W(e)}function uh(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Za(t.ks,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return Za(t.ks,e)})),s=ts.fromMillis(e.localWriteTimeMs);return new Qc(e.batchId,s,n,o)}function ah(t){var e,n,r=sh(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?sh(t.lastLimboFreeSnapshotVersion):es.min();return void 0!==t.query.documents?(Do(1===(n=t.query).documents.length),e=yu(cu(Ja(n.documents[0])))):e=function(t){return yu(nc(t))}(t.query),new Tu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Mo.fromBase64String(t.resumeToken))}function ch(t,e){var n,r=oh(e.Mt),i=oh(e.lastLimboFreeSnapshotVersion);n=Bs(e.target)?tc(t.ks,e.target):ec(t.ks,e.target);var o=e.resumeToken.toBase64();return new zc(e.targetId,Hs(e.target),r,o,e.sequenceNumber,i,n)}function hh(t){var e=nc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?gu(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fh=function(){function t(){}return t.prototype.Ms=function(t,e){return lh(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:sh(e.createTime),version:e.version};var e}))},t.prototype.Ls=function(t,e){return lh(t).put({bundleId:(n=e).id,createTime:oh(za(n.createTime)),version:n.version});var n},t.prototype.$s=function(t,e){return ph(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:hh(e.bundledQuery),readTime:sh(e.readTime)};var e}))},t.prototype.Bs=function(t,e){return ph(t).put(function(t){return{name:t.name,readTime:oh(za(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function lh(t){return Yc(t,$c.store)}function ph(t){return Yc(t,Jc.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var dh=function(){function t(){this.qs=new vh}return t.prototype.Us=function(t,e){return this.qs.add(e),vc.resolve()},t.prototype.Qs=function(t,e){return vc.resolve(this.qs.getEntries(e))},t}(),vh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new la(rs.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new la(rs.J)).rt()},t}(),yh=function(){function t(){this.Ks=new vh}return t.prototype.Us=function(t,e){var n=this;if(!this.Ks.has(e)){var r=e.et(),i=e.Z();t.Vs((function(){n.Ks.add(e)}));var o={collectionId:r,parent:kc(i)};return gh(t).put(o)}return vc.resolve()},t.prototype.Qs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Vo(e),""],!1,!0);return gh(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Cc(o.parent))}return n}))},t}();function gh(t){return Yc(t,Bc.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var mh={Ws:!1,js:0,Gs:0,zs:0},bh=function(){function t(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}return t.Xs=function(e){return new t(e,t.Zs,t.ti)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wh(t){return It(this,void 0,void 0,(function(){return Et(this,(function(e){if(t.code!==Uo.FAILED_PRECONDITION||t.message!==Ac)throw t;return No("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */bh.Zs=10,bh.ti=1e3,bh.ei=new bh(41943040,bh.Zs,bh.ti),bh.ni=new bh(-1,0,0);var _h=function(){function t(t,e){this.si=t,this.ii=e,this.ri={}}return t.prototype.get=function(t){var e=this.si(t),n=this.ri[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.ii(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){as(this.ri,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.nt=function(){return cs(this.ri)},t}(),Ih=function(){function t(){this.oi=new _h((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ci=!1}return t.prototype.ai=function(t){var e=this.oi.get(t);return e?e.readTime:es.min()},t.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},t.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},t.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?vc.resolve(n.li):this.di(t,e)},t.prototype.getEntries=function(t,e){return this.wi(t,e)},t.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},t.prototype.hi=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Eh(t,e,n){var r=t.store(Vc.store),i=t.store(Mc.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.ls({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){Do(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Mc.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return vc.$n(o).next((function(){return c}))}function Th(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ko();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Nh=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}return t.Ai=function(e,n,r,i){return Do(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Ri=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ah(t).ls({index:Vc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Pi=function(t,e,n,r){var i=this,o=xh(t),s=Ah(t);return s.add({}).next((function(u){Do("number"==typeof u);for(var a=new Qc(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Qa(t.ks,e)})),i=n.mutations.map((function(e){return Qa(t.ks,e)}));return new Vc(e,n.batchId,n.Ss.toMillis(),r,i)}(i.Kt,i.userId,a),h=[],f=new la((function(t,e){return Lo(t.ot(),e.ot())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Mc.key(i.userId,d.key.path,u);f=f.add(d.key.path.Z()),h.push(s.put(c)),h.push(o.put(v,Mc.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ti.Us(t,e))})),t.Vs((function(){i.mi[u]=a.keys()})),vc.$n(h).next((function(){return a}))}))},t.prototype.yi=function(t,e){var n=this;return Ah(t).get(e).next((function(t){return t?(Do(t.userId===n.userId),uh(n.Kt,t)):null}))},t.prototype.gi=function(t,e){var n=this;return this.mi[e]?vc.resolve(this.mi[e]):this.yi(t,e).next((function(t){if(t){var r=t.keys();return n.mi[e]=r,r}return null}))},t.prototype.Vi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ah(t).ls({index:Vc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Do(e.batchId>=r),o=uh(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ah(t).ls({index:Vc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ah(t).os(Vc.userMutationsIndex,n).next((function(t){return t.map((function(t){return uh(e.Kt,t)}))}))},t.prototype.vi=function(t,e){var n=this,r=Mc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return xh(t).ls({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=Cc(a);if(u===n.userId&&e.path.isEqual(h))return Ah(t).get(c).next((function(t){if(!t)throw ko();Do(t.userId===n.userId),o.push(uh(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Si=function(t,e){var n=this,r=new la(Lo),i=[];return e.forEach((function(e){var o=Mc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=xh(t).ls({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=Cc(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),vc.$n(i).next((function(){return n.Di(t,r)}))},t.prototype.Ci=function(t,e){var n=this,r=e.path,i=r.length+1,o=Mc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new la(Lo);return xh(t).ls({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=Cc(a);s===n.userId&&r.st(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Di(t,u)}))},t.prototype.Di=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ah(t).get(e).next((function(t){if(null===t)throw ko();Do(t.userId===n.userId),r.push(uh(n.Kt,t))})))})),vc.$n(i).next((function(){return r}))},t.prototype.xi=function(t,e){var n=this;return Eh(t.bs,this.userId,e).next((function(r){return t.Vs((function(){n.Ni(e.batchId)})),vc.forEach(r,(function(e){return n.Ii.Fi(t,e)}))}))},t.prototype.Ni=function(t){delete this.mi[t]},t.prototype.Oi=function(t){var e=this;return this.Ri(t).next((function(n){if(!n)return vc.resolve();var r=IDBKeyRange.lowerBound(Mc.prefixForUser(e.userId)),i=[];return xh(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Cc(t[1]);i.push(o)}else r.done()})).next((function(){Do(0===i.length)}))}))},t.prototype.ki=function(t,e){return Sh(t,this.userId,e)},t.prototype.Mi=function(t){var e=this;return kh(t).get(this.userId).next((function(t){return t||new Rc(e.userId,-1,"")}))},t}();function Sh(t,e,n){var r=Mc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return xh(t).ls({range:o,hs:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Ah(t){return Yc(t,Vc.store)}function xh(t){return Yc(t,Mc.store)}function kh(t){return Yc(t,Rc.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dh=function(){function t(t){this.Li=t}return t.prototype.next=function(){return this.Li+=2,this.Li},t.$i=function(){return new t(0)},t.Bi=function(){return new t(-1)},t}(),Oh=function(){function t(t,e){this.Ii=t,this.Kt=e}return t.prototype.qi=function(t){var e=this;return this.Ui(t).next((function(n){var r=new Dh(n.highestTargetId);return n.highestTargetId=r.next(),e.Qi(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ki=function(t){return this.Ui(t).next((function(t){return es.W(new ts(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Wi=function(t){return this.Ui(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.ji=function(t,e,n){var r=this;return this.Ui(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Qi(t,i)}))},t.prototype.Gi=function(t,e){var n=this;return this.zi(t,e).next((function(){return n.Ui(t).next((function(r){return r.targetCount+=1,n.Hi(e,r),n.Qi(t,r)}))}))},t.prototype.Ji=function(t,e){return this.zi(t,e)},t.prototype.Yi=function(t,e){var n=this;return this.Xi(t,e.targetId).next((function(){return Ch(t).delete(e.targetId)})).next((function(){return n.Ui(t)})).next((function(e){return Do(e.targetCount>0),e.targetCount-=1,n.Qi(t,e)}))},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return Ch(t).ls((function(s,u){var a=ah(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Yi(t,a)))})).next((function(){return vc.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return Ch(t).ls((function(t,n){var r=ah(n);e(r)}))},t.prototype.Ui=function(t){return Ph(t).get(Gc.key).next((function(t){return Do(null!==t),t}))},t.prototype.Qi=function(t,e){return Ph(t).put(Gc.key,e)},t.prototype.zi=function(t,e){return Ch(t).put(ch(this.Kt,e))},t.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tr=function(t){return this.Ui(t).next((function(t){return t.targetCount}))},t.prototype.er=function(t,e){var n=Hs(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ch(t).ls({range:r,index:zc.queryTargetsIndexName},(function(t,n,r){var o=ah(n);Gs(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nr=function(t,e,n){var r=this,i=[],o=Lh(t);return e.forEach((function(e){var s=kc(e.path);i.push(o.put(new Hc(n,s))),i.push(r.Ii.sr(t,n,e))})),vc.$n(i)},t.prototype.ir=function(t,e,n){var r=this,i=Lh(t);return vc.forEach(e,(function(e){var o=kc(e.path);return vc.$n([i.delete([n,o]),r.Ii.rr(t,n,e)])}))},t.prototype.Xi=function(t,e){var n=Lh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.cr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Lh(t),i=_a();return r.ls({range:n,hs:!0},(function(t,e,n){var r=Cc(t[1]),o=new ss(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ki=function(t,e){var n=kc(e.path),r=IDBKeyRange.bound([n],[Vo(n)],!1,!0),i=0;return Lh(t).ls({index:Hc.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return Ch(t).get(e).next((function(t){return t?ah(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ch(t){return Yc(t,zc.store)}function Ph(t){return Yc(t,Gc.store)}function Lh(t){return Yc(t,Hc.store)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rh(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Lo(n,i);return 0===s?Lo(r,o):s}var Vh=function(){function t(t){this.ar=t,this.buffer=new la(Rh),this.ur=0}return t.prototype.hr=function(){return++this.ur},t.prototype.lr=function(t){var e=[t,this.hr()];if(this.buffer.size<this.ar)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Rh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Mh=function(){function t(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}return t.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},t.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(t.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),t.prototype.Er=function(t){var e=this,n=this.dr?3e5:6e4;No("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",n,(function(){return It(e,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:this.wr=null,this.dr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mr(this._r)];case 2:return n.sent(),[3,7];case 3:return wc(e=n.sent())?(No("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,wh(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Er(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Uh=function(){function t(t,e){this.Ar=t,this.params=e}return t.prototype.Rr=function(t,e){return this.Ar.Pr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yr=function(t,e){var n=this;if(0===e)return vc.resolve(Zo.U);var r=new Vh(e);return this.Ar.mn(t,(function(t){return r.lr(t.sequenceNumber)})).next((function(){return n.Ar.gr(t,(function(t){return r.lr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},t.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},t.prototype.pr=function(t,e){var n=this;return-1===this.params.Hs?(No("LruGarbageCollector","Garbage collection skipped; disabled"),vc.resolve(mh)):this.br(t).next((function(r){return r<n.params.Hs?(No("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Hs),mh):n.vr(t,e)}))},t.prototype.br=function(t){return this.Ar.br(t)},t.prototype.vr=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.Rr(t,this.params.Js).next((function(e){return e>c.params.Ys?(No("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Ys+" from "+e),r=c.params.Ys):r=e,o=Date.now(),c.yr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Zi(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.Vr(t,n)})).next((function(t){return a=Date.now(),To()<=Kt.DEBUG&&No("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),vc.resolve({Ws:!0,js:r,Gs:i,zs:t})}))},t}(),jh=function(){function t(t,e){this.db=t,this._r=function(t,e){return new Uh(t,e)}(this,e)}return t.prototype.Pr=function(t){var e=this.Sr(t);return this.db.Dr().tr(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Sr=function(t){var e=0;return this.gr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},t.prototype.gr=function(t,e){return this.Cr(t,(function(t,n){return e(n)}))},t.prototype.sr=function(t,e,n){return Fh(t,n)},t.prototype.rr=function(t,e,n){return Fh(t,n)},t.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},t.prototype.Fi=function(t,e){return Fh(t,e)},t.prototype.Nr=function(t,e){return function(t,e){var n=!1;return kh(t)._s((function(r){return Sh(t,r,e).next((function(t){return t&&(n=!0),vc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Vr=function(t,e){var n=this,r=this.db.Or().Fr(),i=[],o=0;return this.Cr(t,(function(s,u){if(u<=e){var a=n.Nr(t,s).next((function(e){if(!e)return o++,r.fi(t,s).next((function(){return r._i(s),Lh(t).delete([0,kc(s.path)])}))}));i.push(a)}})).next((function(){return vc.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.vs);return this.db.Dr().Ji(t,n)},t.prototype.kr=function(t,e){return Fh(t,e)},t.prototype.Cr=function(t,e){var n,r=Lh(t),i=Zo.U;return r.ls({index:Hc.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==Zo.U&&e(new ss(Cc(n)),i),i=u,n=s):i=Zo.U})).next((function(){i!==Zo.U&&e(new ss(Cc(n)),i)}))},t.prototype.br=function(t){return this.db.Or().Mr(t)},t}();function Fh(t,e){return Lh(t).put(function(t,e){return new Hc(0,kc(t.path),e)}(e,t.vs))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qh=function(){function t(t,e){this.Kt=t,this.Ti=e}return t.prototype.ui=function(t,e,n){return Gh(t).put(Bh(e),n)},t.prototype._i=function(t,e){var n=Gh(t),r=Bh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Lr(t,r)}))},t.prototype.fi=function(t,e){var n=this;return Gh(t).get(Bh(e)).next((function(t){return n.$r(t)}))},t.prototype.Br=function(t,e){var n=this;return Gh(t).get(Bh(e)).next((function(t){var e=n.$r(t);return e?{li:e,size:Th(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ya();return this.qr(t,e,(function(t,e){var i=n.$r(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Ur=function(t,e){var n=this,r=ya(),i=new ca(ss.J);return this.qr(t,e,(function(t,e){var o=n.$r(e);o?(r=r.Ht(t,o),i=i.Ht(t,Th(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Qr:r,Kr:i}}))},t.prototype.qr=function(t,e,n){if(e.nt())return vc.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return Gh(t).ls({range:r},(function(t,e,r){for(var s=ss.Tt(t);o&&ss.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.Wr=function(t,e,n){var r=this,i=ma(),o=e.path.length+1,s={};if(n.isEqual(es.min())){var u=e.path.rt();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.rt(),c=rh(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Fc.collectionReadTimeIndex}return Gh(t).ls(s,(function(t,n,s){if(t.length===o){var u=eh(r.Kt,n);e.path.st(u.key.path)?u instanceof Us&&_u(e,u)&&(i=i.Ht(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.Fr=function(t){return new zh(this,!!t&&t.jr)},t.prototype.Mr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Hh(t).get(qc.key).next((function(t){return Do(!!t),t}))},t.prototype.Lr=function(t,e){return Hh(t).put(qc.key,e)},t.prototype.$r=function(t){if(t){var e=eh(this.Kt,t);return e instanceof js&&e.version.isEqual(es.min())?null:e}return null},t}(),zh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Gr=e,r.jr=n,r.zr=new _h((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return wt(e,t),e.prototype.Ei=function(t){var e=this,n=[],r=0,i=new la((function(t,e){return Lo(t.ot(),e.ot())}));return this.oi.forEach((function(o,s){var u=e.zr.get(o);if(s.li){var a=nh(e.Gr.Kt,s.li,e.ai(o));i=i.add(o.path.Z());var c=Th(a);r+=c-u,n.push(e.Gr.ui(t,o,a))}else if(r-=u,e.jr){var h=nh(e.Gr.Kt,new js(o,es.min()),e.ai(o));n.push(e.Gr.ui(t,o,h))}else n.push(e.Gr._i(t,o))})),i.forEach((function(r){n.push(e.Gr.Ti.Us(t,r))})),n.push(this.Gr.updateMetadata(t,r)),vc.$n(n)},e.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next((function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)}))},e.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next((function(t){var e=t.Qr;return t.Kr.forEach((function(t,e){n.zr.set(t,e)})),e}))},e}(Ih);function Hh(t){return Yc(t,qc.store)}function Gh(t){return Yc(t,Fc.store)}function Bh(t){return t.path.rt()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Kh=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;Do(n<r&&n>=0&&r<=11);var o=new yc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Lc.store)}(t),function(t){t.createObjectStore(Rc.store,{keyPath:Rc.keyPath}),t.createObjectStore(Vc.store,{keyPath:Vc.keyPath,autoIncrement:!0}).createIndex(Vc.userMutationsIndex,Vc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Mc.store)}(t),$h(t),function(t){t.createObjectStore(Fc.store)}(t));var s=vc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Hc.store),t.deleteObjectStore(zc.store),t.deleteObjectStore(Gc.store)}(t),$h(t)),s=s.next((function(){return function(t){var e=t.store(Gc.store),n=new Gc(0,0,es.min().G(),0);return e.put(Gc.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Vc.store).os().next((function(n){t.deleteObjectStore(Vc.store),t.createObjectStore(Vc.store,{keyPath:Vc.keyPath,autoIncrement:!0}).createIndex(Vc.userMutationsIndex,Vc.userMutationsKeyPath,{unique:!0});var r=e.store(Vc.store),i=n.map((function(t){return r.put(t)}));return vc.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Kc.store,{keyPath:Kc.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Hr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(qc.store)}(t),i.Jr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Yr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Xr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Fc.store);e.createIndex(Fc.readTimeIndex,Fc.readTimeIndexPath,{unique:!1}),e.createIndex(Fc.collectionReadTimeIndex,Fc.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Zr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore($c.store,{keyPath:$c.keyPath})}(t),function(t){t.createObjectStore(Jc.store,{keyPath:Jc.keyPath})}(t)}))),s},t.prototype.Jr=function(t){var e=0;return t.store(Fc.store).ls((function(t,n){e+=Th(n)})).next((function(){var n=new qc(e);return t.store(qc.store).put(qc.key,n)}))},t.prototype.Hr=function(t){var e=this,n=t.store(Rc.store),r=t.store(Vc.store);return n.os().next((function(n){return vc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(Vc.userMutationsIndex,i).next((function(r){return vc.forEach(r,(function(r){Do(r.userId===n.userId);var i=uh(e.Kt,r);return Eh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Yr=function(t){var e=t.store(Hc.store),n=t.store(Fc.store);return t.store(Gc.store).get(Gc.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new rs(n),s=function(t){return[0,kc(t)]}(o);r.push(e.get(s).next((function(n){return n?vc.resolve():function(n){return e.put(new Hc(0,kc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return vc.$n(r)}))}))},t.prototype.Xr=function(t,e){t.createObjectStore(Bc.store,{keyPath:Bc.keyPath});var n=e.store(Bc.store),r=new vh,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:kc(i)})}};return e.store(Fc.store).ls({hs:!0},(function(t,e){var n=new rs(t);return i(n.Z())})).next((function(){return e.store(Mc.store).ls({hs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Cc(n));return i(r.Z())}))}))},t.prototype.Zr=function(t){var e=this,n=t.store(zc.store);return n.ls((function(t,r){var i=ah(r),o=ch(e.Kt,i);return n.put(o)}))},t}();function $h(t){t.createObjectStore(Hc.store,{keyPath:Hc.keyPath}).createIndex(Hc.documentTargetsIndex,Hc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(zc.store,{keyPath:zc.keyPath}).createIndex(zc.queryTargetsIndexName,zc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Gc.store)}var Jh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Wh=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.eo=o,this.window=s,this.document=u,this.no=c,this.so=h,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!t.Wn())throw new jo(Uo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new jh(this,i),this.lo=n+"main",this.Kt=new th(a),this._o=new gc(this.lo,11,new Kh(this.Kt)),this.fo=new Oh(this.Ii,this.Kt),this.Ti=new yh,this.wo=function(t,e){return new qh(t,e)}(this.Kt,this.Ti),this.Eo=new fh,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===h&&So("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Io().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new jo(Uo.FAILED_PRECONDITION,Jh);return t.mo(),t.Ao(),t.Ro(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.fo.Wi(e)}))})).then((function(e){t.io=new Zo(e,t.no)})).then((function(){t.ro=!0})).catch((function(e){return t._o&&t._o.close(),Promise.reject(e)}))},t.prototype.Po=function(t){var e=this;return this.ho=function(n){return It(e,void 0,void 0,(function(){return Et(this,(function(e){return this.Tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.yo=function(t){var e=this;this._o.Zn((function(n){return It(e,void 0,void 0,(function(){return Et(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys((function(){return It(e,void 0,void 0,(function(){return Et(this,(function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Io=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Yh(e).put(new Kc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.po(e).next((function(e){e||(t.isPrimary=!1,t.eo.bo((function(){return t.ho(!1)})))}))})).next((function(){return t.vo(e)})).next((function(n){return t.isPrimary&&!n?t.So(e).next((function(){return!1})):!!n&&t.Do(e).next((function(){return!0}))}))})).catch((function(e){if(wc(e))return No("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return No("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.eo.bo((function(){return t.ho(e)})),t.isPrimary=e}))},t.prototype.po=function(t){var e=this;return Xh(t).get(Lc.key).next((function(t){return vc.resolve(e.Co(t))}))},t.prototype.xo=function(t){return Yh(t).delete(this.clientId)},t.prototype.No=function(){return It(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Et(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Fo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Yc(t,Kc.store);return e.os().next((function(t){var n=i.Oo(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return vc.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.To)for(e=0,n=t;e<n.length;e++)r=n[e],this.To.removeItem(this.ko(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,(function(){return t.Io().then((function(){return t.No()})).then((function(){return t.Ro()}))}))},t.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.vo=function(t){var e=this;return this.so?vc.resolve(!0):Xh(t).get(Lc.key).next((function(n){if(null!==n&&e.Fo(n.leaseTimestampMs,5e3)&&!e.Mo(n.ownerId)){if(e.Co(n)&&e.networkEnabled)return!0;if(!e.Co(n)){if(!n.allowTabSynchronization)throw new jo(Uo.FAILED_PRECONDITION,Jh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Yh(t).os().next((function(t){return void 0===e.Oo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&No("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Lo=function(){return It(this,void 0,void 0,(function(){var t=this;return Et(this,(function(e){switch(e.label){case 0:return this.ro=!1,this.$o(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[Lc.store,Kc.store],(function(e){var n=new Xc(e,Zo.U);return t.So(n).next((function(){return t.xo(n)}))}))];case 1:return e.sent(),this._o.close(),this.Uo(),[2]}}))}))},t.prototype.Oo=function(t,e){var n=this;return t.filter((function(t){return n.Fo(t.updateTimeMs,e)&&!n.Mo(t.clientId)}))},t.prototype.Qo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Yh(e).os().next((function(e){return t.Oo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.Ko=function(t){return Nh.Ai(t,this.Kt,this.Ti,this.Ii)},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.Wo=function(){return this.Ti},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;No("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this._o.runTransaction(t,o,Wc,(function(o){return i=new Xc(o,r.io?r.io.next():Zo.U),"readwrite-primary"===e?r.po(i).next((function(t){return!!t||r.vo(i)})).next((function(e){if(!e)throw So("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.eo.bo((function(){return r.ho(!1)})),new jo(Uo.FAILED_PRECONDITION,Ac);return n(i)})).next((function(t){return r.Do(i).next((function(){return t}))})):r.Go(i).next((function(){return n(i)}))})).then((function(t){return i.ps(),t}))},t.prototype.Go=function(t){var e=this;return Xh(t).get(Lc.key).next((function(t){if(null!==t&&e.Fo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new jo(Uo.FAILED_PRECONDITION,Jh)}))},t.prototype.Do=function(t){var e=new Lc(this.clientId,this.allowTabSynchronization,Date.now());return Xh(t).put(Lc.key,e)},t.Wn=function(){return gc.Wn()},t.prototype.So=function(t){var e=this,n=Xh(t);return n.get(Lc.key).next((function(t){return e.Co(t)?(No("IndexedDbPersistence","Releasing primary lease."),n.delete(Lc.key)):vc.resolve()}))},t.prototype.Fo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(So("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()}))},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},t.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.$o(),e.eo.ys((function(){return e.Lo()}))},this.window.addEventListener("unload",this.oo))},t.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},t.prototype.Mo=function(t){var e;try{var n=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return No("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return So("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.$o=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){So("Failed to set zombie client id.",t)}},t.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},t.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Xh(t){return Yc(t,Lc.store)}function Yh(t){return Yc(t,Kc.store)}function Qh(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Zh=function(){function t(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.vi(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.wo.fi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].xs(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=ya();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].xs(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.wo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){var i=n.Xo(t,e,r),o=va();return i.forEach((function(t,e){e||(e=new js(t,es.min())),o=o.Ht(t,e)})),o}))},t.prototype.Wr=function(t,e,n){return function(t){return ss.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):du(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new ss(e)).next((function(t){var e=ma();return t instanceof Us&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=ma();return this.Ti.Qs(t,i).next((function(s){return vc.forEach(s,(function(s){var u=function(t,e){return new uu(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,u,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.wo.Wr(t,e,n).next((function(n){return r=n,o.Ho.Ci(t,e)})).next((function(e){return i=e,o.ic(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=Ku(a,r.get(c),0,o.Ss);r=h instanceof Us?r.Ht(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){_u(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=_a(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Yu&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.wo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Us&&(c=c.Ht(t,e))})),c}))},t}(),tf=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=_a(),i=_a(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ef=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.Wr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(es.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(o){var s=i.lc(e,o);return(hu(e)||fu(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(To()<=Kt.DEBUG&&No("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),wu(e)),i.uc.Wr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new la(Iu(t));return e.forEach((function(e,r){r instanceof Us&&_u(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return To()<=Kt.DEBUG&&No("QueryEngine","Using full collection scan to execute query:",wu(e)),this.uc.Wr(t,e,es.min())},t}(),nf=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new ca(Lo),this.wc=new _h((function(t){return Hs(t)}),Gs),this.Ec=es.min(),this.Ho=t.Ko(n),this.Tc=t.Or(),this.fo=t.Dr(),this.Ic=new Zh(this.Tc,this.Ho,this.persistence.Wo()),this.Eo=t.jo(),this.fc.ac(this.Ic)}return t.prototype.mr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.pr(n,e.dc)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rf(t,e,n,r){return new nf(t,e,n,r)}function of(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o;return Et(this,(function(s){switch(s.label){case 0:return n=Oo(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.bi(t).next((function(s){return o=s,r=n.persistence.Ko(e),i=new Zh(n.Tc,r,n.persistence.Wo()),r.bi(t)})).next((function(e){for(var n=[],r=[],s=_a(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function sf(t,e){var n=Oo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Fr({jr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=vc.resolve();return o.forEach((function(t){s=s.next((function(){return r.fi(e,t)})).next((function(e){var o=e,s=n.Os.get(t);Do(null!==s),(!o||o.version.u(s)<0)&&(o=i.Ds(t,o,n))&&r.ui(o,n.Fs)}))})),s.next((function(){return t.Ho.xi(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.Oi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function uf(t){var e=Oo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.fo.Ki(t)}))}function af(t,e){var n=Oo(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Fr({jr:!0});i=n.dc;var s=[];e.Oe.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.fo.ir(t,e.Ke,o).next((function(){return n.fo.nr(t,e.Ue,o)})));var a=e.resumeToken;if(a.o()>0){var c=u.$t(a,r).Lt(t.vs);i=i.Ht(o,c),function(t,e,n){return Do(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(u,c,e)&&s.push(n.fo.Ji(t,c))}}}));var u=va();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.Ii.kr(t,r))})),s.push(function(t,e,n,r,i){var o=_a();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=va();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof js&&s.version.isEqual(es.min())?(e._i(n,a),o=o.Ht(n,s)):null==u||s.version.u(u.version)>0||0===s.version.u(u.version)&&u.hasPendingWrites?(e.ui(s,a),o=o.Ht(n,s)):No("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}(t,o,e.Me,r,void 0).next((function(t){u=t}))),!r.isEqual(es.min())){var a=n.fo.Ki(t).next((function(e){return n.fo.ji(t,t.vs,r)}));s.push(a)}return vc.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,u)}))})).then((function(t){return n.dc=i,t}))}function cf(t,e){var n=Oo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.Vi(t,e)}))}function hf(t,e){var n=Oo(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.fo.er(t,e).next((function(i){return i?(r=i,vc.resolve(r)):n.fo.qi(t).next((function(i){return r=new Tu(e,i,0,t.vs),n.fo.Gi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function ff(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,s;return Et(this,(function(u){switch(u.label){case 0:r=Oo(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ii.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!wc(s=u.sent()))throw s;return No("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function lf(t,e,n){var r=Oo(t),i=es.min(),o=_a();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Oo(t),i=r.wc.get(n);return void 0!==i?vc.resolve(r.dc.get(i)):r.fo.er(e,n)}(r,t,yu(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.fo.cr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.Wr(t,e,n?i:es.min(),n?o:_a())})).next((function(t){return{documents:t,Pc:o}}))}))}function pf(t,e){var n=Oo(t),r=Oo(n.fo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function df(t){var e=Oo(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Oo(t),i=va(),o=rh(n),s=Gh(e),u=IDBKeyRange.lowerBound(o,!0);return s.ls({index:Fc.readTimeIndex,range:u},(function(t,e){var n=eh(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{zo:i,readTime:ih(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.zo,r=t.readTime;return e.Ec=r,n}))}function vf(t){return It(this,void 0,void 0,(function(){var e;return Et(this,(function(n){return[2,(e=Oo(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Gh(t),n=es.min();return e.ls({index:Fc.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=ih(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var yf=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ms=function(t,e){return vc.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:za(n.createTime)}),vc.resolve()},t.prototype.$s=function(t,e){return vc.resolve(this.vc.get(e))},t.prototype.Bs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:hh(t.bundledQuery),readTime:za(t.readTime)}}(e)),vc.resolve()},t}(),gf=function(){function t(){this.Sc=new la(mf.Dc),this.Cc=new la(mf.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.sr=function(t,e){var n=new mf(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.sr(t,e)}))},t.prototype.rr=function(t,e){this.Fc(new mf(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.rr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new ss(new rs([])),r=new mf(n,t),i=new mf(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new ss(new rs([])),n=new mf(e,t),r=new mf(e,t+1),i=_a();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ki=function(t){var e=new mf(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),mf=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return ss.J(t.key,e.key)||Lo(t.$c,e.$c)},t.xc=function(t,e){return Lo(t.$c,e.$c)||ss.J(t.key,e.key)},t}(),bf=function(){function t(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new la(mf.Dc)}return t.prototype.Ri=function(t){return vc.resolve(0===this.Ho.length)},t.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++,this.Ho.length>0&&this.Ho[this.Ho.length-1];var o=new Qc(i,e,n,r);this.Ho.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.qc=this.qc.add(new mf(a.key,i)),this.Ti.Us(t,a.key.path.Z())}return vc.resolve(o)},t.prototype.yi=function(t,e){return vc.resolve(this.Uc(e))},t.prototype.Vi=function(t,e){var n=e+1,r=this.Qc(n),i=r<0?0:r;return vc.resolve(this.Ho.length>i?this.Ho[i]:null)},t.prototype.pi=function(){return vc.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.bi=function(t){return vc.resolve(this.Ho.slice())},t.prototype.vi=function(t,e){var n=this,r=new mf(e,0),i=new mf(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),vc.resolve(o)},t.prototype.Si=function(t,e){var n=this,r=new la(Lo);return e.forEach((function(t){var e=new mf(t,0),i=new mf(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),vc.resolve(this.Kc(r))},t.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,i=n;ss.Et(i)||(i=i.child(""));var o=new mf(new ss(i),0),s=new la(Lo);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),vc.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.xi=function(t,e){var n=this;Do(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return vc.forEach(e.mutations,(function(i){var o=new mf(i.key,e.batchId);return r=r.delete(o),n.Ii.Fi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Ni=function(t){},t.prototype.ki=function(t,e){var n=new mf(e,0),r=this.qc.Pe(n);return vc.resolve(e.isEqual(r&&r.key))},t.prototype.Oi=function(t){return this.Ho.length,vc.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),wf=function(){function t(t,e){this.Ti=t,this.jc=e,this.docs=new ca(ss.J),this.size=0}return t.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{li:e,size:s,readTime:n}),this.size+=s-o,this.Ti.Us(t,r.path.Z())},t.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.fi=function(t,e){var n=this.docs.get(e);return vc.resolve(n?n.li:null)},t.prototype.getEntries=function(t,e){var n=this,r=ya();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)})),vc.resolve(r)},t.prototype.Wr=function(t,e,n){for(var r=ma(),i=new ss(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),u=s.key,a=s.value,c=a.li,h=a.readTime;if(!e.path.st(u.path))break;h.u(n)<=0||c instanceof Us&&_u(e,c)&&(r=r.Ht(c.key,c))}return vc.resolve(r)},t.prototype.Gc=function(t,e){return vc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Fr=function(t){return new _f(this)},t.prototype.Mr=function(t){return vc.resolve(this.size)},t}(),_f=function(t){function e(e){var n=this;return(n=t.call(this)||this).Gr=e,n}return wt(e,t),e.prototype.Ei=function(t){var e=this,n=[];return this.oi.forEach((function(r,i){i&&i.li?n.push(e.Gr.ui(t,i.li,e.ai(r))):e.Gr._i(r)})),vc.$n(n)},e.prototype.di=function(t,e){return this.Gr.fi(t,e)},e.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},e}(Ih),If=function(){function t(t){this.persistence=t,this.zc=new _h((function(t){return Hs(t)}),Gs),this.lastRemoteSnapshotVersion=es.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new gf,this.targetCount=0,this.Yc=Dh.$i()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),vc.resolve()},t.prototype.Ki=function(t){return vc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Wi=function(t){return vc.resolve(this.Hc)},t.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),vc.resolve(this.highestTargetId)},t.prototype.ji=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),vc.resolve()},t.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new Dh(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,vc.resolve()},t.prototype.Ji=function(t,e){return this.zi(e),vc.resolve()},t.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,vc.resolve()},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.zc.delete(s),o.push(r.Xi(t,u.targetId)),i++)})),vc.$n(o).next((function(){return i}))},t.prototype.tr=function(t){return vc.resolve(this.targetCount)},t.prototype.er=function(t,e){var n=this.zc.get(e)||null;return vc.resolve(n)},t.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),vc.resolve()},t.prototype.ir=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.Ii,i=[];return r&&e.forEach((function(e){i.push(r.Fi(t,e))})),vc.$n(i)},t.prototype.Xi=function(t,e){return this.Jc.kc(e),vc.resolve()},t.prototype.cr=function(t,e){var n=this.Jc.Lc(e);return vc.resolve(n)},t.prototype.ki=function(t,e){return vc.resolve(this.Jc.ki(e))},t}(),Ef=function(){function t(t,e){var n=this;this.Xc={},this.io=new Zo(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new If(this),this.Ti=new dh,this.wo=function(t,e){return new wf(t,(function(t){return n.Ii.Zc(t)}))}(this.Ti),this.Kt=new th(e),this.Eo=new yf(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Lo=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.yo=function(){},t.prototype.Vo=function(){},t.prototype.Wo=function(){return this.Ti},t.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new bf(this.Ti,this.Ii),this.Xc[t.R()]=e),e},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;No("MemoryPersistence","Starting transaction:",t);var i=new Tf(this.io.next());return this.Ii.ta(),n(i).next((function(t){return r.Ii.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.ps(),t}))},t.prototype.na=function(t,e){return vc.Bn(Object.values(this.Xc).map((function(n){return function(){return n.ki(t,e)}})))},t}(),Tf=function(t){function e(e){var n=this;return(n=t.call(this)||this).vs=e,n}return wt(e,t),e}(xc),Nf=function(){function t(t){this.persistence=t,this.sa=new gf,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw ko()},enumerable:!1,configurable:!0}),t.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),vc.resolve()},t.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),vc.resolve()},t.prototype.Fi=function(t,e){return this.oa.add(e.toString()),vc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Dr();return r.cr(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Yi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.Or().Fr();return vc.forEach(this.oa,(function(r){var i=ss.ft(r);return e.ca(t,i).next((function(t){t||n._i(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return vc.Bn([function(){return vc.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Sf(t,e){return"firestore_clients_"+t+"_"+e}function Af(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function xf(t,e){return"firestore_targets_"+t+"_"+e}var kf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new jo(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(So("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Df=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new jo(r.error.code,r.error.message)),i?new t(e,r.state,o):(So("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Of=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ea(),s=0;i&&s<r.activeTargetIds.length;++s)i=ws(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(So("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Cf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(So("SharedClientState","Failed to parse online state: "+e),null)},t}(),Pf=function(){function t(){this.activeTargetIds=Ea()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Lf=function(){function t(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new ca(Lo),this.Tr=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=Sf(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new Pf),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return It(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h,f=this;return Et(this,(function(l){switch(l.label){case 0:return[4,this.fa.Qo()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(Sf(this.persistenceKey,r)))&&(o=Of.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(u=this.ba(s))&&this.va(u),a=0,c=this.Ia;a<c.length;a++)h=c[a],this.Ea(h);return this.Ia=[],this.window.addEventListener("unload",(function(){return f.Lo()})),this.Tr=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(xf(this.persistenceKey,t));if(n){var r=Df.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(xf(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.Lo=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return No("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){No("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){No("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(No("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void So("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo((function(){return It(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Et(this,(function(u){if(this.Tr){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(s=function(t){var e=Zo.U;if(null!=t)try{var n=JSON.parse(t);Do("number"==typeof n),e=n}catch(t){So("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Zo.U&&this.L(s);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new kf(this.currentUser,t,e,n),i=Af(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=Af(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){var e={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(e))},t.prototype.Ua=function(t,e,n){var r=xf(this.persistenceKey,t),i=new Df(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return Of.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return kf.aa(new $o(i),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return Df.aa(r,e)},t.prototype.ba=function(t){return Cf.aa(t)},t.prototype.Xa=function(t){return It(this,void 0,void 0,(function(){return Et(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(No("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.fa.iu(s,u).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=Ea();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),Rf=function(){function t(){this.ru=new Pf,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new Pf,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.Lo=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),Vf=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.Lo=function(){},t}(),Mf=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.Lo=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){No("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){No("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Uf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},jf=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Ff=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return wt(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new Io;s.listenOnce(go.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case yo.NO_ERROR:var e=s.getResponseJson();No("Connection","XHR received:",JSON.stringify(e)),i(e);break;case yo.TIMEOUT:No("Connection",'RPC "'+t+'" timed out'),o(new jo(Uo.DEADLINE_EXCEEDED,"Request time out"));break;case yo.HTTP_ERROR:var n=s.getStatus();if(No("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Uo).indexOf(e)>=0?e:Uo.UNKNOWN}(r.status);o(new jo(u,r.message))}else o(new jo(Uo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new jo(Uo.UNAVAILABLE,"Connection failed."));break;default:ko()}}finally{No("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.xu=function(t,e){var n,r=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new ho,o=lr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())||"object"==typeof navigator&&"ReactNative"===navigator.product||Dt().indexOf("Electron/")>=0||function(){var t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||Dt().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");No("Connection","Creating WebChannel: "+u,s);var a=i.createWebChannel(u,s),c=!1,h=!1,f=new jf({du:function(t){h?No("Connection","Not sending because WebChannel is closed:",t):(c||(No("Connection","Opening WebChannel transport."),a.open(),c=!0),No("Connection","WebChannel sending:",t),a.send(t))},wu:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,_o.EventType.OPEN,(function(){h||No("Connection","WebChannel transport opened.")})),l(a,_o.EventType.CLOSE,(function(){h||(h=!0,No("Connection","WebChannel transport closed"),f.Pu())})),l(a,_o.EventType.ERROR,(function(t){h||(h=!0,Ao("Connection","WebChannel transport errored:",t),f.Pu(new jo(Uo.UNAVAILABLE,"The operation could not be completed")))})),l(a,_o.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Do(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){No("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=na[t];if(void 0!==e)return aa(e)}(o),u=i.message;void 0===s&&(s=Uo.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),h=!0,f.Pu(new jo(s,u)),a.close()}else No("Connection","WebChannel received:",n),f.yu(n)}})),l(o,mo.STAT_EVENT,(function(t){t.stat===bo?No("Connection","Detected buffering proxy"):t.stat===wo&&No("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Ru()}),0),f},e}(function(){function t(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);No("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return No("RestConnection","Received: ",t),t}),(function(e){throw Ao("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.4",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){var n=Uf[t];return this.Vu+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qf(){return"undefined"!=typeof window?window:null}function zf(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hf(t){return new Ua(t,!0)}var Gf=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&No("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),Bf=function(){function t(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new Gf(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return It(this,void 0,void 0,(function(){return Et(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return It(this,void 0,void 0,(function(){return Et(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return It(this,void 0,void 0,(function(){return Et(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===Uo.RESOURCE_EXHAUSTED?(So(e.toString()),So("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===Uo.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new jo(Uo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return It(t,void 0,void 0,(function(){return Et(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return No("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.eo.ys((function(){return e.ju===t?n():(No("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Kf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return wt(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ko()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(Do(void 0===e||"string"==typeof e),Mo.fromBase64String(e||"")):(Do(void 0===e||e instanceof Uint8Array),Mo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Uo.UNKNOWN:aa(t.code);return new jo(e,t.message||"")}(u);n=new Oa(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ka(t,r.document.name),o=za(r.document.updateTime);var u=new Ls({mapValue:{fields:r.document.fields}}),a=(s=new Us(i,o,u,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new ka(a,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ka(t,r.document),o=r.readTime?za(r.readTime):es.min(),u=new js(i,o),s=r.removedTargetIds||[],n=new ka([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ka(t,r.document),o=r.removedTargetIds||[],n=new ka([],o,i,null);else{if(!("filter"in e))return ko();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new sa(r),o=h.targetId,n=new Da(o,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return es.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?es.min():e.readTime?za(e.readTime):es.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=Wa(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Bs(r)?{documents:tc(t,r)}:{query:ec(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Fa(t,e.resumeToken):e.Mt.u(es.min())>0&&(n.readTime=ja(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ko()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(this.Kt,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=Wa(this.Kt),e.removeTarget=t,this.eh(e)},e}(Bf),$f=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return wt(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(Do(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(Do(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?za(t.updateTime):za(e);n.isEqual(es.min())&&(n=za(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new qu(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=za(t.commitTime);return this.listener.wh(n,e)}return Do(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=Wa(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Qa(e.Kt,t)}))};this.eh(n)},e}(Bf),Jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return wt(e,t),e.prototype.mh=function(){if(this.Ih)throw new jo(Uo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===Uo.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===Uo.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),Wf=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(So(e),this.Ph=!1):No("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),Xf=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return It(o,void 0,void 0,(function(){return Et(this,(function(t){switch(t.label){case 0:return ol(this)?(No("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return It(this,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return(e=Oo(t)).Fh.add(4),[4,Qf(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,Yf(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new Wf(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Yf(t){return It(this,void 0,void 0,(function(){var e,n;return Et(this,(function(r){switch(r.label){case 0:if(!ol(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Qf(t){return It(this,void 0,void 0,(function(){var e,n;return Et(this,(function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Zf(t,e){var n=Oo(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),il(n)?rl(n):wl(n).Ju()&&el(n,e))}function tl(t,e){var n=Oo(t),r=wl(n);n.Nh.delete(e),r.Ju()&&nl(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():ol(n)&&n.Mh.set("Unknown"))}function el(t,e){t.Lh.cn(e.targetId),wl(t).hh(e)}function nl(t,e){t.Lh.cn(e),wl(t).lh(e)}function rl(t){t.Lh=new Pa({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),wl(t).start(),t.Mh.yh()}function il(t){return ol(t)&&!wl(t).Hu()&&t.Nh.size>0}function ol(t){return 0===Oo(t).Fh.size}function sl(t){t.Lh=void 0}function ul(t){return It(this,void 0,void 0,(function(){return Et(this,(function(e){return t.Nh.forEach((function(e,n){el(t,e)})),[2]}))}))}function al(t,e){return It(this,void 0,void 0,(function(){return Et(this,(function(n){return sl(t),il(t)?(t.Mh.ph(e),rl(t)):t.Mh.set("Unknown"),[2]}))}))}function cl(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o;return Et(this,(function(s){switch(s.label){case 0:if(t.Mh.set("Online"),!(e instanceof Oa&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o;return Et(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.Nh.has(o)?[4,t.Ch.$h(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),No("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,hl(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ka?t.Lh.wn(e):e instanceof Da?t.Lh.yn(e):t.Lh.In(e),n.isEqual(es.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,uf(t.Sh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(Mo.h,n.Mt)),nl(t,e);var r=new Tu(n.target,e,1,n.sequenceNumber);el(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return No("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,hl(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function hl(t,e,n){return It(this,void 0,void 0,(function(){var r=this;return Et(this,(function(i){switch(i.label){case 0:if(!wc(e))throw e;return t.Fh.add(1),[4,Qf(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return uf(t.Sh)}),t.fs.bo((function(){return It(r,void 0,void 0,(function(){return Et(this,(function(e){switch(e.label){case 0:return No("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,Yf(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function fl(t,e){return e().catch((function(n){return hl(t,n,e)}))}function ll(t){return It(this,void 0,void 0,(function(){var e,n,r,i,o;return Et(this,(function(s){switch(s.label){case 0:e=Oo(t),n=_l(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ol(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,cf(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=_l(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,hl(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return pl(e)&&dl(e),[2]}}))}))}function pl(t){return ol(t)&&!_l(t).Hu()&&t.xh.length>0}function dl(t){_l(t).start()}function vl(t){return It(this,void 0,void 0,(function(){return Et(this,(function(e){return _l(t).Th(),[2]}))}))}function yl(t){return It(this,void 0,void 0,(function(){var e,n,r,i;return Et(this,(function(o){for(e=_l(t),n=0,r=t.xh;n<r.length;n++)i=r[n],e.dh(i.mutations);return[2]}))}))}function gl(t,e,n){return It(this,void 0,void 0,(function(){var r,i;return Et(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=Zc.from(r,e,n),[4,fl(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,ll(t)];case 2:return o.sent(),[2]}}))}))}function ml(t,e){return It(this,void 0,void 0,(function(){return Et(this,(function(n){switch(n.label){case 0:return e&&_l(t).fh?[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r;return Et(this,(function(i){switch(i.label){case 0:return ua(r=e.code)&&r!==Uo.ABORTED?(n=t.xh.shift(),_l(t).Xu(),[4,fl(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,ll(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return pl(t)&&dl(t),[2]}}))}))}function bl(t,e){return It(this,void 0,void 0,(function(){var n;return Et(this,(function(r){switch(r.label){case 0:return n=Oo(t),e?(n.Fh.delete(2),[4,Yf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,Qf(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function wl(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Oo(t);return r.mh(),new Kf(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:ul.bind(null,t),Iu:al.bind(null,t),uh:cl.bind(null,t)}),t.Oh.push((function(n){return It(e,void 0,void 0,(function(){return Et(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),il(t)?rl(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),sl(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function _l(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=Oo(t);return r.mh(),new $f(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:vl.bind(null,t),Iu:ml.bind(null,t),Eh:yl.bind(null,t),wh:gl.bind(null,t)}),t.Oh.push((function(n){return It(e,void 0,void 0,(function(){return Et(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,ll(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(No("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Il=function(){this.Wh=void 0,this.listeners=[]},El=function(){this.queries=new _h((function(t){return bu(t)}),mu),this.onlineState="Unknown",this.jh=new Set};function Tl(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return Et(this,(function(c){switch(c.label){case 0:if(n=Oo(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Il),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Gh(r)];case 2:return s.Wh=c.sent(),[3,4];case 3:return u=c.sent(),a=Sc(u,"Initialization of query '"+wu(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.Wh&&e.Hh(o.Wh)&&xl(n),[2]}}))}))}function Nl(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,s;return Et(this,(function(u){return n=Oo(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function Sl(t,e){for(var n=Oo(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Hh(s)&&(r=!0);a.Wh=s}}r&&xl(n)}function Al(t,e,n){var r=Oo(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function xl(t){t.jh.forEach((function(t){t.next()}))}var kl=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Sa(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){if(t.docChanges.length>0)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=Sa.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),Dl=function(t){this.key=t},Ol=function(t){this.key=t},Cl=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=_a(),this.Ce=_a(),this.ll=Iu(t),this._l=new Ta(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new Na,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,u=!1,a=hu(this.query)&&i.size===this.query.limit?i.last():null,c=fu(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var h=i.get(t),f=e instanceof Us?e:null;f&&(f=_u(n.query,f)?f:null);var l=!!h&&n.Ce.has(h.key),p=!!f&&(f.bt||n.Ce.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.El(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.ll(f,a)>0||c&&n.ll(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),hu(this.query)||fu(this.query))for(;s.size>this.query.limit;){var h=hu(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_l:s,wl:r,_c:u,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ei=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ko()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],u=0===this.hl.size&&this.qe?1:0,a=u!==this.ul;return this.ul=u,0!==o.length||a?{snapshot:new Sa(this.query,t._l,i,o,t.Ce,0===u,a,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new Na,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=_a(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new Ol(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new Dl(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=_a();var e=this.dl(t.documents);return this.Ei(e,!0)},t.prototype.Pl=function(){return Sa.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),Pl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ll=function(t){this.key=t,this.yl=!1},Rl=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new _h((function(t){return bu(t)}),mu),this.Dl=new Map,this.Cl=[],this.xl=new ca(ss.J),this.Nl=new Map,this.Fl=new gf,this.Ol={},this.kl=new Map,this.Ml=Dh.Bi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vl(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Et(this,(function(a){switch(a.label){case 0:return n=fp(t),(o=n.Sl.get(e))?(r=o.targetId,n.pl.ka(r),i=o.view.Pl(),[3,4]):[3,1];case 1:return[4,hf(n.Sh,yu(e))];case 2:return s=a.sent(),u=n.pl.ka(s.targetId),r=s.targetId,[4,Ml(n,e,r,"current"===u)];case 3:i=a.sent(),n.$l&&Zf(n.gl,s),a.label=4;case 4:return[2,i]}}))}))}function Ml(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Et(this,(function(h){switch(h.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,s;return Et(this,(function(u){switch(u.label){case 0:return(i=e.view.dl(n))._c?[4,lf(t.Sh,e.query,!1).then((function(t){var n=t.documents;return e.view.dl(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.Oe.get(e.targetId),s=e.view.Ei(i,t.$l,o),[2,(Xl(t,e.targetId,s.ml),s.snapshot)]}}))}))}(t,e,n,r)},[4,lf(t.Sh,e,!0)];case 1:return i=h.sent(),o=new Cl(e,i.Pc),s=o.dl(i.documents),u=xa.Be(n,r&&"Offline"!==t.onlineState),a=o.Ei(s,t.$l,u),Xl(t,n,a.ml),c=new Pl(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),a.snapshot)]}}))}))}function Ul(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Et(this,(function(o){switch(o.label){case 0:return n=Oo(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!mu(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,ff(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),tl(n.gl,r.targetId),Jl(n,r.targetId)})).catch(wh)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Jl(n,r.targetId),[4,ff(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function jl(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,s;return Et(this,(function(u){switch(u.label){case 0:r=lp(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=Oo(t),i=ts.now(),o=e.reduce((function(t,e){return t.add(e.key)}),_a());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=$u(c,n.get(c.key));null!=h&&s.push(new Yu(c.key,h,Vs(h.proto.mapValue),zu.exists(!0)))}return r.Ho.Pi(t,i,s,e)}))})).then((function(t){var e=t.Ns(n);return{batchId:t.batchId,oi:e}}))}(r.Sh,e)];case 2:return i=u.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new ca(Lo)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,Zl(r,i.oi)];case 3:return u.sent(),[4,ll(r.gl)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=Sc(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Fl(t,e){return It(this,void 0,void 0,(function(){var n,r;return Et(this,(function(i){switch(i.label){case 0:n=Oo(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,af(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach((function(t,e){var r=n.Nl.get(e);r&&(Do(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?Do(r.yl):t.Ke.size>0&&(Do(r.yl),r.yl=!1))})),[4,Zl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,wh(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function ql(t,e,n){var r=Oo(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Oo(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&xl(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function zl(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Et(this,(function(c){switch(c.label){case 0:return(r=Oo(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(s=(s=new ca(ss.J)).Ht(o,new js(o,es.min())),u=_a().add(o),a=new Aa(es.min(),new Map,new la(Lo),s,u),[4,Fl(r,a)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),Ql(r),[3,4];case 2:return[4,ff(r.Sh,e,!1).then((function(){return Jl(r,e,n)})).catch(wh)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Hl(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Et(this,(function(o){switch(o.label){case 0:n=Oo(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,sf(n.Sh,e)];case 2:return i=o.sent(),$l(n,r,null),Kl(n,r),n.pl.Fa(r,"acknowledged"),[4,Zl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,wh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Gl(t,e,n){return It(this,void 0,void 0,(function(){var r,i;return Et(this,(function(o){switch(o.label){case 0:r=Oo(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Oo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.yi(t,e).next((function(e){return Do(null!==e),r=e.keys(),n.Ho.xi(t,e)})).next((function(){return n.Ho.Oi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),$l(r,e,n),Kl(r,e),r.pl.Fa(e,"rejected",n),[4,Zl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,wh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Bl(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,s;return Et(this,(function(u){switch(u.label){case 0:ol((n=Oo(t)).gl)||No("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=Oo(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.pi(t)}))}(n.Sh)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=u.sent(),s=Sc(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Kl(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function $l(t,e,n){var r=Oo(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function Jl(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.ki(e)||Wl(t,e)}))}function Wl(t,e){var n=t.xl.get(e);null!==n&&(tl(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),Ql(t))}function Xl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Dl?(t.Fl.sr(o.key,e),Yl(t,o)):o instanceof Ol?(No("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.rr(o.key,e),t.Fl.ki(o.key)||Wl(t,o.key)):ko()}}function Yl(t,e){var n=e.key;t.xl.get(n)||(No("SyncEngine","New document in limbo: "+n),t.Cl.push(n),Ql(t))}function Ql(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Ll(e)),t.xl=t.xl.Ht(e,n),Zf(t.gl,new Tu(yu(cu(e.path)),n,2,Zo.U))}}function Zl(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,s;return Et(this,(function(u){switch(u.label){case 0:return r=Oo(t),i=[],o=[],s=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,u){s.push(r.Bl(u,e,n).then((function(t){if(t){r.$l&&r.pl.qa(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=tf.cc(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vl.uh(i),[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h;return Et(this,(function(f){switch(f.label){case 0:n=Oo(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return vc.forEach(e,(function(e){return vc.forEach(e.rc,(function(r){return n.persistence.Ii.sr(t,e.targetId,r)})).next((function(){return vc.forEach(e.oc,(function(r){return n.persistence.Ii.rr(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!wc(r=f.sent()))throw r;return No("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.dc.get(u),c=a.Mt,h=a.Bt(c),n.dc=n.dc.Ht(u,h));return[2]}}))}))}(r.Sh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function tp(t,e){return It(this,void 0,void 0,(function(){var n,r;return Et(this,(function(i){switch(i.label){case 0:return(n=Oo(t)).currentUser.isEqual(e)?[3,3]:(No("SyncEngine","User change. New user:",e.R()),[4,of(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new jo(Uo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,Zl(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ep(t,e){var n=Oo(t),r=n.Nl.get(e);if(r&&r.yl)return _a().add(r.key);var i=_a(),o=n.Dl.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Sl.get(a);i=i.ye(c.view.fl)}return i}function np(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Et(this,(function(o){switch(o.label){case 0:return[4,lf((n=Oo(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&Xl(n,e.targetId,i.ml),i)]}}))}))}function rp(t){return It(this,void 0,void 0,(function(){var e;return Et(this,(function(n){return[2,df((e=Oo(t)).Sh).then((function(t){return Zl(e,t)}))]}))}))}function ip(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o;return Et(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Oo(t),r=Oo(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.gi(t,e).next((function(e){return e?n.Ic.Zo(t,e):vc.resolve(null)}))}))}((i=Oo(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,ll(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?($l(i,e,r||null),Kl(i,e),function(t,e){Oo(Oo(t).Ho).Ni(e)}(i.Sh,e)):ko(),s.label=4;case 4:return[4,Zl(i,o)];case 5:return s.sent(),[3,7];case 6:No("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function op(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return Et(this,(function(h){switch(h.label){case 0:return fp(n=Oo(t)),lp(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,sp(n,r.rt())]);case 1:return i=h.sent(),n.Ll=!0,[4,bl(n.gl,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)u=s[o],Zf(n.gl,u);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(a=[],c=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?a.push(e):c=c.then((function(){return Jl(n,e),ff(n.Sh,e,!0)})),tl(n.gl,e)})),[4,c]);case 4:return h.sent(),[4,sp(n,a)];case 5:return h.sent(),function(t){var e=Oo(t);e.Nl.forEach((function(t,n){tl(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new ca(ss.J)}(n),n.Ll=!1,[4,bl(n.gl,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function sp(t,e,n){return It(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d,v;return Et(this,(function(y){switch(y.label){case 0:n=Oo(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.Dl.get(u))&&0!==c.length?[4,hf(n.Sh,yu(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.Sl.get(l),[4,np(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,pf(n.Sh,u)];case 8:return v=y.sent(),[4,hf(n.Sh,v)];case 9:return a=y.sent(),[4,Ml(n,up(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function up(t){return au(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ap(t){var e=Oo(t);return Oo(Oo(e.Sh).persistence).Qo()}function cp(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,s;return Et(this,(function(u){switch(u.label){case 0:return(i=Oo(t)).Ll?(No("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,df(i.Sh)];case 3:return o=u.sent(),s=Aa.$e(e,"current"===n),[4,Zl(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,ff(i.Sh,e,!0)];case 6:return u.sent(),Jl(i,e,r),[3,8];case 7:ko(),u.label=8;case 8:return[2]}}))}))}function hp(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l;return Et(this,(function(p){switch(p.label){case 0:if(!(r=fp(t)).Ll)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Dl.has(s)?(No("SyncEngine","Adding an already active target "+s),[3,5]):[4,pf(r.Sh,s)]):[3,6];case 2:return u=p.sent(),[4,hf(r.Sh,u)];case 3:return a=p.sent(),[4,Ml(r,up(u),a.targetId,!1)];case 4:p.sent(),Zf(r.gl,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Et(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,ff(r.Sh,t,!1).then((function(){tl(r.gl,t),Jl(r,t)})).catch(wh)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function fp(t){var e=Oo(t);return e.gl.Ch.Bh=Fl.bind(null,e),e.gl.Ch.Sn=ep.bind(null,e),e.gl.Ch.$h=zl.bind(null,e),e.vl.uh=Sl.bind(null,e.Vl),e.vl.ql=Al.bind(null,e.Vl),e}function lp(t){var e=Oo(t);return e.gl.Ch.qh=Hl.bind(null,e),e.gl.Ch.Uh=Gl.bind(null,e),e}var pp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return It(this,void 0,void 0,(function(){return Et(this,(function(e){switch(e.label){case 0:return this.Kt=Hf(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return rf(this.persistence,new ef,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new Ef(Nf.ra,this.Kt)},t.prototype.jl=function(t){return new Rf},t.prototype.terminate=function(){return It(this,void 0,void 0,(function(){return Et(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.Lo()];case 1:return t.sent(),[4,this.persistence.Lo()];case 2:return t.sent(),[2]}}))}))},t}(),dp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return wt(e,t),e.prototype.initialize=function(e){return It(this,void 0,void 0,(function(){return Et(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,vf(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,lp(this.Xl.fa)];case 4:return n.sent(),[4,ll(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return rf(this.persistence,new ef,t.Yl,this.Kt)},e.prototype.Hl=function(t){var e=this.persistence.Ii._r;return new Mh(e,t.fs)},e.prototype.Gl=function(t){var e=Qh(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?bh.Xs(this.cacheSizeBytes):bh.ei;return new Wh(this.synchronizeTabs,e,t.clientId,n,t.fs,qf(),zf(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new Rf},e}(pp),vp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return wt(e,t),e.prototype.initialize=function(e){return It(this,void 0,void 0,(function(){var n,r=this;return Et(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof Lf?(this.pl.fa={nu:ip.bind(null,n),su:cp.bind(null,n),iu:hp.bind(null,n),Qo:ap.bind(null,n),eu:rp.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Po((function(t){return It(r,void 0,void 0,(function(){return Et(this,(function(e){switch(e.label){case 0:return[4,op(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Tr?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=qf();if(!Lf.Wn(e))throw new jo(Uo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Qh(t.gu.T,t.gu.persistenceKey);return new Lf(e,t.fs,n,t.clientId,t.Yl)},e}(dp),yp=function(){function t(){}return t.prototype.initialize=function(t,e){return It(this,void 0,void 0,(function(){var n=this;return Et(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return ql(n.fa,t,1)},this.gl.Ch.s_=tp.bind(null,this.fa),[4,bl(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new El},t.prototype.Zl=function(t){var e,n=Hf(t.gu.T),r=(e=t.gu,new Ff(e));return function(t,e,n){return new Jf(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return ql(s.fa,t,0)},o=Mf.Wn()?new Mf:new Vf,new Xf(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new Rl(t,e,n,r,i,o);return s&&(u.Ll=!0),u}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return It(this,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return e=Oo(t),No("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,Qf(e)];case 1:return n.sent(),e.kh.Lo(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),gp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),mp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new jo(Uo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new os(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}(),bp=function(t){this._methodName=t};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function wp(t,e,n){if(!n)throw new jo(Uo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function _p(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jo(Uo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ip(t,e,n,r){if(!0===e&&!0===r)throw new jo(Uo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ep(t){if(!ss.Et(t))throw new jo(Uo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Tp(t){if(ss.Et(t))throw new jo(Uo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Np(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ko()}function Sp(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new jo(Uo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Np(t);throw new jo(Uo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ap(t,e){if(e<=0)throw new jo(Uo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new jo(Uo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new jo(Uo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ip("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),kp=new Map,Dp=function(){function t(t,e){this.w_="(lite)",this.E_=new xp({}),this.T_=!1,t instanceof Ko?(this.I_=t,this.m_=new Wo):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new jo(Uo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(t.options.projectId)}(t),this.m_=new Xo(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new jo(Uo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new jo(Uo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new xp(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Wo;switch(t.type){case"gapi":var e=t.client;return Do(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Qo(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new jo(Uo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return this,(t=kp.get(this))&&(No("ComponentProvider","Removing Datastore"),kp.delete(this),t.terminate()),Promise.resolve();var t},t}(),Op=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Pp(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Cp=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Pp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,cu(r))||this).firestore=e,i.D_=r,i.type="collection",i}return wt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Op(this.firestore,null,new ss(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Cp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Lp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof qo&&(t=t._),wp("collection","path",e),t instanceof Dp)return Tp(n=rs.ct.apply(rs,At([e],r))),new Pp(t,null,n);if(!(t instanceof Op||t instanceof Pp))throw new jo(Uo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Tp(n=rs.ct.apply(rs,At([t.path],r)).child(rs.ct(e))),new Pp(t.firestore,null,n)}function Rp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof qo&&(t=t._),1===arguments.length&&(e=Po.t()),wp("doc","path",e),t instanceof Dp)return Ep(n=rs.ct.apply(rs,At([e],r))),new Op(t,null,new ss(n));if(!(t instanceof Op||t instanceof Pp))throw new jo(Uo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ep(n=t.D_.child(rs.ct.apply(rs,At([e],r)))),new Op(t.firestore,t instanceof Pp?t.v_:null,new ss(n))}function Vp(t,e){return t instanceof qo&&(t=t._),e instanceof qo&&(e=e._),(t instanceof Op||t instanceof Pp)&&(e instanceof Op||e instanceof Pp)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Mp(t,e){return t instanceof qo&&(t=t._),e instanceof qo&&(e=e._),t instanceof Cp&&e instanceof Cp&&t.firestore===e.firestore&&mu(t.C_,e.C_)&&t.v_===e.v_
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Up=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new jo(Uo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new jo(Uo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return Lo(this.x_,t.x_)||Lo(this.N_,t.N_)},t}(),jp=/^__.*__$/,Fp=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new Yu(t,this.data,this.zt,e,this.fieldTransforms):new Xu(t,this.data,e,this.fieldTransforms)},t}(),qp=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Yu(t,this.data,this.zt,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ko()}}var Hp=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return cd(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(zp(this.k_)&&jp.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Gp=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Hf(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Hp({k_:t,methodName:e,j_:n,path:os.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Bp(t){var e=t.p_(),n=Hf(t.I_);return new Gp(t.I_,!!e.ignoreUndefinedProperties,n)}function Kp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);od("Data must be an object, but it was:",s,r);var u,a,c=rd(r,s);if(o.merge)u=new hs(s.zt),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=sd(e,l[f],n);if(!s.contains(p))throw new jo(Uo.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");hd(h,p)||h.push(p)}u=new hs(h),a=s.fieldTransforms.filter((function(t){return u.It(t.field)}))}else u=null,a=s.fieldTransforms;return new Fp(new Ls(c),u,a)}var $p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(bp);function Jp(t,e,n){return new Hp({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var Wp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.z_=function(t){return new Fu(t.path,new Cu)},e.prototype.isEqual=function(t){return t instanceof e},e}(bp),Xp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return wt(e,t),e.prototype.z_=function(t){var e=Jp(this,t,!0),n=this.H_.map((function(t){return nd(t,e)})),r=new Pu(n);return new Fu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(bp),Yp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return wt(e,t),e.prototype.z_=function(t){var e=Jp(this,t,!0),n=this.H_.map((function(t){return nd(t,e)})),r=new Ru(n);return new Fu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(bp),Qp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return wt(e,t),e.prototype.z_=function(t){var e=new Mu(t.Kt,Au(t.Kt,this.J_));return new Fu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(bp);function Zp(t,e,n,r){var i=t.G_(1,e,n);od("Data must be an object, but it was:",i,r);var o=[],s=new Rs;as(r,(function(t,r){var u=ad(e,t,n);r instanceof qo&&(r=r._);var a=i.U_(u);if(r instanceof $p)o.push(u);else{var c=nd(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new hs(o);return new qp(s.yt(),u,i.fieldTransforms)}function td(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[sd(e,r,n)],a=[i];if(o.length%2!=0)throw new jo(Uo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(sd(e,o[c])),a.push(o[c+1]);for(var h=[],f=new Rs,l=u.length-1;l>=0;--l)if(!hd(h,u[l])){var p=u[l],d=a[l];d instanceof qo&&(d=d._);var v=s.U_(p);if(d instanceof $p)h.push(p);else{var y=nd(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new hs(h);return new qp(f.yt(),g,s.fieldTransforms)}function ed(t,e,n,r){return void 0===r&&(r=!1),nd(n,t.G_(r?4:3,e))}function nd(t,e){if(t instanceof qo&&(t=t._),id(t))return od("Unsupported field value:",e,t),rd(t,e);if(t instanceof bp)return function(t,e){if(!zp(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=nd(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof qo&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Au(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ts.fromDate(t);return{timestampValue:ja(e.Kt,n)}}if(t instanceof ts)return n=new ts(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ja(e.Kt,n)};if(t instanceof Up)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fo)return{bytesValue:Fa(e.Kt,t.l)};if(t instanceof Op){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ha(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+Np(t))}(t,e)}function rd(t,e){var n={};return cs(t)?e.path&&e.path.length>0&&e.zt.push(e.path):as(t,(function(t,r){var i=nd(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function id(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ts||t instanceof Up||t instanceof Fo||t instanceof Op||t instanceof bp)}function od(t,e,n){if(!id(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Np(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function sd(t,e,n){if(e instanceof qo&&(e=e._),e instanceof mp)return e.d_;if("string"==typeof e)return ad(t,e);throw cd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var ud=new RegExp("[~\\*/\\[\\]]");function ad(t,e,n){if(e.search(ud)>=0)throw cd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(mp.bind.apply(mp,At([void 0],e.split("."))))).d_}catch(r){throw cd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function cd(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new jo(Uo.INVALID_ARGUMENT,(u+=". ")+t+a)}function hd(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fd=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return It(this,void 0,void 0,(function(){var e,n=this;return Et(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new jo(Uo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Et(this,(function(a){switch(a.label){case 0:return n=Oo(t),r=Wa(n.Kt)+"/documents",i={documents:e.map((function(t){return Ba(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Do(!!e.found),e.found.name,e.found.updateTime;var n=Ka(t,e.found.name),r=za(e.found.updateTime),i=new Ls({mapValue:{fields:e.found.fields}});return new Us(n,r,i,{})}(t,e):"missing"in e?function(t,e){Do(!!e.missing),Do(!!e.readTime);var n=Ka(t,e.missing),r=za(e.readTime);return new js(n,r)}(t,e):ko()}(n.Kt,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Do(!!e),u.push(e)})),u)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof js||t instanceof Us?n.sf(t):ko()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new ia(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return It(this,void 0,void 0,(function(){var t,e=this;return Et(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ss.ft(n);e.mutations.push(new oa(r,e.Gt(r)))})),[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Et(this,(function(o){switch(o.label){case 0:return n=Oo(t),r=Wa(n.Kt)+"/documents",i={writes:e.map((function(t){return Qa(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Us)e=t.version;else{if(!(t instanceof js))throw ko();e=es.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new jo(Uo.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?zu.updateTime(e):zu.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(es.min()))throw new jo(Uo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zu.updateTime(e)}return zu.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),ld=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new Gf(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return It(t,void 0,void 0,(function(){var t,e,n=this;return Et(this,(function(r){return t=new fd(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!ms(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ua(e)}return!1},t}(),pd=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=$o.UNAUTHENTICATED,this.clientId=Po.t(),this._f=function(){},this.N=new dc,this.credentials.S((function(t){No("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return It(this,void 0,void 0,(function(){return Et(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new jo(Uo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new dc;return this.fs.Tf((function(){return It(t,void 0,void 0,(function(){var t,n;return Et(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Sc(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function dd(t,e){return It(this,void 0,void 0,(function(){var n,r,i=this;return Et(this,(function(o){switch(o.label){case 0:return t.fs.Af(),No("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.bo((function(){return It(i,void 0,void 0,(function(){return Et(this,(function(t){switch(t.label){case 0:return[4,of(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.yo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function vd(t,e){return It(this,void 0,void 0,(function(){var n,r;return Et(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,yd(t)];case 1:return n=i.sent(),No("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.bo((function(){return function(t,e){return It(this,void 0,void 0,(function(){var n,r;return Et(this,(function(i){switch(i.label){case 0:return(n=Oo(t)).fs.Af(),No("RemoteStore","RemoteStore received new credentials"),r=ol(n),n.Fh.add(3),[4,Qf(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,Yf(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function yd(t){return It(this,void 0,void 0,(function(){return Et(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(No("FirestoreClient","Using default OfflineComponentProvider"),[4,dd(t,new pp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function gd(t){return It(this,void 0,void 0,(function(){return Et(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(No("FirestoreClient","Using default OnlineComponentProvider"),[4,vd(t,new yp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function md(t){return yd(t).then((function(t){return t.persistence}))}function bd(t){return yd(t).then((function(t){return t.Sh}))}function wd(t){return gd(t).then((function(t){return t.gl}))}function _d(t){return gd(t).then((function(t){return t.fa}))}function Id(t){return It(this,void 0,void 0,(function(){var e,n;return Et(this,(function(r){switch(r.label){case 0:return[4,gd(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=Vl.bind(null,e.fa),n.Jh=Ul.bind(null,e.fa),n)]}}))}))}function Ed(t,e,n){var r=this;void 0===n&&(n={});var i=new dc;return t.fs.ys((function(){return It(r,void 0,void 0,(function(){var r;return Et(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new gp({next:function(o){e.ys((function(){return Nl(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new jo(Uo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new jo(Uo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new kl(cu(n.path),o,{includeMetadataChanges:!0,sl:!0});return Tl(t,s)},[4,Id(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function Td(t,e,n){var r=this;void 0===n&&(n={});var i=new dc;return t.fs.ys((function(){return It(r,void 0,void 0,(function(){var r;return Et(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new gp({next:function(n){e.ys((function(){return Nl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new jo(Uo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new kl(n,o,{includeMetadataChanges:!0,sl:!0});return Tl(t,s)},[4,Id(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var Nd=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new Gf(this,"async_queue_retry"),this.vf=function(){var e=zf();e&&No("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=zf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=zf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.bo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return It(this,void 0,void 0,(function(){var t,e=this;return Et(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!wc(t=n.sent()))throw t;return No("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,So("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Ir=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Nc.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&ko()},t.prototype.Af=function(){},t.prototype.Nf=function(){return It(this,void 0,void 0,(function(){var t;return Et(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),Sd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new Nd,r.w_="name"in e?e.name:"[DEFAULT]",r}return wt(e,t),e.prototype.b_=function(){return this.Lf||xd(this),this.Lf.terminate()},e}(Dp);function Ad(t){return t.Lf||xd(t),t.Lf.df(),t.Lf}function xd(t){var e=t.p_(),n=function(t,e,n){return new Bo(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new pd(t.m_,t.Mf,n)}function kd(t,e,n){var r=this,i=new dc;return t.fs.enqueue((function(){return It(r,void 0,void 0,(function(){var r;return Et(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,dd(t,n)];case 1:return o.sent(),[4,vd(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Uo.FAILED_PRECONDITION||t.code===Uo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Dd(t){if(t.R_||t.P_)throw new jo(Uo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Od=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),_s(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ps(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(ds(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw ko()}},t.prototype.jf=function(t,e){var n=this,r={};return as(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Up(ps(t.latitude),ps(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=ys(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(gs(t));default:return null}},t.prototype.Bf=function(t){var e=ls(t);return new ts(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=rs.ct(t);Do(pc(n));var r=new Ko(n.get(1),n.get(3)),i=new ss(n.X(5));return r.isEqual(e)||So("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Cd=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Op(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Pd(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Ld("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Pd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Cd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ld(t,e){return"string"==typeof e?ad(t,e):e instanceof qo?e._.d_:e.d_}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rd(t){if(fu(t)&&0===t.Nt.length)throw new jo(Uo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vd=function(){};function Md(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Ud=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return wt(e,t),e.prototype.Yf=function(t){var e=Bp(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new jo(Uo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Bd(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(Gd(r,t,f))}u={arrayValue:{values:a}}}else u=Gd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Bd(s,o),u=ed(n,"where",s,"in"===o||"not-in"===o);var l=Ks.create(i,o,u);return function(t,e){if(e.xt()){var n=pu(t);if(null!==n&&!n.isEqual(e.field))throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=lu(t);null!==r&&Kd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new jo(Uo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new jo(Uo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new Cp(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new uu(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Vd),jd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return wt(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ru(e,n);return function(t,e){if(null===lu(t)){var n=pu(t);null!==n&&Kd(t,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Cp(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new uu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Vd),Fd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return wt(e,t),e.prototype.Yf=function(t){return new Cp(t.firestore,t.v_,gu(t.C_,this.nd,this.sd))},e}(Vd),qd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return wt(e,t),e.prototype.Yf=function(t){var e=Hd(t,this.type,this.rd,this.od);return new Cp(t.firestore,t.v_,function(t,e){return new uu(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Vd),zd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return wt(e,t),e.prototype.Yf=function(t){var e=Hd(t,this.type,this.rd,this.od);return new Cp(t.firestore,t.v_,function(t,e){return new uu(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Vd);function Hd(t,e,n,r){if(n[0]instanceof qo&&(n[0]=n[0]._),n[0]instanceof Cd)return function(t,e,n,r,i){if(!r)throw new jo(Uo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=vu(t);s<u.length;s++){var a=u[s];if(a.field.ht())o.push(xs(e,r.key));else{var c=r.field(a.field);if(vs(c))throw new jo(Uo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.ot();throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new eu(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Bp(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new jo(Uo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.ht()){if("string"!=typeof c)throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!du(t)&&-1!==c.indexOf("/"))throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(rs.ct(c));if(!ss.Et(h))throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new ss(h);u.push(xs(e,f))}else{var l=ed(n,r,c);u.push(l)}}return new eu(u,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Gd(t,e,n){if(n instanceof qo&&(n=n._),"string"==typeof n){if(""===n)throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!du(e)&&-1!==n.indexOf("/"))throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(rs.ct(n));if(!ss.Et(r))throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return xs(t,new ss(r))}if(n instanceof Op)return xs(t,n.S_);throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Np(n)+".")}function Bd(t,e){if(!Array.isArray(t)||0===t.length)throw new jo(Uo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new jo(Uo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Kd(t,e,n){if(!n.isEqual(e))throw new jo(Uo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $d(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function Jd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Wd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return wt(e,t),e.prototype.Uf=function(t){return new Fo(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Op(this.firestore,null,e)},e}(Od),Xd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Yd=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).zf=e,u.ad=e,u.metadata=o,u}return wt(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Qd(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Ld("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Cd),Qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Yd),Zd=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Xd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Qd(n.zf,n.Hf,r.key,r,new Xd(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new jo(Uo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){var r=new Qd(t.zf,t.Hf,e.doc.key,e.doc,new Xd(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Qd(t.zf,t.Hf,e.doc.key,e.doc,new Xd(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:tv(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function tv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ko()}}function ev(t,e){return t instanceof Yd&&e instanceof Yd?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Zd&&e instanceof Zd&&t.zf===e.zf&&Mp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return wt(e,t),e.prototype.Uf=function(t){return new Fo(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Op(this.firestore,null,e)},e}(Od);function rv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Sp(t,Op);var o=Sp(t.firestore,Sd),s=Bp(o);return e instanceof qo&&(e=e._),ov(o,[("string"==typeof e||e instanceof mp?td(s,"updateDoc",t.S_,e,n,r):Zp(s,"updateDoc",t.S_,e)).F_(t.S_,zu.exists(!0))])}function iv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof qo&&(t=t._);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||$d(i[u])||(s=i[u],u++);var a,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if($d(i[u])){var l=i[u];i[u]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[u+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[u+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof Op)c=Sp(t.firestore,Sd),h=cu(t.S_.path),a={next:function(e){i[u]&&i[u](sv(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=Sp(t,Cp);c=Sp(p.firestore,Sd),h=p.C_;var d=new nv(c);a={next:function(t){i[u]&&i[u](new Zd(c,d,p,t))},error:i[u+1],complete:i[u+2]},Rd(t.C_)}return function(t,e,n,r){var i=this,o=new gp(r),s=new kl(e,o,n);return t.fs.ys((function(){return It(i,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return e=Tl,[4,Id(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return It(i,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return e=Nl,[4,Id(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ad(c),h,f,a)}function ov(t,e){return function(t,e){var n=this,r=new dc;return t.fs.ys((function(){return It(n,void 0,void 0,(function(){var n;return Et(this,(function(i){switch(i.label){case 0:return n=jl,[4,_d(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Ad(t),e)}function sv(t,e,n){var r=n.docs.get(e.S_),i=new nv(t);return new Yd(t,i,e.S_,r,new Xd(n.hasPendingWrites,n.fromCache),e.v_)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uv=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Bp(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=av(t,this.zf),i=Jd(r.v_,e,n),o=Kp(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,zu.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=av(t,this.zf);return e instanceof qo&&(e=e._),o="string"==typeof e||e instanceof mp?td(this.wd,"WriteBatch.update",s.S_,e,n,r):Zp(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,zu.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=av(t,this.zf);return this.fd=this.fd.concat(new ia(e.S_,zu.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new jo(Uo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function av(t,e){if(t instanceof qo&&(t=t._),t.firestore!==e)throw new jo(Uo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return wt(e,t),e.prototype.get=function(e){var n=this,r=av(e,this.zf),i=new nv(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Yd(n.zf,i,r.S_,t.Jf,new Xd(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Bp(t)}return t.prototype.get=function(t){var e=this,n=av(t,this.zf),r=new Wd(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return ko();var i=t[0];if(i instanceof js)return new Cd(e.zf,r,n.S_,null,n.v_);if(i instanceof Us)return new Cd(e.zf,r,i.key,i,n.v_);throw ko()}))},t.prototype.set=function(t,e,n){var r=av(t,this.zf),i=Jd(r.v_,e,n),o=Kp(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=av(t,this.zf);return e instanceof qo&&(e=e._),o="string"==typeof e||e instanceof mp?td(this.wd,"Transaction.update",s.S_,e,n,r):Zp(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=av(t,this.zf);return this.Td.delete(e.S_),this},t}()),hv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Dd(t=Sp(t,Sd));var n=Ad(t),r=t.p_(),i=new yp;return kd(n,i,new dp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Dd(t=Sp(t,Sd));var e=Ad(t),n=t.p_(),r=new yp;return kd(e,r,new vp(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new jo(Uo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new dc;return t.Mf.Tf((function(){return It(e,void 0,void 0,(function(){var e;return Et(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return It(this,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return gc.Wn()?(e=t+"main",[4,gc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Qh(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),fv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Ko||(i.md=e),i}return wt(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Sp(t,Dp)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Ao("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return It(e,void 0,void 0,(function(){var e,n;return Et(this,(function(r){switch(r.label){case 0:return[4,md(t)];case 1:return e=r.sent(),[4,wd(t)];case 2:return n=r.sent(),[2,(e.Vo(!0),function(t){var e=Oo(t);return e.Fh.delete(0),Yf(e)}(n))]}}))}))}))}(Ad(Sp(this._,Sd)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return It(e,void 0,void 0,(function(){var e,n;return Et(this,(function(r){switch(r.label){case 0:return[4,md(t)];case 1:return e=r.sent(),[4,wd(t)];case 2:return n=r.sent(),[2,(e.Vo(!1),function(t){return It(this,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return(e=Oo(t)).Fh.add(0),[4,Qf(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ad(Sp(this._,Sd)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ip("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new dc;return t.fs.ys((function(){return It(e,void 0,void 0,(function(){var e;return Et(this,(function(r){switch(r.label){case 0:return e=Bl,[4,_d(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ad(Sp(this._,Sd)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new gp(e);return t.fs.ys((function(){return It(n,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return e=function(t,e){Oo(t).jh.add(e),e.next()},[4,Id(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return It(n,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return e=function(t,e){Oo(t).jh.delete(e)},[4,Id(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ad(t=Sp(t,Sd)),$d(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new jo(Uo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Nv(this,Lp(this._,t))}catch(t){throw gv(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new yv(this,Rp(this._,t))}catch(t){throw gv(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Iv(this,function(t,e){if(t=Sp(t,Dp),wp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new jo(Uo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Cp(t,null,function(t){return new uu(rs.at(),t)}(e))}(this._,t))}catch(t){throw gv(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new dc;return t.fs.ys((function(){return It(n,void 0,void 0,(function(){var n;return Et(this,(function(i){switch(i.label){case 0:return[4,function(t){return gd(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new ld(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(Ad(t),(function(n){return e(new cv(t,n))}))}(this._,(function(n){return t(new pv(e,n))}))},e.prototype.batch=function(){var t=this;return Ad(this._),new dv(new uv(this._,(function(e){return ov(t._,e)})))},e.prototype.loadBundle=function(t){throw new jo(Uo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new jo(Uo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(qo),lv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return wt(e,t),e.prototype.Uf=function(t){return new Go(new Fo(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return yv.Ad(e,this.firestore,null)},e}(Od);var pv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r.Hf=new lv(e),r}return wt(e,t),e.prototype.get=function(t){var e=this,n=Sv(t);return this._.get(n).then((function(t){return new wv(e.zf,new Yd(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=Sv(t);return n?(_p("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Sv(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,At([s,e,n],i)),this},e.prototype.delete=function(t){var e=Sv(t);return this._.delete(e),this},e}(qo),dv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.set=function(t,e,n){var r=Sv(t);return n?(_p("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Sv(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,At([s,e,n],i)),this},e.prototype.delete=function(t){var e=Sv(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(qo),vv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).zf=e,i.Hf=n,i}return wt(e,t),e.prototype.fromFirestore=function(t,e){var n=new Qd(this.zf._,this.Hf,t.S_,t.Jf,t.metadata,null);return this._.fromFirestore(new _v(this.zf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._.toFirestore(t,e):this._.toFirestore(t)},e.Rd=function(t,n){var r=e.Pd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new lv(t),n),i.set(n,o)),o},e}(qo);vv.Pd=new WeakMap;var yv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new lv(e),r}return wt(e,t),e.yd=function(t,n,r){if(t.length%2!=0)throw new jo(Uo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new Op(n._,r,new ss(t)))},e.Ad=function(t,n,r){return new e(n,new Op(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Nv(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Nv(this.firestore,Lp(this._,t))}catch(t){throw gv(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof qo&&(t=t._),t instanceof Op&&Vp(this._,t)},e.prototype.set=function(t,e){e=_p("DocumentReference.set",e);try{return function(t,e,n){t=Sp(t,Op);var r=Sp(t.firestore,Sd),i=Jd(t.v_,e,n);return ov(r,[Kp(Bp(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,zu.Wt())])}(this._,t,e)}catch(t){throw gv(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?rv(this._,t):rv.apply(void 0,At([this._,t,e],n))}catch(t){throw gv(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return ov(Sp((t=this._).firestore,Sd),[new ia(t.S_,zu.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mv(e),i=bv(e,(function(e){return new wv(t.firestore,new Yd(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return iv(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Sp(t,Op);var e=Sp(t.firestore,Sd),n=Ad(e),r=new nv(e);return function(t,e){var n=this,r=new dc;return t.fs.ys((function(){return It(n,void 0,void 0,(function(){var n;return Et(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return It(this,void 0,void 0,(function(){var r,i;return Et(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Oo(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Us?n.resolve(i):i instanceof js?n.resolve(null):n.reject(new jo(Uo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Sc(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,bd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Yd(e,r,t.S_,n,new Xd(n instanceof Us&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Sp(t,Op);var e=Sp(t.firestore,Sd);return Ed(Ad(e),t.S_,{source:"server"}).then((function(n){return sv(e,t,n)}))}(this._):function(t){t=Sp(t,Op);var e=Sp(t.firestore,Sd);return Ed(Ad(e),t.S_).then((function(n){return sv(e,t,n)}))}(this._)).then((function(t){return new wv(e.firestore,new Yd(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(vv.Rd(this.firestore,t)))},e}(qo);function gv(t,e,n){return t.message=t.message.replace(e,n),t}function mv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!$d(r))return r}return{}}function bv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=$d(t[0])?t[0]:$d(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var wv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return wt(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new yv(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return ev(this._,t._)},e}(qo),_v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.data=function(t){return this._.data(t)},e}(wv),Iv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new lv(e),r}return wt(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Md(this._,function(t,e,n){var r=e,i=Ld("where",t);return new Ud(i,r,n)}(t,n,r)))}catch(t){throw gv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Md(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Ld("orderBy",t);return new jd(r,n)}(t,n)))}catch(t){throw gv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Md(this._,function(t){return Ap("limit",t),new Fd("limit",t,"F")}(t)))}catch(t){throw gv(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Md(this._,function(t){return Ap("limitToLast",t),new Fd("limitToLast",t,"L")}(t)))}catch(t){throw gv(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Md(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qd("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw gv(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Md(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qd("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw gv(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Md(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zd("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw gv(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Md(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zd("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw gv(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Mp(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Sp(t,Cp);var e=Sp(t.firestore,Sd),n=Ad(e),r=new nv(e);return function(t,e){var n=this,r=new dc;return t.fs.ys((function(){return It(n,void 0,void 0,(function(){var n;return Et(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,s,u;return Et(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,lf(t,e,!0)];case 1:return u=a.sent(),r=new Cl(e,u.Pc),i=r.dl(u.documents),o=r.Ei(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Sc(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,bd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Zd(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Sp(t,Cp);var e=Sp(t.firestore,Sd),n=Ad(e),r=new nv(e);return Td(n,t.C_,{source:"server"}).then((function(n){return new Zd(e,r,t,n)}))}(this._):function(t){t=Sp(t,Cp);var e=Sp(t.firestore,Sd),n=Ad(e),r=new nv(e);return Rd(t.C_),Td(n,t.C_).then((function(n){return new Zd(e,r,t,n)}))}(this._)).then((function(t){return new Tv(e.firestore,new Zd(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mv(e),i=bv(e,(function(e){return new Tv(t.firestore,new Zd(t.firestore._,t.Hf,t._,e.ud))}));return iv(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(vv.Rd(this.firestore,t)))},e}(qo),Ev=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return wt(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new _v(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(qo),Tv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return wt(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Iv(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new _v(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new Ev(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new _v(n.zf,r))}))},e.prototype.isEqual=function(t){return ev(this._,t._)},e}(qo),Nv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return wt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new yv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new yv(this.firestore,void 0===t?Rp(this._):Rp(this._,t))}catch(t){throw gv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Sp(t.firestore,Sd),r=Rp(t),i=Jd(t.v_,e);return ov(n,[Kp(Bp(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,zu.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new yv(e.firestore,t)}))},e.prototype.isEqual=function(t){return Vp(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(vv.Rd(this.firestore,t)))},e}(Iv);function Sv(t){return t instanceof qo&&(t=t._),Sp(t,Op)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Av,xv=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(mp.bind.apply(mp,At([void 0],e))))||this}return wt(e,t),e.documentId=function(){return new e(os.lt().ot())},e.prototype.isEqual=function(t){return t instanceof qo&&(t=t._),t instanceof mp&&this._.d_.isEqual(t.d_)},e}(qo),kv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.serverTimestamp=function(){var t=new Wp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new $p("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xp("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yp("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Qp("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(qo),Dv={Firestore:fv,GeoPoint:Up,Timestamp:ts,Blob:Go,Transaction:pv,WriteBatch:dv,DocumentReference:yv,DocumentSnapshot:wv,Query:Iv,QueryDocumentSnapshot:_v,QuerySnapshot:Tv,CollectionReference:Nv,FieldPath:xv,FieldValue:kv,setLogLevel:function(t){var e;e=t,Eo.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Ft("firestore",(function(t){return function(t,e){return new fv(t,new Sd(t,e),new hv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Dv)))})(Av=de),Av.registerVersion("@firebase/firestore","2.1.3");de.initializeApp({projectId:"sample-project-294713"});const Ov=function(){const t=window.location.search;let e;if(t)e=t.substring(1);else{const t=mt();window.location.hash=t,window.history.replaceState("","","?"+t),e=t}return e}(),Cv=de.firestore().collection("rooms").doc(Ov),Pv=function(){const{subscribe:t,set:e}=ht([]);return{subscribe:t,set:e,append:(t,e)=>{Cv.get().then((n=>{let r=[],i={closed:!0};if(n&&n.exists){const e=n.data();r=[...e.estimates.filter((e=>e.name!==t))],i=e.tableState}r.push({name:t,point:e,appendedAt:de.firestore.Timestamp.now()}),Cv.set({estimates:r,tableState:i})}))},remove:(t,e=null)=>{Cv.get().then((n=>{if(n&&n.exists){const r=n.data();r.estimates=r.estimates.filter((e=>e.name!==t)),Cv.set(r).then(e)}else e()}))},clear:()=>{Cv.delete()}}}(),Lv=function(){const{subscribe:t,set:e,update:n}=ht({closed:!0});return{subscribe:t,set:e,open:()=>{Cv.get().then((t=>{if(t&&t.exists){const e=t.data();e.tableState={closed:!1},Cv.set(e)}}))},close:()=>{Cv.delete()}}}(),Rv=new Promise((t=>{Cv.onSnapshot((t=>{if(t&&t.exists){const e=t.data(),n=(t,e)=>t.appendedAt.seconds-e.appendedAt.seconds;Pv.set(e.estimates.sort(n)),Lv.set(e.tableState)}else Pv.set([]),Lv.set({closed:!0})})),t()}));function Vv(e){let n,r,i,o,s=(e[2]?"":e[0])+"";return{c(){n=y("div"),r=g(s),w(n,"class","card svelte-tq9sw8"),E(n,"closed",e[2]),E(n,"selected",e[1])},m(t,s){d(t,n,s),p(n,r),i||(o=b(n,"click",e[3]),i=!0)},p(t,[e]){5&e&&s!==(s=(t[2]?"":t[0])+"")&&_(r,s),4&e&&E(n,"closed",t[2]),2&e&&E(n,"selected",t[1])},i:t,o:t,d(t){t&&v(n),i=!1,o()}}}function Mv(t,e,n){let{point:r}=e,{selected:i=!1}=e,{closed:o=!1}=e;const s=function(){const t=O();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=T(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}();return t.$$set=t=>{"point"in t&&n(0,r=t.point),"selected"in t&&n(1,i=t.selected),"closed"in t&&n(2,o=t.closed)},[r,i,o,function(){s("selectCard",{point:r})}]}class Uv extends st{constructor(t){super(),ot(this,t,Mv,Vv,s,{point:0,selected:1,closed:2})}}function jv(t,e,n){const r=t.slice();return r[5]=e[n],r}function Fv(t,e){let n,r,i,o,s,u,a,c,h=e[5].name+"";return r=new Uv({props:{point:e[5].point,closed:e[0].closed}}),{key:t,first:null,c(){n=y("div"),et(r.$$.fragment),i=m(),o=y("div"),s=g(h),u=m(),w(o,"class","name svelte-1nfxwa2"),w(n,"class","estimate svelte-1nfxwa2"),this.first=n},m(t,e){d(t,n,e),nt(r,n,null),p(n,i),p(n,o),p(o,s),p(n,u),c=!0},p(t,n){e=t;const i={};2&n&&(i.point=e[5].point),1&n&&(i.closed=e[0].closed),r.$set(i),(!c||2&n)&&h!==(h=e[5].name+"")&&_(s,h)},i(t){c||(W(r.$$.fragment,t),U((()=>{a||(a=Q(n,at,{y:100},!0)),a.run(1)})),c=!0)},o(t){X(r.$$.fragment,t),a||(a=Q(n,at,{y:100},!1)),a.run(0),c=!1},d(t){t&&v(n),rt(r),t&&a&&a.end()}}}function qv(t){let e,n,r,i,o=t[0].closed?"open":"return";return{c(){e=y("div"),n=g(o),w(e,"class","open-button svelte-1nfxwa2")},m(o,s){d(o,e,s),p(e,n),r||(i=b(e,"click",t[2]),r=!0)},p(t,e){1&e&&o!==(o=t[0].closed?"open":"return")&&_(n,o)},d(t){t&&v(e),r=!1,i()}}}function zv(e){let n,r,i;return{c(){n=y("div"),n.textContent="Copy",w(n,"class","copy-button svelte-1nfxwa2")},m(t,o){d(t,n,o),r||(i=b(n,"click",e[3]),r=!0)},p:t,d(t){t&&v(n),r=!1,i()}}}function Hv(t){let e,n,r,i,o,s=[],u=new Map,a=t[1];const c=t=>t[5].name;for(let e=0;e<a.length;e+=1){let n=jv(t,a,e),r=c(n);u.set(r,s[e]=Fv(r,n))}let h=(t[1].length>0||!t[0].closed)&&qv(t),f=!t[0].closed&&zv(t);return{c(){e=y("div"),n=y("div");for(let t=0;t<s.length;t+=1)s[t].c();r=m(),h&&h.c(),i=m(),f&&f.c(),w(n,"class","estimates svelte-1nfxwa2"),w(e,"class","table svelte-1nfxwa2")},m(t,u){d(t,e,u),p(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);p(e,r),h&&h.m(e,null),p(e,i),f&&f.m(e,null),o=!0},p(t,[r]){3&r&&(a=t[1],$(),s=function(t,e,n,r,i,o,s,u,a,c,h,f){let l=t.length,p=o.length,d=l;const v={};for(;d--;)v[t[d].key]=d;const y=[],g=new Map,m=new Map;for(d=p;d--;){const t=f(i,o,d),u=n(t);let a=s.get(u);a?r&&a.p(t,e):(a=c(u,t),a.c()),g.set(u,y[d]=a),u in v&&m.set(u,Math.abs(d-v[u]))}const b=new Set,w=new Set;function _(t){W(t,1),t.m(u,h),s.set(t.key,t),h=t.first,p--}for(;l&&p;){const e=y[p-1],n=t[l-1],r=e.key,i=n.key;e===n?(h=e.first,l--,p--):g.has(i)?!s.has(r)||b.has(r)?_(e):w.has(i)?l--:m.get(r)>m.get(i)?(w.add(r),_(e)):(b.add(i),l--):(a(n,s),l--)}for(;l--;){const e=t[l];g.has(e.key)||a(e,s)}for(;p;)_(y[p-1]);return y}(s,r,c,1,t,a,u,n,tt,Fv,null,jv),J()),t[1].length>0||!t[0].closed?h?h.p(t,r):(h=qv(t),h.c(),h.m(e,i)):h&&(h.d(1),h=null),t[0].closed?f&&(f.d(1),f=null):f?f.p(t,r):(f=zv(t),f.c(),f.m(e,null))},i(t){if(!o){for(let t=0;t<a.length;t+=1)W(s[t]);o=!0}},o(t){for(let t=0;t<s.length;t+=1)X(s[t]);o=!1},d(t){t&&v(e);for(let t=0;t<s.length;t+=1)s[t].d();h&&h.d(),f&&f.d()}}}function Gv(t,e,n){let r,i;return u(t,Lv,(t=>n(0,r=t))),u(t,Pv,(t=>n(1,i=t))),[r,i,function(t){r.closed?i.length>0&&Lv.open():(Pv.clear(),Lv.close())},function(t){const e=function(){if(0===i.length)return"empty.";const t=new Date;return"["+t.toLocaleDateString()+" "+t.toLocaleTimeString()+"] "+i.sort(((t,e)=>t.name>e.name?1:-1)).reduce(((t,e)=>(t?t+" ":"")+`${e.name}(${e.point})`),null)}();navigator.clipboard.writeText(e)}]}class Bv extends st{constructor(t){super(),ot(this,t,Gv,Hv,s,{})}}function Kv(t,e,n){const r=t.slice();return r[5]=e[n],r}function $v(t){let e,n;return e=new Uv({props:{point:t[5],selected:t[1]===t[5]}}),e.$on("selectCard",t[3]),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.selected=t[1]===t[5]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){X(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function Jv(t){let e,n,r,i,o,s=t[2],u=[];for(let e=0;e<s.length;e+=1)u[e]=$v(Kv(t,s,e));const a=t=>X(u[t],1,1,(()=>{u[t]=null}));return{c(){e=y("div"),n=y("div"),r=g(t[0]),i=m();for(let t=0;t<u.length;t+=1)u[t].c();w(n,"class","user-name svelte-4f78du"),w(e,"class","svelte-4f78du")},m(t,s){d(t,e,s),p(e,n),p(n,r),p(e,i);for(let t=0;t<u.length;t+=1)u[t].m(e,null);o=!0},p(t,[n]){if((!o||1&n)&&_(r,t[0]),14&n){let r;for(s=t[2],r=0;r<s.length;r+=1){const i=Kv(t,s,r);u[r]?(u[r].p(i,n),W(u[r],1)):(u[r]=$v(i),u[r].c(),W(u[r],1),u[r].m(e,null))}for($(),r=s.length;r<u.length;r+=1)a(r);J()}},i(t){if(!o){for(let t=0;t<s.length;t+=1)W(u[t]);o=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)X(u[t]);o=!1},d(t){t&&v(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(u,t)}}}function Wv(t,e,n){let r,i;u(t,Pv,(t=>n(4,i=t)));let o;for(;!(o=window.prompt("your name")););return t.$$.update=()=>{17&t.$$.dirty&&n(1,r=i.filter((t=>t.name===o)).map((t=>t.point)).pop())},[o,r,["0","1","2","3","5","8","13","21","34","55","?",""],function(t){const e=()=>Pv.append(o,t.detail.point);r?Pv.remove(o,r===t.detail.point?null:()=>setTimeout(e,300)):e()},i]}class Xv extends st{constructor(t){super(),ot(this,t,Wv,Jv,s,{})}}const{document:Yv}=Z;function Qv(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Zv(t){let e,n,r,i,o,s,u,a,c;return s=new Bv({}),a=new Xv({}),{c(){e=y("h1"),n=g(t[0]),r=m(),i=y("p"),i.textContent="share the URL of this page with your team members.",o=m(),et(s.$$.fragment),u=m(),et(a.$$.fragment),w(e,"class","svelte-1jbuo5y"),w(i,"class","svelte-1jbuo5y")},m(h,f){d(h,e,f),p(e,n),t[4](e),d(h,r,f),d(h,i,f),d(h,o,f),nt(s,h,f),d(h,u,f),nt(a,h,f),c=!0},p(t,e){(!c||1&e)&&_(n,t[0])},i(t){c||(W(s.$$.fragment,t),W(a.$$.fragment,t),c=!0)},o(t){X(s.$$.fragment,t),X(a.$$.fragment,t),c=!1},d(n){n&&v(e),t[4](null),n&&v(r),n&&v(i),n&&v(o),rt(s,n),n&&v(u),rt(a,n)}}}function ty(e){let n;return{c(){n=y("p"),n.textContent="...waiting",w(n,"class","svelte-1jbuo5y")},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&v(n)}}}function ey(t){let e,n,r,i,o,s,u;Yv.title=e=t[0];let a={ctx:t,current:null,token:null,hasCatch:!1,pending:ty,then:Zv,catch:Qv,blocks:[,,,]};return function(t,e){const n=e.token={};function r(t,r,i,o){if(e.token!==n)return;e.resolved=o;let s=e.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const u=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&($(),X(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),J())})):e.block.d(1),u.c(),W(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&q()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=O();if(t.then((t=>{D(n),r(e.then,1,e.value,t),D(null)}),(t=>{if(D(n),r(e.catch,2,e.error,t),D(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var i}(Rv,a),{c(){n=y("link"),r=m(),i=y("main"),a.block.c(),w(n,"href","https://fonts.googleapis.com/css?family=M+PLUS+1p"),w(n,"rel","stylesheet"),I(i,"height",t[2]),w(i,"class","svelte-1jbuo5y")},m(e,c){p(Yv.head,n),d(e,r,c),d(e,i,c),a.block.m(i,a.anchor=null),a.mount=()=>i,a.anchor=null,o=!0,s||(u=b(window,"resize",t[3]),s=!0)},p(n,[r]){t=n,(!o||1&r)&&e!==(e=t[0])&&(Yv.title=e);{const e=t.slice();a.block.p(e,r)}(!o||4&r)&&I(i,"height",t[2])},i(t){o||(W(a.block),o=!0)},o(t){for(let t=0;t<3;t+=1){X(a.blocks[t])}o=!1},d(t){v(n),t&&v(r),t&&v(i),a.block.d(),a.token=null,a=null,s=!1,u()}}}function ny(t,e,n){let r,{name:i}=e,o="auto";const s=()=>{n(2,o=document.documentElement.offsetHeight<document.documentElement.scrollHeight?"auto":"100%")};return t.$$set=t=>{"name"in t&&n(0,i=t.name)},t.$$.update=()=>{2&t.$$.dirty&&r&&s()},[i,r,o,s,function(t){P[t?"unshift":"push"]((()=>{r=t,n(1,r)}))}]}return new class extends st{constructor(t){super(),ot(this,t,ny,ey,s,{name:0})}}({target:document.body,props:{name:"Planning Poker"}})}();
//# sourceMappingURL=bundle.js.map
