var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}const a="undefined"!=typeof window;let c=a?()=>window.performance.now():()=>Date.now(),h=a?t=>requestAnimationFrame(t):t;const f=new Set;function l(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&h(l)}function p(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function b(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e,n){t.classList[n?"add":"remove"](e)}function I(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const T=new Set;let N,x=0;function A(t,e,n,r,i,o,s,u=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const h=c+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${u}`,l=t.ownerDocument;T.add(l);const p=l.__svelte_stylesheet||(l.__svelte_stylesheet=l.head.appendChild(y("style")).sheet),d=l.__svelte_rules||(l.__svelte_rules={});d[f]||(d[f]=!0,p.insertRule(`@keyframes ${f} ${h}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?v+", ":""}${f} ${r}ms linear ${i}ms 1 both`,x+=1,f}function S(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),x-=i,x||h((()=>{x||(T.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),T.clear())})))}function O(t){N=t}function k(){if(!N)throw new Error("Function called outside component initialization");return N}const D=[],P=[],C=[],L=[],R=Promise.resolve();let V=!1;function M(t){C.push(t)}let j=!1;const U=new Set;function F(){if(!j){j=!0;do{for(let t=0;t<D.length;t+=1){const e=D[t];O(e),q(e.$$)}for(O(null),D.length=0;P.length;)P.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];U.has(e)||(U.add(e),e())}C.length=0}while(D.length);for(;L.length;)L.pop()();V=!1,j=!1,U.clear()}}function q(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}let B;function z(t,e,n){t.dispatchEvent(I(`${e?"intro":"outro"}${n}`))}const G=new Set;let K;function $(){K={r:0,c:[],p:K}}function H(){K.r||i(K.c),K=K.p}function Q(t,e){t&&t.i&&(G.delete(t),t.i(e))}function W(t,e,n,r){if(t&&t.o){if(G.has(t))return;G.add(t),K.c.push((()=>{G.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const Y={duration:0};function X(n,r,s,u){let a=r(n,s),p=u?0:1,d=null,v=null,y=null;function g(){y&&S(n,y)}function m(t,e){const n=t.b-p;return e*=Math.abs(n),{a:p,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(r){const{delay:o=0,duration:s=300,easing:u=e,tick:b=t,css:w}=a||Y,_={start:c()+o,b:r};r||(_.group=K,K.r+=1),d||v?v=_:(w&&(g(),y=A(n,p,r,s,o,u,w)),r&&b(0,1),d=m(_,s),M((()=>z(n,r,"start"))),function(t){let e;0===f.size&&h(l),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(v&&t>v.start&&(d=m(v,s),v=null,z(n,d.b,"start"),w&&(g(),y=A(n,p,d.b,d.duration,0,u,a.css))),d)if(t>=d.end)b(p=d.b,1-p),z(n,d.b,"end"),v||(d.b?g():--d.group.r||i(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;p=d.a+d.d*u(e/d.duration),b(p,1-p)}return!(!d&&!v)})))}return{run(t){o(a)?(B||(B=Promise.resolve(),B.then((()=>{B=null}))),B).then((()=>{a=a(),b(t)})):b(t)},end(){g(),d=v=null}}}function J(t,e){W(t,1,1,(()=>{e.delete(t.key)}))}function Z(t){t&&t.c()}function tt(t,e,r){const{fragment:s,on_mount:u,on_destroy:a,after_update:c}=t.$$;s&&s.m(e,r),M((()=>{const e=u.map(n).filter(o);a?a.push(...e):i(e),t.$$.on_mount=[]})),c.forEach(M)}function et(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(D.push(t),V||(V=!0,R.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(e,n,o,s,u,a,c=[-1]){const h=N;O(e);const f=n.props||{},l=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(l.ctx=o?o(e,f,((t,n,...r)=>{const i=r.length?r[0]:n;return l.ctx&&u(l.ctx[t],l.ctx[t]=i)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](i),p&&nt(e,t)),n})):[],l.update(),p=!0,i(l.before_update),l.fragment=!!s&&s(l.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);l.fragment&&l.fragment.l(t),t.forEach(v)}else l.fragment&&l.fragment.c();n.intro&&Q(e.$$.fragment),tt(e,n.target,n.anchor),F()}O(h)}class it{$destroy(){et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ot(t){const e=t-1;return e*e*e+1}function st(t,{delay:e=0,duration:n=400,easing:r=ot,x:i=0,y:o=0,opacity:s=0}){const u=getComputedStyle(t),a=+u.opacity,c="none"===u.transform?"":u.transform,h=a*(1-s);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${a-h*e}`}}const ut=[];function at(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!ut.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),ut.push(n,e)}if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,u=t){const a=[s,u];return i.push(a),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(a);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}var ct="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),ht=new Uint8Array(16);function ft(){if(!ct)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ct(ht)}var lt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function pt(t){return"string"==typeof t&&lt.test(t)}for(var dt=[],vt=0;vt<256;++vt)dt.push((vt+256).toString(16).substr(1));function yt(t,e,n){var r=(t=t||{}).random||(t.rng||ft)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(dt[t[e+0]]+dt[t[e+1]]+dt[t[e+2]]+dt[t[e+3]]+"-"+dt[t[e+4]]+dt[t[e+5]]+"-"+dt[t[e+6]]+dt[t[e+7]]+"-"+dt[t[e+8]]+dt[t[e+9]]+"-"+dt[t[e+10]]+dt[t[e+11]]+dt[t[e+12]]+dt[t[e+13]]+dt[t[e+14]]+dt[t[e+15]]).toLowerCase();if(!pt(n))throw TypeError("Stringified UUID is invalid");return n}(r)}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var gt=function(t,e){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function mt(t,e){function n(){this.constructor=t}gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var bt=function(){return(bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function wt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function _t(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function Et(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function It(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Tt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(It(arguments[e]));return t}function Nt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=xt(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var At=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function St(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ot(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var kt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Dt.prototype.create),o}return mt(e,t),e}(Error),Dt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Pt(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new kt(i,u,r);return a},t}();function Pt(t,e){return t.replace(Ct,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Ct=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Lt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Rt(t,e){var n=new Vt(t,e);return n.subscribe.bind(n)}var Vt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Mt),void 0===r.error&&(r.error=Mt),void 0===r.complete&&(r.complete=Mt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Mt(){}var jt=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),Ut="[DEFAULT]",Ft=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=Ut);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new At;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=bt({identifier:Ut,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService(Ut)}catch(t){}try{for(var r=Et(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=It(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Ut),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return wt(this,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Tt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===Ut?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Ut:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qt,Bt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ft(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function zt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gt,Kt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Gt||(Gt={}));var $t,Ht={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},Qt=Gt.INFO,Wt=((qt={})[Gt.DEBUG]="log",qt[Gt.VERBOSE]="log",qt[Gt.INFO]="info",qt[Gt.WARN]="warn",qt[Gt.ERROR]="error",qt),Yt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Wt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,zt(["["+i+"]  "+t.name+":"],n))}},Xt=function(){function t(t){this.name=t,this._logLevel=Qt,this._logHandler=Yt,this._userLogHandler=null,Kt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Gt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ht[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zt([this,Gt.DEBUG],t)),this._logHandler.apply(this,zt([this,Gt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zt([this,Gt.VERBOSE],t)),this._logHandler.apply(this,zt([this,Gt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zt([this,Gt.INFO],t)),this._logHandler.apply(this,zt([this,Gt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zt([this,Gt.WARN],t)),this._logHandler.apply(this,zt([this,Gt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zt([this,Gt.ERROR],t)),this._logHandler.apply(this,zt([this,Gt.ERROR],t))},t}();function Jt(t){Kt.forEach((function(e){e.setLogLevel(t)}))}var Zt,te=(($t={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",$t["bad-app-name"]="Illegal App name: '{$appName}",$t["duplicate-app"]="Firebase App named '{$appName}' already exists",$t["app-deleted"]="Firebase App named '{$appName}' already deleted",$t["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",$t["invalid-log-argument"]="First argument to `onLog` must be null or a function.",$t),ee=new Dt("app","Firebase",te),ne="@firebase/app",re="[DEFAULT]",ie=((Zt={})[ne]="fire-core",Zt["@firebase/analytics"]="fire-analytics",Zt["@firebase/auth"]="fire-auth",Zt["@firebase/database"]="fire-rtdb",Zt["@firebase/functions"]="fire-fn",Zt["@firebase/installations"]="fire-iid",Zt["@firebase/messaging"]="fire-fcm",Zt["@firebase/performance"]="fire-perf",Zt["@firebase/remote-config"]="fire-rc",Zt["@firebase/storage"]="fire-gcs",Zt["@firebase/firestore"]="fire-fst",Zt["fire-js"]="fire-js",Zt["firebase-wrapper"]="fire-js-all",Zt),oe=new Xt("@firebase/app"),se=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=xt(void 0,t),this.container=new Bt(e.name),this._addComponent(new jt("app",(function(){return o}),"PUBLIC"));try{for(var s=Et(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=re),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=re),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){oe.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ee.create("app-deleted",{appName:this.name_})},t}();se.prototype.name&&se.prototype.options||se.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ue(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=re);var s=o.name;if("string"!=typeof s||!s)throw ee.create("bad-app-name",{appName:String(s)});if(Lt(e,s))throw ee.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=ie[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void oe.warn(a.join(" "))}o(new jt(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Jt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ee.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Ht[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Gt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Kt;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Lt(e,t=t||re))throw ee.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return oe.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw ee.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&xt(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=Et(Object.keys(e)),f=h.next();!f.done;f=h.next()){var l=f.value;e[l]._addComponent(o)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ae=function t(){var e=ue(se);return e.INTERNAL=bt(bt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){xt(e,t)},createSubscribe:Rt,ErrorFactory:Dt,deepExtend:xt}),e}(),ce=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){oe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var he=self.firebase.SDK_VERSION;he&&he.indexOf("LITE")>=0&&oe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var fe=ae.initializeApp;ae.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ot()&&oe.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),fe.apply(void 0,t)};var le=ae;!function(t,e){t.INTERNAL.registerComponent(new jt("platform-logger",(function(t){return new ce(t)}),"PRIVATE")),t.registerVersion(ne,"0.6.13",e),t.registerVersion("fire-js","")}(le);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
le.registerVersion("firebase","8.0.2","app");
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var pe=function(t,e){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function de(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ve,ye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ge=ge||{},me=ye||self;function be(){}function we(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function _e(t){var e=we(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Ee(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ie="closure_uid_"+(1e9*Math.random()>>>0),Te=0;function Ne(t,e,n){return t.call.apply(t.bind,arguments)}function xe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ae(t,e,n){return(Ae=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ne:xe).apply(null,arguments)}function Se(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var Oe=Date.now;function ke(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function De(){this.j=this.j,this.i=this.i}De.prototype.j=!1,De.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Ie)&&t[Ie]||(t[Ie]=++Te)})(this)},De.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Pe=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ce=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Le(t){return Array.prototype.concat.apply([],arguments)}function Re(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ve(t){return/^[\s\xa0]*$/.test(t)}var Me,je=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ue(t,e){return-1!=t.indexOf(e)}function Fe(t,e){return t<e?-1:t>e?1:0}t:{var qe=me.navigator;if(qe){var Be=qe.userAgent;if(Be){Me=Be;break t}}Me=""}function ze(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ge(t){var e={};for(var n in t)e[n]=t[n];return e}var Ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ke.length;o++)n=Ke[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function He(t){return He[" "](t),t}He[" "]=be;var Qe,We,Ye=Ue(Me,"Opera"),Xe=Ue(Me,"Trident")||Ue(Me,"MSIE"),Je=Ue(Me,"Edge"),Ze=Je||Xe,tn=Ue(Me,"Gecko")&&!(Ue(Me.toLowerCase(),"webkit")&&!Ue(Me,"Edge"))&&!(Ue(Me,"Trident")||Ue(Me,"MSIE"))&&!Ue(Me,"Edge"),en=Ue(Me.toLowerCase(),"webkit")&&!Ue(Me,"Edge");function nn(){var t=me.document;return t?t.documentMode:void 0}t:{var rn="",on=(We=Me,tn?/rv:([^\);]+)(\)|;)/.exec(We):Je?/Edge\/([\d\.]+)/.exec(We):Xe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(We):en?/WebKit\/(\S+)/.exec(We):Ye?/(?:Version)[ \/]?(\S+)/.exec(We):void 0);if(on&&(rn=on?on[1]:""),Xe){var sn=nn();if(null!=sn&&sn>parseFloat(rn)){Qe=String(sn);break t}}Qe=rn}var un,an={};function cn(t){return function(t,e){var n=an;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=je(String(Qe)).split("."),r=je(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=Fe(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Fe(0==s[2].length,0==u[2].length)||Fe(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(me.document&&Xe){var hn=nn();un=hn||(parseInt(Qe,10)||void 0)}else un=void 0;var fn=un,ln=!Xe||9<=Number(fn),pn=Xe&&!cn("9"),dn=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{me.addEventListener("test",be,e),me.removeEventListener("test",be,e)}catch(t){}return t}();function vn(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function yn(t,e){if(vn.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(tn){t:{try{He(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:gn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}vn.prototype.b=function(){this.defaultPrevented=!0},ke(yn,vn);var gn={2:"touch",3:"pen",4:"mouse"};yn.prototype.b=function(){yn.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,pn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var mn="closure_listenable_"+(1e6*Math.random()|0),bn=0;function wn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++bn,this.Y=this.Z=!1}function _n(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function En(t){this.src=t,this.a={},this.b=0}function In(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Pe(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(_n(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Tn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}En.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Tn(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new wn(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Nn="closure_lm_"+(1e6*Math.random()|0),xn={};function An(t,e,n,r,i){if(r&&r.once)return On(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)An(t,e[o],n,r,i);return null}return n=Mn(n),t&&t[mn]?t.va(e,n,Ee(r)?!!r.capture:!!r,i):Sn(t,e,n,!1,r,i)}function Sn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ee(i)?!!i.capture:!!i;if(s&&!ln)return null;var u=Rn(t);if(u||(t[Nn]=u=new En(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ln,e=ln?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)dn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function On(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)On(t,e[o],n,r,i);return null}return n=Mn(n),t&&t[mn]?t.wa(e,n,Ee(r)?!!r.capture:!!r,i):Sn(t,e,n,!0,r,i)}function kn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)kn(t,e[o],n,r,i);else r=Ee(r)?!!r.capture:!!r,n=Mn(n),t&&t[mn]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=Tn(o=t.a[e],n,r,i))&&(_n(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Rn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Tn(e,n,r,i)),(n=-1<t?e[t]:null)&&Dn(n))}function Dn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[mn])In(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Rn(e))?(In(n,t),0==n.b&&(n.src=null,e[Nn]=null)):_n(t)}}}function Pn(t){return t in xn?xn[t]:xn[t]="on"+t}function Cn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Dn(t),n.call(r,e)}function Ln(t,e){if(t.Y)return!0;if(!ln){if(!e)t:{e=["window","event"];for(var n=me,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Cn(t,e=new yn(e,this))}return Cn(t,new yn(e,this))}function Rn(t){return(t=t[Nn])instanceof En?t:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mn(t){return"function"==we(t)?t:(t[Vn]||(t[Vn]=function(e){return t.handleEvent(e)}),t[Vn])}function jn(){De.call(this),this.c=new En(this),this.J=this,this.C=null}function Un(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&In(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}ke(jn,De),jn.prototype[mn]=!0,(ve=jn.prototype).addEventListener=function(t,e,n,r){An(this,t,e,n,r)},ve.removeEventListener=function(t,e,n,r){kn(this,t,e,n,r)},ve.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new vn(t,n);else if(t instanceof vn)t.target=t.target||n;else{var i=t;$e(t=new vn(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Un(s,r,!0,t)&&i}if(i=Un(s=t.a=n,r,!0,t)&&i,i=Un(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Un(s=t.a=e[o],r,!1,t)&&i;return i},ve.G=function(){if(jn.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)_n(n[r]);delete e.a[t],e.b--}}this.C=null},ve.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ve.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Fn=me.JSON.stringify;function qn(){this.b=this.a=null}var Bn,zn=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Kn}),(function(t){t.reset()}),100);function Gn(){var t=Wn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Kn(){this.next=this.b=this.a=null}function $n(t){me.setTimeout((function(){throw t}),0)}function Hn(t,e){Bn||function(){var t=me.Promise.resolve(void 0);Bn=function(){t.then(Yn)}}(),Qn||(Bn(),Qn=!0),Wn.add(t,e)}qn.prototype.add=function(t,e){var n=zn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Kn.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Kn.prototype.reset=function(){this.next=this.b=this.a=null};var Qn=!1,Wn=new qn;function Yn(){for(var t;t=Gn();){try{t.a.call(t.b)}catch(t){$n(t)}var e=zn;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Qn=!1}function Xn(t,e){jn.call(this),this.b=t||1,this.a=e||me,this.f=Ae(this.Ya,this),this.g=Oe()}function Jn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Zn(t,e,n){if("function"==we(t))n&&(t=Ae(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ae(t.handleEvent,t)}return 2147483647<Number(e)?-1:me.setTimeout(t,e||0)}function tr(t){t.a=Zn((function(){t.a=null,t.c&&(t.c=!1,tr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ke(Xn,jn),(ve=Xn.prototype).aa=!1,ve.M=null,ve.Ya=function(){if(this.aa){var t=Oe()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Jn(this),this.start()))}},ve.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Oe())},ve.G=function(){Xn.S.G.call(this),Jn(this),delete this.a};var er=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}pe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:tr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(me.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(De);function nr(t){De.call(this),this.b=t,this.a={}}ke(nr,De);var rr=[];function ir(t,e,n,r){Array.isArray(n)||(n&&(rr[0]=n.toString()),n=rr);for(var i=0;i<n.length;i++){var o=An(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function or(t){ze(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Dn(t)}),t),t.a={}}function sr(){this.a=!0}function ur(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Fn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}nr.prototype.G=function(){nr.S.G.call(this),or(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sr.prototype.info=function(){};var ar=null;function cr(){return ar=ar||new jn}function hr(t){vn.call(this,"serverreachability",t)}function fr(t){var e=cr();e.dispatchEvent(new hr(e,t))}function lr(t){vn.call(this,"statevent",t)}function pr(t){var e=cr();e.dispatchEvent(new lr(e,t))}function dr(t){vn.call(this,"timingevent",t)}function vr(t,e){if("function"!=we(t))throw Error("Fn must not be null and must be a function");return me.setTimeout((function(){t()}),e)}ke(hr,vn),ke(lr,vn),ke(dr,vn);var yr={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},gr={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function mr(){}function br(t){var e;return(e=t.a)||(e=t.a={}),e}function wr(){}mr.prototype.a=null;var _r,Er={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Ir(){vn.call(this,"d")}function Tr(){vn.call(this,"c")}function Nr(){}function xr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new nr(this),this.P=Ar,t=Ze?125:void 0,this.R=new Xn(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}ke(Ir,vn),ke(Tr,vn),ke(Nr,mr),_r=new Nr;var Ar=45e3,Sr={},Or={};function kr(t,e,n){t.H=1,t.i=Jr($r(e)),t.j=n,t.I=!0,Dr(t,null)}function Dr(t,e){t.u=Oe(),Lr(t),t.l=$r(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),fi(n.b,"t",r),t.D=0,t.a=oo(t.g,t.g.C?e:null),0<t.O&&(t.F=new er(Ae(t.Ca,t,t.a),t.O)),ir(t.J,t.a,"readystatechange",t.Wa),e=t.B?Ge(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),fr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function Pr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Cr(t,n);if(i==Or){4==e&&(t.h=4,pr(14),r=!1),ur(t.c,t.f,null,"[Incomplete Response]");break}if(i==Sr){t.h=4,pr(15),ur(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ur(t.c,t.f,i,null),Ur(t,i)}4==e&&0==n.length&&(t.h=1,pr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xi(e),e.F=!0)):(ur(t.c,t.f,n,"[Invalid Chunked Response]"),jr(t),Mr(t))}function Cr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Or:(n=Number(e.substring(n,r)),isNaN(n)?Sr:(r+=1)+n>e.length?Or:(e=e.substr(r,n),t.D=r+n,e))}function Lr(t){t.U=Oe()+t.P,Rr(t,t.P)}function Rr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=vr(Ae(t.Ua,t),e)}function Vr(t){t.o&&(me.clearTimeout(t.o),t.o=null)}function Mr(t){0==t.g.v||t.A||to(t.g,t)}function jr(t){Vr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Jn(t.R),or(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ur(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||mi(n.b,t)))if(n.I=t.N,!t.C&&mi(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Zi(n),Bi(n)}Yi(n),pr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=vr(Ae(n.Ra,n),6e3));if(1>=gi(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else no(n,11)}else if((t.C||n.a==t)&&Zi(n),!Ve(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(Ue(h,"spdy")||Ue(h,"quic")||Ue(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(bi(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Xr(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=Oe()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=io(a,a.C?a.ga:null,a.fa),p.C){wi(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(Vr(d),Lr(d)),a.a=p}else Wi(a);0<n.g.length&&Ki(n)}else"stop"!=i[0]&&"close"!=i[0]||no(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?no(n,7):qi(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);fr(4)}catch(t){}}function Fr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(_e(t)||"string"==typeof t)Ce(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(_e(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(_e(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function qr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof qr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Br(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];zr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)zr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function zr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ve=xr.prototype).setTimeout=function(t){this.P=t},ve.Wa=function(t){t=t.target;var e=this.F;e&&3==Mi(t)?e.f():this.Ca(t)},ve.Ca=function(t){try{if(t==this.a)t:{var e=Mi(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!Ze&&!this.a.$())){this.A||4!=e||7==n||fr(8==n||0>=r?3:2),Vr(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ve(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,pr(12),jr(this),Mr(this);break t}ur(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ur(this,a)}this.I?(Pr(this,e,o),Ze&&this.b&&3==e&&(ir(this.J,this.R,"tick",this.Va),this.R.start())):(ur(this.c,this.f,o,null),Ur(this,o)),4==e&&jr(this),this.b&&!this.A&&(4==e?to(this.g,this):(this.b=!1,Lr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,pr(12)):(this.h=0,pr(13)),jr(this),Mr(this)}}}catch(t){}},ve.Va=function(){if(this.a){var t=Mi(this.a),e=this.a.$();this.D<e.length&&(Vr(this),Pr(this,t,e),this.b&&4!=t&&Lr(this))}},ve.cancel=function(){this.A=!0,jr(this)},ve.Ua=function(){this.o=null;var t=Oe();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(fr(3),pr(17)),jr(this),this.h=2,Mr(this)):Rr(this,this.U-t)},(ve=qr.prototype).K=function(){Br(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ve.L=function(){return Br(this),this.a.concat()},ve.get=function(t,e){return zr(this.b,t)?this.b[t]:e},ve.set=function(t,e){zr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ve.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Gr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Kr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Kr){this.a=void 0!==e?e:t.a,Hr(this,t.f),this.j=t.j,Qr(this,t.c),Wr(this,t.h),this.g=t.g,e=t.b;var n=new ui;n.c=e.c,e.a&&(n.a=new qr(e.a),n.b=e.b),Yr(this,n),this.i=t.i}else t&&(n=String(t).match(Gr))?(this.a=!!e,Hr(this,n[1]||"",!0),this.j=Zr(n[2]||""),Qr(this,n[3]||"",!0),Wr(this,n[4]),this.g=Zr(n[5]||"",!0),Yr(this,n[6]||"",!0),this.i=Zr(n[7]||"")):(this.a=!!e,this.b=new ui(null,this.a))}function $r(t){return new Kr(t)}function Hr(t,e,n){t.f=n?Zr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Qr(t,e,n){t.c=n?Zr(e,!0):e}function Wr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Yr(t,e,n){e instanceof ui?(t.b=e,function(t,e){e&&!t.f&&(ai(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ci(this,e),fi(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ti(e,oi)),t.b=new ui(e,t.a))}function Xr(t,e,n){t.b.set(e,n)}function Jr(t){return Xr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Oe()).toString(36)),t}function Zr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ti(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ei),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ei(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Kr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ti(e,ni,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ti(e,ni,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ti(n,"/"==n.charAt(0)?ii:ri,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ti(n,si)),t.join("")};var ni=/[#\/\?@]/g,ri=/[#\?:]/g,ii=/[#\?]/g,oi=/[#\?@]/g,si=/#/g;function ui(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ai(t){t.a||(t.a=new qr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ci(t,e){ai(t),e=li(t,e),zr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,zr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Br(t)))}function hi(t,e){return ai(t),e=li(t,e),zr(t.a.b,e)}function fi(t,e,n){ci(t,e),0<n.length&&(t.c=null,t.a.set(li(t,e),Re(n)),t.b+=n.length)}function li(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function pi(t,e){this.b=t,this.a=e}function di(t){this.g=t||vi,me.PerformanceNavigationTiming?t=0<(t=me.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(me.ia&&me.ia.ya&&me.ia.ya()&&me.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(ve=ui.prototype).add=function(t,e){ai(this),this.c=null,t=li(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ve.forEach=function(t,e){ai(this),this.a.forEach((function(n,r){Ce(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ve.L=function(){ai(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ve.K=function(t){ai(this);var e=[];if("string"==typeof t)hi(this,t)&&(e=Le(e,this.a.get(li(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Le(e,t[n])}return e},ve.set=function(t,e){return ai(this),this.c=null,hi(this,t=li(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ve.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ve.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var vi=10;function yi(t){return!!t.b||!!t.a&&t.a.size>=t.f}function gi(t){return t.b?1:t.a?t.a.size:0}function mi(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function bi(t,e){t.a?t.a.add(e):t.b=e}function wi(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function _i(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=de(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Re(t.c)}function Ei(){}function Ii(){this.a=new Ei}function Ti(t,e,n){var r=n||"";try{Fr(t,(function(t,n){var i=t;Ee(t)&&(i=Fn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Ni(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}di.prototype.cancel=function(){var t,e;if(this.c=_i(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=de(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ei.prototype.stringify=function(t){return me.JSON.stringify(t,void 0)},Ei.prototype.parse=function(t){return me.JSON.parse(t,void 0)};var xi=me.JSON.parse;function Ai(t){jn.call(this),this.headers=new qr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Si,this.D=this.F=!1}ke(Ai,jn);var Si="",Oi=/^https?$/i,ki=["POST","PUT"];function Di(t){return"content-type"==t.toLowerCase()}function Pi(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ci(t),Ri(t)}function Ci(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Li(t){if(t.b&&void 0!==ge&&(!t.s[1]||4!=Mi(t)||2!=t.X()))if(t.l&&4==Mi(t))Zn(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==Mi(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Gr)[1]||null;if(!o&&me.self&&me.self.location){var s=me.self.location.protocol;o=s.substr(0,s.length-1)}i=!Oi.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var u=2<Mi(t)?t.a.statusText:""}catch(t){u=""}t.f=u+" ["+t.X()+"]",Ci(t)}}finally{Ri(t)}}}function Ri(t,e){if(t.a){Vi(t);var n=t.a,r=t.s[0]?be:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Vi(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(me.clearTimeout(t.m),t.m=null)}function Mi(t){return t.a?t.a.readyState:0}function ji(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ze(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Xr(t,e,n))}function Ui(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fi(t){this.pa=0,this.g=[],this.c=new sr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Ui("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Ui("baseRetryDelayMs",5e3,t),this.Ma=Ui("retryDelaySeedMs",1e4,t),this.Ja=Ui("forwardChannelMaxRetries",2,t),this.ma=Ui("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new di(t&&t.concurrentRequestLimit),this.ka=new Ii,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function qi(t){if(zi(t),3==t.v){var e=t.R++,n=$r(t.B);Xr(n,"SID",t.J),Xr(n,"RID",e),Xr(n,"TYPE","terminate"),Hi(t,n),(e=new xr(t,t.c,e,void 0)).H=2,e.i=Jr($r(n)),n=!1,me.navigator&&me.navigator.sendBeacon&&(n=me.navigator.sendBeacon(e.i.toString(),"")),!n&&me.Image&&((new Image).src=e.i,n=!0),n||(e.a=oo(e.g,null),e.a.ba(e.i)),e.u=Oe(),Lr(e)}ro(t)}function Bi(t){t.a&&(Xi(t),t.a.cancel(),t.a=null)}function zi(t){Bi(t),t.j&&(me.clearTimeout(t.j),t.j=null),Zi(t),t.b.cancel(),t.h&&("number"==typeof t.h&&me.clearTimeout(t.h),t.h=null)}function Gi(t,e){t.g.push(new pi(t.La++,e)),3==t.v&&Ki(t)}function Ki(t){yi(t.b)||t.h||(t.h=!0,Hn(t.Ba,t),t.u=0)}function $i(t,e){var n;n=e?e.f:t.R++;var r=$r(t.B);Xr(r,"SID",t.J),Xr(r,"RID",n),Xr(r,"AID",t.P),Hi(t,r),t.i&&t.l&&ji(r,t.i,t.l),n=new xr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Qi(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),bi(t.b,n),kr(n,r,e)}function Hi(t,e){t.f&&Fr({},(function(t,n){Xr(e,n,t)}))}function Qi(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ae(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Ti(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Wi(t){t.a||t.j||(t.U=1,Hn(t.Aa,t),t.o=0)}function Yi(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=vr(Ae(t.Aa,t),eo(t,t.o)),t.o++,!0)}function Xi(t){null!=t.s&&(me.clearTimeout(t.s),t.s=null)}function Ji(t){t.a=new xr(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=$r(t.la);Xr(e,"RID","rpc"),Xr(e,"SID",t.J),Xr(e,"CI",t.H?"0":"1"),Xr(e,"AID",t.P),Hi(t,e),Xr(e,"TYPE","xmlhttp"),t.i&&t.l&&ji(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Jr($r(e)),n.j=null,n.I=!0,Dr(n,t)}function Zi(t){null!=t.m&&(me.clearTimeout(t.m),t.m=null)}function to(t,e){var n=null;if(t.a==e){Zi(t),Xi(t),t.a=null;var r=2}else{if(!mi(t.b,e))return;n=e.s,wi(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Oe()-e.u;var i=t.u;(r=cr()).dispatchEvent(new dr(r,n,e,i)),Ki(t)}else Wi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(gi(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=vr(Ae(t.Ba,t,e),eo(t,t.u)),t.u++,0)))}(t,e)||2==r&&Yi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:no(t,5);break;case 4:no(t,10);break;case 3:no(t,6);break;default:no(t,2)}}function eo(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function no(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Ae(t.Xa,t);n||(n=new Kr("//www.google.com/images/cleardot.gif"),me.location&&"http"==me.location.protocol||Hr(n,"https"),Jr(n)),function(t,e){var n=new sr;if(me.Image){var r=new Image;r.onload=Se(Ni,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Se(Ni,n,r,"TestLoadImage: error",!1,e),r.onabort=Se(Ni,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Se(Ni,n,r,"TestLoadImage: timeout",!1,e),me.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else pr(2);t.v=0,t.f&&t.f.ra(e),ro(t),zi(t)}function ro(t){t.v=0,t.I=-1,t.f&&(0==_i(t.b).length&&0==t.g.length||(t.b.c.length=0,Re(t.g),t.g.length=0),t.f.qa())}function io(t,e,n){var r=function(t){return t instanceof Kr?$r(t):new Kr(t,void 0)}(n);if(""!=r.c)e&&Qr(r,e+"."+r.c),Wr(r,r.h);else{var i=me.location;r=function(t,e,n,r){var i=new Kr(null,void 0);return t&&Hr(i,t),e&&Qr(i,e),n&&Wr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&ze(t.W,(function(t,e){Xr(r,e,t)})),e=t.A,n=t.na,e&&n&&Xr(r,e,n),Xr(r,"VER",t.ha),Hi(t,r),r}function oo(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ai(t.Ka)).F=t.C,e}function so(){}function uo(){if(Xe&&!(10<=Number(fn)))throw Error("Environmental error: no available transport.")}function ao(t,e){jn.call(this),this.a=new Fi(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ve(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ve(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new fo(this)}function co(t){Ir.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ho(){Tr.call(this),this.status=1}function fo(t){this.a=t}(ve=Ai.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?br(this.H):br(_r),this.a.onreadystatechange=Ae(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Pi(this,t)}t=n||"";var i=new qr(this.headers);r&&Fr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Di,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=me.FormData&&t instanceof me.FormData,!(0<=Pe(ki,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Vi(this),0<this.o&&((this.D=function(t){return Xe&&cn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Ae(this.xa,this)):this.m=Zn(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Pi(this,t)}},ve.xa=function(){void 0!==ge&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},ve.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ri(this))},ve.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ri(this,!0)),Ai.S.G.call(this)},ve.za=function(){this.j||(this.A||this.l||this.g?Li(this):this.Ta())},ve.Ta=function(){Li(this)},ve.X=function(){try{return 2<Mi(this)?this.a.status:-1}catch(t){return-1}},ve.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ve.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),xi(e)}},ve.ua=function(){return this.h},ve.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ve=Fi.prototype).ha=8,ve.v=1,ve.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new xr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?$e(r=Ge(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Qi(this,n,e),Xr(i=$r(this.B),"RID",t),Xr(i,"CVER",22),this.A&&Xr(i,"X-HTTP-Session-Id",this.A),Hi(this,i),this.i&&r&&ji(i,this.i,r),bi(this.b,n),this.Ga&&Xr(i,"TYPE","init"),this.da?(Xr(i,"$req",e),Xr(i,"SID","null"),n.V=!0,kr(n,i,null)):kr(n,i,e),this.v=2}}else 3==this.v&&(t?$i(this,t):0==this.g.length||yi(this.b)||$i(this))},ve.Aa=function(){if(this.j=null,Ji(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=vr(Ae(this.Sa,this),t)}},ve.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Bi(this),Ji(this))},ve.Ra=function(){null!=this.m&&(this.m=null,Bi(this),Yi(this),pr(19))},ve.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),pr(2)):(this.c.info("Failed to ping google.com"),pr(1))},(ve=so.prototype).ta=function(){},ve.sa=function(){},ve.ra=function(){},ve.qa=function(){},ve.Ha=function(){},uo.prototype.a=function(t,e){return new ao(t,e)},ke(ao,jn),(ve=ao.prototype).addEventListener=function(t,e,n,r){ao.S.addEventListener.call(this,t,e,n,r)},ve.removeEventListener=function(t,e,n,r){ao.S.removeEventListener.call(this,t,e,n,r)},ve.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;pr(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=io(t,null,t.fa),Ki(t)},ve.close=function(){qi(this.a)},ve.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Gi(this.a,e)}else this.g?((e={}).__data__=Fn(t),Gi(this.a,e)):Gi(this.a,t)},ve.G=function(){this.a.f=null,delete this.f,qi(this.a),delete this.a,ao.S.G.call(this)},ke(co,Ir),ke(ho,Tr),ke(fo,so),fo.prototype.ta=function(){this.a.dispatchEvent("a")},fo.prototype.sa=function(t){this.a.dispatchEvent(new co(t))},fo.prototype.ra=function(t){this.a.dispatchEvent(new ho(t))},fo.prototype.qa=function(){this.a.dispatchEvent("b")},uo.prototype.createWebChannel=uo.prototype.a,ao.prototype.send=ao.prototype.Pa,ao.prototype.open=ao.prototype.Oa,ao.prototype.close=ao.prototype.close,yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,gr.COMPLETE="complete",wr.EventType=Er,Er.OPEN="a",Er.CLOSE="b",Er.ERROR="c",Er.MESSAGE="d",jn.prototype.listen=jn.prototype.va,Ai.prototype.listenOnce=Ai.prototype.wa,Ai.prototype.getLastError=Ai.prototype.Qa,Ai.prototype.getLastErrorCode=Ai.prototype.ua,Ai.prototype.getStatus=Ai.prototype.X,Ai.prototype.getResponseJson=Ai.prototype.Na,Ai.prototype.getResponseText=Ai.prototype.$,Ai.prototype.send=Ai.prototype.ba;var lo=yr,po=gr,vo=wr,yo=Ai,go=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},mo=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),bo=new Xt("@firebase/firestore");function wo(){return bo.logLevel}function _o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(bo.logLevel<=Gt.DEBUG){var r=e.map(To);bo.debug.apply(bo,Nt(["Firestore (8.0.2): "+t],r))}}function Eo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(bo.logLevel<=Gt.ERROR){var r=e.map(To);bo.error.apply(bo,Nt(["Firestore (8.0.2): "+t],r))}}function Io(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(bo.logLevel<=Gt.WARN){var r=e.map(To);bo.warn.apply(bo,Nt(["Firestore (8.0.2): "+t],r))}}function To(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function No(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.2) INTERNAL ASSERTION FAILED: "+t;throw Eo(e),new Error(e)}function xo(t,e){t||No()}function Ao(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function So(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Oo=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=So(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ko(t,e){return t<e?-1:t>e?1:0}function Do(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Po(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Co(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ro(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vo=function(){function t(t,e){this.h=t,this.l=e,this._={}}return t.prototype.get=function(t){var e=this.h(t),n=this._[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.l(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this._[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.l(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this._[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this._[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.l(n[r][0],t))return 1===n.length?delete this._[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Lo(this._,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.T=function(){return Ro(this._)},t}(),Mo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return mt(e,t),e}(Error),Uo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new jo(Mo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new jo(Mo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new jo(Mo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new jo(Mo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.I=function(t){return this.seconds===t.seconds?ko(this.nanoseconds,t.nanoseconds):ko(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Fo=function(){function t(t){this.timestamp=t}return t.m=function(e){return new t(e)},t.min=function(){return new t(new Uo(0,0))},t.prototype.A=function(t){return this.timestamp.I(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.R=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.P=function(){return this.timestamp},t}(),qo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&No(),void 0===n?n=t.length-e:n>t.length-e&&No(),this.segments=t,this.offset=e,this.g=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.g},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.V(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.p(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.v=function(t){return t=void 0===t?1:t,this.p(this.segments,this.offset+t,this.length-t)},t.prototype.S=function(){return this.p(this.segments,this.offset,this.length-1)},t.prototype.D=function(){return this.segments[this.offset]},t.prototype.C=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.T=function(){return 0===this.length},t.prototype.N=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.F=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.O=function(){return this.segments.slice(this.offset,this.limit())},t.V=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.p=function(t,n,r){return new e(t,n,r)},e.prototype.M=function(){return this.O().join("/")},e.prototype.toString=function(){return this.M()},e.k=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new jo(Mo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.$=function(){return new e([])},e}(qo),zo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.p=function(t,n,r){return new e(t,n,r)},e.L=function(t){return zo.test(t)},e.prototype.M=function(){return this.O().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.L(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.M()},e.prototype.B=function(){return 1===this.length&&"__name__"===this.get(0)},e.q=function(){return new e(["__name__"])},e.U=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new jo(Mo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new jo(Mo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new jo(Mo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new jo(Mo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.$=function(){return new e([])},e}(qo),Ko=function(){function t(t){this.path=t}return t.K=function(e){return new t(Bo.k(e))},t.W=function(e){return new t(Bo.k(e).v(5))},t.prototype.j=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Bo.V(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.V=function(t,e){return Bo.V(t.path,e.path)},t.G=function(t){return t.length%2==0},t.H=function(e){return new t(new Bo(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $o(t){return null==t}function Ho(t){return 0===t&&1/t==-1/0}function Qo(t){return"number"==typeof t&&Number.isInteger(t)&&!Ho(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Wo=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.J=null};function Yo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Wo(t,e,n,r,i,o,s)}function Xo(t){var e=Ao(t);if(null===e.J){var n=e.path.M();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.M()+t.op.toString()+zs(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.M()+e.dir;var e})).join(","),$o(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ha(e.startAt)),e.endAt&&(n+="|ub:",n+=Ha(e.endAt)),e.J=n}return e.J}function Jo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ja(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Us(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wa(t.startAt,e.startAt)&&Wa(t.endAt,e.endAt)}function Zo(t){return Ko.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ts=function(){function t(t){this.Y=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.Y,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Y)},t.prototype.X=function(){return 2*this.Y.length},t.prototype.A=function(t){return ko(this.Y,t.Y)},t.prototype.isEqual=function(t){return this.Y===t.Y},t}();ts.Z=new ts("");var es,ns,rs=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Fo.min()),void 0===o&&(o=Fo.min()),void 0===s&&(s=ts.Z),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.nt=function(e){return new t(this.target,this.targetId,this.tt,e,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.st=function(e,n){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.it=function(e){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,e,this.resumeToken)},t}(),is=function(t){this.count=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function os(t){switch(t){case Mo.OK:return No();case Mo.CANCELLED:case Mo.UNKNOWN:case Mo.DEADLINE_EXCEEDED:case Mo.RESOURCE_EXHAUSTED:case Mo.INTERNAL:case Mo.UNAVAILABLE:case Mo.UNAUTHENTICATED:return!1;case Mo.INVALID_ARGUMENT:case Mo.NOT_FOUND:case Mo.ALREADY_EXISTS:case Mo.PERMISSION_DENIED:case Mo.FAILED_PRECONDITION:case Mo.ABORTED:case Mo.OUT_OF_RANGE:case Mo.UNIMPLEMENTED:case Mo.DATA_LOSS:return!0;default:return No()}}function ss(t){if(void 0===t)return Eo("GRPC error has no .code"),Mo.UNKNOWN;switch(t){case es.OK:return Mo.OK;case es.CANCELLED:return Mo.CANCELLED;case es.UNKNOWN:return Mo.UNKNOWN;case es.DEADLINE_EXCEEDED:return Mo.DEADLINE_EXCEEDED;case es.RESOURCE_EXHAUSTED:return Mo.RESOURCE_EXHAUSTED;case es.INTERNAL:return Mo.INTERNAL;case es.UNAVAILABLE:return Mo.UNAVAILABLE;case es.UNAUTHENTICATED:return Mo.UNAUTHENTICATED;case es.INVALID_ARGUMENT:return Mo.INVALID_ARGUMENT;case es.NOT_FOUND:return Mo.NOT_FOUND;case es.ALREADY_EXISTS:return Mo.ALREADY_EXISTS;case es.PERMISSION_DENIED:return Mo.PERMISSION_DENIED;case es.FAILED_PRECONDITION:return Mo.FAILED_PRECONDITION;case es.ABORTED:return Mo.ABORTED;case es.OUT_OF_RANGE:return Mo.OUT_OF_RANGE;case es.UNIMPLEMENTED:return Mo.UNIMPLEMENTED;case es.DATA_LOSS:return Mo.DATA_LOSS;default:return No()}}(ns=es||(es={}))[ns.OK=0]="OK",ns[ns.CANCELLED=1]="CANCELLED",ns[ns.UNKNOWN=2]="UNKNOWN",ns[ns.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ns[ns.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ns[ns.NOT_FOUND=5]="NOT_FOUND",ns[ns.ALREADY_EXISTS=6]="ALREADY_EXISTS",ns[ns.PERMISSION_DENIED=7]="PERMISSION_DENIED",ns[ns.UNAUTHENTICATED=16]="UNAUTHENTICATED",ns[ns.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ns[ns.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ns[ns.ABORTED=10]="ABORTED",ns[ns.OUT_OF_RANGE=11]="OUT_OF_RANGE",ns[ns.UNIMPLEMENTED=12]="UNIMPLEMENTED",ns[ns.INTERNAL=13]="INTERNAL",ns[ns.UNAVAILABLE=14]="UNAVAILABLE",ns[ns.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var us=function(){function t(t,e){this.V=t,this.root=e||cs.EMPTY}return t.prototype.rt=function(e,n){return new t(this.V,this.root.rt(e,n,this.V).copy(null,null,cs.ot,null,null))},t.prototype.remove=function(e){return new t(this.V,this.root.remove(e,this.V).copy(null,null,cs.ot,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.T();){var n=this.V(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.T();){var r=this.V(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.T=function(){return this.root.T()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.at=function(){return this.root.at()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.lt=function(){return new as(this.root,null,this.V,!1)},t.prototype._t=function(t){return new as(this.root,t,this.V,!1)},t.prototype.ft=function(){return new as(this.root,null,this.V,!0)},t.prototype.dt=function(t){return new as(this.root,t,this.V,!0)},t}(),as=function(){function t(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.T();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}return t.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.T();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.T();)this.Tt.push(t),t=t.left;return e},t.prototype.It=function(){return this.Tt.length>0},t.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),cs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.T=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left.T()?this:this.left.min()},t.prototype.at=function(){return this.min().key},t.prototype.ct=function(){return this.right.T()?this.key:this.right.ct()},t.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},t.prototype.Pt=function(){if(this.left.T())return t.EMPTY;var e=this;return e.left.gt()||e.left.left.gt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).Rt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.T()||i.left.gt()||i.left.left.gt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.gt()&&(i=i.yt()),i.right.T()||i.right.gt()||i.right.left.gt()||(i=i.vt()),0===n(e,i.key)){if(i.right.T())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Rt()},t.prototype.gt=function(){return this.color},t.prototype.Rt=function(){var t=this;return t.right.gt()&&!t.left.gt()&&(t=t.bt()),t.left.gt()&&t.left.left.gt()&&(t=t.yt()),t.left.gt()&&t.right.gt()&&(t=t.St()),t},t.prototype.Vt=function(){var t=this.St();return t.right.left.gt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.yt())).bt()).St()),t},t.prototype.vt=function(){var t=this.St();return t.left.left.gt()&&(t=(t=t.yt()).St()),t},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.yt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Dt=function(){var t=this.Ct();return Math.pow(2,t)<=this.size+1},t.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw No();if(this.right.gt())throw No();var t=this.left.Ct();if(t!==this.right.Ct())throw No();return t+(this.gt()?0:1)},t}();cs.EMPTY=null,cs.RED=!0,cs.ot=!1,cs.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw No()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw No()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw No()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw No()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw No()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.rt=function(t,e,n){return new cs(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.T=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.at=function(){return null},t.prototype.ct=function(){return null},t.prototype.gt=function(){return!1},t.prototype.Dt=function(){return!0},t.prototype.Ct=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var hs=function(){function t(t){this.V=t,this.data=new us(this.V)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.at()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.Nt=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(this.V(r.key,t[1])>=0)return;e(r.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},t.prototype.Ft=function(t){var e=this.data._t(t);return e.It()?e.Et().key:null},t.prototype.lt=function(){return new fs(this.data.lt())},t.prototype._t=function(t){return new fs(this.data._t(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.T=function(){return this.data.T()},t.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.lt(),r=e.data.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(0!==this.V(i,o))return!1}return!0},t.prototype.O=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.V);return n.data=e,n},t}(),fs=function(){function t(t){this.Mt=t}return t.prototype.Et=function(){return this.Mt.Et().key},t.prototype.It=function(){return this.Mt.It()},t}(),ls=new us(Ko.V);function ps(){return ls}function ds(){return ps()}var vs=new us(Ko.V);function ys(){return vs}var gs=new us(Ko.V),ms=new hs(Ko.V);function bs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ms,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ws=new hs(ko);function _s(){return ws}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Es=function(){function t(t){this.V=t?function(e,n){return t(e,n)||Ko.V(e.key,n.key)}:function(t,e){return Ko.V(t.key,e.key)},this.kt=ys(),this.$t=new us(this.V)}return t.Lt=function(e){return new t(e.V)},t.prototype.has=function(t){return null!=this.kt.get(t)},t.prototype.get=function(t){return this.kt.get(t)},t.prototype.first=function(){return this.$t.at()},t.prototype.last=function(){return this.$t.ct()},t.prototype.T=function(){return this.$t.T()},t.prototype.indexOf=function(t){var e=this.kt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.rt(t.key,t),e.$t.rt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.lt(),r=e.$t.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.V=this.V,r.kt=e,r.$t=n,r},t}(),Is=function(){function t(){this.Bt=new us(Ko.V)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Bt.get(e);n?0!==t.type&&3===n.type?this.Bt=this.Bt.rt(e,t):3===t.type&&1!==n.type?this.Bt=this.Bt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Bt=this.Bt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Bt=this.Bt.remove(e):1===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):No():this.Bt=this.Bt.rt(e,t)},t.prototype.qt=function(){var t=[];return this.Bt.ut((function(e,n){t.push(n)})),t},t}(),Ts=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Kt=s,this.Wt=u}return t.jt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Es.Lt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.T()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Kt===t.Kt&&this.Qt.isEqual(t.Qt)&&Pa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ut.isEqual(t.Ut)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ns=function(){function t(t,e,n,r,i){this.et=t,this.Gt=e,this.zt=n,this.Ht=r,this.Jt=i}return t.Yt=function(e,n){var r=new Map;return r.set(e,xs.Xt(e,n)),new t(Fo.min(),r,_s(),ps(),bs())},t}(),xs=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}return t.Xt=function(e,n){return new t(ts.Z,n,bs(),bs(),bs())},t}(),As=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},Ss=function(t,e){this.targetId=t,this.re=e},Os=function(t,e,n,r){void 0===n&&(n=ts.Z),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ks=function(){function t(){this.oe=0,this.ae=Cs(),this.ce=ts.Z,this.ue=!1,this.he=!0}return Object.defineProperty(t.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),t.prototype.fe=function(t){t.X()>0&&(this.he=!0,this.ce=t)},t.prototype.de=function(){var t=bs(),e=bs(),n=bs();return this.ae.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:No()}})),new xs(this.ce,this.ue,t,e,n)},t.prototype.we=function(){this.he=!1,this.ae=Cs()},t.prototype.Te=function(t,e){this.he=!0,this.ae=this.ae.rt(t,e)},t.prototype.Ee=function(t){this.he=!0,this.ae=this.ae.remove(t)},t.prototype.Ie=function(){this.oe+=1},t.prototype.me=function(){this.oe-=1},t.prototype.Ae=function(){this.he=!0,this.ue=!0},t}(),Ds=function(){function t(t){this.Re=t,this.Pe=new Map,this.ge=ps(),this.Ve=Ps(),this.ye=new hs(ko)}return t.prototype.pe=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof ya?this.ve(r,t.ie):t.ie instanceof ga&&this.be(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.be(s,t.key,t.ie)}},t.prototype.Se=function(t){var e=this;this.De(t,(function(n){var r=e.Ce(n);switch(t.state){case 0:e.Ne(n)&&r.fe(t.resumeToken);break;case 1:r.me(),r.le||r.we(),r.fe(t.resumeToken);break;case 2:r.me(),r.le||e.removeTarget(n);break;case 3:e.Ne(n)&&(r.Ae(),r.fe(t.resumeToken));break;case 4:e.Ne(n)&&(e.xe(n),r.fe(t.resumeToken));break;default:No()}}))},t.prototype.De=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,r){n.Ne(r)&&e(r)}))},t.prototype.Fe=function(t){var e=t.targetId,n=t.re.count,r=this.Oe(e);if(r){var i=r.target;if(Zo(i))if(0===n){var o=new Ko(i.path);this.be(e,o,new ga(o,Fo.min()))}else xo(1===n);else this.Me(e)!==n&&(this.xe(e),this.ye=this.ye.add(e))}},t.prototype.ke=function(t){var e=this,n=new Map;this.Pe.forEach((function(r,i){var o=e.Oe(i);if(o){if(r.Zt&&Zo(o.target)){var s=new Ko(o.target.path);null!==e.ge.get(s)||e.$e(i,s)||e.be(i,s,new ga(s,t))}r._e&&(n.set(i,r.de()),r.we())}}));var r=bs();this.Ve.forEach((function(t,n){var i=!0;n.xt((function(t){var n=e.Oe(t);return!n||2===n.tt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ns(t,n,this.ye,this.ge,r);return this.ge=ps(),this.Ve=Ps(),this.ye=new hs(ko),i},t.prototype.ve=function(t,e){if(this.Ne(t)){var n=this.$e(t,e.key)?2:0;this.Ce(t).Te(e.key,n),this.ge=this.ge.rt(e.key,e),this.Ve=this.Ve.rt(e.key,this.Le(e.key).add(t))}},t.prototype.be=function(t,e,n){if(this.Ne(t)){var r=this.Ce(t);this.$e(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.rt(e,this.Le(e).delete(t)),n&&(this.ge=this.ge.rt(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ce(t).de();return this.Re.Be(t).size+e.te.size-e.ne.size},t.prototype.Ie=function(t){this.Ce(t).Ie()},t.prototype.Ce=function(t){var e=this.Pe.get(t);return e||(e=new ks,this.Pe.set(t,e)),e},t.prototype.Le=function(t){var e=this.Ve.get(t);return e||(e=new hs(ko),this.Ve=this.Ve.rt(t,e)),e},t.prototype.Ne=function(t){var e=null!==this.Oe(t);return e||_o("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Oe=function(t){var e=this.Pe.get(t);return e&&e.le?null:this.Re.qe(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new ks),this.Re.Be(t).forEach((function(n){e.be(t,n,null)}))},t.prototype.$e=function(t,e){return this.Re.Be(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ps(){return new us(Ko.V)}function Cs(){return new us(Ko.V)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ls(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Rs(t){var e=t.mapValue.fields.__previous_value__;return Ls(e)?Rs(e):e}function Vs(t){var e=Ks(t.mapValue.fields.__local_write_time__.timestampValue);return new Uo(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ms=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ls(t)?4:10:No()}function Us(t,e){var n=js(t);if(n!==js(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vs(t).isEqual(Vs(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ks(t.timestampValue),r=Ks(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Hs(t.bytesValue).isEqual(Hs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return $s(t.geoPointValue.latitude)===$s(e.geoPointValue.latitude)&&$s(t.geoPointValue.longitude)===$s(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return $s(t.integerValue)===$s(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=$s(t.doubleValue),r=$s(e.doubleValue);return n===r?Ho(n)===Ho(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Do(t.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Co(n)!==Co(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Us(n[i],r[i])))return!1;return!0}(t,e);default:return No()}}function Fs(t,e){return void 0!==(t.values||[]).find((function(t){return Us(t,e)}))}function qs(t,e){var n=js(t),r=js(e);if(n!==r)return ko(n,r);switch(n){case 0:return 0;case 1:return ko(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=$s(t.integerValue||t.doubleValue),r=$s(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Bs(t.timestampValue,e.timestampValue);case 4:return Bs(Vs(t),Vs(e));case 5:return ko(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Hs(t),r=Hs(e);return n.A(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ko(n[i],r[i]);if(0!==o)return o}return ko(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ko($s(t.latitude),$s(e.latitude));return 0!==n?n:ko($s(t.longitude),$s(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=qs(n[i],r[i]);if(o)return o}return ko(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=ko(r[s],o[s]);if(0!==u)return u;var a=qs(n[r[s]],i[o[s]]);if(0!==a)return a}return ko(r.length,o.length)}(t.mapValue,e.mapValue);default:throw No()}}function Bs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ko(t,e);var n=Ks(t),r=Ks(e),i=ko(n.seconds,r.seconds);return 0!==i?i:ko(n.nanos,r.nanos)}function zs(t){return Gs(t)}function Gs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ks(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ko.W(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Gs(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Gs(t.fields[o])}return e+"}"}(t.mapValue):No();var e,n}function Ks(t){if(xo(!!t),"string"==typeof t){var e=0,n=Ms.exec(t);if(xo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$s(t.seconds),nanos:$s(t.nanos)}}function $s(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Hs(t){return"string"==typeof t?ts.fromBase64String(t):ts.fromUint8Array(t)}function Qs(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.M()}}function Ws(t){return!!t&&"integerValue"in t}function Ys(t){return!!t&&"arrayValue"in t}function Xs(t){return!!t&&"nullValue"in t}function Js(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zs(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tu={asc:"ASCENDING",desc:"DESCENDING"},eu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nu=function(t,e){this.t=t,this.Ue=e};function ru(t){return{integerValue:""+t}}function iu(t,e){if(t.Ue){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ho(e)?"-0":e}}function ou(t,e){return Qo(e)?ru(e):iu(t,e)}function su(t,e){return t.Ue?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function uu(t,e){return t.Ue?e.toBase64():e.toUint8Array()}function au(t,e){return su(t,e.P())}function cu(t){return xo(!!t),Fo.m(function(t){var e=Ks(t);return new Uo(e.seconds,e.nanos)}(t))}function hu(t,e){return function(t){return new Bo(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).M()}function fu(t){var e=Bo.k(t);return xo(Lu(e)),e}function lu(t,e){return hu(t.t,e.path)}function pu(t,e){var n=fu(e);if(n.get(1)!==t.t.projectId)throw new jo(Mo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new jo(Mo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Ko(gu(n))}function du(t,e){return hu(t.t,e)}function vu(t){var e=fu(t);return 4===e.length?Bo.$():gu(e)}function yu(t){return new Bo(["projects",t.t.projectId,"databases",t.t.database]).M()}function gu(t){return xo(t.length>4&&"documents"===t.get(4)),t.v(5)}function mu(t,e,n){return{name:lu(t,e),fields:n.proto.mapValue.fields}}function bu(t,e){var n;if(e instanceof ia)n={update:mu(t,e.key,e.value)};else if(e instanceof ha)n={delete:lu(t,e.key)};else if(e instanceof oa)n={update:mu(t,e.key,e.data),updateMask:Cu(e.Qe)};else if(e instanceof ua)n={transform:{document:lu(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Uu)return{fieldPath:e.field.M(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fu)return{fieldPath:e.field.M(),appendMissingElements:{values:n.elements}};if(n instanceof Bu)return{fieldPath:e.field.M(),removeAllFromArray:{values:n.elements}};if(n instanceof Gu)return{fieldPath:e.field.M(),increment:n.Ke};throw No()}(0,t)}))}};else{if(!(e instanceof fa))return No();n={verify:lu(t,e.key)}}return e.je.We||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:au(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:No()}(t,e.je)),n}function wu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Yu.updateTime(cu(t.updateTime)):void 0!==t.exists?Yu.exists(t.exists):Yu.Ge()}(e.currentDocument):Yu.Ge();if(e.update){e.update.name;var r=pu(t,e.update.name),i=new la({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Hu(e.map((function(t){return Go.U(t)})))}(e.updateMask);return new oa(r,i,o,n)}return new ia(r,i,n)}if(e.delete){var s=pu(t,e.delete);return new ha(s,n)}if(e.transform){var u=pu(t,e.transform.document),a=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)xo("REQUEST_TIME"===e.setToServerValue),n=new Uu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Fu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Bu(i)}else"increment"in e?n=new Gu(t,e.increment):No();var o=Go.U(e.fieldPath);return new Qu(o,n)}(t,e)}));return xo(!0===n.exists),new ua(u,a)}if(e.verify){var c=pu(t,e.verify);return new fa(c,n)}return No()}function _u(t,e){return{documents:[du(t,e.path)]}}function Eu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=du(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=du(t,r.S()),n.structuredQuery.from=[{collectionId:r.C()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Js(t.value))return{unaryFilter:{field:Ou(t.field),op:"IS_NAN"}};if(Xs(t.value))return{unaryFilter:{field:Ou(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Js(t.value))return{unaryFilter:{field:Ou(t.field),op:"IS_NOT_NAN"}};if(Xs(t.value))return{unaryFilter:{field:Ou(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ou(t.field),op:Su(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ou(t.field),direction:Au(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ue||$o(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Nu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Nu(e.endAt)),n}function Iu(t){var e=vu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){xo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Tu(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Ya(ku(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return $o(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=xu(n.startAt));var h=null;return n.endAt&&(h=xu(n.endAt)),wa(e,i,u,s,a,"F",c,h)}function Tu(t){return t?void 0!==t.unaryFilter?[Pu(t)]:void 0!==t.fieldFilter?[Du(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Tu(t)})).reduce((function(t,e){return t.concat(e)})):No():[]}function Nu(t){return{before:t.before,values:t.position}}function xu(t){var e=!!t.before,n=t.values||[];return new $a(n,e)}function Au(t){return tu[t]}function Su(t){return eu[t]}function Ou(t){return{fieldPath:t.M()}}function ku(t){return Go.U(t.fieldPath)}function Du(t){return Ma.create(ku(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return No()}}(t.fieldFilter.op),t.fieldFilter.value)}function Pu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ku(t.unaryFilter.field);return Ma.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ku(t.unaryFilter.field);return Ma.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ku(t.unaryFilter.field);return Ma.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ku(t.unaryFilter.field);return Ma.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return No()}}function Cu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.M())})),{fieldPaths:e}}function Lu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ru=function(){this.ze=void 0};function Vu(t,e,n){return t instanceof Uu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Fu?qu(t,e):t instanceof Bu?zu(t,e):function(t,e){var n=ju(t,e),r=Ku(n)+Ku(t.Ke);return Ws(n)&&Ws(t.Ke)?ru(r):iu(t.serializer,r)}(t,e)}function Mu(t,e,n){return t instanceof Fu?qu(t,e):t instanceof Bu?zu(t,e):n}function ju(t,e){return t instanceof Gu?Ws(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e}(Ru),Fu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return mt(e,t),e}(Ru);function qu(t,e){for(var n=$u(e),r=function(t){n.some((function(e){return Us(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Bu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return mt(e,t),e}(Ru);function zu(t,e){for(var n=$u(e),r=function(t){n=n.filter((function(e){return!Us(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Gu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Ke=n,r}return mt(e,t),e}(Ru);function Ku(t){return $s(t.integerValue||t.doubleValue)}function $u(t){return Ys(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Hu=function(){function t(t){this.fields=t,t.sort(Go.V)}return t.prototype.He=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].N(t))return!0;return!1},t.prototype.isEqual=function(t){return Do(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Qu=function(t,e){this.field=t,this.transform=e},Wu=function(t,e){this.version=t,this.transformResults=e},Yu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Ge=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"We",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Xu(t,e){return void 0!==t.updateTime?e instanceof ya&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ya}var Ju=function(){};function Zu(t,e,n){return t instanceof ia?function(t,e,n){return new ya(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof oa?function(t,e,n){if(!Xu(t.je,e))return new ma(t.key,n.version);var r=sa(t,e);return new ya(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ua?function(t,e,n){if(xo(null!=n.transformResults),!Xu(t.je,e))return new ma(t.key,n.version);var r=aa(t,e),i=function(t,e,n){var r=[];xo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof ya&&(u=e.field(o.field)),r.push(Mu(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=ca(t,r.data(),i);return new ya(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new ga(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function ta(t,e,n,r){return t instanceof ia?function(t,e){if(!Xu(t.je,e))return e;var n=ra(e);return new ya(t.key,n,t.value,{Je:!0})}(t,e):t instanceof oa?function(t,e){if(!Xu(t.je,e))return e;var n=ra(e),r=sa(t,e);return new ya(t.key,n,r,{Je:!0})}(t,e):t instanceof ua?function(t,e,n,r){if(!Xu(t.je,e))return e;var i=aa(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof ya&&(c=n.field(u.field)),null===c&&r instanceof ya&&(c=r.field(u.field)),i.push(Vu(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=ca(t,i.data(),o);return new ya(t.key,i.version,s,{Je:!0})}(t,e,r,n):function(t,e){return Xu(t.je,e)?new ga(t.key,Fo.min()):e}(t,e)}function ea(t,e){return t instanceof ua?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof ya?e.field(o.field):void 0,u=ju(o.transform,s||null);null!=u&&(n=null==n?(new pa).set(o.field,u):n.set(o.field,u))}return n?n.Ye():null}(t,e):null}function na(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.je.isEqual(e.je)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||Do(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Fu&&e instanceof Fu||t instanceof Bu&&e instanceof Bu?Do(t.elements,e.elements,Us):t instanceof Gu&&e instanceof Gu?Us(t.Ke,e.Ke):t instanceof Uu&&e instanceof Uu}(t.transform,e.transform)}(t,e)})))}function ra(t){return t instanceof ya?t.version:Fo.min()}var ia=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.je=r,i.type=0,i}return mt(e,t),e}(Ju),oa=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.je=i,o.type=1,o}return mt(e,t),e}(Ju);function sa(t,e){return function(t,e){var n=new pa(e);return t.Qe.fields.forEach((function(e){if(!e.T()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Ye()}(t,e instanceof ya?e.data():la.empty())}var ua=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.je=Yu.exists(!0),r}return mt(e,t),e}(Ju);function aa(t,e){return e}function ca(t,e,n){for(var r=new pa(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Ye()}var ha=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.je=n,r.type=3,r}return mt(e,t),e}(Ju),fa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.je=n,r.type=4,r}return mt(e,t),e}(Ju),la=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.T())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Zs(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.C()])||null},t.prototype.isEqual=function(t){return Us(this.proto,t.proto)},t}(),pa=function(){function t(t){void 0===t&&(t=la.empty()),this.Xe=t,this.Ze=new Map}return t.prototype.set=function(t,e){return this.tn(t,e),this},t.prototype.delete=function(t){return this.tn(t,null),this},t.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===js(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.C(),e)},t.prototype.Ye=function(){var t=this.en(Go.$(),this.Ze);return null!=t?new la(t):this.Xe},t.prototype.en=function(t,e){var n=this,r=!1,i=this.Xe.field(t),o=Zs(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.en(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function da(t){var e=[];return Lo(t.fields||{},(function(t,n){var r=new Go([t]);if(Zs(n)){var i=da(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Hu(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var va=function(t,e){this.key=t,this.version=e},ya=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).nn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return mt(e,t),e.prototype.field=function(t){return this.nn.field(t)},e.prototype.data=function(){return this.nn},e.prototype.sn=function(){return this.nn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(va),ga=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return mt(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(va),ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(va),ba=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.on=null,this.an=null,this.startAt,this.endAt};function wa(t,e,n,r,i,o,s,u){return new ba(t,e,n,r,i,o,s,u)}function _a(t){return new ba(t)}function Ea(t){return!$o(t.limit)&&"F"===t.limitType}function Ia(t){return!$o(t.limit)&&"L"===t.limitType}function Ta(t){return t.rn.length>0?t.rn[0].field:null}function Na(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.cn())return r.field}return null}function xa(t){return null!==t.collectionGroup}function Aa(t){var e=Ao(t);if(null===e.on){e.on=[];var n=Na(e),r=Ta(e);if(null!==n&&null===r)n.B()||e.on.push(new Ya(n)),e.on.push(new Ya(Go.q(),"asc"));else{for(var i=!1,o=0,s=e.rn;o<s.length;o++){var u=s[o];e.on.push(u),u.field.B()&&(i=!0)}if(!i){var a=e.rn.length>0?e.rn[e.rn.length-1].dir:"asc";e.on.push(new Ya(Go.q(),a))}}}return e.on}function Sa(t){var e=Ao(t);if(!e.an)if("F"===e.limitType)e.an=Yo(e.path,e.collectionGroup,Aa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Aa(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ya(o.field,s))}var u=e.endAt?new $a(e.endAt.position,!e.endAt.before):null,a=e.startAt?new $a(e.startAt.position,!e.startAt.before):null;e.an=Yo(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.an}function Oa(t,e,n){return new ba(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ka(t,e){return new ba(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function Da(t,e){return new ba(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function Pa(t,e){return Jo(Sa(t),Sa(e))&&t.limitType===e.limitType}function Ca(t){return Xo(Sa(t))+"|lt:"+t.limitType}function La(t){return"Query(target="+function(t){var e=t.path.M();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.M()+" "+e.op+" "+zs(e.value);var e})).join(", ")+"]"),$o(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.M()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ha(t.startAt)),t.endAt&&(e+=", endAt: "+Ha(t.endAt)),"Target("+e+")"}(Sa(t))+"; limitType="+t.limitType+")"}function Ra(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.j(t.collectionGroup)&&t.path.N(n):Ko.G(t.path)?t.path.isEqual(n):t.path.F(n)}(t,e)&&function(t,e){for(var n=0,r=t.rn;n<r.length;n++){var i=r[n];if(!i.field.B()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Qa(t.startAt,Aa(t),e)||t.endAt&&Qa(t.endAt,Aa(t),e))}(t,e)}function Va(t){return function(e,n){for(var r=!1,i=0,o=Aa(t);i<o.length;i++){var s=o[i],u=Xa(s,e,n);if(0!==u)return u;r=r||s.field.B()}return 0}}var Ma=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return mt(e,t),e.create=function(t,n,r){return t.B()?"in"===n||"not-in"===n?this.un(t,n,r):new ja(t,n,r):"array-contains"===n?new Ba(t,r):"in"===n?new za(t,r):"not-in"===n?new Ga(t,r):"array-contains-any"===n?new Ka(t,r):new e(t,n,r)},e.un=function(t,e,n){return"in"===e?new Ua(t,n):new Fa(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.hn(qs(e,this.value)):null!==e&&js(this.value)===js(e)&&this.hn(qs(e,this.value))},e.prototype.hn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return No()}},e.prototype.cn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),ja=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ko.W(r.referenceValue),i}return mt(e,t),e.prototype.matches=function(t){var e=Ko.V(t.key,this.key);return this.hn(e)},e}(Ma),Ua=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=qa("in",n),r}return mt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ma),Fa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=qa("not-in",n),r}return mt(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ma);function qa(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ko.W(t.referenceValue)}))}var Ba=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return mt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ys(e)&&Fs(e.arrayValue,this.value)},e}(Ma),za=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return mt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Fs(this.value.arrayValue,e)},e}(Ma),Ga=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return mt(e,t),e.prototype.matches=function(t){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Fs(this.value.arrayValue,e)},e}(Ma),Ka=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return mt(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ys(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Fs(e.value.arrayValue,t)}))},e}(Ma),$a=function(t,e){this.position=t,this.before=e};function Ha(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return zs(t)})).join(",")}function Qa(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.B()?Ko.V(Ko.W(s.referenceValue),n.key):qs(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Wa(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Us(t.position[n],e.position[n]))return!1;return!0}var Ya=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xa(t,e,n){var r=t.field.B()?Ko.V(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?qs(r,i):No()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return No()}}function Ja(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Za=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},tc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ln=t,this._n=e,this.fn=n,this.dn=r,this.wn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}return t.prototype.reset=function(){this.Tn=0},t.prototype.mn=function(){this.Tn=this.wn},t.prototype.An=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.Rn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);i>0&&_o("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this.ln.Pn(this._n,i,(function(){return e.In=Date.now(),t()})),this.Tn*=this.dn,this.Tn<this.fn&&(this.Tn=this.fn),this.Tn>this.wn&&(this.Tn=this.wn)},t.prototype.gn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},t.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},t.prototype.Rn=function(){return(Math.random()-.5)*this.Tn},t}(),ec=function(){function t(t){var e=this;this.yn=null,this.pn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.bn=!1,t((function(t){e.vn=!0,e.result=t,e.yn&&e.yn(t)}),(function(t){e.vn=!0,e.error=t,e.pn&&e.pn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.bn&&No(),this.bn=!0,this.vn?this.error?this.Sn(n,this.error):this.Dn(e,this.result):new t((function(t,i){r.yn=function(n){r.Dn(e,n).next(t,i)},r.pn=function(e){r.Sn(n,e).next(t,i)}}))},t.prototype.Cn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Nn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Dn=function(e,n){return e?this.Nn((function(){return e(n)})):t.resolve(n)},t.prototype.Sn=function(e,n){return e?this.Nn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.xn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Fn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.xn(r)},t}(),nc=function(){function t(e,n,r){this.name=e,this.version=n,this.On=r,12.2===t.Mn(St())&&Eo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return _o("SimpleDb","Removing database:",t),ac(window.indexedDB.deleteDatabase(t)).Cn()},t.kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.$n())return!0;var e=St(),n=t.Mn(e),r=0<n&&n<10,i=t.Ln(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.$n=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Bn)},t.qn=function(t,e){return t.store(e)},t.Mn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ln=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Un=function(t){return wt(this,void 0,void 0,(function(){var e,n=this;return _t(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(_o("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ic(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new jo(Mo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ic(t,n))},i.onupgradeneeded=function(t){_o("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.On.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){_o("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Qn&&(this.db.onversionchange=function(t){return n.Qn(t)}),this.db)]}}))}))},t.prototype.Kn=function(t){this.Qn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s,u,a;return _t(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return _t(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Un(t)];case 2:return u.db=f.sent(),e=sc.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),ec.reject(t)})).Cn(),a={},s.catch((function(){})),[4,e.Wn];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,_o("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),rc=function(){function t(t){this.jn=t,this.Gn=!1,this.zn=null}return Object.defineProperty(t.prototype,"vn",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Hn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.jn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Gn=!0},t.prototype.Jn=function(t){this.zn=t},t.prototype.delete=function(){return ac(this.jn.delete())},t}(),ic=function(t){function e(e,n){var r=this;return(r=t.call(this,Mo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return mt(e,t),e}(jo);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function oc(t){return"IndexedDbTransactionError"===t.name}var sc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Yn=new Za,this.transaction.oncomplete=function(){n.Yn.resolve()},this.transaction.onabort=function(){e.error?n.Yn.reject(new ic(t,e.error)):n.Yn.resolve()},this.transaction.onerror=function(e){var r=hc(e.target.error);n.Yn.reject(new ic(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ic(n,e)}},Object.defineProperty(t.prototype,"Wn",{get:function(){return this.Yn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Yn.reject(t),this.aborted||(_o("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new uc(e)},t}(),uc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(_o("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(_o("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ac(n)},t.prototype.add=function(t){return _o("SimpleDb","ADD",this.store.name,t,t),ac(this.store.add(t))},t.prototype.get=function(t){var e=this;return ac(this.store.get(t)).next((function(n){return void 0===n&&(n=null),_o("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return _o("SimpleDb","DELETE",this.store.name,t),ac(this.store.delete(t))},t.prototype.count=function(){return _o("SimpleDb","COUNT",this.store.name),ac(this.store.count())},t.prototype.Xn=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Zn(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ts=function(t,e){_o("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.es=!1;var r=this.cursor(n);return this.Zn(r,(function(t,e,n){return n.delete()}))},t.prototype.ns=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Zn(r,e)},t.prototype.ss=function(t){var e=this.cursor({});return new ec((function(n,r){e.onerror=function(t){var e=hc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Zn=function(t,e){var n=[];return new ec((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new rc(i),s=e(i.primaryKey,i.value,o);if(s instanceof ec){var u=s.catch((function(t){return o.done(),ec.reject(t)}));n.push(u)}o.vn?r():null===o.Hn?i.continue():i.continue(o.Hn)}else r()}})).next((function(){return ec.xn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.es?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ac(t){return new ec((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=hc(t.target.error);n(e)}}))}var cc=!1;function hc(t){var e=nc.Mn(St());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new jo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return cc||(cc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function fc(){return"undefined"!=typeof window?window:null}function lc(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var pc=function(){function t(t,e,n,r,i){this.rs=t,this._n=e,this.os=n,this.op=r,this.cs=i,this.us=new Za,this.then=this.us.promise.then.bind(this.us.promise),this.us.promise.catch((function(t){}))}return t.hs=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.ls=setTimeout((function(){return e._s()}),t)},t.prototype.Vn=function(){return this._s()},t.prototype.cancel=function(t){null!==this.ls&&(this.clearTimeout(),this.us.reject(new jo(Mo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype._s=function(){var t=this;this.rs.fs((function(){return null!==t.ls?(t.clearTimeout(),t.op().then((function(e){return t.us.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.ls&&(this.cs(this),clearTimeout(this.ls),this.ls=null)},t}(),dc=function(){function t(){var t=this;this.ds=Promise.resolve(),this.ws=[],this.Ts=!1,this.Es=[],this.Is=null,this.As=!1,this.Rs=[],this.Ps=new tc(this,"async_queue_retry"),this.gs=function(){var e=lc();e&&_o("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ps.gn()};var e=lc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gs)}return Object.defineProperty(t.prototype,"Vs",{get:function(){return this.Ts},enumerable:!1,configurable:!0}),t.prototype.fs=function(t){this.enqueue(t)},t.prototype.ys=function(t){this.ps(),this.vs(t)},t.prototype.bs=function(){if(!this.Ts){this.Ts=!0;var t=lc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gs)}},t.prototype.enqueue=function(t){return this.ps(),this.Ts?new Promise((function(t){})):this.vs(t)},t.prototype.Ss=function(t){var e=this;this.fs((function(){return e.ws.push(t),e.Ds()}))},t.prototype.Ds=function(){return wt(this,void 0,void 0,(function(){var t,e=this;return _t(this,(function(n){switch(n.label){case 0:if(0===this.ws.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.ws[0]()];case 2:return n.sent(),this.ws.shift(),this.Ps.reset(),[3,4];case 3:if(!oc(t=n.sent()))throw t;return _o("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.ws.length>0&&this.Ps.An((function(){return e.Ds()})),n.label=5;case 5:return[2]}}))}))},t.prototype.vs=function(t){var e=this,n=this.ds.then((function(){return e.As=!0,t().catch((function(t){throw e.Is=t,e.As=!1,Eo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.As=!1,t}))}));return this.ds=n,n},t.prototype.Pn=function(t,e,n){var r=this;this.ps(),this.Rs.indexOf(t)>-1&&(e=0);var i=pc.hs(this,t,e,n,(function(t){return r.Cs(t)}));return this.Es.push(i),i},t.prototype.ps=function(){this.Is&&No()},t.prototype.Ns=function(){},t.prototype.xs=function(){return wt(this,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return[4,t=this.ds];case 1:e.sent(),e.label=2;case 2:if(t!==this.ds)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Fs=function(t){for(var e=0,n=this.Es;e<n.length;e++)if(n[e]._n===t)return!0;return!1},t.prototype.Os=function(t){var e=this;return this.xs().then((function(){e.Es.sort((function(t,e){return t.os-e.os}));for(var n=0,r=e.Es;n<r.length;n++){var i=r[n];if(i.Vn(),"all"!==t&&i._n===t)break}return e.xs()}))},t.prototype.Ms=function(t){this.Rs.push(t)},t.prototype.Cs=function(t){var e=this.Es.indexOf(t);this.Es.splice(e,1)},t}();function vc(t,e){if(Eo("AsyncQueue",e+": "+t),oc(t))return new jo(Mo.UNAVAILABLE,e+": "+t);throw t}var yc=function(){this.ks=void 0,this.listeners=[]},gc=function(){this.queries=new Vo((function(t){return Ca(t)}),Pa),this.onlineState="Unknown",this.$s=new Set};function mc(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return _t(this,(function(c){switch(c.label){case 0:if(n=Ao(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new yc),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Ls(r)];case 2:return s.ks=c.sent(),[3,4];case 3:return u=c.sent(),a=vc(u,"Initialization of query '"+La(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Bs(n.onlineState),o.ks&&e.qs(o.ks)&&Ec(n),[2]}}))}))}function bc(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s;return _t(this,(function(u){return n=Ao(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Us(r))]:[2]}))}))}function wc(t,e){for(var n=Ao(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].qs(s)&&(r=!0);a.ks=s}}r&&Ec(n)}function _c(t,e,n){var r=Ao(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Ec(t){t.$s.forEach((function(t){t.next()}))}var Ic=function(){function t(t,e,n){this.query=t,this.Qs=e,this.Ks=!1,this.Ws=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ts(t.query,t.docs,t.Ut,e,t.Qt,t.fromCache,t.Kt,!0)}var o=!1;return this.Ks?this.js(t)&&(this.Qs.next(t),o=!0):this.Gs(t,this.onlineState)&&(this.zs(t),o=!0),this.Ws=t,o},t.prototype.onError=function(t){this.Qs.error(t)},t.prototype.Bs=function(t){this.onlineState=t;var e=!1;return this.Ws&&!this.Ks&&this.Gs(this.Ws,t)&&(this.zs(this.Ws),e=!0),e},t.prototype.Gs=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Hs&&n||t.docs.T()&&"Offline"!==e)},t.prototype.js=function(t){if(t.docChanges.length>0)return!0;var e=this.Ws&&this.Ws.hasPendingWrites!==t.hasPendingWrites;return!(!t.Kt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.zs=function(t){t=Ts.jt(t.query,t.docs,t.Qt,t.fromCache),this.Ks=!0,this.Qs.next(t)},t}(),Tc=function(){function t(t){this.uid=t}return t.prototype.Js=function(){return null!=this.uid},t.prototype.Ys=function(){return this.Js()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Tc.UNAUTHENTICATED=new Tc(null),Tc.Xs=new Tc("google-credentials-uid"),Tc.Zs=new Tc("first-party-uid");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Nc=function(t,e){this.user=e,this.type="OAuth",this.ti={},this.ti.Authorization="Bearer "+t},xc=function(){function t(){this.ei=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.ni=function(){},t.prototype.si=function(t){this.ei=t,t(Tc.UNAUTHENTICATED)},t.prototype.ii=function(){this.ei=null},t}(),Ac=function(){function t(t){var e=this;this.ri=null,this.currentUser=Tc.UNAUTHENTICATED,this.oi=!1,this.ai=0,this.ei=null,this.forceRefresh=!1,this.ri=function(){e.ai++,e.currentUser=e.ci(),e.oi=!0,e.ei&&e.ei(e.currentUser)},this.ai=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ri):(this.ri(null),t.get().then((function(t){e.auth=t,e.ri&&e.auth.addAuthTokenListener(e.ri)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.ai,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.ai!==e?(_o("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(xo("string"==typeof n.accessToken),new Nc(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.ni=function(){this.forceRefresh=!0},t.prototype.si=function(t){this.ei=t,this.oi&&t(this.currentUser)},t.prototype.ii=function(){this.auth&&this.auth.removeAuthTokenListener(this.ri),this.ri=null,this.ei=null},t.prototype.ci=function(){var t=this.auth&&this.auth.getUid();return xo(null===t||"string"==typeof t),new Tc(t)},t}(),Sc=function(){function t(t,e){this.ui=t,this.hi=e,this.type="FirstParty",this.user=Tc.Zs}return Object.defineProperty(t.prototype,"ti",{get:function(){var t={"X-Goog-AuthUser":this.hi},e=this.ui.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Oc=function(){function t(t,e){this.ui=t,this.hi=e}return t.prototype.getToken=function(){return Promise.resolve(new Sc(this.ui,this.hi))},t.prototype.si=function(t){t(Tc.Zs)},t.prototype.ii=function(){},t.prototype.ni=function(){},t}(),kc=function(){function t(t,e,n,r){this.batchId=t,this.li=e,this.baseMutations=n,this.mutations=r}return t.prototype._i=function(t,e,n){for(var r=n.fi,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Zu(o,e,r[i]))}return e},t.prototype.di=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=ta(i,e,e,this.li))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=ta(a,e,o,this.li))}return e},t.prototype.wi=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.di(r.key,t.get(r.key));i&&(n=n.rt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),bs())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Do(this.mutations,t.mutations,(function(t,e){return na(t,e)}))&&Do(this.baseMutations,t.baseMutations,(function(t,e){return na(t,e)}))},t}(),Dc=function(){function t(t,e,n,r){this.batch=t,this.Ti=e,this.fi=n,this.Ei=r}return t.from=function(e,n,r){xo(e.mutations.length===r.length);for(var i=gs,o=e.mutations,s=0;s<o.length;s++)i=i.rt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Pc=function(){function t(){this.Ii=new Vo((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.mi=!1}return t.prototype.Ai=function(t){var e=this.Ii.get(t);return e?e.readTime:Fo.min()},t.prototype.Ri=function(t,e){this.Pi(),this.Ii.set(t.key,{gi:t,readTime:e})},t.prototype.Vi=function(t,e){void 0===e&&(e=null),this.Pi(),this.Ii.set(t,{gi:null,readTime:e})},t.prototype.yi=function(t,e){this.Pi();var n=this.Ii.get(e);return void 0!==n?ec.resolve(n.gi):this.pi(t,e)},t.prototype.getEntries=function(t,e){return this.vi(t,e)},t.prototype.apply=function(t){return this.Pi(),this.mi=!0,this.bi(t)},t.prototype.Pi=function(){},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cc(t){return new nu(t,!0)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Lc(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Rc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vc=function(){function t(){this.Si=[]}return t.prototype.Di=function(t){this.Si.push(t)},t.prototype.Ci=function(){this.Si.forEach((function(t){return t()}))},t}(),Mc=function(){function t(t,e,n){this.Ni=t,this.xi=e,this.Fi=n}return t.prototype.Oi=function(t,e){var n=this;return this.xi.Mi(t,e).next((function(r){return n.ki(t,e,r)}))},t.prototype.ki=function(t,e,n){return this.Ni.yi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].di(e,t);return t}))},t.prototype.$i=function(t,e,n){var r=ds();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].di(t,e);r=r.rt(t,e)})),r},t.prototype.Li=function(t,e){var n=this;return this.Ni.getEntries(t,e).next((function(e){return n.Bi(t,e)}))},t.prototype.Bi=function(t,e){var n=this;return this.xi.qi(t,e).next((function(r){var i=n.$i(t,e,r),o=ps();return i.forEach((function(t,e){e||(e=new ga(t,Fo.min())),o=o.rt(t,e)})),o}))},t.prototype.Ui=function(t,e,n){return function(t){return Ko.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Qi(t,e.path):xa(e)?this.Ki(t,e,n):this.Wi(t,e,n)},t.prototype.Qi=function(t,e){return this.Oi(t,new Ko(e)).next((function(t){var e=ys();return t instanceof ya&&(e=e.rt(t.key,t)),e}))},t.prototype.Ki=function(t,e,n){var r=this,i=e.collectionGroup,o=ys();return this.Fi.ji(t,i).next((function(s){return ec.forEach(s,(function(s){var u=function(t,e){return new ba(e,null,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Wi(t,u,n).next((function(t){t.forEach((function(t,e){o=o.rt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Wi=function(t,e,n){var r,i,o=this;return this.Ni.Ui(t,e,n).next((function(n){return r=n,o.xi.Gi(t,e)})).next((function(e){return i=e,o.zi(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=ta(a,h,h,o.li);r=f instanceof ya?r.rt(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ra(e,n)||(r=r.remove(t))})),r}))},t.prototype.zi=function(t,e,n){for(var r=bs(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof oa&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Ni.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ya&&(c=c.rt(t,e))})),c}))},t}(),jc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=r}return t.Yi=function(e,n){for(var r=bs(),i=bs(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Uc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Xi=function(t){return n.Zi(t)},this.tr=function(t){return e.er(t)})}return t.prototype.Zi=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.tr&&this.tr(t),t},t}();function Fc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=ko(n,i);return 0===s?ko(r,o):s}Uc.nr=-1;var qc=function(){function t(t){this.sr=t,this.buffer=new hs(Fc),this.ir=0}return t.prototype.rr=function(){return++this.ir},t.prototype.ar=function(t){var e=[t,this.rr()];if(this.buffer.size<this.sr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Fc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Bc={cr:!1,ur:0,hr:0,lr:0},zc=function(){function t(t,e,n){this._r=t,this.dr=e,this.wr=n}return t.Tr=function(e){return new t(e,t.Er,t.Ir)},t}();zc.Er=10,zc.Ir=1e3,zc.mr=new zc(41943040,zc.Er,zc.Ir),zc.Ar=new zc(-1,0,0);var Gc=function(){function t(t,e){this.Rr=t,this.rs=e,this.Pr=!1,this.gr=null}return t.prototype.start=function(t){-1!==this.Rr.params._r&&this.Vr(t)},t.prototype.stop=function(){this.gr&&(this.gr.cancel(),this.gr=null)},Object.defineProperty(t.prototype,"yr",{get:function(){return null!==this.gr},enumerable:!1,configurable:!0}),t.prototype.Vr=function(t){var e=this,n=this.Pr?3e5:6e4;_o("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.gr=this.rs.Pn("lru_garbage_collection",n,(function(){return wt(e,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:this.gr=null,this.Pr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.pr(this.Rr)];case 2:return n.sent(),[3,7];case 3:return oc(e=n.sent())?(_o("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,mf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Vr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Kc=function(){function t(t,e){this.vr=t,this.params=e}return t.prototype.br=function(t,e){return this.vr.Sr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Dr=function(t,e){var n=this;if(0===e)return ec.resolve(Uc.nr);var r=new qc(e);return this.vr.De(t,(function(t){return r.ar(t.sequenceNumber)})).next((function(){return n.vr.Cr(t,(function(t){return r.ar(t)}))})).next((function(){return r.maxValue}))},t.prototype.Nr=function(t,e,n){return this.vr.Nr(t,e,n)},t.prototype.Fr=function(t,e){return this.vr.Fr(t,e)},t.prototype.Or=function(t,e){var n=this;return-1===this.params._r?(_o("LruGarbageCollector","Garbage collection skipped; disabled"),ec.resolve(Bc)):this.Mr(t).next((function(r){return r<n.params._r?(_o("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params._r),Bc):n.kr(t,e)}))},t.prototype.Mr=function(t){return this.vr.Mr(t)},t.prototype.kr=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.br(t,this.params.dr).next((function(e){return e>c.params.wr?(_o("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.wr+" from "+e),r=c.params.wr):r=e,o=Date.now(),c.Dr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Nr(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.Fr(t,n)})).next((function(t){return a=Date.now(),wo()<=Gt.DEBUG&&_o("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),ec.resolve({cr:!0,ur:r,hr:i,lr:t})}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $c(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Qc(e)),e=Hc(t.get(n),e);return Qc(e)}function Hc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Qc(t){return t+""}function Wc(t){var e=t.length;if(xo(e>=2),2===e)return xo(""===t.charAt(0)&&""===t.charAt(1)),Bo.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&No(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:No()}o=s+2}return new Bo(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yc=function(t){this.$r=t};function Xc(t,e){if(e.document)return function(t,e,n){var r=pu(t,e.name),i=cu(e.updateTime),o=new la({mapValue:{fields:e.fields}});return new ya(r,i,o,{hasCommittedMutations:!!n})}(t.$r,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ko.H(e.noDocument.path),r=nh(e.noDocument.readTime);return new ga(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Ko.H(e.unknownDocument.path),o=nh(e.unknownDocument.version);return new ma(i,o)}return No()}function Jc(t,e,n){var r=Zc(n),i=e.key.path.S().O();if(e instanceof ya){var o=function(t,e){return{name:lu(t,e.key),fields:e.sn().mapValue.fields,updateTime:su(t,e.version.P())}}(t.$r,e),s=e.hasCommittedMutations;return new Oh(null,null,o,s,r,i)}if(e instanceof ga){var u=e.key.path.O(),a=eh(e.version),c=e.hasCommittedMutations;return new Oh(null,new Ah(u,a),null,c,r,i)}if(e instanceof ma){var h=e.key.path.O(),f=eh(e.version);return new Oh(new Sh(h,f),null,null,!0,r,i)}return No()}function Zc(t){var e=t.P();return[e.seconds,e.nanoseconds]}function th(t){var e=new Uo(t[0],t[1]);return Fo.m(e)}function eh(t){var e=t.P();return new Eh(e.seconds,e.nanoseconds)}function nh(t){var e=new Uo(t.seconds,t.nanoseconds);return Fo.m(e)}function rh(t,e){var n=(e.baseMutations||[]).map((function(e){return wu(t.$r,e)})),r=e.mutations.map((function(e){return wu(t.$r,e)})),i=Uo.fromMillis(e.localWriteTimeMs);return new kc(e.batchId,i,n,r)}function ih(t){var e,n,r=nh(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?nh(t.lastLimboFreeSnapshotVersion):Fo.min();return void 0!==t.query.documents?(xo(1===(n=t.query).documents.length),e=Sa(_a(vu(n.documents[0])))):e=function(t){return Sa(Iu(t))}(t.query),new rs(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ts.fromBase64String(t.resumeToken))}function oh(t,e){var n,r=eh(e.et),i=eh(e.lastLimboFreeSnapshotVersion);n=Zo(e.target)?_u(t.$r,e.target):Eu(t.$r,e.target);var o=e.resumeToken.toBase64();return new Dh(e.targetId,Xo(e.target),r,o,e.sequenceNumber,i,n)}function sh(t){var e=Iu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Oa(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uh=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Fi=n,this.Lr=r,this.Br={}}return t.qr=function(e,n,r,i){return xo(""!==e.uid),new t(e.Js()?e.uid:"",n,r,i)},t.prototype.Ur=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hh(t).ns({index:Nh.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Qr=function(t,e,n,r){var i=this,o=fh(t),s=hh(t);return s.add({}).next((function(u){xo("number"==typeof u);for(var a=new kc(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return bu(t.$r,e)})),i=n.mutations.map((function(e){return bu(t.$r,e)}));return new Nh(e,n.batchId,n.li.toMillis(),r,i)}(i.serializer,i.userId,a),h=[],f=new hs((function(t,e){return ko(t.M(),e.M())})),l=0,p=r;l<p.length;l++){var d=p[l],v=xh.key(i.userId,d.key.path,u);f=f.add(d.key.path.S()),h.push(s.put(c)),h.push(o.put(v,xh.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Fi.Kr(t,e))})),t.Di((function(){i.Br[u]=a.keys()})),ec.xn(h).next((function(){return a}))}))},t.prototype.Wr=function(t,e){var n=this;return hh(t).get(e).next((function(t){return t?(xo(t.userId===n.userId),rh(n.serializer,t)):null}))},t.prototype.jr=function(t,e){var n=this;return this.Br[e]?ec.resolve(this.Br[e]):this.Wr(t,e).next((function(t){if(t){var r=t.keys();return n.Br[e]=r,r}return null}))},t.prototype.Gr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return hh(t).ns({index:Nh.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(xo(e.batchId>=r),o=rh(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.zr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hh(t).ns({index:Nh.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Hr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hh(t).Xn(Nh.userMutationsIndex,n).next((function(t){return t.map((function(t){return rh(e.serializer,t)}))}))},t.prototype.Mi=function(t,e){var n=this,r=xh.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return fh(t).ns({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=Wc(a);if(u===n.userId&&e.path.isEqual(h))return hh(t).get(c).next((function(t){if(!t)throw No();xo(t.userId===n.userId),o.push(rh(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.qi=function(t,e){var n=this,r=new hs(ko),i=[];return e.forEach((function(e){var o=xh.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=fh(t).ns({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=Wc(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),ec.xn(i).next((function(){return n.Jr(t,r)}))},t.prototype.Gi=function(t,e){var n=this,r=e.path,i=r.length+1,o=xh.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new hs(ko);return fh(t).ns({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=Wc(a);s===n.userId&&r.N(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Jr(t,u)}))},t.prototype.Jr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(hh(t).get(e).next((function(t){if(null===t)throw No();xo(t.userId===n.userId),r.push(rh(n.serializer,t))})))})),ec.xn(i).next((function(){return r}))},t.prototype.Yr=function(t,e){var n=this;return ch(t.Xr,this.userId,e).next((function(r){return t.Di((function(){n.Zr(e.batchId)})),ec.forEach(r,(function(e){return n.Lr.eo(t,e)}))}))},t.prototype.Zr=function(t){delete this.Br[t]},t.prototype.no=function(t){var e=this;return this.Ur(t).next((function(n){if(!n)return ec.resolve();var r=IDBKeyRange.lowerBound(xh.prefixForUser(e.userId)),i=[];return fh(t).ns({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Wc(t[1]);i.push(o)}else r.done()})).next((function(){xo(0===i.length)}))}))},t.prototype.so=function(t,e){return ah(t,this.userId,e)},t.prototype.io=function(t){var e=this;return lh(t).get(this.userId).next((function(t){return t||new Th(e.userId,-1,"")}))},t}();function ah(t,e,n){var r=xh.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fh(t).ns({range:o,es:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function ch(t,e,n){var r=t.store(Nh.store),i=t.store(xh.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.ns({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){xo(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=xh.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return ec.xn(o).next((function(){return c}))}function hh(t){return Jh.qn(t,Nh.store)}function fh(t){return Jh.qn(t,xh.store)}function lh(t){return Jh.qn(t,Th.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ph=function(){function t(t,e){this.serializer=t,this.Fi=e}return t.prototype.Ri=function(t,e,n){return yh(t).put(gh(e),n)},t.prototype.Vi=function(t,e){var n=yh(t),r=gh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ro(t,r)}))},t.prototype.yi=function(t,e){var n=this;return yh(t).get(gh(e)).next((function(t){return n.oo(t)}))},t.prototype.ao=function(t,e){var n=this;return yh(t).get(gh(e)).next((function(t){var e=n.oo(t);return e?{gi:e,size:mh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ds();return this.co(t,e,(function(t,e){var i=n.oo(e);r=r.rt(t,i)})).next((function(){return r}))},t.prototype.uo=function(t,e){var n=this,r=ds(),i=new us(Ko.V);return this.co(t,e,(function(t,e){var o=n.oo(e);o?(r=r.rt(t,o),i=i.rt(t,mh(e))):(r=r.rt(t,null),i=i.rt(t,0))})).next((function(){return{ho:r,lo:i}}))},t.prototype.co=function(t,e,n){if(e.T())return ec.resolve();var r=IDBKeyRange.bound(e.first().path.O(),e.last().path.O()),i=e.lt(),o=i.Et();return yh(t).ns({range:r},(function(t,e,r){for(var s=Ko.H(t);o&&Ko.V(o,s)<0;)n(o,null),o=i.Et();o&&o.isEqual(s)&&(n(o,e),o=i.It()?i.Et():null),o?r.Jn(o.path.O()):r.done()})).next((function(){for(;o;)n(o,null),o=i.It()?i.Et():null}))},t.prototype.Ui=function(t,e,n){var r=this,i=ys(),o=e.path.length+1,s={};if(n.isEqual(Fo.min())){var u=e.path.O();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.O(),c=Zc(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Oh.collectionReadTimeIndex}return yh(t).ns(s,(function(t,n,s){if(t.length===o){var u=Xc(r.serializer,n);e.path.N(u.key.path)?u instanceof ya&&Ra(e,u)&&(i=i.rt(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype._o=function(t){return new dh(this,!!t&&t.fo)},t.prototype.wo=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return vh(t).get(kh.key).next((function(t){return xo(!!t),t}))},t.prototype.ro=function(t,e){return vh(t).put(kh.key,e)},t.prototype.oo=function(t){if(t){var e=Xc(this.serializer,t);return e instanceof ga&&e.version.isEqual(Fo.min())?null:e}return null},t}(),dh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).To=e,r.fo=n,r.Eo=new Vo((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return mt(e,t),e.prototype.bi=function(t){var e=this,n=[],r=0,i=new hs((function(t,e){return ko(t.M(),e.M())}));return this.Ii.forEach((function(o,s){var u=e.Eo.get(o);if(s.gi){var a=Jc(e.To.serializer,s.gi,e.Ai(o));i=i.add(o.path.S());var c=mh(a);r+=c-u,n.push(e.To.Ri(t,o,a))}else if(r-=u,e.fo){var h=Jc(e.To.serializer,new ga(o,Fo.min()),e.Ai(o));n.push(e.To.Ri(t,o,h))}else n.push(e.To.Vi(t,o))})),i.forEach((function(r){n.push(e.To.Fi.Kr(t,r))})),n.push(this.To.updateMetadata(t,r)),ec.xn(n)},e.prototype.pi=function(t,e){var n=this;return this.To.ao(t,e).next((function(t){return null===t?(n.Eo.set(e,0),null):(n.Eo.set(e,t.size),t.gi)}))},e.prototype.vi=function(t,e){var n=this;return this.To.uo(t,e).next((function(t){var e=t.ho;return t.lo.forEach((function(t,e){n.Eo.set(t,e)})),e}))},e}(Pc);function vh(t){return Jh.qn(t,kh.store)}function yh(t){return Jh.qn(t,Oh.store)}function gh(t){return t.path.O()}function mh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw No();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var bh=function(){function t(){this.Io=new wh}return t.prototype.Kr=function(t,e){return this.Io.add(e),ec.resolve()},t.prototype.ji=function(t,e){return ec.resolve(this.Io.getEntries(e))},t}(),wh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.C(),n=t.S(),r=this.index[e]||new hs(Bo.V),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.C(),n=t.S(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new hs(Bo.V)).O()},t}(),_h=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;xo(n<r&&n>=0&&r<=11);var o=new sc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ih.store)}(t),function(t){t.createObjectStore(Th.store,{keyPath:Th.keyPath}),t.createObjectStore(Nh.store,{keyPath:Nh.keyPath,autoIncrement:!0}).createIndex(Nh.userMutationsIndex,Nh.userMutationsKeyPath,{unique:!0}),t.createObjectStore(xh.store)}(t),Rh(t),function(t){t.createObjectStore(Oh.store)}(t));var s=ec.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ph.store),t.deleteObjectStore(Dh.store),t.deleteObjectStore(Ch.store)}(t),Rh(t)),s=s.next((function(){return function(t){var e=t.store(Ch.store),n=new Ch(0,0,Fo.min().P(),0);return e.put(Ch.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Nh.store).Xn().next((function(n){t.deleteObjectStore(Nh.store),t.createObjectStore(Nh.store,{keyPath:Nh.keyPath,autoIncrement:!0}).createIndex(Nh.userMutationsIndex,Nh.userMutationsKeyPath,{unique:!0});var r=e.store(Nh.store),i=n.map((function(t){return r.put(t)}));return ec.xn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Vh.store,{keyPath:Vh.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(kh.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Oh.store);e.createIndex(Oh.readTimeIndex,Oh.readTimeIndexPath,{unique:!1}),e.createIndex(Oh.collectionReadTimeIndex,Oh.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Mh.store,{keyPath:Mh.keyPath})}(t),function(t){t.createObjectStore(jh.store,{keyPath:jh.keyPath})}(t)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Oh.store).ns((function(t,n){e+=mh(n)})).next((function(){var n=new kh(e);return t.store(kh.store).put(kh.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Th.store),r=t.store(Nh.store);return n.Xn().next((function(n){return ec.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Xn(Nh.userMutationsIndex,i).next((function(r){return ec.forEach(r,(function(r){xo(r.userId===n.userId);var i=rh(e.serializer,r);return ch(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Ph.store),n=t.store(Oh.store);return t.store(Ch.store).get(Ch.key).next((function(t){var r=[];return n.ns((function(n,i){var o=new Bo(n),s=function(t){return[0,$c(t)]}(o);r.push(e.get(s).next((function(n){return n?ec.resolve():function(n){return e.put(new Ph(0,$c(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return ec.xn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Lh.store,{keyPath:Lh.keyPath});var n=e.store(Lh.store),r=new wh,i=function(t){if(r.add(t)){var e=t.C(),i=t.S();return n.put({collectionId:e,parent:$c(i)})}};return e.store(Oh.store).ns({es:!0},(function(t,e){var n=new Bo(t);return i(n.S())})).next((function(){return e.store(xh.store).ns({es:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Wc(n));return i(r.S())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Dh.store);return n.ns((function(t,r){var i=ih(r),o=oh(e.serializer,i);return n.put(o)}))},t}(),Eh=function(t,e){this.seconds=t,this.nanoseconds=e},Ih=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ih.store="owner",Ih.key="owner";var Th=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Th.store="mutationQueues",Th.keyPath="userId";var Nh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Nh.store="mutations",Nh.keyPath="batchId",Nh.userMutationsIndex="userMutationsIndex",Nh.userMutationsKeyPath=["userId","batchId"];var xh=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,$c(e)]},t.key=function(t,e,n){return[t,$c(e),n]},t}();xh.store="documentMutations",xh.PLACEHOLDER=new xh;var Ah=function(t,e){this.path=t,this.readTime=e},Sh=function(t,e){this.path=t,this.version=e},Oh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Oh.store="remoteDocuments",Oh.readTimeIndex="readTimeIndex",Oh.readTimeIndexPath="readTime",Oh.collectionReadTimeIndex="collectionReadTimeIndex",Oh.collectionReadTimeIndexPath=["parentPath","readTime"];var kh=function(t){this.byteSize=t};kh.store="remoteDocumentGlobal",kh.key="remoteDocumentGlobalKey";var Dh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Dh.store="targets",Dh.keyPath="targetId",Dh.queryTargetsIndexName="queryTargetsIndex",Dh.queryTargetsKeyPath=["canonicalId","targetId"];var Ph=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ph.store="targetDocuments",Ph.keyPath=["targetId","path"],Ph.documentTargetsIndex="documentTargetsIndex",Ph.documentTargetsKeyPath=["path","targetId"];var Ch=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ch.key="targetGlobalKey",Ch.store="targetGlobal";var Lh=function(t,e){this.collectionId=t,this.parent=e};function Rh(t){t.createObjectStore(Ph.store,{keyPath:Ph.keyPath}).createIndex(Ph.documentTargetsIndex,Ph.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Dh.store,{keyPath:Dh.keyPath}).createIndex(Dh.queryTargetsIndexName,Dh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ch.store)}Lh.store="collectionParents",Lh.keyPath=["collectionId","parent"];var Vh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Vh.store="clientMetadata",Vh.keyPath="clientId";var Mh=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Mh.store="bundles",Mh.keyPath="bundleId";var jh=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};jh.store="namedQueries",jh.keyPath="name";var Uh=Nt(Nt(Nt(Nt([Th.store,Nh.store,xh.store,Oh.store,Dh.store,Ih.store,Ch.store,Ph.store],[Vh.store]),[kh.store]),[Lh.store]),[Mh.store,jh.store]),Fh=function(){function t(t){this.serializer=t}return t.prototype.mo=function(t,e){return qh(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:nh(e.createTime),version:e.version};var e}))},t.prototype.Ao=function(t,e){return qh(t).put({bundleId:(n=e).id,createTime:eh(cu(n.createTime)),version:n.version});var n},t.prototype.Ro=function(t,e){return Bh(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:sh(e.bundledQuery),readTime:nh(e.readTime)};var e}))},t.prototype.Po=function(t,e){return Bh(t).put(function(t){return{name:t.name,readTime:eh(cu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qh(t){return Jh.qn(t,Mh.store)}function Bh(t){return Jh.qn(t,jh.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zh=function(){function t(){this.Vo=new wh}return t.prototype.Kr=function(t,e){var n=this;if(!this.Vo.has(e)){var r=e.C(),i=e.S();t.Di((function(){n.Vo.add(e)}));var o={collectionId:r,parent:$c(i)};return Gh(t).put(o)}return ec.resolve()},t.prototype.ji=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Po(e),""],!1,!0);return Gh(t).Xn(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Wc(o.parent))}return n}))},t}();function Gh(t){return Jh.qn(t,Lh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Kh=function(){function t(t){this.yo=t}return t.prototype.next=function(){return this.yo+=2,this.yo},t.po=function(){return new t(0)},t.vo=function(){return new t(-1)},t}(),$h=function(){function t(t,e){this.Lr=t,this.serializer=e}return t.prototype.bo=function(t){var e=this;return this.So(t).next((function(n){var r=new Kh(n.highestTargetId);return n.highestTargetId=r.next(),e.Do(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Co=function(t){return this.So(t).next((function(t){return Fo.m(new Uo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.No=function(t){return this.So(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.xo=function(t,e,n){var r=this;return this.So(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.P()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Do(t,i)}))},t.prototype.Fo=function(t,e){var n=this;return this.Oo(t,e).next((function(){return n.So(t).next((function(r){return r.targetCount+=1,n.Mo(e,r),n.Do(t,r)}))}))},t.prototype.ko=function(t,e){return this.Oo(t,e)},t.prototype.$o=function(t,e){var n=this;return this.Lo(t,e.targetId).next((function(){return Hh(t).delete(e.targetId)})).next((function(){return n.So(t)})).next((function(e){return xo(e.targetCount>0),e.targetCount-=1,n.Do(t,e)}))},t.prototype.Nr=function(t,e,n){var r=this,i=0,o=[];return Hh(t).ns((function(s,u){var a=ih(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.$o(t,a)))})).next((function(){return ec.xn(o)})).next((function(){return i}))},t.prototype.De=function(t,e){return Hh(t).ns((function(t,n){var r=ih(n);e(r)}))},t.prototype.So=function(t){return Qh(t).get(Ch.key).next((function(t){return xo(null!==t),t}))},t.prototype.Do=function(t,e){return Qh(t).put(Ch.key,e)},t.prototype.Oo=function(t,e){return Hh(t).put(oh(this.serializer,e))},t.prototype.Mo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Bo=function(t){return this.So(t).next((function(t){return t.targetCount}))},t.prototype.qo=function(t,e){var n=Xo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Hh(t).ns({range:r,index:Dh.queryTargetsIndexName},(function(t,n,r){var o=ih(n);Jo(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Uo=function(t,e,n){var r=this,i=[],o=Wh(t);return e.forEach((function(e){var s=$c(e.path);i.push(o.put(new Ph(n,s))),i.push(r.Lr.Qo(t,n,e))})),ec.xn(i)},t.prototype.Ko=function(t,e,n){var r=this,i=Wh(t);return ec.forEach(e,(function(e){var o=$c(e.path);return ec.xn([i.delete([n,o]),r.Lr.Wo(t,n,e)])}))},t.prototype.Lo=function(t,e){var n=Wh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.jo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Wh(t),i=bs();return r.ns({range:n,es:!0},(function(t,e,n){var r=Wc(t[1]),o=new Ko(r);i=i.add(o)})).next((function(){return i}))},t.prototype.so=function(t,e){var n=$c(e.path),r=IDBKeyRange.bound([n],[Po(n)],!1,!0),i=0;return Wh(t).ns({index:Ph.documentTargetsIndex,es:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.qe=function(t,e){return Hh(t).get(e).next((function(t){return t?ih(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hh(t){return Jh.qn(t,Dh.store)}function Qh(t){return Jh.qn(t,Ch.store)}function Wh(t){return Jh.qn(t,Ph.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xr=e,r.Go=n,r}return mt(e,t),e}(Vc),Jh=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ln=o,this.window=s,this.document=u,this.zo=c,this.Ho=h,this.Jo=null,this.Yo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Xo=null,this.inForeground=!1,this.Zo=null,this.ta=null,this.ea=Number.NEGATIVE_INFINITY,this.na=function(t){return Promise.resolve()},!t.kn())throw new jo(Mo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Lr=new ef(this,i),this.sa=n+"main",this.serializer=new Yc(a),this.ia=new nc(this.sa,11,new _h(this.serializer)),this.ra=new $h(this.Lr,this.serializer),this.Fi=new zh,this.Ni=function(t,e){return new ph(t,e)}(this.serializer,this.Fi),this.oa=new Fh(this.serializer),this.window&&this.window.localStorage?this.aa=this.window.localStorage:(this.aa=null,!1===h&&Eo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.qn=function(t,e){if(t instanceof Xh)return nc.qn(t.Xr,e);throw No()},t.prototype.start=function(){var t=this;return this.ca().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new jo(Mo.FAILED_PRECONDITION,Yh);return t.ua(),t.ha(),t.la(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ra.No(e)}))})).then((function(e){t.Jo=new Uc(e,t.zo)})).then((function(){t.Yo=!0})).catch((function(e){return t.ia&&t.ia.close(),Promise.reject(e)}))},t.prototype._a=function(t){var e=this;return this.na=function(n){return wt(e,void 0,void 0,(function(){return _t(this,(function(e){return this.yr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.fa=function(t){var e=this;this.ia.Kn((function(n){return wt(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.da=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ln.fs((function(){return wt(e,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return this.yr?[4,this.ca()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.ca=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return tf(e).put(new Vh(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.wa(e).next((function(e){e||(t.isPrimary=!1,t.ln.Ss((function(){return t.na(!1)})))}))})).next((function(){return t.Ta(e)})).next((function(n){return t.isPrimary&&!n?t.Ea(e).next((function(){return!1})):!!n&&t.Ia(e).next((function(){return!0}))}))})).catch((function(e){if(oc(e))return _o("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return _o("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.ln.Ss((function(){return t.na(e)})),t.isPrimary=e}))},t.prototype.wa=function(t){var e=this;return Zh(t).get(Ih.key).next((function(t){return ec.resolve(e.ma(t))}))},t.prototype.Aa=function(t){return tf(t).delete(this.clientId)},t.prototype.Ra=function(){return wt(this,void 0,void 0,(function(){var e,n,r,i,o=this;return _t(this,(function(s){switch(s.label){case 0:return!this.isPrimary||this.Pa(this.ea,18e5)?[3,2]:(this.ea=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.qn(e,Vh.store);return n.Xn().next((function(t){var e=o.ga(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return ec.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=s.sent(),this.aa)for(n=0,r=e;n<r.length;n++)i=r[n],this.aa.removeItem(this.Va(i.clientId));s.label=2;case 2:return[2]}}))}))},t.prototype.la=function(){var t=this;this.ta=this.ln.Pn("client_metadata_refresh",4e3,(function(){return t.ca().then((function(){return t.Ra()})).then((function(){return t.la()}))}))},t.prototype.ma=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ta=function(t){var e=this;return this.Ho?ec.resolve(!0):Zh(t).get(Ih.key).next((function(n){if(null!==n&&e.Pa(n.leaseTimestampMs,5e3)&&!e.ya(n.ownerId)){if(e.ma(n)&&e.networkEnabled)return!0;if(!e.ma(n)){if(!n.allowTabSynchronization)throw new jo(Mo.FAILED_PRECONDITION,Yh);return!1}}return!(!e.networkEnabled||!e.inForeground)||tf(t).Xn().next((function(t){return void 0===e.ga(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&_o("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.pa=function(){return wt(this,void 0,void 0,(function(){var t=this;return _t(this,(function(e){switch(e.label){case 0:return this.Yo=!1,this.va(),this.ta&&(this.ta.cancel(),this.ta=null),this.ba(),this.Sa(),[4,this.ia.runTransaction("shutdown","readwrite",[Ih.store,Vh.store],(function(e){var n=new Xh(e,Uc.nr);return t.Ea(n).next((function(){return t.Aa(n)}))}))];case 1:return e.sent(),this.ia.close(),this.Da(),[2]}}))}))},t.prototype.ga=function(t,e){var n=this;return t.filter((function(t){return n.Pa(t.updateTimeMs,e)&&!n.ya(t.clientId)}))},t.prototype.Ca=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return tf(e).Xn().next((function(e){return t.ga(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),t.prototype.Na=function(t){return uh.qr(t,this.serializer,this.Fi,this.Lr)},t.prototype.xa=function(){return this.ra},t.prototype.Fa=function(){return this.Ni},t.prototype.Oa=function(){return this.Fi},t.prototype.Ma=function(){return this.oa},t.prototype.runTransaction=function(t,e,n){var r=this;_o("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.ia.runTransaction(t,o,Uh,(function(o){return i=new Xh(o,r.Jo?r.Jo.next():Uc.nr),"readwrite-primary"===e?r.wa(i).next((function(t){return!!t||r.Ta(i)})).next((function(e){if(!e)throw Eo("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.ln.Ss((function(){return r.na(!1)})),new jo(Mo.FAILED_PRECONDITION,Rc);return n(i)})).next((function(t){return r.Ia(i).next((function(){return t}))})):r.ka(i).next((function(){return n(i)}))})).then((function(t){return i.Ci(),t}))},t.prototype.ka=function(t){var e=this;return Zh(t).get(Ih.key).next((function(t){if(null!==t&&e.Pa(t.leaseTimestampMs,5e3)&&!e.ya(t.ownerId)&&!e.ma(t)&&!(e.Ho||e.allowTabSynchronization&&t.allowTabSynchronization))throw new jo(Mo.FAILED_PRECONDITION,Yh)}))},t.prototype.Ia=function(t){var e=new Ih(this.clientId,this.allowTabSynchronization,Date.now());return Zh(t).put(Ih.key,e)},t.kn=function(){return nc.kn()},t.prototype.Ea=function(t){var e=this,n=Zh(t);return n.get(Ih.key).next((function(t){return e.ma(t)?(_o("IndexedDbPersistence","Releasing primary lease."),n.delete(Ih.key)):ec.resolve()}))},t.prototype.Pa=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Eo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.ua=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Zo=function(){t.ln.fs((function(){return t.inForeground="visible"===t.document.visibilityState,t.ca()}))},this.document.addEventListener("visibilitychange",this.Zo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.ba=function(){this.Zo&&(this.document.removeEventListener("visibilitychange",this.Zo),this.Zo=null)},t.prototype.ha=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Xo=function(){e.va(),e.ln.fs((function(){return e.pa()}))},this.window.addEventListener("unload",this.Xo))},t.prototype.Sa=function(){this.Xo&&(this.window.removeEventListener("unload",this.Xo),this.Xo=null)},t.prototype.ya=function(t){var e;try{var n=null!==(null===(e=this.aa)||void 0===e?void 0:e.getItem(this.Va(t)));return _o("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Eo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.va=function(){if(this.aa)try{this.aa.setItem(this.Va(this.clientId),String(Date.now()))}catch(t){Eo("Failed to set zombie client id.",t)}},t.prototype.Da=function(){if(this.aa)try{this.aa.removeItem(this.Va(this.clientId))}catch(t){}},t.prototype.Va=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Zh(t){return Jh.qn(t,Ih.store)}function tf(t){return Jh.qn(t,Vh.store)}var ef=function(){function t(t,e){this.db=t,this.Rr=new Kc(this,e)}return t.prototype.Sr=function(t){var e=this.$a(t);return this.db.xa().Bo(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.$a=function(t){var e=0;return this.Cr(t,(function(t){e++})).next((function(){return e}))},t.prototype.De=function(t,e){return this.db.xa().De(t,e)},t.prototype.Cr=function(t,e){return this.La(t,(function(t,n){return e(n)}))},t.prototype.Qo=function(t,e,n){return nf(t,n)},t.prototype.Wo=function(t,e,n){return nf(t,n)},t.prototype.Nr=function(t,e,n){return this.db.xa().Nr(t,e,n)},t.prototype.eo=function(t,e){return nf(t,e)},t.prototype.Ba=function(t,e){return function(t,e){var n=!1;return lh(t).ss((function(r){return ah(t,r,e).next((function(t){return t&&(n=!0),ec.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Fr=function(t,e){var n=this,r=this.db.Fa()._o(),i=[],o=0;return this.La(t,(function(s,u){if(u<=e){var a=n.Ba(t,s).next((function(e){if(!e)return o++,r.yi(t,s).next((function(){return r.Vi(s),Wh(t).delete([0,$c(s.path)])}))}));i.push(a)}})).next((function(){return ec.xn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.nt(t.Go);return this.db.xa().ko(t,n)},t.prototype.qa=function(t,e){return nf(t,e)},t.prototype.La=function(t,e){var n,r=Wh(t),i=Uc.nr;return r.ns({index:Ph.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==Uc.nr&&e(new Ko(Wc(n)),i),i=u,n=s):i=Uc.nr})).next((function(){i!==Uc.nr&&e(new Ko(Wc(n)),i)}))},t.prototype.Mr=function(t){return this.db.Fa().wo(t)},t}();function nf(t,e){return Wh(t).put(function(t,e){return new Ph(0,$c(t.path),e)}(e,t.Go))}function rf(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var of=function(){function t(t,e,n,r){this.persistence=t,this.Ua=e,this.serializer=r,this.Qa=new us(ko),this.Ka=new Vo((function(t){return Xo(t)}),Jo),this.Wa=Fo.min(),this.xi=t.Na(n),this.ja=t.Fa(),this.ra=t.xa(),this.Ga=new Mc(this.ja,this.xi,this.persistence.Oa()),this.oa=t.Ma(),this.Ua.za(this.Ga)}return t.prototype.pr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Or(n,e.Qa)}))},t}();function sf(t,e,n,r){return new of(t,e,n,r)}function uf(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o;return _t(this,(function(s){switch(s.label){case 0:return n=Ao(t),r=n.xi,i=n.Ga,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.xi.Hr(t).next((function(s){return o=s,r=n.persistence.Na(e),i=new Mc(n.ja,r,n.persistence.Oa()),r.Hr(t)})).next((function(e){for(var n=[],r=[],s=bs(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Li(t,s).next((function(t){return{Ha:t,Ja:n,Ya:r}}))}))}))];case 1:return o=s.sent(),[2,(n.xi=r,n.Ga=i,n.Ua.za(n.Ga),o)]}}))}))}function af(t,e){var n=Ao(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.ja._o({fo:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=ec.resolve();return o.forEach((function(t){s=s.next((function(){return r.yi(e,t)})).next((function(e){var o=e,s=n.Ei.get(t);xo(null!==s),(!o||o.version.A(s)<0)&&(o=i._i(t,o,n))&&r.Ri(o,n.Ti)}))})),s.next((function(){return t.xi.Yr(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.xi.no(t)})).next((function(){return n.Ga.Li(t,r)}))}))}function cf(t){var e=Ao(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ra.Co(t)}))}function hf(t,e){var n=Ao(t),r=e.et,i=n.Qa;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.ja._o({fo:!0});i=n.Qa;var s=[];e.Gt.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.ra.Ko(t,e.ne,o).next((function(){return n.ra.Uo(t,e.te,o)})));var a=e.resumeToken;if(a.X()>0){var c=u.st(a,r).nt(t.Go);i=i.rt(o,c),function(t,e,n){return xo(e.resumeToken.X()>0),0===t.resumeToken.X()||e.et.R()-t.et.R()>=3e8||n.te.size+n.ee.size+n.ne.size>0}(u,c,e)&&s.push(n.ra.ko(t,c))}}}));var u=ps();if(e.Ht.forEach((function(r,i){e.Jt.has(r)&&s.push(n.persistence.Lr.qa(t,r))})),s.push(function(t,e,n,r,i){var o=bs();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var i=ps();return n.forEach((function(n,o){var s=t.get(n),u=r;o instanceof ga&&o.version.isEqual(Fo.min())?(e.Vi(n,u),i=i.rt(n,o)):null==s||o.version.A(s.version)>0||0===o.version.A(s.version)&&s.hasPendingWrites?(e.Ri(o,u),i=i.rt(n,o)):_o("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),i}))}(t,o,e.Ht,r).next((function(t){u=t}))),!r.isEqual(Fo.min())){var a=n.ra.Co(t).next((function(e){return n.ra.xo(t,t.Go,r)}));s.push(a)}return ec.xn(s).next((function(){return o.apply(t)})).next((function(){return n.Ga.Bi(t,u)}))})).then((function(t){return n.Qa=i,t}))}function ff(t,e){var n=Ao(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.xi.Gr(t,e)}))}function lf(t,e){var n=Ao(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ra.qo(t,e).next((function(i){return i?(r=i,ec.resolve(r)):n.ra.bo(t).next((function(i){return r=new rs(e,i,0,t.Go),n.ra.Fo(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Qa.get(t.targetId);return(null===r||t.et.A(r.et)>0)&&(n.Qa=n.Qa.rt(t.targetId,t),n.Ka.set(e,t.targetId)),t}))}function pf(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return _t(this,(function(u){switch(u.label){case 0:r=Ao(t),i=r.Qa.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Lr.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!oc(s=u.sent()))throw s;return _o("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Qa=r.Qa.remove(e),r.Ka.delete(i.target),[2]}}))}))}function df(t,e,n){var r=Ao(t),i=Fo.min(),o=bs();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Ao(t),i=r.Ka.get(n);return void 0!==i?ec.resolve(r.Qa.get(i)):r.ra.qo(e,n)}(r,t,Sa(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ra.jo(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Ua.Ui(t,e,n?i:Fo.min(),n?o:bs())})).next((function(t){return{documents:t,Xa:o}}))}))}function vf(t,e){var n=Ao(t),r=Ao(n.ra),i=n.Qa.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.qe(t,e).next((function(t){return t?t.target:null}))}))}function yf(t){var e=Ao(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Ao(t),i=ps(),o=Zc(n),s=yh(e),u=IDBKeyRange.lowerBound(o,!0);return s.ns({index:Oh.readTimeIndex,range:u},(function(t,e){var n=Xc(r.serializer,e);i=i.rt(n.key,n),o=e.readTime})).next((function(){return{Za:i,readTime:th(o)}}))}(e.ja,t,e.Wa)})).then((function(t){var n=t.Za,r=t.readTime;return e.Wa=r,n}))}function gf(t){return wt(this,void 0,void 0,(function(){var e;return _t(this,(function(n){return[2,(e=Ao(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=yh(t),n=Fo.min();return e.ns({index:Oh.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=th(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Wa=t}))]}))}))}function mf(t){return wt(this,void 0,void 0,(function(){return _t(this,(function(e){if(t.code!==Mo.FAILED_PRECONDITION||t.message!==Rc)throw t;return _o("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var bf=function(){function t(t,e,n,r,i,o){this.ln=t,this.tc=n,this.ec=r,this.nc=i,this.listener=o,this.state=0,this.sc=0,this.ic=null,this.stream=null,this.Ps=new tc(t,e)}return t.prototype.rc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.oc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ac()},t.prototype.stop=function(){return wt(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return this.rc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.cc=function(){this.state=0,this.Ps.reset()},t.prototype.uc=function(){var t=this;this.oc()&&null===this.ic&&(this.ic=this.ln.Pn(this.tc,6e4,(function(){return t.hc()})))},t.prototype.lc=function(t){this._c(),this.stream.send(t)},t.prototype.hc=function(){return wt(this,void 0,void 0,(function(){return _t(this,(function(t){return this.oc()?[2,this.close(0)]:[2]}))}))},t.prototype._c=function(){this.ic&&(this.ic.cancel(),this.ic=null)},t.prototype.close=function(t,e){return wt(this,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return this._c(),this.Ps.cancel(),this.sc++,3!==t?this.Ps.reset():e&&e.code===Mo.RESOURCE_EXHAUSTED?(Eo(e.toString()),Eo("Using maximum backoff delay to prevent overloading the backend."),this.Ps.mn()):e&&e.code===Mo.UNAUTHENTICATED&&this.nc.ni(),null!==this.stream&&(this.fc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.dc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.fc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.wc(this.sc),n=this.sc;this.nc.getToken().then((function(e){t.sc===n&&t.Tc(e)}),(function(n){e((function(){var e=new jo(Mo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ec(e)}))}))},t.prototype.Tc=function(t){var e=this,n=this.wc(this.sc);this.stream=this.Ic(t),this.stream.mc((function(){n((function(){return e.state=2,e.listener.mc()}))})),this.stream.dc((function(t){n((function(){return e.Ec(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ac=function(){var t=this;this.state=4,this.Ps.An((function(){return wt(t,void 0,void 0,(function(){return _t(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Ec=function(t){return _o("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.wc=function(t){var e=this;return function(n){e.ln.fs((function(){return e.sc===t?n():(_o("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),wf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return mt(e,t),e.prototype.Ic=function(t){return this.ec.Ac("Listen",t)},e.prototype.onMessage=function(t){this.Ps.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:No()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ue?(xo(void 0===e||"string"==typeof e),ts.fromBase64String(e||"")):(xo(void 0===e||e instanceof Uint8Array),ts.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?Mo.UNKNOWN:ss(t.code);return new jo(e,t.message||"")}(s);n=new Os(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var c=pu(t,a.document.name),h=cu(a.document.updateTime),f=new la({mapValue:{fields:a.document.fields}}),l=new ya(c,h,f,{}),p=a.targetIds||[],d=a.removedTargetIds||[];n=new As(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=pu(t,v.document),g=v.readTime?cu(v.readTime):Fo.min(),m=new ga(y,g),b=v.removedTargetIds||[];n=new As([],b,m.key,m)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var _=pu(t,w.document),E=w.removedTargetIds||[];n=new As([],E,_,null)}else{if(!("filter"in e))return No();e.filter;var I=e.filter;I.targetId;var T=I.count||0,N=new is(T),x=I.targetId;n=new Ss(x,N)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Fo.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Fo.min():e.readTime?cu(e.readTime):Fo.min()}(t);return this.listener.Rc(e,n)},e.prototype.Pc=function(t){var e={};e.database=yu(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Zo(r)?{documents:_u(t,r)}:{query:Eu(t,r)}).targetId=e.targetId,e.resumeToken.X()>0?n.resumeToken=uu(t,e.resumeToken):e.et.A(Fo.min())>0&&(n.readTime=su(t,e.et.P())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return No()}}(0,e.tt);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.lc(e)},e.prototype.gc=function(t){var e={};e.database=yu(this.serializer),e.removeTarget=t,this.lc(e)},e}(bf),_f=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Vc=!1,s}return mt(e,t),Object.defineProperty(e.prototype,"yc",{get:function(){return this.Vc},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Vc=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.fc=function(){this.Vc&&this.vc([])},e.prototype.Ic=function(t){return this.ec.Ac("Write",t)},e.prototype.onMessage=function(t){if(xo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vc){this.Ps.reset();var e=function(t,e){return t&&t.length>0?(xo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?cu(t.updateTime):cu(e);n.isEqual(Fo.min())&&(n=cu(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Wu(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=cu(t.commitTime);return this.listener.bc(n,e)}return xo(!t.writeResults||0===t.writeResults.length),this.Vc=!0,this.listener.Sc()},e.prototype.Dc=function(){var t={};t.database=yu(this.serializer),this.lc(t)},e.prototype.vc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return bu(e.serializer,t)}))};this.lc(n)},e}(bf),Ef=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.ec=n,i.serializer=r,i.Cc=!1,i}return mt(e,t),e.prototype.Nc=function(){if(this.Cc)throw new jo(Mo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.xc=function(t,e,n){var r=this;return this.Nc(),this.credentials.getToken().then((function(i){return r.ec.xc(t,e,n,i)})).catch((function(t){throw t.code===Mo.UNAUTHENTICATED&&r.credentials.ni(),t}))},e.prototype.Fc=function(t,e,n){var r=this;return this.Nc(),this.credentials.getToken().then((function(i){return r.ec.Fc(t,e,n,i)})).catch((function(t){throw t.code===Mo.UNAUTHENTICATED&&r.credentials.ni(),t}))},e.prototype.terminate=function(){this.Cc=!1},e}((function(){})),If=function(){function t(t,e){this.rs=t,this.Oc=e,this.state="Unknown",this.Mc=0,this.kc=null,this.$c=!0}return t.prototype.Lc=function(){var t=this;0===this.Mc&&(this.Bc("Unknown"),this.kc=this.rs.Pn("online_state_timeout",1e4,(function(){return t.kc=null,t.qc("Backend didn't respond within 10 seconds."),t.Bc("Offline"),Promise.resolve()})))},t.prototype.Uc=function(t){"Online"===this.state?this.Bc("Unknown"):(this.Mc++,this.Mc>=1&&(this.Qc(),this.qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Bc("Offline")))},t.prototype.set=function(t){this.Qc(),this.Mc=0,"Online"===t&&(this.$c=!1),this.Bc(t)},t.prototype.Bc=function(t){t!==this.state&&(this.state=t,this.Oc(t))},t.prototype.qc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.$c?(Eo(e),this.$c=!1):_o("OnlineStateTracker",e)},t.prototype.Qc=function(){null!==this.kc&&(this.kc.cancel(),this.kc=null)},t}(),Tf=function(t,e,n,r,i){var o=this;this.Kc=t,this.Wc=e,this.rs=n,this.jc={},this.Gc=[],this.zc=new Map,this.Hc=new Set,this.Jc=[],this.Yc=i,this.Yc.Xc((function(t){n.fs((function(){return wt(o,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return Cf(this)?(_o("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return wt(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return(e=Ao(t)).Hc.add(4),[4,xf(e)];case 1:return n.sent(),e.Zc.set("Unknown"),e.Hc.delete(4),[4,Nf(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Zc=new If(n,r)};function Nf(t){return wt(this,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:if(!Cf(t))return[3,4];e=0,n=t.Jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function xf(t){return wt(this,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:e=0,n=t.Jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Af(t,e){var n=Ao(t);n.zc.has(e.targetId)||(n.zc.set(e.targetId,e),Pf(n)?Df(n):Qf(n).oc()&&Of(n,e))}function Sf(t,e){var n=Ao(t),r=Qf(n);n.zc.delete(e),r.oc()&&kf(n,e),0===n.zc.size&&(r.oc()?r.uc():Cf(n)&&n.Zc.set("Unknown"))}function Of(t,e){t.tu.Ie(e.targetId),Qf(t).Pc(e)}function kf(t,e){t.tu.Ie(e),Qf(t).gc(e)}function Df(t){t.tu=new Ds({Be:function(e){return t.jc.Be(e)},qe:function(e){return t.zc.get(e)||null}}),Qf(t).start(),t.Zc.Lc()}function Pf(t){return Cf(t)&&!Qf(t).rc()&&t.zc.size>0}function Cf(t){return 0===Ao(t).Hc.size}function Lf(t){t.tu=void 0}function Rf(t){return wt(this,void 0,void 0,(function(){return _t(this,(function(e){return t.zc.forEach((function(e,n){Of(t,e)})),[2]}))}))}function Vf(t,e){return wt(this,void 0,void 0,(function(){return _t(this,(function(n){return Lf(t),Pf(t)?(t.Zc.Uc(e),Df(t)):t.Zc.set("Unknown"),[2]}))}))}function Mf(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o;return _t(this,(function(s){switch(s.label){case 0:if(t.Zc.set("Online"),!(e instanceof Os&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o;return _t(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.zc.has(o)?[4,t.jc.eu(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.zc.delete(o),t.tu.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),_o("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,jf(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof As?t.tu.pe(e):e instanceof Ss?t.tu.Fe(e):t.tu.Se(e),n.isEqual(Fo.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,cf(t.Kc)];case 8:return i=s.sent(),n.A(i)>=0?[4,function(t,e){var n=t.tu.ke(e);return n.Gt.forEach((function(n,r){if(n.resumeToken.X()>0){var i=t.zc.get(r);i&&t.zc.set(r,i.st(n.resumeToken,e))}})),n.zt.forEach((function(e){var n=t.zc.get(e);if(n){t.zc.set(e,n.st(ts.Z,n.et)),kf(t,e);var r=new rs(n.target,e,1,n.sequenceNumber);Of(t,r)}})),t.jc.nu(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return _o("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,jf(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function jf(t,e,n){return wt(this,void 0,void 0,(function(){var r=this;return _t(this,(function(i){switch(i.label){case 0:if(!oc(e))throw e;return t.Hc.add(1),[4,xf(t)];case 1:return i.sent(),t.Zc.set("Offline"),n||(n=function(){return cf(t.Kc)}),t.rs.Ss((function(){return wt(r,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return _o("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Hc.delete(1),[4,Nf(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Uf(t,e){return e().catch((function(n){return jf(t,n,e)}))}function Ff(t){return wt(this,void 0,void 0,(function(){var e,n,r,i,o;return _t(this,(function(s){switch(s.label){case 0:e=Ao(t),n=Wf(e),r=e.Gc.length>0?e.Gc[e.Gc.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Cf(t)&&t.Gc.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,ff(e.Kc,r)];case 3:return null===(i=s.sent())?(0===e.Gc.length&&n.uc(),[3,7]):(r=i.batchId,function(t,e){t.Gc.push(e);var n=Wf(t);n.oc()&&n.yc&&n.vc(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,jf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return qf(e)&&Bf(e),[2]}}))}))}function qf(t){return Cf(t)&&!Wf(t).rc()&&t.Gc.length>0}function Bf(t){Wf(t).start()}function zf(t){return wt(this,void 0,void 0,(function(){return _t(this,(function(e){return Wf(t).Dc(),[2]}))}))}function Gf(t){return wt(this,void 0,void 0,(function(){var e,n,r,i;return _t(this,(function(o){for(e=Wf(t),n=0,r=t.Gc;n<r.length;n++)i=r[n],e.vc(i.mutations);return[2]}))}))}function Kf(t,e,n){return wt(this,void 0,void 0,(function(){var r,i;return _t(this,(function(o){switch(o.label){case 0:return r=t.Gc.shift(),i=Dc.from(r,e,n),[4,Uf(t,(function(){return t.jc.su(i)}))];case 1:return o.sent(),[4,Ff(t)];case 2:return o.sent(),[2]}}))}))}function $f(t,e){return wt(this,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return e&&Wf(t).yc?[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return os(r=e.code)&&r!==Mo.ABORTED?(n=t.Gc.shift(),Wf(t).cc(),[4,Uf(t,(function(){return t.jc.iu(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Ff(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return qf(t)&&Bf(t),[2]}}))}))}function Hf(t,e){return wt(this,void 0,void 0,(function(){var n;return _t(this,(function(r){switch(r.label){case 0:return n=Ao(t),e?(n.Hc.delete(2),[4,Nf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Hc.add(2),[4,xf(n)]);case 3:r.sent(),n.Zc.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Qf(t){var e=this;return t.ru||(t.ru=function(t,e,n){var r=Ao(t);return r.Nc(),new wf(e,r.ec,r.credentials,r.serializer,n)}(t.Wc,t.rs,{mc:Rf.bind(null,t),dc:Vf.bind(null,t),Rc:Mf.bind(null,t)}),t.Jc.push((function(n){return wt(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return n?(t.ru.cc(),Pf(t)?Df(t):t.Zc.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ru.stop()];case 2:e.sent(),Lf(t),e.label=3;case 3:return[2]}}))}))}))),t.ru}function Wf(t){var e=this;return t.ou||(t.ou=function(t,e,n){var r=Ao(t);return r.Nc(),new _f(e,r.ec,r.credentials,r.serializer,n)}(t.Wc,t.rs,{mc:zf.bind(null,t),dc:$f.bind(null,t),Sc:Gf.bind(null,t),bc:Kf.bind(null,t)}),t.Jc.push((function(n){return wt(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return n?(t.ou.cc(),[4,Ff(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ou.stop()];case 3:e.sent(),t.Gc.length>0&&(_o("RemoteStore","Stopping write stream with "+t.Gc.length+" pending writes"),t.Gc=[]),e.label=4;case 4:return[2]}}))}))}))),t.ou
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Yf=function(){function t(){this.au=new hs(Xf.cu),this.uu=new hs(Xf.hu)}return t.prototype.T=function(){return this.au.T()},t.prototype.Qo=function(t,e){var n=new Xf(t,e);this.au=this.au.add(n),this.uu=this.uu.add(n)},t.prototype.lu=function(t,e){var n=this;t.forEach((function(t){return n.Qo(t,e)}))},t.prototype.Wo=function(t,e){this._u(new Xf(t,e))},t.prototype.fu=function(t,e){var n=this;t.forEach((function(t){return n.Wo(t,e)}))},t.prototype.du=function(t){var e=this,n=new Ko(new Bo([])),r=new Xf(n,t),i=new Xf(n,t+1),o=[];return this.uu.Nt([r,i],(function(t){e._u(t),o.push(t.key)})),o},t.prototype.wu=function(){var t=this;this.au.forEach((function(e){return t._u(e)}))},t.prototype._u=function(t){this.au=this.au.delete(t),this.uu=this.uu.delete(t)},t.prototype.Tu=function(t){var e=new Ko(new Bo([])),n=new Xf(e,t),r=new Xf(e,t+1),i=bs();return this.uu.Nt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.so=function(t){var e=new Xf(t,0),n=this.au.Ft(e);return null!==n&&t.isEqual(n.key)},t}(),Xf=function(){function t(t,e){this.key=t,this.Eu=e}return t.cu=function(t,e){return Ko.V(t.key,e.key)||ko(t.Eu,e.Eu)},t.hu=function(t,e){return ko(t.Eu,e.Eu)||Ko.V(t.key,e.key)},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jf(t,e){return"firestore_clients_"+t+"_"+e}function Zf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Js()&&(r+="_"+e.uid),r}function tl(t,e){return"firestore_targets_"+t+"_"+e}var el=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Iu=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new jo(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Eo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),nl=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Iu=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new jo(r.error.code,r.error.message)),i?new t(e,r.state,o):(Eo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),rl=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Iu=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=_s(),s=0;i&&s<r.activeTargetIds.length;++s)i=Qo(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Eo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),il=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Iu=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Eo("SharedClientState","Failed to parse online state: "+e),null)},t}(),ol=function(){function t(){this.activeTargetIds=_s()}return t.prototype.Au=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ru=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.mu=function(){var t={activeTargetIds:this.activeTargetIds.O(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),sl=function(){function t(t,e,n,r,i){this.window=t,this.ln=e,this.persistenceKey=n,this.Pu=r,this.gu=null,this.Oc=null,this.Xi=null,this.Vu=this.yu.bind(this),this.pu=new us(ko),this.yr=!1,this.vu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.bu=Jf(this.persistenceKey,this.Pu),this.Su=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pu=this.pu.rt(this.Pu,new ol),this.Du=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Cu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Nu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xu=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fu=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Vu)}return t.kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return wt(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h,f=this;return _t(this,(function(l){switch(l.label){case 0:return[4,this.gu.Ca()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Pu&&(i=this.getItem(Jf(this.persistenceKey,r)))&&(o=rl.Iu(r,i))&&(this.pu=this.pu.rt(o.clientId,o));for(this.Ou(),(s=this.storage.getItem(this.xu))&&(u=this.Mu(s))&&this.ku(u),a=0,c=this.vu;a<c.length;a++)h=c[a],this.yu(h);return this.vu=[],this.window.addEventListener("unload",(function(){return f.pa()})),this.yr=!0,[2]}}))}))},t.prototype.er=function(t){this.setItem(this.Su,JSON.stringify(t))},t.prototype.$u=function(){return this.Lu(this.pu)},t.prototype.Bu=function(t){var e=!1;return this.pu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.qu=function(t){this.Uu(t,"pending")},t.prototype.Qu=function(t,e,n){this.Uu(t,e,n),this.Ku(t)},t.prototype.Wu=function(t){var e="not-current";if(this.Bu(t)){var n=this.storage.getItem(tl(this.persistenceKey,t));if(n){var r=nl.Iu(t,n);r&&(e=r.state)}}return this.ju.Au(t),this.Ou(),e},t.prototype.Gu=function(t){this.ju.Ru(t),this.Ou()},t.prototype.zu=function(t){return this.ju.activeTargetIds.has(t)},t.prototype.Hu=function(t){this.removeItem(tl(this.persistenceKey,t))},t.prototype.Ju=function(t,e,n){this.Yu(t,e,n)},t.prototype.Xu=function(t,e,n){var r=this;e.forEach((function(t){r.Ku(t)})),this.currentUser=t,n.forEach((function(t){r.qu(t)}))},t.prototype.Zu=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.pa=function(){this.yr&&(this.window.removeEventListener("storage",this.Vu),this.removeItem(this.bu),this.yr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return _o("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){_o("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){_o("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.yu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(_o("SharedClientState","EVENT",n.key,n.newValue),n.key===this.bu)return void Eo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ln.Ss((function(){return wt(e,void 0,void 0,(function(){var t,e,r,i,o,s;return _t(this,(function(u){if(this.yr){if(null!==n.key)if(this.Du.test(n.key)){if(null==n.newValue)return t=this.sh(n.key),[2,this.ih(t,null)];if(e=this.rh(n.key,n.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Cu.test(n.key)){if(null!==n.newValue&&(r=this.oh(n.key,n.newValue)))return[2,this.ah(r)]}else if(this.Nu.test(n.key)){if(null!==n.newValue&&(i=this.uh(n.key,n.newValue)))return[2,this.hh(i)]}else if(n.key===this.xu){if(null!==n.newValue&&(o=this.Mu(n.newValue)))return[2,this.ku(o)]}else if(n.key===this.Su)(s=function(t){var e=Uc.nr;if(null!=t)try{var n=JSON.parse(t);xo("number"==typeof n),e=n}catch(t){Eo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Uc.nr&&this.Xi(s);else if(n.key===this.Fu)return[2,this.gu.lh()]}else this.vu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ju",{get:function(){return this.pu.get(this.Pu)},enumerable:!1,configurable:!0}),t.prototype.Ou=function(){this.setItem(this.bu,this.ju.mu())},t.prototype.Uu=function(t,e,n){var r=new el(this.currentUser,t,e,n),i=Zf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.mu())},t.prototype.Ku=function(t){var e=Zf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){var e={clientId:this.Pu,onlineState:t};this.storage.setItem(this.xu,JSON.stringify(e))},t.prototype.Yu=function(t,e,n){var r=tl(this.persistenceKey,t),i=new nl(t,e,n);this.setItem(r,i.mu())},t.prototype.nh=function(){this.setItem(this.Fu,"value-not-used")},t.prototype.sh=function(t){var e=this.Du.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return rl.Iu(n,e)},t.prototype.oh=function(t,e){var n=this.Cu.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return el.Iu(new Tc(i),r,e)},t.prototype.uh=function(t,e){var n=this.Nu.exec(t),r=Number(n[1]);return nl.Iu(r,e)},t.prototype.Mu=function(t){return il.Iu(t)},t.prototype.ah=function(t){return wt(this,void 0,void 0,(function(){return _t(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.gu._h(t.batchId,t.state,t.error)]:(_o("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.hh=function(t){return this.gu.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pu.rt(t,e):this.pu.remove(t),i=this.Lu(this.pu),o=this.Lu(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.gu.dh(s,u).then((function(){n.pu=r}))},t.prototype.ku=function(t){this.pu.get(t.clientId)&&this.Oc(t.onlineState)},t.prototype.Lu=function(t){var e=_s();return t.forEach((function(t,n){e=e.Ot(n.activeTargetIds)})),e},t}(),ul=function(){function t(){this.wh=new ol,this.Th={},this.Oc=null,this.Xi=null}return t.prototype.qu=function(t){},t.prototype.Qu=function(t,e,n){},t.prototype.Wu=function(t){return this.wh.Au(t),this.Th[t]||"not-current"},t.prototype.Ju=function(t,e,n){this.Th[t]=e},t.prototype.Gu=function(t){this.wh.Ru(t)},t.prototype.zu=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Hu=function(t){delete this.Th[t]},t.prototype.$u=function(){return this.wh.activeTargetIds},t.prototype.Bu=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new ol,Promise.resolve()},t.prototype.Xu=function(t,e,n){},t.prototype.Zu=function(t){},t.prototype.pa=function(){},t.prototype.er=function(t){},t.prototype.eh=function(){},t}(),al=function(t){this.key=t},cl=function(t){this.key=t},hl=function(){function t(t,e){this.query=t,this.Eh=e,this.Ih=null,this.Zt=!1,this.mh=bs(),this.Qt=bs(),this.Ah=Va(t),this.Rh=new Es(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Eh},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.Vh:new Is,i=e?e.Rh:this.Rh,o=e?e.Qt:this.Qt,s=i,u=!1,a=Ea(this.query)&&i.size===this.query.limit?i.last():null,c=Ia(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var h=i.get(t),f=e instanceof ya?e:null;f&&(f=Ra(n.query,f)?f:null);var l=!!h&&n.Qt.has(h.key),p=!!f&&(f.Je||n.Qt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.yh(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.Ah(f,a)>0||c&&n.Ah(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Ea(this.query)||Ia(this.query))for(;s.size>this.query.limit;){var h=Ea(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Rh:s,Vh:r,ph:u,Qt:o}},t.prototype.yh=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.bi=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.Qt=t.Qt;var o=t.Vh.qt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return No()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)})),this.bh(n);var s=e?this.Sh():[],u=0===this.mh.size&&this.Zt?1:0,a=u!==this.Ih;return this.Ih=u,0!==o.length||a?{snapshot:new Ts(this.query,t.Rh,i,o,t.Qt,0===u,a,!1),Dh:s}:{Dh:s}},t.prototype.Bs=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.bi({Rh:this.Rh,Vh:new Is,Qt:this.Qt,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Eh.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).Je},t.prototype.bh=function(t){var e=this;t&&(t.te.forEach((function(t){return e.Eh=e.Eh.add(t)})),t.ee.forEach((function(t){})),t.ne.forEach((function(t){return e.Eh=e.Eh.delete(t)})),this.Zt=t.Zt)},t.prototype.Sh=function(){var t=this;if(!this.Zt)return[];var e=this.mh;this.mh=bs(),this.Rh.forEach((function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))}));var n=[];return e.forEach((function(e){t.mh.has(e)||n.push(new cl(e))})),this.mh.forEach((function(t){e.has(t)||n.push(new al(t))})),n},t.prototype.Nh=function(t){this.Eh=t.Xa,this.mh=bs();var e=this.gh(t.documents);return this.bi(e,!0)},t.prototype.xh=function(){return Ts.jt(this.query,this.Rh,this.Qt,0===this.Ih)},t}(),fl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ll=function(t){this.key=t,this.Fh=!1},pl=function(){function t(t,e,n,r,i,o){this.Kc=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new Vo((function(t){return Ca(t)}),Pa),this.qh=new Map,this.Uh=[],this.Qh=new us(Ko.V),this.Kh=new Map,this.Wh=new Yf,this.jh={},this.Gh=new Map,this.zh=Kh.vo(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function dl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return _t(this,(function(a){switch(a.label){case 0:return n=zl(t),(o=n.Bh.get(e))?(r=o.targetId,n.kh.Wu(r),i=o.view.xh(),[3,4]):[3,1];case 1:return[4,lf(n.Kc,Sa(e))];case 2:return s=a.sent(),u=n.kh.Wu(s.targetId),r=s.targetId,[4,vl(n,e,r,"current"===u)];case 3:i=a.sent(),n.Jh&&Af(n.Oh,s),a.label=4;case 4:return[2,i]}}))}))}function vl(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s,u,a,c;return _t(this,(function(h){switch(h.label){case 0:return t.Yh=function(e,n,r){return function(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s;return _t(this,(function(u){switch(u.label){case 0:return(i=e.view.gh(n)).ph?[4,df(t.Kc,e.query,!1).then((function(t){var n=t.documents;return e.view.gh(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.Gt.get(e.targetId),s=e.view.bi(i,t.Jh,o),[2,(Sl(t,e.targetId,s.Dh),s.snapshot)]}}))}))}(t,e,n,r)},[4,df(t.Kc,e,!0)];case 1:return i=h.sent(),o=new hl(e,i.Xa),s=o.gh(i.documents),u=xs.Xt(n,r&&"Offline"!==t.onlineState),a=o.bi(s,t.Jh,u),Sl(t,n,a.Dh),c=new fl(e,n,o),[2,(t.Bh.set(e,c),t.qh.has(n)?t.qh.get(n).push(e):t.qh.set(n,[e]),a.snapshot)]}}))}))}function yl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:return n=Ao(t),r=n.Bh.get(e),(i=n.qh.get(r.targetId)).length>1?[2,(n.qh.set(r.targetId,i.filter((function(t){return!Pa(t,e)}))),void n.Bh.delete(e))]:n.Jh?(n.kh.Gu(r.targetId),n.kh.Bu(r.targetId)?[3,2]:[4,pf(n.Kc,r.targetId,!1).then((function(){n.kh.Hu(r.targetId),Sf(n.Oh,r.targetId),xl(n,r.targetId)})).catch(mf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return xl(n,r.targetId),[4,pf(n.Kc,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function gl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return _t(this,(function(u){switch(u.label){case 0:r=Gl(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ao(t),i=Uo.now(),o=e.reduce((function(t,e){return t.add(e.key)}),bs());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ga.Li(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=ea(c,n.get(c.key));null!=h&&s.push(new oa(c.key,h,da(h.proto.mapValue),Yu.exists(!0)))}return r.xi.Qr(t,i,s,e)}))})).then((function(t){var e=t.wi(n);return{batchId:t.batchId,Ii:e}}))}(r.Kc,e)];case 2:return i=u.sent(),r.kh.qu(i.batchId),function(t,e,n){var r=t.jh[t.currentUser.Ys()];r||(r=new us(ko)),r=r.rt(e,n),t.jh[t.currentUser.Ys()]=r}(r,i.batchId,n),[4,Dl(r,i.Ii)];case 3:return u.sent(),[4,Ff(r.Oh)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=vc(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ml(t,e){return wt(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:n=Ao(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,hf(n.Kc,e)];case 2:return r=i.sent(),e.Gt.forEach((function(t,e){var r=n.Kh.get(e);r&&(xo(t.te.size+t.ee.size+t.ne.size<=1),t.te.size>0?r.Fh=!0:t.ee.size>0?xo(r.Fh):t.ne.size>0&&(xo(r.Fh),r.Fh=!1))})),[4,Dl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,mf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function bl(t,e,n){var r=Ao(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach((function(t,n){var r=n.view.Bs(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Ao(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Bs(e)&&(r=!0)})),r&&Ec(n)}(r.Mh,e),i.length&&r.Lh.Rc(i),r.onlineState=e,r.Jh&&r.kh.Zu(e)}}function wl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s,u,a;return _t(this,(function(c){switch(c.label){case 0:return(r=Ao(t)).kh.Ju(e,"rejected",n),i=r.Kh.get(e),(o=i&&i.key)?(s=(s=new us(Ko.V)).rt(o,new ga(o,Fo.min())),u=bs().add(o),a=new Ns(Fo.min(),new Map,new hs(ko),s,u),[4,ml(r,a)]):[3,2];case 1:return c.sent(),r.Qh=r.Qh.remove(o),r.Kh.delete(e),kl(r),[3,4];case 2:return[4,pf(r.Kc,e,!1).then((function(){return xl(r,e,n)})).catch(mf)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function _l(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:n=Ao(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,af(n.Kc,e)];case 2:return i=o.sent(),Nl(n,r,null),Tl(n,r),n.kh.Qu(r,"acknowledged"),[4,Dl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,mf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function El(t,e,n){return wt(this,void 0,void 0,(function(){var r,i;return _t(this,(function(o){switch(o.label){case 0:r=Ao(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ao(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.xi.Wr(t,e).next((function(e){return xo(null!==e),r=e.keys(),n.xi.Yr(t,e)})).next((function(){return n.xi.no(t)})).next((function(){return n.Ga.Li(t,r)}))}))}(r.Kc,e)];case 2:return i=o.sent(),Nl(r,e,n),Tl(r,e),r.kh.Qu(e,"rejected",n),[4,Dl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,mf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Il(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s;return _t(this,(function(u){switch(u.label){case 0:Cf((n=Ao(t)).Oh)||_o("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=Ao(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.xi.zr(t)}))}(n.Kc)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Gh.get(r)||[]).push(e),n.Gh.set(r,i),[3,4]);case 3:return o=u.sent(),s=vc(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Tl(t,e){(t.Gh.get(e)||[]).forEach((function(t){t.resolve()})),t.Gh.delete(e)}function Nl(t,e,n){var r=Ao(t),i=r.jh[r.currentUser.Ys()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.Ys()]=i}}function xl(t,e,n){void 0===n&&(n=null),t.kh.Gu(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.du(e).forEach((function(e){t.Wh.so(e)||Al(t,e)}))}function Al(t,e){var n=t.Qh.get(e);null!==n&&(Sf(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),kl(t))}function Sl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof al?(t.Wh.Qo(o.key,e),Ol(t,o)):o instanceof cl?(_o("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.Wo(o.key,e),t.Wh.so(o.key)||Al(t,o.key)):No()}}function Ol(t,e){var n=e.key;t.Qh.get(n)||(_o("SyncEngine","New document in limbo: "+n),t.Uh.push(n),kl(t))}function kl(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new ll(e)),t.Qh=t.Qh.rt(e,n),Af(t.Oh,new rs(Sa(_a(e.path)),n,2,Uc.nr))}}function Dl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return _t(this,(function(u){switch(u.label){case 0:return r=Ao(t),i=[],o=[],s=[],r.Bh.T()?[3,3]:(r.Bh.forEach((function(t,u){s.push(r.Yh(u,e,n).then((function(t){if(t){r.Jh&&r.kh.Ju(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=jc.Yi(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.Lh.Rc(i),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h;return _t(this,(function(f){switch(f.label){case 0:n=Ao(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ec.forEach(e,(function(e){return ec.forEach(e.Hi,(function(r){return n.persistence.Lr.Qo(t,e.targetId,r)})).next((function(){return ec.forEach(e.Ji,(function(r){return n.persistence.Lr.Wo(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!oc(r=f.sent()))throw r;return _o("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.Qa.get(u),c=a.et,h=a.it(c),n.Qa=n.Qa.rt(u,h));return[2]}}))}))}(r.Kc,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Pl(t,e){return wt(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return(n=Ao(t)).currentUser.isEqual(e)?[3,3]:(_o("SyncEngine","User change. New user:",e.Ys()),[4,uf(n.Kc,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Gh.forEach((function(t){t.forEach((function(t){t.reject(new jo(Mo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Gh.clear()}(n),n.kh.Xu(e,r.Ja,r.Ya),[4,Dl(n,r.Ha)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Cl(t,e){var n=Ao(t),r=n.Kh.get(e);if(r&&r.Fh)return bs().add(r.key);var i=bs(),o=n.qh.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Bh.get(a);i=i.Ot(c.view.Ph)}return i}function Ll(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:return[4,df((n=Ao(t)).Kc,e.query,!0)];case 1:return r=o.sent(),i=e.view.Nh(r),[2,(n.Jh&&Sl(n,e.targetId,i.Dh),i)]}}))}))}function Rl(t){return wt(this,void 0,void 0,(function(){var e;return _t(this,(function(n){return[2,yf((e=Ao(t)).Kc).then((function(t){return Dl(e,t)}))]}))}))}function Vl(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o;return _t(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ao(t),r=Ao(n.xi);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jr(t,e).next((function(e){return e?n.Ga.Li(t,e):ec.resolve(null)}))}))}((i=Ao(t)).Kc,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ff(i.Oh)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Nl(i,e,r||null),Tl(i,e),function(t,e){Ao(Ao(t).xi).Zr(e)}(i.Kc,e)):No(),s.label=4;case 4:return[4,Dl(i,o)];case 5:return s.sent(),[3,7];case 6:_o("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Ml(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return _t(this,(function(h){switch(h.label){case 0:return zl(n=Ao(t)),Gl(n),!0!==e||!0===n.Hh?[3,3]:(r=n.kh.$u(),[4,jl(n,r.O())]);case 1:return i=h.sent(),n.Hh=!0,[4,Hf(n.Oh,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)u=s[o],Af(n.Oh,u);return[3,7];case 3:return!1!==e||!1===n.Hh?[3,7]:(a=[],c=Promise.resolve(),n.qh.forEach((function(t,e){n.kh.zu(e)?a.push(e):c=c.then((function(){return xl(n,e),pf(n.Kc,e,!0)})),Sf(n.Oh,e)})),[4,c]);case 4:return h.sent(),[4,jl(n,a)];case 5:return h.sent(),function(t){var e=Ao(t);e.Kh.forEach((function(t,n){Sf(e.Oh,n)})),e.Wh.wu(),e.Kh=new Map,e.Qh=new us(Ko.V)}(n),n.Hh=!1,[4,Hf(n.Oh,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function jl(t,e,n){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d,v;return _t(this,(function(y){switch(y.label){case 0:n=Ao(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.qh.get(u))&&0!==c.length?[4,lf(n.Kc,Sa(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.Bh.get(l),[4,Ll(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,vf(n.Kc,u)];case 8:return v=y.sent(),[4,lf(n.Kc,v)];case 9:return a=y.sent(),[4,vl(n,Ul(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Lh.Rc(i),r)]}}))}))}function Ul(t){return wa(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Fl(t){var e=Ao(t);return Ao(Ao(e.Kc).persistence).Ca()}function ql(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s;return _t(this,(function(u){switch(u.label){case 0:return(i=Ao(t)).Hh?(_o("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.qh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,yf(i.Kc)];case 3:return o=u.sent(),s=Ns.Yt(e,"current"===n),[4,Dl(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,pf(i.Kc,e,!0)];case 6:return u.sent(),xl(i,e,r),[3,8];case 7:No(),u.label=8;case 8:return[2]}}))}))}function Bl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l;return _t(this,(function(p){switch(p.label){case 0:if(!(r=zl(t)).Hh)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.qh.has(s)?(_o("SyncEngine","Adding an already active target "+s),[3,5]):[4,vf(r.Kc,s)]):[3,6];case 2:return u=p.sent(),[4,lf(r.Kc,u)];case 3:return a=p.sent(),[4,vl(r,Ul(u),a.targetId,!1)];case 4:p.sent(),Af(r.Oh,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return _t(this,(function(e){switch(e.label){case 0:return r.qh.has(t)?[4,pf(r.Kc,t,!1).then((function(){Sf(r.Oh,t),xl(r,t)})).catch(mf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function zl(t){var e=Ao(t);return e.Oh.jc.nu=ml.bind(null,e),e.Oh.jc.Be=Cl.bind(null,e),e.Oh.jc.eu=wl.bind(null,e),e.Lh.Rc=wc.bind(null,e.Mh),e.Lh.Xh=_c.bind(null,e.Mh),e}function Gl(t){var e=Ao(t);return e.Oh.jc.su=_l.bind(null,e),e.Oh.jc.iu=El.bind(null,e),e}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Kl=function(){function t(){}return t.prototype.za=function(t){this.Zh=t},t.prototype.Ui=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.rn.length||1===t.rn.length&&t.rn[0].field.B())}(e)||n.isEqual(Fo.min())?this.tl(t,e):this.Zh.Li(t,r).next((function(o){var s=i.el(e,o);return(Ea(e)||Ia(e))&&i.ph(e.limitType,s,r,n)?i.tl(t,e):(wo()<=Gt.DEBUG&&_o("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),La(e)),i.Zh.Ui(t,e,n).next((function(t){return s.forEach((function(e){t=t.rt(e.key,e)})),t})))}))},t.prototype.el=function(t,e){var n=new hs(Va(t));return e.forEach((function(e,r){r instanceof ya&&Ra(t,r)&&(n=n.add(r))})),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.A(r)>0)},t.prototype.tl=function(t,e){return wo()<=Gt.DEBUG&&_o("IndexFreeQueryEngine","Using full collection scan to execute query:",La(e)),this.Zh.Ui(t,e,Fo.min())},t}(),$l=function(){function t(t,e){this.Fi=t,this.Lr=e,this.xi=[],this.nl=1,this.sl=new hs(Xf.cu)}return t.prototype.Ur=function(t){return ec.resolve(0===this.xi.length)},t.prototype.Qr=function(t,e,n,r){var i=this.nl;this.nl++,this.xi.length>0&&this.xi[this.xi.length-1];var o=new kc(i,e,n,r);this.xi.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.sl=this.sl.add(new Xf(a.key,i)),this.Fi.Kr(t,a.key.path.S())}return ec.resolve(o)},t.prototype.Wr=function(t,e){return ec.resolve(this.il(e))},t.prototype.Gr=function(t,e){var n=e+1,r=this.rl(n),i=r<0?0:r;return ec.resolve(this.xi.length>i?this.xi[i]:null)},t.prototype.zr=function(){return ec.resolve(0===this.xi.length?-1:this.nl-1)},t.prototype.Hr=function(t){return ec.resolve(this.xi.slice())},t.prototype.Mi=function(t,e){var n=this,r=new Xf(e,0),i=new Xf(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Nt([r,i],(function(t){var e=n.il(t.Eu);o.push(e)})),ec.resolve(o)},t.prototype.qi=function(t,e){var n=this,r=new hs(ko);return e.forEach((function(t){var e=new Xf(t,0),i=new Xf(t,Number.POSITIVE_INFINITY);n.sl.Nt([e,i],(function(t){r=r.add(t.Eu)}))})),ec.resolve(this.ol(r))},t.prototype.Gi=function(t,e){var n=e.path,r=n.length+1,i=n;Ko.G(i)||(i=i.child(""));var o=new Xf(new Ko(i),0),s=new hs(ko);return this.sl.xt((function(t){var e=t.key.path;return!!n.N(e)&&(e.length===r&&(s=s.add(t.Eu)),!0)}),o),ec.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.il(t);null!==r&&n.push(r)})),n},t.prototype.Yr=function(t,e){var n=this;xo(0===this.al(e.batchId,"removed")),this.xi.shift();var r=this.sl;return ec.forEach(e.mutations,(function(i){var o=new Xf(i.key,e.batchId);return r=r.delete(o),n.Lr.eo(t,i.key)})).next((function(){n.sl=r}))},t.prototype.Zr=function(t){},t.prototype.so=function(t,e){var n=new Xf(e,0),r=this.sl.Ft(n);return ec.resolve(e.isEqual(r&&r.key))},t.prototype.no=function(t){return this.xi.length,ec.resolve()},t.prototype.al=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.xi.length?0:t-this.xi[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.xi.length?null:this.xi[e]},t}(),Hl=function(){function t(t,e){this.Fi=t,this.cl=e,this.docs=new us(Ko.V),this.size=0}return t.prototype.Ri=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.cl(e);return this.docs=this.docs.rt(r,{gi:e,size:s,readTime:n}),this.size+=s-o,this.Fi.Kr(t,r.path.S())},t.prototype.Vi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.yi=function(t,e){var n=this.docs.get(e);return ec.resolve(n?n.gi:null)},t.prototype.getEntries=function(t,e){var n=this,r=ds();return e.forEach((function(t){var e=n.docs.get(t);r=r.rt(t,e?e.gi:null)})),ec.resolve(r)},t.prototype.Ui=function(t,e,n){for(var r=ys(),i=new Ko(e.path.child("")),o=this.docs._t(i);o.It();){var s=o.Et(),u=s.key,a=s.value,c=a.gi,h=a.readTime;if(!e.path.N(u.path))break;h.A(n)<=0||c instanceof ya&&Ra(e,c)&&(r=r.rt(c.key,c))}return ec.resolve(r)},t.prototype.ul=function(t,e){return ec.forEach(this.docs,(function(t){return e(t)}))},t.prototype._o=function(t){return new Ql(this)},t.prototype.wo=function(t){return ec.resolve(this.size)},t}(),Ql=function(t){function e(e){var n=this;return(n=t.call(this)||this).To=e,n}return mt(e,t),e.prototype.bi=function(t){var e=this,n=[];return this.Ii.forEach((function(r,i){i&&i.gi?n.push(e.To.Ri(t,i.gi,e.Ai(r))):e.To.Vi(r)})),ec.xn(n)},e.prototype.pi=function(t,e){return this.To.yi(t,e)},e.prototype.vi=function(t,e){return this.To.getEntries(t,e)},e}(Pc),Wl=function(){function t(t){this.persistence=t,this.hl=new Vo((function(t){return Xo(t)}),Jo),this.lastRemoteSnapshotVersion=Fo.min(),this.highestTargetId=0,this.ll=0,this._l=new Yf,this.targetCount=0,this.fl=Kh.po()}return t.prototype.De=function(t,e){return this.hl.forEach((function(t,n){return e(n)})),ec.resolve()},t.prototype.Co=function(t){return ec.resolve(this.lastRemoteSnapshotVersion)},t.prototype.No=function(t){return ec.resolve(this.ll)},t.prototype.bo=function(t){return this.highestTargetId=this.fl.next(),ec.resolve(this.highestTargetId)},t.prototype.xo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),ec.resolve()},t.prototype.Oo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new Kh(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Fo=function(t,e){return this.Oo(e),this.targetCount+=1,ec.resolve()},t.prototype.ko=function(t,e){return this.Oo(e),ec.resolve()},t.prototype.$o=function(t,e){return this.hl.delete(e.target),this._l.du(e.targetId),this.targetCount-=1,ec.resolve()},t.prototype.Nr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.hl.delete(s),o.push(r.Lo(t,u.targetId)),i++)})),ec.xn(o).next((function(){return i}))},t.prototype.Bo=function(t){return ec.resolve(this.targetCount)},t.prototype.qo=function(t,e){var n=this.hl.get(e)||null;return ec.resolve(n)},t.prototype.Uo=function(t,e,n){return this._l.lu(e,n),ec.resolve()},t.prototype.Ko=function(t,e,n){this._l.fu(e,n);var r=this.persistence.Lr,i=[];return r&&e.forEach((function(e){i.push(r.eo(t,e))})),ec.xn(i)},t.prototype.Lo=function(t,e){return this._l.du(e),ec.resolve()},t.prototype.jo=function(t,e){var n=this._l.Tu(e);return ec.resolve(n)},t.prototype.so=function(t,e){return ec.resolve(this._l.so(e))},t}(),Yl=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.mo=function(t,e){return ec.resolve(this.dl.get(e))},t.prototype.Ao=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:cu(n.createTime)}),ec.resolve()},t.prototype.Ro=function(t,e){return ec.resolve(this.wl.get(e))},t.prototype.Po=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:sh(n.bundledQuery),readTime:cu(n.readTime)}),ec.resolve()},t}(),Xl=function(){function t(t,e){var n=this;this.Tl={},this.Jo=new Uc(0),this.Yo=!1,this.Yo=!0,this.Lr=t(this),this.ra=new Wl(this),this.Fi=new bh,this.Ni=function(t,e){return new Hl(t,(function(t){return n.Lr.El(t)}))}(this.Fi),this.serializer=new Yc(e),this.oa=new Yl(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.pa=function(){return this.Yo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),t.prototype.fa=function(){},t.prototype.da=function(){},t.prototype.Oa=function(){return this.Fi},t.prototype.Na=function(t){var e=this.Tl[t.Ys()];return e||(e=new $l(this.Fi,this.Lr),this.Tl[t.Ys()]=e),e},t.prototype.xa=function(){return this.ra},t.prototype.Fa=function(){return this.Ni},t.prototype.Ma=function(){return this.oa},t.prototype.runTransaction=function(t,e,n){var r=this;_o("MemoryPersistence","Starting transaction:",t);var i=new Jl(this.Jo.next());return this.Lr.Il(),n(i).next((function(t){return r.Lr.ml(i).next((function(){return t}))})).Cn().then((function(t){return i.Ci(),t}))},t.prototype.Al=function(t,e){return ec.Fn(Object.values(this.Tl).map((function(n){return function(){return n.so(t,e)}})))},t}(),Jl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Go=e,n}return mt(e,t),e}(Vc),Zl=function(){function t(t){this.persistence=t,this.Rl=new Yf,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"Vl",{get:function(){if(this.Pl)return this.Pl;throw No()},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t,e,n){return this.Rl.Qo(n,e),this.Vl.delete(n.toString()),ec.resolve()},t.prototype.Wo=function(t,e,n){return this.Rl.Wo(n,e),this.Vl.add(n.toString()),ec.resolve()},t.prototype.eo=function(t,e){return this.Vl.add(e.toString()),ec.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.du(e.targetId).forEach((function(t){return n.Vl.add(t.toString())}));var r=this.persistence.xa();return r.jo(t,e.targetId).next((function(t){t.forEach((function(t){return n.Vl.add(t.toString())}))})).next((function(){return r.$o(t,e)}))},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Fa()._o();return ec.forEach(this.Vl,(function(r){var i=Ko.K(r);return e.yl(t,i).next((function(t){t||n.Vi(i)}))})).next((function(){return e.Pl=null,n.apply(t)}))},t.prototype.qa=function(t,e){var n=this;return this.yl(t,e).next((function(t){t?n.Vl.delete(e.toString()):n.Vl.add(e.toString())}))},t.prototype.El=function(t){return 0},t.prototype.yl=function(t,e){var n=this;return ec.Fn([function(){return ec.resolve(n.Rl.so(e))},function(){return n.persistence.xa().so(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),tp=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.mc=function(t){this.bl=t},t.prototype.dc=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),ep={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},np=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return mt(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise((function(i,o){var s=new yo;s.listenOnce(po.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case lo.NO_ERROR:var e=s.getResponseJson();_o("Connection","XHR received:",JSON.stringify(e)),i(e);break;case lo.TIMEOUT:_o("Connection",'RPC "'+t+'" timed out'),o(new jo(Mo.DEADLINE_EXCEEDED,"Request time out"));break;case lo.HTTP_ERROR:var n=s.getStatus();if(_o("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Mo).indexOf(e)>=0?e:Mo.UNKNOWN}(r.status);o(new jo(u,r.message))}else o(new jo(Mo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new jo(Mo.UNAVAILABLE,"Connection failed."));break;default:No()}}finally{_o("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Ac=function(t,e){var n,r=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new uo,o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(o.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())||"object"==typeof navigator&&"ReactNative"===navigator.product||St().indexOf("Electron/")>=0||function(){var t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||St().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");_o("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),a=!1,c=!1,h=new tp({pl:function(t){c?_o("Connection","Not sending because WebChannel is closed:",t):(a||(_o("Connection","Opening WebChannel transport."),u.open(),a=!0),_o("Connection","WebChannel sending:",t),u.send(t))},vl:function(){return u.close()}}),f=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(vo.EventType.OPEN,(function(){c||_o("Connection","WebChannel transport opened.")})),f(vo.EventType.CLOSE,(function(){c||(c=!0,_o("Connection","WebChannel transport closed"),h.Nl())})),f(vo.EventType.ERROR,(function(t){c||(c=!0,Io("Connection","WebChannel transport errored:",t),h.Nl(new jo(Mo.UNAVAILABLE,"The operation could not be completed")))})),f(vo.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];xo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){_o("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=es[t];if(void 0!==e)return ss(e)}(o),a=i.message;void 0===s&&(s=Mo.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),c=!0,h.Nl(new jo(s,a)),u.close()}else _o("Connection","WebChannel received:",n),h.xl(n)}})),setTimeout((function(){h.Cl()}),0),h},e}(function(){function t(t){this.Fl=t,this.t=t.t;var e=t.ssl?"https":"http";this.Ol=e+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.xc=function(t,e,n,r){var i=this.kl(t,e);_o("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then((function(t){return _o("RestConnection","Received: ",t),t}),(function(e){throw Io("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Fc=function(t,e,n,r){return this.xc(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.2",t["Content-Type"]="text/plain",e)for(var n in e.ti)e.ti.hasOwnProperty(n)&&(t[n]=e.ti[n])},t.prototype.kl=function(t,e){var n=ep[t];return this.Ol+"/v1/"+e+":"+n},t}()),rp=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Xc=function(t){this.Kl.push(t)},t.prototype.pa=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){_o("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){_o("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ip=function(){function t(){}return t.prototype.Xc=function(t){},t.prototype.pa=function(){},t}(),op=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return wt(this,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return this.serializer=Cc(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Kc=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return sf(this.persistence,new Kl,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Xl(Zl.gl,this.serializer)},t.prototype.jl=function(t){return new ul},t.prototype.terminate=function(){return wt(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.pa()];case 1:return t.sent(),[4,this.persistence.pa()];case 2:return t.sent(),[2]}}))}))},t}(),sp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return mt(e,t),e.prototype.initialize=function(e){return wt(this,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,gf(this.Kc)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,Gl(this.Xl.gu)];case 4:return n.sent(),[4,Ff(this.Xl.Oh)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return sf(this.persistence,new Kl,t.Yl,this.serializer)},e.prototype.Hl=function(t){var e=this.persistence.Lr.Rr;return new Gc(e,t.rs)},e.prototype.Gl=function(t){var e=rf(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?zc.Tr(this.cacheSizeBytes):zc.mr;return new Jh(this.synchronizeTabs,e,t.clientId,n,t.rs,fc(),lc(),this.serializer,this.kh,!!this.forceOwnership)},e.prototype.jl=function(t){return new ul},e}(op),up=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return mt(e,t),e.prototype.initialize=function(e){return wt(this,void 0,void 0,(function(){var n,r=this;return _t(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.gu,this.kh instanceof sl?(this.kh.gu={_h:Vl.bind(null,n),fh:ql.bind(null,n),dh:Bl.bind(null,n),Ca:Fl.bind(null,n),lh:Rl.bind(null,n)},[4,this.kh.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence._a((function(t){return wt(r,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return[4,Ml(this.Xl.gu,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.yr?this.zl.start(this.Kc):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=fc();if(!sl.kn(e))throw new jo(Mo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rf(t.Fl.t,t.Fl.persistenceKey);return new sl(e,t.rs,n,t.clientId,t.Yl)},e}(sp),ap=function(){function t(){}return t.prototype.initialize=function(t,e){return wt(this,void 0,void 0,(function(){var n=this;return _t(this,(function(r){switch(r.label){case 0:return this.Kc?[3,2]:(this.Kc=t.Kc,this.kh=t.kh,this.Wc=this.Zl(e),this.Oh=this.t_(e),this.Mh=this.e_(e),this.gu=this.n_(e,!t.synchronizeTabs),this.kh.Oc=function(t){return bl(n.gu,t,1)},this.Oh.jc.s_=Pl.bind(null,this.gu),[4,Hf(this.Oh,this.gu.Jh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new gc},t.prototype.Zl=function(t){var e,n=Cc(t.Fl.t),r=(e=t.Fl,new np(e));return function(t,e,n){return new Ef(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Kc,n=this.Wc,r=t.rs,i=function(t){return bl(s.gu,t,0)},o=rp.kn()?new rp:new ip,new Tf(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new pl(t,e,n,r,i,o);return s&&(u.Hh=!0),u}(this.Kc,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return wt(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=Ao(t),_o("RemoteStore","RemoteStore shutting down."),e.Hc.add(5),[4,xf(e)];case 1:return n.sent(),e.Yc.pa(),e.Zc.set("Unknown"),[2]}}))}))}(this.Oh)},t}(),cp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),hp=function(t){this.o_=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function fp(t,e,n){if(!n)throw new jo(Mo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function lp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jo(Mo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function pp(t,e,n,r){if(!0===e&&!0===r)throw new jo(Mo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function dp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":No()}function vp(t,e){if(t instanceof hp&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new jo(Mo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=dp(t);throw new jo(Mo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function yp(t,e){if(e<=0)throw new jo(Mo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gp=function(t){this.a_=t},mp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.c_=function(t){if(2!==t.u_)throw 1===t.u_?t.h_(this.a_+"() can only appear at the top level of your update data"):t.h_(this.a_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(gp);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bp(t,e,n){return new Kp({u_:3,l_:e.settings.l_,methodName:t.a_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var wp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.c_=function(t){return new Qu(t.path,new Uu)},e.prototype.isEqual=function(t){return t instanceof e},e}(gp),_p=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return mt(e,t),e.prototype.c_=function(t){var e=bp(this,t,!0),n=this.f_.map((function(t){return Xp(t,e)})),r=new Fu(n);return new Qu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(gp),Ep=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return mt(e,t),e.prototype.c_=function(t){var e=bp(this,t,!0),n=this.f_.map((function(t){return Xp(t,e)})),r=new Bu(n);return new Qu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(gp),Ip=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return mt(e,t),e.prototype.c_=function(t){var e=new Gu(t.serializer,ou(t.serializer,this.d_));return new Qu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(gp),Tp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new jo(Mo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new jo(Mo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.T_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.T_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.T_===t.T_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.T_}},t.prototype.I=function(t){return ko(this.w_,t.w_)||ko(this.T_,t.T_)},t}(),Np=function(){function t(t){this.E_=t}return t.fromBase64String=function(e){try{return new t(ts.fromBase64String(e))}catch(e){throw new jo(Mo.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ts.fromUint8Array(e))},t.prototype.toBase64=function(){return this.E_.toBase64()},t.prototype.toUint8Array=function(){return this.E_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},t}(),xp=new Map,Ap=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new jo(Mo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new jo(Mo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,pp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Sp(){if("undefined"==typeof Uint8Array)throw new jo(Mo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Op(){if("undefined"==typeof atob)throw new jo(Mo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.fromBase64String=function(t){Op();try{return new e(ts.fromBase64String(t))}catch(t){throw new jo(Mo.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return Sp(),new e(ts.fromUint8Array(t))},e.prototype.toBase64=function(){return Op(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return Sp(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Np),Dp=function(){function t(){}return t.prototype.I_=function(t,e){switch(void 0===e&&(e="none"),js(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $s(t.integerValue||t.doubleValue);case 3:return this.m_(t.timestampValue);case 4:return this.A_(t,e);case 5:return t.stringValue;case 6:return this.R_(Hs(t.bytesValue));case 7:return this.P_(t.referenceValue);case 8:return this.g_(t.geoPointValue);case 9:return this.V_(t.arrayValue,e);case 10:return this.y_(t.mapValue,e);default:throw No()}},t.prototype.y_=function(t,e){var n=this,r={};return Lo(t.fields||{},(function(t,i){r[t]=n.I_(i,e)})),r},t.prototype.g_=function(t){return new Tp($s(t.latitude),$s(t.longitude))},t.prototype.V_=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.I_(t,e)}))},t.prototype.A_=function(t,e){switch(e){case"previous":var n=Rs(t);return null==n?null:this.I_(n,e);case"estimate":return this.m_(Vs(t));default:return null}},t.prototype.m_=function(t){var e=Ks(t);return new Uo(e.seconds,e.nanos)},t.prototype.p_=function(t,e){var n=Bo.k(t);xo(Lu(n));var r=new mo(n.get(1),n.get(3)),i=new Ko(n.v(5));return r.isEqual(e)||Eo("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Pp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return mt(e,t),e.prototype.R_=function(t){return new kp(t)},e.prototype.P_=function(t){var e=this.p_(t,this.firestore.v_);return Ud.b_(e,this.firestore,null)},e}(Dp),Cp=function(){function t(t,e,n,r,i){this.S_=t,this.D_=e,this.C_=n,this.N_=r,this.x_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Mp(this.S_,this.x_,this.C_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.N_},t.prototype.data=function(){if(this.N_){if(this.x_){var t=new Lp(this.S_,this.D_,this.C_,this.N_,null);return this.x_.fromFirestore(t)}return this.D_.I_(this.N_.sn())}},t.prototype.get=function(t){if(this.N_){var e=this.N_.data().field(Rp("DocumentSnapshot.get",t));if(null!==e)return this.D_.I_(e)}},t}(),Lp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Cp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rp(t,e){return"string"==typeof e?rd(t,e):e instanceof hp?e.o_.F_:e.F_}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new jo(Mo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.F_=new Go(t)}return t.prototype.isEqual=function(t){return this.F_.isEqual(t.F_)},t}(),Mp=function(){function t(t,e,n){this.x_=e,this.C_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"O_",{get:function(){return this.C_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.C_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Up(this.firestore,this.x_,this.C_.path.S())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),jp=function(){function t(t,e,n){this.x_=e,this.M_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.M_)},t}(),Up=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,_a(r))||this).firestore=e,i.O_=r,i.type="collection",i}return mt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.O_.S();return t.T()?null:new Mp(this.firestore,null,new Ko(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.O_)},e}(jp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fp(t){var e=t.k_(),n=Cc(t.v_);return new $p(t.v_,!!e.ignoreUndefinedProperties,n)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qp=/^__.*__$/,Bp=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.L_=function(t,e){var n=[];return null!==this.Qe?n.push(new oa(t,this.data,this.Qe,e)):n.push(new ia(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new ua(t,this.fieldTransforms)),n},t}(),zp=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.L_=function(t,e){var n=[new oa(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new ua(t,this.fieldTransforms)),n},t}();function Gp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw No()}}var Kp=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.B_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),t.prototype.q_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.q_({path:n,__:!1});return r.Q_(t),r},t.prototype.K_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.q_({path:n,__:!1});return r.B_(),r},t.prototype.W_=function(t){return this.q_({path:void 0,__:!0})},t.prototype.h_=function(t){return id(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.N(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.N(e.field)}))},t.prototype.B_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Q_(this.path.get(t))},t.prototype.Q_=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(Gp(this.u_)&&qp.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),$p=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||Cc(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Kp({u_:t,methodName:e,l_:n,path:Go.$(),__:!1,j_:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function Hp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);td("Data must be an object, but it was:",s,r);var u,a,c=Jp(r,s);if(o.merge)u=new Hu(s.Qe),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=ed(e,l[f],n);if(!s.contains(p))throw new jo(Mo.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");od(h,p)||h.push(p)}u=new Hu(h),a=s.fieldTransforms.filter((function(t){return u.He(t.field)}))}else u=null,a=s.fieldTransforms;return new Bp(new la(c),u,a)}function Qp(t,e,n,r){var i=t.G_(1,e,n);td("Data must be an object, but it was:",i,r);var o=[],s=new pa;Lo(r,(function(t,r){var u=rd(e,t,n);r instanceof hp&&(r=r.o_);var a=i.K_(u);if(r instanceof mp)o.push(u);else{var c=Xp(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Hu(o);return new zp(s.Ye(),u,i.fieldTransforms)}function Wp(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[ed(e,r,n)],a=[i];if(o.length%2!=0)throw new jo(Mo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(ed(e,o[c])),a.push(o[c+1]);for(var h=[],f=new pa,l=u.length-1;l>=0;--l)if(!od(h,u[l])){var p=u[l],d=a[l];d instanceof hp&&(d=d.o_);var v=s.K_(p);if(d instanceof mp)h.push(p);else{var y=Xp(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new Hu(h);return new zp(f.Ye(),g,s.fieldTransforms)}function Yp(t,e,n,r){return void 0===r&&(r=!1),Xp(n,t.G_(r?4:3,e))}function Xp(t,e){if(t instanceof hp&&(t=t.o_),Zp(t))return td("Unsupported field value:",e,t),Jp(t,e);if(t instanceof gp)return function(t,e){if(!Gp(e.u_))throw e.h_(t.a_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.a_+"() is not currently supported inside arrays");var n=t.c_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.u_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Xp(o[i],e.W_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof hp&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ou(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Uo.fromDate(t);return{timestampValue:su(e.serializer,n)}}if(t instanceof Uo){var r=new Uo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:su(e.serializer,r)}}if(t instanceof Tp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Np)return{bytesValue:uu(e.serializer,t.E_)};if(t instanceof Mp){var i=e.t,o=t.firestore.v_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:hu(t.firestore.v_||e.t,t.C_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+dp(t))}(t,e)}function Jp(t,e){var n={};return Ro(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Lo(t,(function(t,r){var i=Xp(r,e.U_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Zp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Uo||t instanceof Tp||t instanceof Np||t instanceof Mp||t instanceof gp)}function td(t,e,n){if(!Zp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=dp(n);throw"an object"===r?e.h_(t+" a custom object"):e.h_(t+" "+r)}}function ed(t,e,n){if(e instanceof hp&&(e=e.o_),e instanceof Vp)return e.F_;if("string"==typeof e)return rd(t,e);throw id("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var nd=new RegExp("[~\\*/\\[\\]]");function rd(t,e,n){if(e.search(nd)>=0)throw id("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Vp.bind.apply(Vp,Nt([void 0],e.split("."))))).F_}catch(r){throw id("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function id(t,e,n,r,i){var o=r&&!r.T(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new jo(Mo.INVALID_ARGUMENT,(u+=". ")+t+a)}function od(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sd=function(){function t(t){this.Wc=t,this.z_=new Map,this.mutations=[],this.H_=!1,this.J_=null,this.Y_=new Set}return t.prototype.X_=function(t){return wt(this,void 0,void 0,(function(){var e,n=this;return _t(this,(function(r){switch(r.label){case 0:if(this.Z_(),this.mutations.length>0)throw new jo(Mo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return _t(this,(function(a){switch(a.label){case 0:return n=Ao(t),r=yu(n.serializer)+"/documents",i={documents:e.map((function(t){return lu(n.serializer,t)}))},[4,n.Fc("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){xo(!!e.found),e.found.name,e.found.updateTime;var n=pu(t,e.found.name),r=cu(e.found.updateTime),i=new la({mapValue:{fields:e.found.fields}});return new ya(n,r,i,{})}(t,e):"missing"in e?function(t,e){xo(!!e.missing),xo(!!e.readTime);var n=pu(t,e.missing),r=cu(e.readTime);return new ga(n,r)}(t,e):No()}(n.serializer,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());xo(!!e),u.push(e)})),u)]}}))}))}(this.Wc,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof ga||t instanceof ya?n.tf(t):No()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.L_(t,this.je(t))),this.Y_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.L_(t,this.ef(t)))}catch(t){this.J_=t}this.Y_.add(t.toString())},t.prototype.delete=function(t){this.write([new ha(t,this.je(t))]),this.Y_.add(t.toString())},t.prototype.commit=function(){return wt(this,void 0,void 0,(function(){var t,e=this;return _t(this,(function(n){switch(n.label){case 0:if(this.Z_(),this.J_)throw this.J_;return t=this.z_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ko.K(n);e.mutations.push(new fa(r,e.je(r)))})),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:return n=Ao(t),r=yu(n.serializer)+"/documents",i={writes:e.map((function(t){return bu(n.serializer,t)}))},[4,n.xc("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Wc,this.mutations)];case 1:return n.sent(),this.H_=!0,[2]}}))}))},t.prototype.tf=function(t){var e;if(t instanceof ya)e=t.version;else{if(!(t instanceof ga))throw No();e=Fo.min()}var n=this.z_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new jo(Mo.ABORTED,"Document version changed between two reads.")}else this.z_.set(t.key.toString(),e)},t.prototype.je=function(t){var e=this.z_.get(t.toString());return!this.Y_.has(t.toString())&&e?Yu.updateTime(e):Yu.Ge()},t.prototype.ef=function(t){var e=this.z_.get(t.toString());if(!this.Y_.has(t.toString())&&e){if(e.isEqual(Fo.min()))throw new jo(Mo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yu.updateTime(e)}return Yu.exists(!0)},t.prototype.write=function(t){this.Z_(),this.mutations=this.mutations.concat(t)},t.prototype.Z_=function(){},t}(),ud=function(){function t(t,e,n,r){this.rs=t,this.Wc=e,this.updateFunction=n,this.us=r,this.nf=5,this.Ps=new tc(this.rs,"transaction_retry")}return t.prototype.run=function(){this.sf()},t.prototype.sf=function(){var t=this;this.Ps.An((function(){return wt(t,void 0,void 0,(function(){var t,e,n=this;return _t(this,(function(r){return t=new sd(this.Wc),(e=this.rf(t))&&e.then((function(e){n.rs.fs((function(){return t.commit().then((function(){n.us.resolve(e)})).catch((function(t){n.af(t)}))}))})).catch((function(t){n.af(t)})),[2]}))}))}))},t.prototype.rf=function(t){try{var e=this.updateFunction(t);return!$o(e)&&e.catch&&e.then?e:(this.us.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.us.reject(t),null}},t.prototype.af=function(t){var e=this;this.nf>0&&this.cf(t)?(this.nf-=1,this.rs.fs((function(){return e.sf(),Promise.resolve()}))):this.us.reject(t)},t.prototype.cf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!os(e)}return!1},t}(),ad=function(){function t(t,e,n){var r=this;this.credentials=t,this.rs=e,this.Fl=n,this.user=Tc.UNAUTHENTICATED,this.clientId=Oo.u(),this.uf=function(){},this.oi=new Za,this.credentials.si((function(t){_o("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.uf(t)),r.oi.resolve()}))}return t.prototype.getConfiguration=function(){return wt(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return[4,this.oi.promise];case 1:return[2,(t.sent(),{rs:this.rs,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}}))}))},t.prototype.hf=function(t){var e=this;this.uf=t,this.oi.promise.then((function(){return e.uf(e.user)}))},t.prototype.lf=function(){if(this.rs.Vs)throw new jo(Mo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.rs.bs();var e=new Za;return this.rs.ys((function(){return wt(t,void 0,void 0,(function(){var t,n;return _t(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this._f?[4,this._f.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.ff?[4,this.ff.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.ii(),e.resolve(),[3,6];case 5:return t=r.sent(),n=vc(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function cd(t,e){return wt(this,void 0,void 0,(function(){var n,r=this;return _t(this,(function(i){switch(i.label){case 0:return t.rs.Ns(),_o("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.hf((function(n){return t.rs.Ss((function(){return wt(r,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return[4,uf(e.Kc,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.fa((function(){return t.terminate()})),t.ff=e,[2]}}))}))}function hd(t,e){return wt(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return t.rs.Ns(),[4,fd(t)];case 1:return n=i.sent(),_o("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.hf((function(n){return t.rs.Ss((function(){return function(t,e){return wt(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return(n=Ao(t)).rs.Ns(),_o("RemoteStore","RemoteStore received new credentials"),r=Cf(n),n.Hc.add(3),[4,xf(n)];case 1:return i.sent(),r&&n.Zc.set("Unknown"),[4,n.jc.s_(e)];case 2:return i.sent(),n.Hc.delete(3),[4,Nf(n)];case 3:return i.sent(),[2]}}))}))}(e.Oh,n)}))})),t._f=e,[2]}}))}))}function fd(t){return wt(this,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return t.ff?[3,2]:(_o("FirestoreClient","Using default OfflineComponentProvider"),[4,cd(t,new op)]);case 1:e.sent(),e.label=2;case 2:return[2,t.ff]}}))}))}function ld(t){return wt(this,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return t._f?[3,2]:(_o("FirestoreClient","Using default OnlineComponentProvider"),[4,hd(t,new ap)]);case 1:e.sent(),e.label=2;case 2:return[2,t._f]}}))}))}function pd(t){return fd(t).then((function(t){return t.persistence}))}function dd(t){return fd(t).then((function(t){return t.Kc}))}function vd(t){return ld(t).then((function(t){return t.Oh}))}function yd(t){return ld(t).then((function(t){return t.gu}))}function gd(t){return wt(this,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:return[4,ld(t)];case 1:return e=r.sent(),[2,((n=e.Mh).Ls=dl.bind(null,e.gu),n.Us=yl.bind(null,e.gu),n)]}}))}))}function md(t,e){var n=this,r=new Za;return t.rs.fs((function(){return wt(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return n=gl,[4,yd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}function bd(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o;return _t(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Ao(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ga.Oi(t,e)}))}(t,e)];case 1:return(r=s.sent())instanceof ya?n.resolve(r):r instanceof ga?n.resolve(null):n.reject(new jo(Mo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=vc(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))}function wd(t,e,n,r,i){var o=new cp({next:function(o){e.fs((function(){return bc(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new jo(Mo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new jo(Mo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ic(_a(n.path),o,{includeMetadataChanges:!0,Hs:!0});return mc(t,s)}var _d=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).yf=new dc,r.df="name"in e?e.name:"[DEFAULT]",r}return mt(e,t),e.prototype.Vf=function(){return this.pf||Vd(this),this.pf.terminate()},e}(function(){function t(t,e){this.df="(lite)",this.wf=new Ap({}),this.Tf=!1,t instanceof mo?(this.v_=t,this.Ef=new xc):(this.If=t,this.v_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new jo(Mo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(t.options.projectId)}(t),this.Ef=new Ac(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.If)throw new jo(Mo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.If},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mf",{get:function(){return this.Tf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Af",{get:function(){return void 0!==this.Rf},enumerable:!1,configurable:!0}),t.prototype.Pf=function(t){if(this.Tf)throw new jo(Mo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.wf=new Ap(t),void 0!==t.credentials&&(this.Ef=function(t){if(!t)return new xc;switch(t.type){case"gapi":var e=t.client;return xo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Oc(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new jo(Mo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.gf=function(){return this.wf},t.prototype.k_=function(){return this.Tf=!0,this.wf},t.prototype._delete=function(){return this.Rf||(this.Rf=this.Vf()),this.Rf},t.prototype.Vf=function(){return function(t){var e=xp.get(t);e&&(_o("ComponentProvider","Removing Datastore"),xp.delete(t),e.terminate())}(this),Promise.resolve()},t}());function Ed(t,e,n){var r=this,i=new Za;return t.rs.enqueue((function(){return wt(r,void 0,void 0,(function(){var r;return _t(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,cd(t,n)];case 1:return o.sent(),[4,hd(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Mo.FAILED_PRECONDITION||t.code===Mo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Id(t){if(t.mf||t.Af)throw new jo(Mo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Td=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).S_=e,u.vf=e,u.metadata=o,u}return mt(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.N_){if(this.x_){var e=new Nd(this.S_,this.D_,this.C_,this.N_,this.metadata,null);return this.x_.fromFirestore(e,t)}return this.D_.I_(this.N_.sn(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.N_){var n=this.N_.data().field(Rp("DocumentSnapshot.get",t));if(null!==n)return this.D_.I_(n,e.serverTimestamps)}},e}(Cp),Nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Td),xd=function(){function t(t,e,n,r){this.S_=t,this.D_=e,this.bf=r,this.metadata=new qd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.bf.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.bf.docs.forEach((function(r){t.call(e,new Nd(n.S_,n.D_,r.key,r,new qd(n.bf.Qt.has(r.key),n.bf.fromCache),n.query.x_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.bf.Wt)throw new jo(Mo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Sf&&this.Df===e||(this.Sf=function(t,e){if(t.bf.Ut.T()){var n=0;return t.bf.docChanges.map((function(e){var r=new Nd(t.S_,t.D_,e.doc.key,e.doc,new qd(t.bf.Qt.has(e.doc.key),t.bf.fromCache),t.query.x_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.bf.Ut;return t.bf.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Nd(t.S_,t.D_,e.doc.key,e.doc,new qd(t.bf.Qt.has(e.doc.key),t.bf.fromCache),t.query.x_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Ad(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.Df=e),this.Sf},t}();function Ad(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return No()}}function Sd(t,e){return t instanceof Td&&e instanceof Td?t.S_===e.S_&&t.C_.isEqual(e.C_)&&(null===t.N_?null===e.N_:t.N_.isEqual(e.N_))&&t.x_===e.x_:t instanceof xd&&e instanceof xd&&t.S_===e.S_&&function(t,e){return t instanceof jp&&e instanceof jp&&t.firestore===e.firestore&&Pa(t.M_,e.M_)&&t.x_===e.x_}(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.bf.isEqual(e.bf)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Od=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return mt(e,t),e.prototype.R_=function(t){return new Np(t)},e.prototype.P_=function(t){var e=this.p_(t,this.firestore.v_);return new Mp(this.firestore,null,e)},e}(Dp);function kd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=vp(t.firestore,_d),s=Fp(o);return e instanceof hp&&(e=e.o_),Dd(o,("string"==typeof e||e instanceof Vp?Wp(s,"updateDoc",t.C_,e,n,r):Qp(s,"updateDoc",t.C_,e)).L_(t.C_,Yu.exists(!0)))}function Dd(t,e){return md(Rd(t),e)}function Pd(t,e,n){var r=n.docs.get(e.C_),i=new Od(t);return new Td(t,i,e.C_,r,new qd(n.hasPendingWrites,n.fromCache),e.x_)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Id(t);var n=Rd(t),r=t.k_(),i=new ap;return Ed(n,i,new sp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Id(t);var e=Rd(t),n=t.k_(),r=new ap;return Ed(e,r,new up(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.mf&&!t.Af)throw new jo(Mo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Za;return t.yf.ys((function(){return wt(e,void 0,void 0,(function(){var e;return _t(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return wt(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return nc.kn()?(e=t+"main",[4,nc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(rf(t.v_,t.df))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.o_)},t}(),Ld=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Cf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof mo||(i.Nf=e),i}return mt(e,t),Object.defineProperty(e.prototype,"v_",{get:function(){return this.o_.v_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.gf()),t)).merge,this.o_.Pf(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.gf().host&&Io("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.rs.enqueue((function(){return wt(e,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:return[4,pd(t)];case 1:return e=r.sent(),[4,vd(t)];case 2:return n=r.sent(),[2,(e.da(!0),function(t){var e=Ao(t);return e.Hc.delete(0),Nf(e)}(n))]}}))}))}))}(Rd(this.o_))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.rs.enqueue((function(){return wt(e,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:return[4,pd(t)];case 1:return e=r.sent(),[4,vd(t)];case 2:return n=r.sent(),[2,(e.da(!1),function(t){return wt(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return(e=Ao(t)).Hc.add(0),[4,xf(e)];case 1:return n.sent(),e.Zc.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Rd(this.o_))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&pp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Cf.enableMultiTabIndexedDbPersistence(this):this.Cf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Cf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Za;return t.rs.fs((function(){return wt(e,void 0,void 0,(function(){var e;return _t(this,(function(r){switch(r.label){case 0:return e=Il,[4,yd(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Rd(this.o_))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=Rd(t),i=Lc(e)?e:{next:e},o=new cp(i);return t.yf.fs((function(){return wt(n,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return t=function(t,e){Ao(t).$s.add(e),e.next()},[4,gd(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}}))}))})),function(){o.r_(),t.yf.fs((function(){return wt(n,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return t=function(t,e){Ao(t).$s.delete(e)},[4,gd(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}}))}))}))}}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Nf)throw new jo(Mo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Nf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){return fp("Firestore.collection","path",t),Rd(this.o_),new Xd(Bo.k(t),this,null)},e.prototype.doc=function(t){return fp("Firestore.doc","path",t),Rd(this.o_),Ud.xf(Bo.k(t),this,null)},e.prototype.collectionGroup=function(t){if(fp("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new jo(Mo.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return Rd(this.o_),new Qd(function(t){return new ba(Bo.$(),t)}(t),this,null)},e.prototype.runTransaction=function(t){var e=this;return function(t,e){var n=this,r=new Za;return t.rs.fs((function(){return wt(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return[4,function(t){return ld(t).then((function(t){return t.Wc}))}(t)];case 1:return n=i.sent(),new ud(t.rs,n,e,r).run(),[2]}}))}))})),r.promise}(Rd(this.o_),(function(n){return t(new Md(e,n))}))},e.prototype.batch=function(){return Rd(this.o_),new jd(this)},e}(hp);function Rd(t){return t.pf||Vd(t),t.pf.lf(),t.pf}function Vd(t){var e=t.k_(),n=function(t,e,n){return new go(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.v_,t.df,e);t.pf=new ad(t.Ef,t.yf,n)}var Md=function(){function t(t,e){this.S_=t,this.Ff=e,this.Of=Fp(this.S_.o_)}return t.prototype.get=function(t){var e=this,n=Jd("Transaction.get",t,this.S_),r=new Pp(this.S_);return this.Ff.X_([n.C_]).then((function(t){if(!t||1!==t.length)return No();var i=t[0];if(i instanceof ga)return new Bd(e.S_,new Td(e.S_.o_,r,n.C_,null,new qd(!1,!1),n.x_));if(i instanceof ya)return new Bd(e.S_,new Td(e.S_.o_,r,n.C_,i,new qd(!1,!1),n.x_));throw No()}))},t.prototype.set=function(t,e,n){var r=Jd("Transaction.set",t,this.S_);n=lp("Transaction.set",n);var i=Zd(r.x_,e,n),o=Hp(this.Of,"Transaction.set",r.C_,i,null!==r.x_,n);return this.Ff.set(r.C_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Jd("Transaction.update",t,this.S_);return e instanceof hp&&(e=e.o_),o="string"==typeof e||e instanceof Vp?Wp(this.Of,"Transaction.update",s.C_,e,n,r):Qp(this.Of,"Transaction.update",s.C_,e),this.Ff.update(s.C_,o),this},t.prototype.delete=function(t){var e=Jd("Transaction.delete",t,this.S_);return this.Ff.delete(e.C_),this},t}(),jd=function(){function t(t){this.S_=t,this.Mf=[],this.kf=!1,this.Of=Fp(this.S_.o_)}return t.prototype.set=function(t,e,n){this.$f();var r=Jd("WriteBatch.set",t,this.S_);n=lp("WriteBatch.set",n);var i=Zd(r.x_,e,n),o=Hp(this.Of,"WriteBatch.set",r.C_,i,null!==r.x_,n);return this.Mf=this.Mf.concat(o.L_(r.C_,Yu.Ge())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.$f();var o,s=Jd("WriteBatch.update",t,this.S_);return e instanceof hp&&(e=e.o_),o="string"==typeof e||e instanceof Vp?Wp(this.Of,"WriteBatch.update",s.C_,e,n,r):Qp(this.Of,"WriteBatch.update",s.C_,e),this.Mf=this.Mf.concat(o.L_(s.C_,Yu.exists(!0))),this},t.prototype.delete=function(t){this.$f();var e=Jd("WriteBatch.delete",t,this.S_);return this.Mf=this.Mf.concat(new ha(e.C_,Yu.Ge())),this},t.prototype.commit=function(){return this.$f(),this.kf=!0,this.Mf.length>0?md(Rd(this.S_.o_),this.Mf):Promise.resolve()},t.prototype.$f=function(){if(this.kf)throw new jo(Mo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ud=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.D_=new Pp(e),r}return mt(e,t),e.xf=function(t,n,r){if(t.length%2!=0)throw new jo(Mo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.M()+" has "+t.length);return new e(n,new Mp(n.o_,r,new Ko(t)))},e.b_=function(t,n,r){return new e(n,new Mp(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Xd(this.o_.O_.S(),this.firestore,this.o_.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(fp("DocumentReference.collection","path",t),!t)throw new jo(Mo.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Bo.k(t);return new Xd(this.o_.O_.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof hp&&(t=t.o_),t instanceof Mp&&(n=t,((e=this.o_)instanceof Mp||e instanceof Up)&&(n instanceof Mp||n instanceof Up)&&e.firestore===n.firestore&&e.path===n.path&&e.x_===n.x_);var e,n},e.prototype.set=function(t,e){e=lp("DocumentReference.set",e);try{return function(t,e,n){var r=vp(t.firestore,_d),i=Zd(t.x_,e,n);return Dd(r,Hp(Fp(r),"setDoc",t.C_,i,null!==t.x_,n).L_(t.C_,Yu.Ge()))}(this.o_,t,e)}catch(t){throw Fd(t,"setDoc","DocumentReference.set")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?kd(this.o_,t):kd.apply(void 0,Nt([this.o_,t,e],n))}catch(t){throw Fd(t,"updateDoc","DocumentReference.update")}},e.prototype.delete=function(){return Dd(vp((t=this.o_).firestore,_d),[new ha(t.C_,Yu.Ge())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Lc(r))return r}return{}}(e),i=function(e,n){var r,i,o;return{next:function(e){o.next&&o.next(function(e){return new Bd(t.firestore,new Td(t.firestore.o_,t.D_,e.C_,e.N_,e.metadata,t.o_.x_))}(e))},error:null===(r=(o=Lc(e[0])?e[0]:Lc(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===r?void 0:r.bind(o),complete:null===(i=o.complete)||void 0===i?void 0:i.bind(o)}}(e);return function(t){for(var e,n,r,i=this,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];var u={includeMetadataChanges:!1},a=0;"object"!=typeof o[a]||Lc(o[a])||(u=o[a],a++);var c,h,f,l={includeMetadataChanges:u.includeMetadataChanges};if(Lc(o[a])){var p=o[a];o[a]=null===(e=p.next)||void 0===e?void 0:e.bind(p),o[a+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),o[a+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof Mp)h=vp(t.firestore,_d),f=_a(t.C_.path),c={next:function(e){o[a]&&o[a](Pd(h,t,e))},error:o[a+1],complete:o[a+2]};else{h=vp(t.firestore,_d),f=t.M_;var d=new Od(h);c={next:function(e){o[a]&&o[a](new xd(h,d,t,e))},error:o[a+1],complete:o[a+2]},Hd(t.M_)}var v=Rd(h),y=new cp(c),g=new Ic(f,y,l);return h.yf.fs((function(){return wt(i,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return t=mc,[4,gd(v)];case 1:return[2,t.apply(void 0,[e.sent(),g])]}}))}))})),function(){y.r_(),h.yf.fs((function(){return wt(i,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return t=bc,[4,gd(v)];case 1:return[2,t.apply(void 0,[e.sent(),g])]}}))}))}))}}(this.o_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=vp(t.firestore,_d),r=Rd(n),i=new Od(n),o=new Za;return n.yf.fs((function(){return wt(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return[4,dd(r)];case 1:return[4,bd(e.sent(),t.C_,o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return new Td(n,i,t.C_,e,new qd(e instanceof ya&&e.Je,!0),t.x_)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=vp(t.firestore,_d),r=Rd(n),i=new Za;return n.yf.fs((function(){return wt(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return[4,gd(r)];case 1:return[4,wd(e.sent(),n.yf,t.C_,{source:"server"},i)];case 2:return e.sent(),[2]}}))}))})),i.promise.then((function(e){return Pd(n,t,e)}))}(this.o_):function(t){var e=this,n=vp(t.firestore,_d),r=Rd(n),i=new Za;return n.yf.fs((function(){return wt(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return[4,gd(r)];case 1:return[4,wd(e.sent(),n.yf,t.C_,{source:"default"},i)];case 2:return e.sent(),[2]}}))}))})),i.promise.then((function(e){return Pd(n,t,e)}))}(this.o_)).then((function(t){return new Bd(e.firestore,new Td(e.firestore.o_,e.D_,t.C_,t.N_,t.metadata,e.o_.x_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(hp);function Fd(t,e,n){return t.message=t.message.replace(e+"()",n+"()"),t}var qd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Bd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return mt(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ud(this.S_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return Sd(this.o_,t.o_)},e}(hp),zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(Bd);function Gd(t,e,n){if(n instanceof hp&&(n=n.o_),"string"==typeof n){if(""===n)throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!xa(e)&&-1!==n.indexOf("/"))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Bo.k(n));if(!Ko.G(r))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Qs(t,new Ko(r))}if(n instanceof Mp)return Qs(t,n.C_);throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+dp(n)+".")}function Kd(t,e){if(!Array.isArray(t)||0===t.length)throw new jo(Mo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new jo(Mo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function $d(t,e,n){if(!n.isEqual(e))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Hd(t){if(Ia(t)&&0===t.rn.length)throw new jo(Mo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qd=function(){function t(t,e,n){this.M_=t,this.firestore=e,this.x_=n,this.Lf=Fp(e.o_),this.D_=new Pp(e)}return t.prototype.where=function(e,n,r){var i=ed("Query.where",e),o=function(t,e,n,r,i,o,s){var u;if(i.B()){if("array-contains"===o||"array-contains-any"===o)throw new jo(Mo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Kd(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(Gd(r,t,f))}u={arrayValue:{values:a}}}else u=Gd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Kd(s,o),u=Yp(n,"Query.where",s,"in"===o||"not-in"===o);var l=Ma.create(i,o,u);return function(t,e){if(e.cn()){var n=Na(t);if(null!==n&&!n.isEqual(e.field))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ta(t);null!==r&&$d(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new jo(Mo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new jo(Mo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(this.M_,0,this.Lf,this.firestore.v_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new ba(t.path,t.collectionGroup,t.rn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(this.M_,o),this.firestore,this.x_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new jo(Mo.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=ed("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ya(e,n);return function(t,e){if(null===Ta(t)){var n=Na(t);null!==n&&$d(0,n,e.field)}}(t,r),r}(this.M_,i,r);return new t(function(t,e){var n=t.rn.concat([e]);return new ba(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(this.M_,o),this.firestore,this.x_)},t.prototype.limit=function(e){return yp("Query.limit",e),new t(Oa(this.M_,e,"F"),this.firestore,this.x_)},t.prototype.limitToLast=function(e){return yp("Query.limitToLast",e),new t(Oa(this.M_,e,"L"),this.firestore,this.x_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.startAt",e,n,!0);return new t(ka(this.M_,i),this.firestore,this.x_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.startAfter",e,n,!1);return new t(ka(this.M_,i),this.firestore,this.x_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.endBefore",e,n,!0);return new t(Da(this.M_,i),this.firestore,this.x_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.endAt",e,n,!1);return new t(Da(this.M_,i),this.firestore,this.x_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&Pa(this.M_,e.M_)&&this.x_===e.x_},t.prototype.withConverter=function(e){return new t(this.M_,this.firestore,e)},t.prototype.Bf=function(t,e,n,r){if(e instanceof Bd)return function(t,e,n,r,i){if(!r)throw new jo(Mo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Aa(t);s<u.length;s++){var a=u[s];if(a.field.B())o.push(Qs(e,r.key));else{var c=r.field(a.field);if(Ls(c))throw new jo(Mo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.M();throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new $a(o,i)}(this.M_,this.firestore.v_,t,e.o_.N_,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.rn;if(i.length>s.length)throw new jo(Mo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.B()){if("string"!=typeof c)throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!xa(t)&&-1!==c.indexOf("/"))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Bo.k(c));if(!Ko.G(h))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Ko(h);u.push(Qs(e,f))}else{var l=Yp(n,r,c);u.push(l)}}return new $a(u,o)}(this.M_,this.firestore.v_,this.Lf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={},u=0;if("object"!=typeof i[u]||Lc(i[u])||(s=i[u],u++),Lc(i[u])){var a=i[u];i[u]=null===(t=a.next)||void 0===t?void 0:t.bind(a),i[u+1]=null===(e=a.error)||void 0===e?void 0:e.bind(a),i[u+2]=null===(n=a.complete)||void 0===n?void 0:n.bind(a)}var c={next:function(t){i[u]&&i[u](new Yd(r.firestore,new xd(r.firestore.o_,r.D_,new jp(r.firestore.o_,r.x_,r.M_),t)))},error:i[u+1],complete:i[u+2]};return Hd(this.M_),function(t,e,n,r){var i=this,o=new cp(r),s=new Ic(e,o,n);return t.rs.fs((function(){return wt(i,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=mc,[4,gd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.r_(),t.rs.fs((function(){return wt(i,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=bc,[4,gd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Rd(this.firestore.o_),this.M_,s,c)},t.prototype.get=function(t){var e=this;Hd(this.M_);var n=Rd(this.firestore.o_);return(t&&"cache"===t.source?function(t,e){var n=this,r=new Za;return t.rs.fs((function(){return wt(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s,u,a;return _t(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,df(t,e,!0)];case 1:return r=c.sent(),i=new hl(e,r.Xa),o=i.gh(r.documents),s=i.bi(o,!1),n.resolve(s.snapshot),[3,3];case 2:return u=c.sent(),a=vc(u,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,dd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,this.M_):function(t,e,n){var r=this;void 0===n&&(n={});var i=new Za;return t.rs.fs((function(){return wt(r,void 0,void 0,(function(){var r;return _t(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new cp({next:function(n){e.fs((function(){return bc(t,s)})),n.fromCache&&"server"===r.source?i.reject(new jo(Mo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ic(n,o,{includeMetadataChanges:!0,Hs:!0});return mc(t,s)},[4,gd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.rs,e,n,i])]}}))}))})),i.promise}(n,this.M_,t)).then((function(t){return new Yd(e.firestore,new xd(e.firestore.o_,e.D_,new jp(e.firestore.o_,e.x_,e.M_),t))}))},t}(),Wd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return mt(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new zd(this.S_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),e}(hp),Yd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return mt(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Qd(this.o_.query.M_,this.S_,this.o_.query.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map((function(e){return new zd(t.S_,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map((function(t){return new Wd(e.S_,t)}))},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach((function(r){t.call(e,new zd(n.S_,r))}))},e.prototype.isEqual=function(t){return Sd(this.o_,t.o_)},e}(hp),Xd=function(t){function e(e,n,r){var i=this;if((i=t.call(this,_a(e),n,r)||this).O_=e,e.length%2!=1)throw new jo(Mo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.M()+" has "+e.length);return i}return mt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.M_.path.S();return t.T()?null:Ud.xf(t,this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=Oo.u()),fp("CollectionReference.doc","path",t);var e=Bo.k(t);return Ud.xf(this.M_.path.child(e),this.firestore,this.x_)},e.prototype.add=function(t){var e=this.x_?this.x_.toFirestore(t):t,n=this.doc();return Ud.b_(n.o_.C_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.O_,this.firestore,t)},e}(Qd);function Jd(t,e,n){var r=vp(e,Mp);if(r.firestore!==n.o_)throw new jo(Mo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Zd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tv,ev=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Vp.bind.apply(Vp,Nt([void 0],e))))||this}return mt(e,t),e.documentId=function(){return new e(Go.q().M())},e.prototype.isEqual=function(t){return t instanceof hp&&(t=t.o_),t instanceof Vp&&this.o_.F_.isEqual(t.F_)},e}(hp),nv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.serverTimestamp=function(){var t=new wp("serverTimestamp");return t.a_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new mp("deleteField");return t.a_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _p("arrayUnion",t)}.apply(void 0,t);return r.a_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ep("arrayRemove",t)}.apply(void 0,t);return r.a_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Ip("increment",t)}(t);return n.a_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(hp),rv={Firestore:Ld,GeoPoint:Tp,Timestamp:Uo,Blob:kp,Transaction:Md,WriteBatch:jd,DocumentReference:Ud,DocumentSnapshot:Bd,Query:Qd,QueryDocumentSnapshot:zd,QuerySnapshot:Yd,CollectionReference:Xd,FieldPath:ev,FieldValue:nv,setLogLevel:function(t){var e;e=t,bo.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(function(t,e){t.INTERNAL.registerComponent(new jt("firestore",(function(t){return function(t,e){return new Ld(t,new _d(t,e),new Cd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},rv)))})(tv=le),tv.registerVersion("@firebase/firestore","2.0.2");le.initializeApp({projectId:"sample-project-294713"});const iv=function(){const t=window.location.search;let e;if(t)e=t.substring(1);else{const t=yt();window.location.hash=t,window.history.replaceState("","","?"+t),e=t}return e}(),ov=le.firestore().collection("rooms").doc(iv),sv=function(){const{subscribe:t,set:e}=at([]);return{subscribe:t,set:e,append:(t,e)=>{ov.get().then((n=>{let r=[],i={closed:!0};if(n&&n.exists){const e=n.data();r=[...e.estimates.filter((e=>e.name!==t))],i=e.tableState}r.push({name:t,point:e,appendedAt:le.firestore.Timestamp.now()}),ov.set({estimates:r,tableState:i})}))},remove:(t,e=null)=>{ov.get().then((n=>{if(n&&n.exists){const r=n.data();r.estimates=r.estimates.filter((e=>e.name!==t)),ov.set(r).then(e)}else e()}))},clear:()=>{ov.delete()}}}(),uv=function(){const{subscribe:t,set:e,update:n}=at({closed:!0});return{subscribe:t,set:e,open:()=>{ov.get().then((t=>{if(t&&t.exists){const e=t.data();e.tableState={closed:!1},ov.set(e)}}))},close:()=>{ov.delete()}}}(),av=new Promise((t=>{ov.onSnapshot((t=>{if(t&&t.exists){const e=t.data(),n=(t,e)=>t.appendedAt.seconds-e.appendedAt.seconds;sv.set(e.estimates.sort(n)),uv.set(e.tableState)}else sv.set([]),uv.set({closed:!0})})),t()}));function cv(e){let n,r,i,o,s=(e[2]?"":e[0])+"";return{c(){n=y("div"),r=g(s),w(n,"class","card svelte-tq9sw8"),E(n,"closed",e[2]),E(n,"selected",e[1])},m(t,s){d(t,n,s),p(n,r),i||(o=b(n,"click",e[3]),i=!0)},p(t,[e]){5&e&&s!==(s=(t[2]?"":t[0])+"")&&_(r,s),4&e&&E(n,"closed",t[2]),2&e&&E(n,"selected",t[1])},i:t,o:t,d(t){t&&v(n),i=!1,o()}}}function hv(t,e,n){let{point:r}=e,{selected:i=!1}=e,{closed:o=!1}=e;const s=function(){const t=k();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=I(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}();return t.$$set=t=>{"point"in t&&n(0,r=t.point),"selected"in t&&n(1,i=t.selected),"closed"in t&&n(2,o=t.closed)},[r,i,o,function(){s("selectCard",{point:r})}]}class fv extends it{constructor(t){super(),rt(this,t,hv,cv,s,{point:0,selected:1,closed:2})}}function lv(t,e,n){const r=t.slice();return r[5]=e[n],r}function pv(t,e){let n,r,i,o,s,u,a,c,h=e[5].name+"";return r=new fv({props:{point:e[5].point,closed:e[0].closed}}),{key:t,first:null,c(){n=y("div"),Z(r.$$.fragment),i=m(),o=y("div"),s=g(h),u=m(),w(o,"class","name svelte-1nfxwa2"),w(n,"class","estimate svelte-1nfxwa2"),this.first=n},m(t,e){d(t,n,e),tt(r,n,null),p(n,i),p(n,o),p(o,s),p(n,u),c=!0},p(t,e){const n={};2&e&&(n.point=t[5].point),1&e&&(n.closed=t[0].closed),r.$set(n),(!c||2&e)&&h!==(h=t[5].name+"")&&_(s,h)},i(t){c||(Q(r.$$.fragment,t),M((()=>{a||(a=X(n,st,{y:100},!0)),a.run(1)})),c=!0)},o(t){W(r.$$.fragment,t),a||(a=X(n,st,{y:100},!1)),a.run(0),c=!1},d(t){t&&v(n),et(r),t&&a&&a.end()}}}function dv(t){let e,n,r,i,o=t[0].closed?"open":"return";return{c(){e=y("div"),n=g(o),w(e,"class","open-button svelte-1nfxwa2")},m(o,s){d(o,e,s),p(e,n),r||(i=b(e,"click",t[2]),r=!0)},p(t,e){1&e&&o!==(o=t[0].closed?"open":"return")&&_(n,o)},d(t){t&&v(e),r=!1,i()}}}function vv(e){let n,r,i;return{c(){n=y("div"),n.textContent="Copy",w(n,"class","copy-button svelte-1nfxwa2")},m(t,o){d(t,n,o),r||(i=b(n,"click",e[3]),r=!0)},p:t,d(t){t&&v(n),r=!1,i()}}}function yv(t){let e,n,r,i,o,s=[],u=new Map,a=t[1];const c=t=>t[5].name;for(let e=0;e<a.length;e+=1){let n=lv(t,a,e),r=c(n);u.set(r,s[e]=pv(r,n))}let h=(t[1].length>0||!t[0].closed)&&dv(t),f=!t[0].closed&&vv(t);return{c(){e=y("div"),n=y("div");for(let t=0;t<s.length;t+=1)s[t].c();r=m(),h&&h.c(),i=m(),f&&f.c(),w(n,"class","estimates svelte-1nfxwa2"),w(e,"class","table svelte-1nfxwa2")},m(t,u){d(t,e,u),p(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);p(e,r),h&&h.m(e,null),p(e,i),f&&f.m(e,null),o=!0},p(t,[r]){if(3&r){const e=t[1];$(),s=function(t,e,n,r,i,o,s,u,a,c,h,f){let l=t.length,p=o.length,d=l;const v={};for(;d--;)v[t[d].key]=d;const y=[],g=new Map,m=new Map;for(d=p;d--;){const t=f(i,o,d),u=n(t);let a=s.get(u);a?r&&a.p(t,e):(a=c(u,t),a.c()),g.set(u,y[d]=a),u in v&&m.set(u,Math.abs(d-v[u]))}const b=new Set,w=new Set;function _(t){Q(t,1),t.m(u,h),s.set(t.key,t),h=t.first,p--}for(;l&&p;){const e=y[p-1],n=t[l-1],r=e.key,i=n.key;e===n?(h=e.first,l--,p--):g.has(i)?!s.has(r)||b.has(r)?_(e):w.has(i)?l--:m.get(r)>m.get(i)?(w.add(r),_(e)):(b.add(i),l--):(a(n,s),l--)}for(;l--;){const e=t[l];g.has(e.key)||a(e,s)}for(;p;)_(y[p-1]);return y}(s,r,c,1,t,e,u,n,J,pv,null,lv),H()}t[1].length>0||!t[0].closed?h?h.p(t,r):(h=dv(t),h.c(),h.m(e,i)):h&&(h.d(1),h=null),t[0].closed?f&&(f.d(1),f=null):f?f.p(t,r):(f=vv(t),f.c(),f.m(e,null))},i(t){if(!o){for(let t=0;t<a.length;t+=1)Q(s[t]);o=!0}},o(t){for(let t=0;t<s.length;t+=1)W(s[t]);o=!1},d(t){t&&v(e);for(let t=0;t<s.length;t+=1)s[t].d();h&&h.d(),f&&f.d()}}}function gv(t,e,n){let r,i;return u(t,uv,(t=>n(0,r=t))),u(t,sv,(t=>n(1,i=t))),[r,i,function(t){r.closed?i.length>0&&uv.open():(sv.clear(),uv.close())},function(t){const e=function(){if(0===i.length)return"empty.";const t=new Date;return"["+t.toLocaleDateString()+" "+t.toLocaleTimeString()+"] "+i.sort(((t,e)=>t.name>e.name?1:-1)).reduce(((t,e)=>(t?t+" ":"")+`${e.name}(${e.point})`),null)}();navigator.clipboard.writeText(e)}]}class mv extends it{constructor(t){super(),rt(this,t,gv,yv,s,{})}}function bv(t,e,n){const r=t.slice();return r[5]=e[n],r}function wv(t){let e,n;return e=new fv({props:{point:t[5],selected:t[1]===t[5]}}),e.$on("selectCard",t[3]),{c(){Z(e.$$.fragment)},m(t,r){tt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.selected=t[1]===t[5]),e.$set(r)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function _v(t){let e,n,r,i,o,s=t[2],u=[];for(let e=0;e<s.length;e+=1)u[e]=wv(bv(t,s,e));const a=t=>W(u[t],1,1,(()=>{u[t]=null}));return{c(){e=y("div"),n=y("div"),r=g(t[0]),i=m();for(let t=0;t<u.length;t+=1)u[t].c();w(n,"class","user-name svelte-4f78du"),w(e,"class","svelte-4f78du")},m(t,s){d(t,e,s),p(e,n),p(n,r),p(e,i);for(let t=0;t<u.length;t+=1)u[t].m(e,null);o=!0},p(t,[n]){if((!o||1&n)&&_(r,t[0]),14&n){let r;for(s=t[2],r=0;r<s.length;r+=1){const i=bv(t,s,r);u[r]?(u[r].p(i,n),Q(u[r],1)):(u[r]=wv(i),u[r].c(),Q(u[r],1),u[r].m(e,null))}for($(),r=s.length;r<u.length;r+=1)a(r);H()}},i(t){if(!o){for(let t=0;t<s.length;t+=1)Q(u[t]);o=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)W(u[t]);o=!1},d(t){t&&v(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(u,t)}}}function Ev(t,e,n){let r;u(t,sv,(t=>n(4,r=t)));let i,o;for(;!(i=window.prompt("your name")););return t.$$.update=()=>{17&t.$$.dirty&&n(1,o=r.filter((t=>t.name===i)).map((t=>t.point)).pop())},[i,o,["0","1","2","3","5","8","13","21","34","55","?",""],function(t){const e=()=>sv.append(i,t.detail.point);o?sv.remove(i,o===t.detail.point?null:()=>setTimeout(e,300)):e()}]}class Iv extends it{constructor(t){super(),rt(this,t,Ev,_v,s,{})}}function Tv(e){return{c:t,m:t,i:t,o:t,d:t}}function Nv(t){let e,n,r,i,o,s,u,a;return o=new mv({}),u=new Iv({}),{c(){e=y("h1"),e.textContent="Planning Poker",n=m(),r=y("p"),r.textContent="share the URL of this page with your team members.",i=m(),Z(o.$$.fragment),s=m(),Z(u.$$.fragment),w(e,"class","svelte-a6ziq3"),w(r,"class","svelte-a6ziq3")},m(t,c){d(t,e,c),d(t,n,c),d(t,r,c),d(t,i,c),tt(o,t,c),d(t,s,c),tt(u,t,c),a=!0},i(t){a||(Q(o.$$.fragment,t),Q(u.$$.fragment,t),a=!0)},o(t){W(o.$$.fragment,t),W(u.$$.fragment,t),a=!1},d(t){t&&v(e),t&&v(n),t&&v(r),t&&v(i),et(o,t),t&&v(s),et(u,t)}}}function xv(e){let n;return{c(){n=y("p"),n.textContent="...waiting",w(n,"class","svelte-a6ziq3")},m(t,e){d(t,n,e)},i:t,o:t,d(t){t&&v(n)}}}function Av(t){let e,n,r,i,o,s;document.title=e=t[0];let u={ctx:t,current:null,token:null,hasCatch:!1,pending:xv,then:Nv,catch:Tv,blocks:[,,,]};return function(t,e){const n=e.token={};function r(t,r,i,o){if(e.token!==n)return;e.resolved=o;let s=e.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const u=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&($(),W(t,1,1,(()=>{e.blocks[n]=null})),H())})):e.block.d(1),u.c(),Q(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&F()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=k();if(t.then((t=>{O(n),r(e.then,1,e.value,t),O(null)}),(t=>{if(O(n),r(e.catch,2,e.error,t),O(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var i}(o=av,u),{c(){n=y("link"),r=m(),i=y("main"),u.block.c(),w(n,"href","https://fonts.googleapis.com/css?family=M+PLUS+1p"),w(n,"rel","stylesheet"),w(i,"class","svelte-a6ziq3")},m(t,e){p(document.head,n),d(t,r,e),d(t,i,e),u.block.m(i,u.anchor=null),u.mount=()=>i,u.anchor=null,s=!0},p(n,[r]){t=n,(!s||1&r)&&e!==(e=t[0])&&(document.title=e)},i(t){s||(Q(u.block),s=!0)},o(t){for(let t=0;t<3;t+=1){W(u.blocks[t])}s=!1},d(t){v(n),t&&v(r),t&&v(i),u.block.d(),u.token=null,u=null}}}function Sv(t,e,n){let{name:r}=e;return t.$$set=t=>{"name"in t&&n(0,r=t.name)},[r]}return new class extends it{constructor(t){super(),rt(this,t,Sv,Av,s,{name:0})}}({target:document.body,props:{name:"Planning Poker"}})}();
//# sourceMappingURL=bundle.js.map
