var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function s(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function c(t,e,r,i){return t[1]&&i?n(r.ctx.slice(),t[1](i(e))):r.ctx}function f(t,e,n,r,i,o,s){const u=function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(e,r,i,o);if(u){const i=c(e,n,r,s);t.p(i,u)}}function h(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function l(t){return null==t?"":t}const p="undefined"!=typeof window;let d=p?()=>window.performance.now():()=>Date.now(),v=p?t=>requestAnimationFrame(t):t;const y=new Set;function g(t){y.forEach((e=>{e.c(t)||(y.delete(e),e.f())})),0!==y.size&&v(g)}function m(t,e){t.appendChild(e)}function b(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function _(t){return document.createElement(t)}function I(t){return document.createTextNode(t)}function E(){return I(" ")}function T(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function N(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}function k(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function D(t,e,n){t.classList[n?"add":"remove"](e)}function O(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const C=new Set;let P,L=0;function R(t,e,n,r,i,o,s,u=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const f=c+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(f)}_${u}`,l=t.ownerDocument;C.add(l);const p=l.__svelte_stylesheet||(l.__svelte_stylesheet=l.head.appendChild(_("style")).sheet),d=l.__svelte_rules||(l.__svelte_rules={});d[h]||(d[h]=!0,p.insertRule(`@keyframes ${h} ${f}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?v+", ":""}${h} ${r}ms linear ${i}ms 1 both`,L+=1,h}function V(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),L-=i,L||v((()=>{L||(C.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),C.clear())})))}function M(t){P=t}function U(){if(!P)throw new Error("Function called outside component initialization");return P}const j=[],F=[],q=[],z=[],H=Promise.resolve();let $=!1;function G(t){q.push(t)}let B=!1;const K=new Set;function J(){if(!B){B=!0;do{for(let t=0;t<j.length;t+=1){const e=j[t];M(e),W(e.$$)}for(M(null),j.length=0;F.length;)F.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];K.has(e)||(K.add(e),e())}q.length=0}while(j.length);for(;z.length;)z.pop()();$=!1,B=!1,K.clear()}}function W(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(G)}}let X;function Y(t,e,n){t.dispatchEvent(O(`${e?"intro":"outro"}${n}`))}const Q=new Set;let Z;function tt(){Z={r:0,c:[],p:Z}}function et(){Z.r||o(Z.c),Z=Z.p}function nt(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function rt(t,e,n,r){if(t&&t.o){if(Q.has(t))return;Q.add(t),Z.c.push((()=>{Q.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const it={duration:0};function ot(n,r,i,u){let a=r(n,i),c=u?0:1,f=null,h=null,l=null;function p(){l&&V(n,l)}function m(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(r){const{delay:i=0,duration:s=300,easing:u=e,tick:b=t,css:w}=a||it,_={start:d()+i,b:r};r||(_.group=Z,Z.r+=1),f||h?h=_:(w&&(p(),l=R(n,c,r,s,i,u,w)),r&&b(0,1),f=m(_,s),G((()=>Y(n,r,"start"))),function(t){let e;0===y.size&&v(g),new Promise((n=>{y.add(e={c:t,f:n})}))}((t=>{if(h&&t>h.start&&(f=m(h,s),h=null,Y(n,f.b,"start"),w&&(p(),l=R(n,c,f.b,f.duration,0,u,a.css))),f)if(t>=f.end)b(c=f.b,1-c),Y(n,f.b,"end"),h||(f.b?p():--f.group.r||o(f.group.c)),f=null;else if(t>=f.start){const e=t-f.start;c=f.a+f.d*u(e/f.duration),b(c,1-c)}return!(!f&&!h)})))}return{run(t){s(a)?(X||(X=Promise.resolve(),X.then((()=>{X=null}))),X).then((()=>{a=a(),b(t)})):b(t)},end(){p(),f=h=null}}}const st="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ut(t,e){rt(t,1,1,(()=>{e.delete(t.key)}))}function at(t){t&&t.c()}function ct(t,e,n){const{fragment:i,on_mount:u,on_destroy:a,after_update:c}=t.$$;i&&i.m(e,n),G((()=>{const e=u.map(r).filter(s);a?a.push(...e):o(e),t.$$.on_mount=[]})),c.forEach(G)}function ft(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(t,e){-1===t.$$.dirty[0]&&(j.push(t),$||($=!0,H.then(J)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function lt(e,n,r,s,u,a,c=[-1]){const f=P;M(e);const h=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:u,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:i(),dirty:c,skip_bound:!1};let l=!1;if(h.ctx=r?r(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&u(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),l&&ht(e,t)),n})):[],h.update(),l=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(w)}else h.fragment&&h.fragment.c();n.intro&&nt(e.$$.fragment),ct(e,n.target,n.anchor),J()}M(f)}class pt{$destroy(){ft(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function dt(t){const e=t-1;return e*e*e+1}function vt(t,{delay:e=0,duration:n=400,easing:r=dt,x:i=0,y:o=0,opacity:s=0}={}){const u=getComputedStyle(t),a=+u.opacity,c="none"===u.transform?"":u.transform,f=a*(1-s);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${a-f*e}`}}const yt=[];function gt(e,n=t){let r;const i=[];function o(t){if(u(e,t)&&(e=t,r)){const t=!yt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),yt.push(n,e)}if(t){for(let t=0;t<yt.length;t+=2)yt[t][0](yt[t+1]);yt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,u=t){const a=[s,u];return i.push(a),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(a);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}var mt,bt=new Uint8Array(16);function wt(){if(!mt&&!(mt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mt(bt)}var _t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function It(t){return"string"==typeof t&&_t.test(t)}for(var Et=[],Tt=0;Tt<256;++Tt)Et.push((Tt+256).toString(16).substr(1));function Nt(t,e,n){var r=(t=t||{}).random||(t.rng||wt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Et[t[e+0]]+Et[t[e+1]]+Et[t[e+2]]+Et[t[e+3]]+"-"+Et[t[e+4]]+Et[t[e+5]]+"-"+Et[t[e+6]]+Et[t[e+7]]+"-"+Et[t[e+8]]+Et[t[e+9]]+"-"+Et[t[e+10]]+Et[t[e+11]]+Et[t[e+12]]+Et[t[e+13]]+Et[t[e+14]]+Et[t[e+15]]).toLowerCase();if(!It(n))throw TypeError("Stringified UUID is invalid");return n}(r)}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var St=function(t,e){return(St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function At(t,e){function n(){this.constructor=t}St(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var xt=function(){return(xt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function kt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function Dt(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function Ot(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ct(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Pt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ct(arguments[e]));return t}function Lt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Rt(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Vt=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ut(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var jt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Ft.prototype.create),o}return At(e,t),e}(Error),Ft=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?qt(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new jt(i,u,r);return a},t}();function qt(t,e){return t.replace(zt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var zt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ht(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $t(t,e){var n=new Gt(t,e);return n.subscribe.bind(n)}var Gt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Bt),void 0===r.error&&(r.error=Bt),void 0===r.complete&&(r.complete=Bt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Bt(){}var Kt=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),Jt="[DEFAULT]",Wt=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=Jt);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Vt;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=xt({identifier:Jt,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService(Jt)}catch(t){}try{for(var r=Ot(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Ct(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Jt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return kt(this,void 0,void 0,(function(){var t;return Dt(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Pt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===Jt?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Jt:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Xt,Yt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Wt(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Qt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zt,te=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Zt||(Zt={}));var ee,ne={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},re=Zt.INFO,ie=((Xt={})[Zt.DEBUG]="log",Xt[Zt.VERBOSE]="log",Xt[Zt.INFO]="info",Xt[Zt.WARN]="warn",Xt[Zt.ERROR]="error",Xt),oe=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ie[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Qt(["["+i+"]  "+t.name+":"],n))}},se=function(){function t(t){this.name=t,this._logLevel=re,this._logHandler=oe,this._userLogHandler=null,te.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Zt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ne[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qt([this,Zt.DEBUG],t)),this._logHandler.apply(this,Qt([this,Zt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qt([this,Zt.VERBOSE],t)),this._logHandler.apply(this,Qt([this,Zt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qt([this,Zt.INFO],t)),this._logHandler.apply(this,Qt([this,Zt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qt([this,Zt.WARN],t)),this._logHandler.apply(this,Qt([this,Zt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qt([this,Zt.ERROR],t)),this._logHandler.apply(this,Qt([this,Zt.ERROR],t))},t}();function ue(t){te.forEach((function(e){e.setLogLevel(t)}))}var ae,ce=((ee={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ee["bad-app-name"]="Illegal App name: '{$appName}",ee["duplicate-app"]="Firebase App named '{$appName}' already exists",ee["app-deleted"]="Firebase App named '{$appName}' already deleted",ee["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ee["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ee),fe=new Ft("app","Firebase",ce),he="@firebase/app",le="[DEFAULT]",pe=((ae={})[he]="fire-core",ae["@firebase/analytics"]="fire-analytics",ae["@firebase/auth"]="fire-auth",ae["@firebase/database"]="fire-rtdb",ae["@firebase/functions"]="fire-fn",ae["@firebase/installations"]="fire-iid",ae["@firebase/messaging"]="fire-fcm",ae["@firebase/performance"]="fire-perf",ae["@firebase/remote-config"]="fire-rc",ae["@firebase/storage"]="fire-gcs",ae["@firebase/firestore"]="fire-fst",ae["fire-js"]="fire-js",ae["firebase-wrapper"]="fire-js-all",ae),de=new se("@firebase/app"),ve=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Rt(void 0,t),this.container=new Yt(e.name),this._addComponent(new Kt("app",(function(){return o}),"PUBLIC"));try{for(var s=Ot(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=le),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=le),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){de.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw fe.create("app-deleted",{appName:this.name_})},t}();ve.prototype.name&&ve.prototype.options||ve.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ye(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=le);var s=o.name;if("string"!=typeof s||!s)throw fe.create("bad-app-name",{appName:String(s)});if(Ht(e,s))throw fe.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=pe[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void de.warn(a.join(" "))}o(new Kt(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:ue,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw fe.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ne[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Zt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=te;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.2.5",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Ht(e,t=t||le))throw fe.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return de.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw fe.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Rt(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var f=Ot(Object.keys(e)),h=f.next();!h.done;h=f.next()){var l=h.value;e[l]._addComponent(o)}}catch(t){s={error:t}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ge=function t(){var e=ye(ve);return e.INTERNAL=xt(xt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Rt(e,t)},createSubscribe:$t,ErrorFactory:Ft,deepExtend:Rt}),e}(),me=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var be=self.firebase.SDK_VERSION;be&&be.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var we=ge.initializeApp;ge.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ut()&&de.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),we.apply(void 0,t)};var _e=ge;!function(t,e){t.INTERNAL.registerComponent(new Kt("platform-logger",(function(t){return new me(t)}),"PRIVATE")),t.registerVersion(he,"0.6.14",e),t.registerVersion("fire-js","")}(_e);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
_e.registerVersion("firebase","8.2.5","app");
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var Ie=function(t,e){return(Ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ee(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Te,Ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Se=Se||{},Ae=Ne||self;function xe(){}function ke(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function De(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Oe="closure_uid_"+(1e9*Math.random()>>>0),Ce=0;function Pe(t,e,n){return t.call.apply(t.bind,arguments)}function Le(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Re(t,e,n){return(Re=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pe:Le).apply(null,arguments)}function Ve(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Me(){return Date.now()}function Ue(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function je(){this.j=this.j,this.i=this.i}je.prototype.j=!1,je.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Oe)&&t[Oe]||(t[Oe]=++Ce))},je.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Fe=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},qe=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ze(t){return Array.prototype.concat.apply([],arguments)}function He(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function $e(t){return/^[\s\xa0]*$/.test(t)}var Ge,Be=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ke(t,e){return-1!=t.indexOf(e)}function Je(t,e){return t<e?-1:t>e?1:0}t:{var We=Ae.navigator;if(We){var Xe=We.userAgent;if(Xe){Ge=Xe;break t}}Ge=""}function Ye(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Qe(t){var e={};for(var n in t)e[n]=t[n];return e}var Ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tn(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ze.length;o++)n=Ze[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function en(t){return en[" "](t),t}en[" "]=xe;var nn,rn,on=Ke(Ge,"Opera"),sn=Ke(Ge,"Trident")||Ke(Ge,"MSIE"),un=Ke(Ge,"Edge"),an=un||sn,cn=Ke(Ge,"Gecko")&&!(Ke(Ge.toLowerCase(),"webkit")&&!Ke(Ge,"Edge"))&&!(Ke(Ge,"Trident")||Ke(Ge,"MSIE"))&&!Ke(Ge,"Edge"),fn=Ke(Ge.toLowerCase(),"webkit")&&!Ke(Ge,"Edge");function hn(){var t=Ae.document;return t?t.documentMode:void 0}t:{var ln="",pn=(rn=Ge,cn?/rv:([^\);]+)(\)|;)/.exec(rn):un?/Edge\/([\d\.]+)/.exec(rn):sn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(rn):fn?/WebKit\/(\S+)/.exec(rn):on?/(?:Version)[ \/]?(\S+)/.exec(rn):void 0);if(pn&&(ln=pn?pn[1]:""),sn){var dn=hn();if(null!=dn&&dn>parseFloat(ln)){nn=String(dn);break t}}nn=ln}var vn,yn={};function gn(t){return function(t,e){var n=yn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Be(String(nn)).split("."),r=Be(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=Je(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Je(0==s[2].length,0==u[2].length)||Je(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(Ae.document&&sn){var mn=hn();vn=mn||(parseInt(nn,10)||void 0)}else vn=void 0;var bn=vn,wn=!sn||9<=Number(bn),_n=sn&&!gn("9"),In=function(){if(!Ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ae.addEventListener("test",xe,e),Ae.removeEventListener("test",xe,e)}catch(t){}return t}();function En(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Tn(t,e){if(En.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(cn){t:{try{en(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Nn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}En.prototype.b=function(){this.defaultPrevented=!0},Ue(Tn,En);var Nn={2:"touch",3:"pen",4:"mouse"};Tn.prototype.b=function(){Tn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,_n)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Sn="closure_listenable_"+(1e6*Math.random()|0),An=0;function xn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++An,this.Y=this.Z=!1}function kn(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Dn(t){this.src=t,this.a={},this.b=0}function On(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Fe(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(kn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Dn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Cn(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new xn(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Pn="closure_lm_"+(1e6*Math.random()|0),Ln={};function Rn(t,e,n,r,i){if(r&&r.once)return Mn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Rn(t,e[o],n,r,i);return null}return n=Gn(n),t&&t[Sn]?t.va(e,n,De(r)?!!r.capture:!!r,i):Vn(t,e,n,!1,r,i)}function Vn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=De(i)?!!i.capture:!!i;if(s&&!wn)return null;var u=Hn(t);if(u||(t[Pn]=u=new Dn(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=zn,e=wn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)In||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Mn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mn(t,e[o],n,r,i);return null}return n=Gn(n),t&&t[Sn]?t.wa(e,n,De(r)?!!r.capture:!!r,i):Vn(t,e,n,!0,r,i)}function Un(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Un(t,e[o],n,r,i);else r=De(r)?!!r.capture:!!r,n=Gn(n),t&&t[Sn]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=Cn(o=t.a[e],n,r,i))&&(kn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Hn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Cn(e,n,r,i)),(n=-1<t?e[t]:null)&&jn(n))}function jn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Sn])On(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Hn(e))?(On(n,t),0==n.b&&(n.src=null,e[Pn]=null)):kn(t)}}}function Fn(t){return t in Ln?Ln[t]:Ln[t]="on"+t}function qn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&jn(t),n.call(r,e)}function zn(t,e){if(t.Y)return!0;if(!wn){if(!e)t:{e=["window","event"];for(var n=Ae,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return qn(t,e=new Tn(e,this))}return qn(t,new Tn(e,this))}function Hn(t){return(t=t[Pn])instanceof Dn?t:null}var $n="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gn(t){return"function"==typeof t?t:(t[$n]||(t[$n]=function(e){return t.handleEvent(e)}),t[$n])}function Bn(){je.call(this),this.c=new Dn(this),this.J=this,this.C=null}function Kn(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new En(e,t);else if(e instanceof En)e.target=e.target||t;else{var i=e;tn(e=new En(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Jn(s,r,!0,e)&&i}if(i=Jn(s=e.a=t,r,!0,e)&&i,i=Jn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Jn(s=e.a=n[o],r,!1,e)&&i}function Jn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&On(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}Ue(Bn,je),Bn.prototype[Sn]=!0,(Te=Bn.prototype).addEventListener=function(t,e,n,r){Rn(this,t,e,n,r)},Te.removeEventListener=function(t,e,n,r){Un(this,t,e,n,r)},Te.G=function(){if(Bn.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)kn(n[r]);delete e.a[t],e.b--}}this.C=null},Te.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Te.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Wn=Ae.JSON.stringify;function Xn(){this.b=this.a=null}var Yn,Qn=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new tr}),(function(t){t.reset()}));function Zn(){var t=ir,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function tr(){this.next=this.b=this.a=null}function er(t){Ae.setTimeout((function(){throw t}),0)}function nr(t,e){Yn||function(){var t=Ae.Promise.resolve(void 0);Yn=function(){t.then(or)}}(),rr||(Yn(),rr=!0),ir.add(t,e)}Xn.prototype.add=function(t,e){var n=Qn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},tr.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},tr.prototype.reset=function(){this.next=this.b=this.a=null};var rr=!1,ir=new Xn;function or(){for(var t;t=Zn();){try{t.a.call(t.b)}catch(t){er(t)}var e=Qn;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}rr=!1}function sr(t,e){Bn.call(this),this.b=t||1,this.a=e||Ae,this.f=Re(this.Za,this),this.g=Me()}function ur(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ar(t,e,n){if("function"==typeof t)n&&(t=Re(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Re(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ae.setTimeout(t,e||0)}function cr(t){t.a=ar((function(){t.a=null,t.c&&(t.c=!1,cr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Ue(sr,Bn),(Te=sr.prototype).aa=!1,Te.M=null,Te.Za=function(){if(this.aa){var t=Me()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Kn(this,"tick"),this.aa&&(ur(this),this.start()))}},Te.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Me())},Te.G=function(){sr.X.G.call(this),ur(this),delete this.a};var fr=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ie(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:cr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Ae.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(je);function hr(t){je.call(this),this.b=t,this.a={}}Ue(hr,je);var lr=[];function pr(t,e,n,r){Array.isArray(n)||(n&&(lr[0]=n.toString()),n=lr);for(var i=0;i<n.length;i++){var o=Rn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function dr(t){Ye(t.a,(function(t,e){this.a.hasOwnProperty(e)&&jn(t)}),t),t.a={}}function vr(){this.a=!0}function yr(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Wn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}hr.prototype.G=function(){hr.X.G.call(this),dr(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vr.prototype.info=function(){};var gr={},mr=null;function br(){return mr=mr||new Bn}function wr(t){En.call(this,gr.Fa,t)}function _r(t){var e=br();Kn(e,new wr(e,t))}function Ir(t,e){En.call(this,gr.STAT_EVENT,t),this.stat=e}function Er(t){var e=br();Kn(e,new Ir(e,t))}function Tr(t){En.call(this,gr.Ga,t)}function Nr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ae.setTimeout((function(){t()}),e)}gr.Fa="serverreachability",Ue(wr,En),gr.STAT_EVENT="statevent",Ue(Ir,En),gr.Ga="timingevent",Ue(Tr,En);var Sr={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ar={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function xr(){}function kr(t){var e;return(e=t.a)||(e=t.a={}),e}function Dr(){}xr.prototype.a=null;var Or,Cr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Pr(){En.call(this,"d")}function Lr(){En.call(this,"c")}function Rr(){}function Vr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new hr(this),this.P=Mr,t=an?125:void 0,this.R=new sr(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Ue(Pr,En),Ue(Lr,En),Ue(Rr,xr),Or=new Rr;var Mr=45e3,Ur={},jr={};function Fr(t,e,n){t.H=1,t.i=ai(ni(e)),t.j=n,t.I=!0,qr(t,null)}function qr(t,e){t.u=Me(),$r(t),t.l=ni(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),_i(n.b,"t",r),t.D=0,t.a=yo(t.g,t.g.C?e:null),0<t.O&&(t.F=new fr(Re(t.Ca,t,t.a),t.O)),pr(t.J,t.a,"readystatechange",t.Xa),e=t.B?Qe(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),_r(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var f=c[0];c=c[1];var h=f.split("_");s=2<=h.length&&"type"==h[1]?s+(f+"=")+c+"&":s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function zr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Hr(t,n);if(i==jr){4==e&&(t.h=4,Er(14),r=!1),yr(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ur){t.h=4,Er(15),yr(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}yr(t.c,t.f,i,null),Wr(t,i)}4==e&&0==n.length&&(t.h=1,Er(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),uo(e),e.F=!0,Er(11))):(yr(t.c,t.f,n,"[Invalid Chunked Response]"),Jr(t),Kr(t))}function Hr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?jr:(n=Number(e.substring(n,r)),isNaN(n)?Ur:(r+=1)+n>e.length?jr:(e=e.substr(r,n),t.D=r+n,e))}function $r(t){t.T=Me()+t.P,Gr(t,t.P)}function Gr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Nr(Re(t.Va,t),e)}function Br(t){t.o&&(Ae.clearTimeout(t.o),t.o=null)}function Kr(t){0==t.g.v||t.A||fo(t.g,t)}function Jr(t){Br(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ur(t.R),dr(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Wr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||xi(n.b,t)))if(n.I=t.N,!t.C&&xi(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;co(n),Qi(n)}so(n),Er(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Nr(Re(n.Sa,n),6e3));if(1>=Ai(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else lo(n,11)}else if((t.C||n.a==t)&&co(n),!$e(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var f=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(f){var h=a.b;!h.a&&(Ke(f,"spdy")||Ke(f,"quic")||Ke(f,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ki(h,h.b),h.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,ui(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Me()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=vo(a,a.C?a.ga:null,a.fa),p.C){Di(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(Br(d),$r(d)),a.a=p}else oo(a);0<n.g.length&&eo(n)}else"stop"!=i[0]&&"close"!=i[0]||lo(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?lo(n,7):Yi(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);_r(4)}catch(t){}}function Xr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ke(t)||"string"==typeof t)qe(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ke(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ke(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Yr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Yr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Qr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Zr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Zr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Zr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Te=Vr.prototype).setTimeout=function(t){this.P=t},Te.Xa=function(t){t=t.target;var e=this.F;e&&3==Ki(t)?e.f():this.Ca(t)},Te.Ca=function(t){try{if(t==this.a)t:{var e=Ki(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!an&&!this.a.$())){this.A||4!=e||7==n||_r(8==n||0>=r?3:2),Br(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$e(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,Er(12),Jr(this),Kr(this);break t}yr(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Wr(this,a)}this.I?(zr(this,e,o),an&&this.b&&3==e&&(pr(this.J,this.R,"tick",this.Wa),this.R.start())):(yr(this.c,this.f,o,null),Wr(this,o)),4==e&&Jr(this),this.b&&!this.A&&(4==e?fo(this.g,this):(this.b=!1,$r(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Er(12)):(this.h=0,Er(13)),Jr(this),Kr(this)}}}catch(t){}},Te.Wa=function(){if(this.a){var t=Ki(this.a),e=this.a.$();this.D<e.length&&(Br(this),zr(this,t,e),this.b&&4!=t&&$r(this))}},Te.cancel=function(){this.A=!0,Jr(this)},Te.Va=function(){this.o=null;var t=Me();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(_r(3),Er(17)),Jr(this),this.h=2,Kr(this)):Gr(this,this.T-t)},(Te=Yr.prototype).K=function(){Qr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Te.L=function(){return Qr(this),this.a.concat()},Te.get=function(t,e){return Zr(this.b,t)?this.b[t]:e},Te.set=function(t,e){Zr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Te.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ti=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ei(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ei){this.a=void 0!==e?e:t.a,ri(this,t.f),this.j=t.j,ii(this,t.c),oi(this,t.h),this.g=t.g,e=t.b;var n=new gi;n.c=e.c,e.a&&(n.a=new Yr(e.a),n.b=e.b),si(this,n),this.i=t.i}else t&&(n=String(t).match(ti))?(this.a=!!e,ri(this,n[1]||"",!0),this.j=ci(n[2]||""),ii(this,n[3]||"",!0),oi(this,n[4]),this.g=ci(n[5]||"",!0),si(this,n[6]||"",!0),this.i=ci(n[7]||"")):(this.a=!!e,this.b=new gi(null,this.a))}function ni(t){return new ei(t)}function ri(t,e,n){t.f=n?ci(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ii(t,e,n){t.c=n?ci(e,!0):e}function oi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function si(t,e,n){e instanceof gi?(t.b=e,function(t,e){e&&!t.f&&(mi(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(bi(this,e),_i(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=fi(e,vi)),t.b=new gi(e,t.a))}function ui(t,e,n){t.b.set(e,n)}function ai(t){return ui(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Me()).toString(36)),t}function ci(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fi(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,hi),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hi(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ei.prototype.toString=function(){var t=[],e=this.f;e&&t.push(fi(e,li,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(fi(e,li,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(fi(n,"/"==n.charAt(0)?di:pi,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",fi(n,yi)),t.join("")};var li=/[#\/\?@]/g,pi=/[#\?:]/g,di=/[#\?]/g,vi=/[#\?@]/g,yi=/#/g;function gi(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function mi(t){t.a||(t.a=new Yr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function bi(t,e){mi(t),e=Ii(t,e),Zr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Zr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Qr(t)))}function wi(t,e){return mi(t),e=Ii(t,e),Zr(t.a.b,e)}function _i(t,e,n){bi(t,e),0<n.length&&(t.c=null,t.a.set(Ii(t,e),He(n)),t.b+=n.length)}function Ii(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Te=gi.prototype).add=function(t,e){mi(this),this.c=null,t=Ii(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Te.forEach=function(t,e){mi(this),this.a.forEach((function(n,r){qe(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Te.L=function(){mi(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Te.K=function(t){mi(this);var e=[];if("string"==typeof t)wi(this,t)&&(e=ze(e,this.a.get(Ii(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ze(e,t[n])}return e},Te.set=function(t,e){return mi(this),this.c=null,wi(this,t=Ii(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Te.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Te.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ei=function(t,e){this.b=t,this.a=e};function Ti(t){this.g=t||Ni,Ae.PerformanceNavigationTiming?t=0<(t=Ae.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Ae.ia&&Ae.ia.ya&&Ae.ia.ya()&&Ae.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ni=10;function Si(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Ai(t){return t.b?1:t.a?t.a.size:0}function xi(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ki(t,e){t.a?t.a.add(e):t.b=e}function Di(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Oi(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ee(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return He(t.c)}function Ci(){}function Pi(){this.a=new Ci}function Li(t,e,n){var r=n||"";try{Xr(t,(function(t,n){var i=t;De(t)&&(i=Wn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Ri(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ti.prototype.cancel=function(){var t,e;if(this.c=Oi(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ee(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ci.prototype.stringify=function(t){return Ae.JSON.stringify(t,void 0)},Ci.prototype.parse=function(t){return Ae.JSON.parse(t,void 0)};var Vi=Ae.JSON.parse;function Mi(t){Bn.call(this),this.headers=new Yr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ui,this.D=this.F=!1}Ue(Mi,Bn);var Ui="",ji=/^https?$/i,Fi=["POST","PUT"];function qi(t){return"content-type"==t.toLowerCase()}function zi(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Hi(t),Gi(t)}function Hi(t){t.u||(t.u=!0,Kn(t,"complete"),Kn(t,"error"))}function $i(t){if(t.b&&void 0!==Se&&(!t.s[1]||4!=Ki(t)||2!=t.W()))if(t.l&&4==Ki(t))ar(t.za,0,t);else if(Kn(t,"readystatechange"),4==Ki(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ti)[1]||null;if(!o&&Ae.self&&Ae.self.location){var s=Ae.self.location.protocol;o=s.substr(0,s.length-1)}i=!ji.test(o?o.toLowerCase():"")}e=i}if(e)Kn(t,"complete"),Kn(t,"success");else{t.h=6;try{var u=2<Ki(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",Hi(t)}}finally{Gi(t)}}}function Gi(t,e){if(t.a){Bi(t);var n=t.a,r=t.s[0]?xe:null;t.a=null,t.s=null,e||Kn(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Bi(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ae.clearTimeout(t.m),t.m=null)}function Ki(t){return t.a?t.a.readyState:0}function Ji(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ye(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ui(t,e,n))}function Wi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Xi(t){this.pa=0,this.g=[],this.c=new vr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Wi("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Wi("baseRetryDelayMs",5e3,t),this.Ra=Wi("retryDelaySeedMs",1e4,t),this.Ma=Wi("forwardChannelMaxRetries",2,t),this.ma=Wi("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ti(t&&t.concurrentRequestLimit),this.ka=new Pi,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Yi(t){if(Zi(t),3==t.v){var e=t.R++,n=ni(t.B);ui(n,"SID",t.J),ui(n,"RID",e),ui(n,"TYPE","terminate"),ro(t,n),(e=new Vr(t,t.c,e,void 0)).H=2,e.i=ai(ni(n)),n=!1,Ae.navigator&&Ae.navigator.sendBeacon&&(n=Ae.navigator.sendBeacon(e.i.toString(),"")),!n&&Ae.Image&&((new Image).src=e.i,n=!0),n||(e.a=yo(e.g,null),e.a.ba(e.i)),e.u=Me(),$r(e)}po(t)}function Qi(t){t.a&&(uo(t),t.a.cancel(),t.a=null)}function Zi(t){Qi(t),t.j&&(Ae.clearTimeout(t.j),t.j=null),co(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ae.clearTimeout(t.h),t.h=null)}function to(t,e){t.g.push(new Ei(t.Oa++,e)),3==t.v&&eo(t)}function eo(t){Si(t.b)||t.h||(t.h=!0,nr(t.Ba,t),t.u=0)}function no(t,e){var n;n=e?e.f:t.R++;var r=ni(t.B);ui(r,"SID",t.J),ui(r,"RID",n),ui(r,"AID",t.P),ro(t,r),t.i&&t.l&&Ji(r,t.i,t.l),n=new Vr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=io(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ki(t.b,n),Fr(n,r,e)}function ro(t,e){t.f&&Xr({},(function(t,n){ui(e,n,t)}))}function io(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Re(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,f=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Li(f,s,"req"+c+"_")}catch(t){r&&r(f)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function oo(t){t.a||t.j||(t.T=1,nr(t.Aa,t),t.o=0)}function so(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Nr(Re(t.Aa,t),ho(t,t.o)),t.o++,!0)}function uo(t){null!=t.s&&(Ae.clearTimeout(t.s),t.s=null)}function ao(t){t.a=new Vr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ni(t.la);ui(e,"RID","rpc"),ui(e,"SID",t.J),ui(e,"CI",t.H?"0":"1"),ui(e,"AID",t.P),ro(t,e),ui(e,"TYPE","xmlhttp"),t.i&&t.l&&Ji(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ai(ni(e)),n.j=null,n.I=!0,qr(n,t)}function co(t){null!=t.m&&(Ae.clearTimeout(t.m),t.m=null)}function fo(t,e){var n=null;if(t.a==e){co(t),uo(t),t.a=null;var r=2}else{if(!xi(t.b,e))return;n=e.s,Di(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Me()-e.u;var i=t.u;Kn(r=br(),new Tr(r,n,e,i)),eo(t)}else oo(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ai(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Nr(Re(t.Ba,t,e),ho(t,t.u)),t.u++,0)))}(t,e)||2==r&&so(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:lo(t,5);break;case 4:lo(t,10);break;case 3:lo(t,6);break;default:lo(t,2)}}function ho(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function lo(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Re(t.Ya,t);n||(n=new ei("//www.google.com/images/cleardot.gif"),Ae.location&&"http"==Ae.location.protocol||ri(n,"https"),ai(n)),function(t,e){var n=new vr;if(Ae.Image){var r=new Image;r.onload=Ve(Ri,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ve(Ri,n,r,"TestLoadImage: error",!1,e),r.onabort=Ve(Ri,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ve(Ri,n,r,"TestLoadImage: timeout",!1,e),Ae.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Er(2);t.v=0,t.f&&t.f.ra(e),po(t),Zi(t)}function po(t){t.v=0,t.I=-1,t.f&&(0==Oi(t.b).length&&0==t.g.length||(t.b.c.length=0,He(t.g),t.g.length=0),t.f.qa())}function vo(t,e,n){var r=function(t){return t instanceof ei?ni(t):new ei(t,void 0)}(n);if(""!=r.c)e&&ii(r,e+"."+r.c),oi(r,r.h);else{var i=Ae.location;r=function(t,e,n,r){var i=new ei(null,void 0);return t&&ri(i,t),e&&ii(i,e),n&&oi(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ye(t.V,(function(t,e){ui(r,e,t)})),e=t.A,n=t.na,e&&n&&ui(r,e,n),ui(r,"VER",t.ha),ro(t,r),r}function yo(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mi(t.Na)).F=t.C,e}function go(){}function mo(){if(sn&&!(10<=Number(bn)))throw Error("Environmental error: no available transport.")}function bo(t,e){Bn.call(this),this.a=new Xi(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!$e(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$e(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Io(this)}function wo(t){Pr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function _o(){Lr.call(this),this.status=1}function Io(t){this.a=t}(Te=Mi.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?kr(this.H):kr(Or),this.a.onreadystatechange=Re(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void zi(this,t)}t=n||"";var i=new Yr(this.headers);r&&Xr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=qi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Ae.FormData&&t instanceof Ae.FormData,!(0<=Fe(Fi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Bi(this),0<this.o&&((this.D=function(t){return sn&&gn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Re(this.xa,this)):this.m=ar(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){zi(this,t)}},Te.xa=function(){void 0!==Se&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Kn(this,"timeout"),this.abort(8))},Te.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Kn(this,"complete"),Kn(this,"abort"),Gi(this))},Te.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Gi(this,!0)),Mi.X.G.call(this)},Te.za=function(){this.j||(this.A||this.l||this.g?$i(this):this.Ua())},Te.Ua=function(){$i(this)},Te.W=function(){try{return 2<Ki(this)?this.a.status:-1}catch(t){return-1}},Te.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Te.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Vi(e)}},Te.ua=function(){return this.h},Te.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Te=Xi.prototype).ha=8,Te.v=1,Te.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Vr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?tn(r=Qe(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=io(this,n,e),ui(i=ni(this.B),"RID",t),ui(i,"CVER",22),this.A&&ui(i,"X-HTTP-Session-Id",this.A),ro(this,i),this.i&&r&&Ji(i,this.i,r),ki(this.b,n),this.Ia&&ui(i,"TYPE","init"),this.da?(ui(i,"$req",e),ui(i,"SID","null"),n.U=!0,Fr(n,i,null)):Fr(n,i,e),this.v=2}}else 3==this.v&&(t?no(this,t):0==this.g.length||Si(this.b)||no(this))},Te.Aa=function(){if(this.j=null,ao(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Nr(Re(this.Ta,this),t)}},Te.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Er(10),Qi(this),ao(this))},Te.Sa=function(){null!=this.m&&(this.m=null,Qi(this),so(this),Er(19))},Te.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Er(2)):(this.c.info("Failed to ping google.com"),Er(1))},(Te=go.prototype).ta=function(){},Te.sa=function(){},Te.ra=function(){},Te.qa=function(){},Te.Ja=function(){},mo.prototype.a=function(t,e){return new bo(t,e)},Ue(bo,Bn),bo.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Er(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=vo(t,null,t.fa),eo(t)},bo.prototype.close=function(){Yi(this.a)},bo.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,to(this.a,e)}else this.l?((e={}).__data__=Wn(t),to(this.a,e)):to(this.a,t)},bo.prototype.G=function(){this.a.f=null,delete this.f,Yi(this.a),delete this.a,bo.X.G.call(this)},Ue(wo,Pr),Ue(_o,Lr),Ue(Io,go),Io.prototype.ta=function(){Kn(this.a,"a")},Io.prototype.sa=function(t){Kn(this.a,new wo(t))},Io.prototype.ra=function(t){Kn(this.a,new _o(t))},Io.prototype.qa=function(){Kn(this.a,"b")},mo.prototype.createWebChannel=mo.prototype.a,bo.prototype.send=bo.prototype.h,bo.prototype.open=bo.prototype.g,bo.prototype.close=bo.prototype.close,Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,Ar.COMPLETE="complete",Dr.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",Bn.prototype.listen=Bn.prototype.va,Mi.prototype.listenOnce=Mi.prototype.wa,Mi.prototype.getLastError=Mi.prototype.Qa,Mi.prototype.getLastErrorCode=Mi.prototype.ua,Mi.prototype.getStatus=Mi.prototype.W,Mi.prototype.getResponseJson=Mi.prototype.Pa,Mi.prototype.getResponseText=Mi.prototype.$,Mi.prototype.send=Mi.prototype.ba;var Eo=Sr,To=Ar,No=gr,So=10,Ao=11,xo=Dr,ko=Mi,Do=new se("@firebase/firestore");function Oo(){return Do.logLevel}function Co(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Do.logLevel<=Zt.DEBUG){var r=e.map(Ro);Do.debug.apply(Do,Lt(["Firestore (8.2.5): "+t],r))}}function Po(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Do.logLevel<=Zt.ERROR){var r=e.map(Ro);Do.error.apply(Do,Lt(["Firestore (8.2.5): "+t],r))}}function Lo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Do.logLevel<=Zt.WARN){var r=e.map(Ro);Do.warn.apply(Do,Lt(["Firestore (8.2.5): "+t],r))}}function Ro(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vo(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.5) INTERNAL ASSERTION FAILED: "+t;throw Po(e),new Error(e)}function Mo(t,e){t||Vo()}function Uo(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fo=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=jo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function qo(t,e){return t<e?-1:t>e?1:0}function zo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ho(t){return t+"\0"}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $o=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return qo(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();$o.h=new $o("");var Go={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Bo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return At(e,t),e}(Error),Ko=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t($o.fromBase64String(e))}catch(e){throw new Bo(Go.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t($o.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),Jo=function(t){this._=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wo(){if("undefined"==typeof Uint8Array)throw new Bo(Go.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Xo(){if("undefined"==typeof atob)throw new Bo(Go.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.fromBase64String=function(t){return Xo(),new e(Ko.fromBase64String(t))},e.fromUint8Array=function(t){return Wo(),new e(Ko.fromUint8Array(t))},e.prototype.toBase64=function(){return Xo(),this._.toBase64()},e.prototype.toUint8Array=function(){return Wo(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Jo),Qo=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},Zo=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ts=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ts.UNAUTHENTICATED=new ts(null),ts.P=new ts("google-credentials-uid"),ts.g=new ts("first-party-uid");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var es=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},ns=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(ts.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),rs=function(){function t(t){var e=this;this.C=null,this.currentUser=ts.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(Co("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Mo("string"==typeof n.accessToken),new es(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return Mo(null===t||"string"==typeof t),new ts(t)},t}(),is=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=ts.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),os=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new is(this.k,this.M))},t.prototype.S=function(t){t(ts.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),ss=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();ss.U=-1;var us=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Bo(Go.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Bo(Go.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Bo(Go.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bo(Go.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?qo(this.nanoseconds,t.nanoseconds):qo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),as=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new us(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),cs=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Vo(),void 0===n?n=t.length-e:n>t.length-e&&Vo(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),fs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Bo(Go.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(cs),hs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ls=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return hs.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Bo(Go.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new Bo(Go.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Bo(Go.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new Bo(Go.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(cs),ps=function(){function t(t){this.path=t}return t.ft=function(e){return new t(fs.ct(e))},t.dt=function(e){return new t(fs.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===fs.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return fs.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new fs(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ds(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ys(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gs=function(){function t(t){this.fields=t,t.sort(ls.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return zo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ms=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bs(t){if(Mo(!!t),"string"==typeof t){var e=0,n=ms.exec(t);if(Mo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ws(t.seconds),nanos:ws(t.nanos)}}function ws(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function _s(t){return"string"==typeof t?$o.fromBase64String(t):$o.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Is(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Es(t){var e=t.mapValue.fields.__previous_value__;return Is(e)?Es(e):e}function Ts(t){var e=bs(t.mapValue.fields.__local_write_time__.timestampValue);return new us(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ns(t){return null==t}function Ss(t){return 0===t&&1/t==-1/0}function As(t){return"number"==typeof t&&Number.isInteger(t)&&!Ss(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Is(t)?4:10:Vo()}function ks(t,e){var n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ts(t).isEqual(Ts(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=bs(t.timestampValue),r=bs(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return _s(t.bytesValue).isEqual(_s(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ws(t.geoPointValue.latitude)===ws(e.geoPointValue.latitude)&&ws(t.geoPointValue.longitude)===ws(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ws(t.integerValue)===ws(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ws(t.doubleValue),r=ws(e.doubleValue);return n===r?Ss(n)===Ss(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ds(n)!==ds(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ks(n[i],r[i])))return!1;return!0}(t,e);default:return Vo()}}function Ds(t,e){return void 0!==(t.values||[]).find((function(t){return ks(t,e)}))}function Os(t,e){var n=xs(t),r=xs(e);if(n!==r)return qo(n,r);switch(n){case 0:return 0;case 1:return qo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ws(t.integerValue||t.doubleValue),r=ws(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Cs(t.timestampValue,e.timestampValue);case 4:return Cs(Ts(t),Ts(e));case 5:return qo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=_s(t),r=_s(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=qo(n[i],r[i]);if(0!==o)return o}return qo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=qo(ws(t.latitude),ws(e.latitude));return 0!==n?n:qo(ws(t.longitude),ws(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Os(n[i],r[i]);if(o)return o}return qo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=qo(r[s],o[s]);if(0!==u)return u;var a=Os(n[r[s]],i[o[s]]);if(0!==a)return a}return qo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Vo()}}function Cs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return qo(t,e);var n=bs(t),r=bs(e),i=qo(n.seconds,r.seconds);return 0!==i?i:qo(n.nanos,r.nanos)}function Ps(t){return Ls(t)}function Ls(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=bs(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?_s(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ps.dt(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ls(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ls(t.fields[o])}return e+"}"}(t.mapValue):Vo();var e,n}function Rs(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function Vs(t){return!!t&&"integerValue"in t}function Ms(t){return!!t&&"arrayValue"in t}function Us(t){return!!t&&"nullValue"in t}function js(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fs(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qs=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Fs(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return ks(this.proto,t.proto)},t}(),zs=function(){function t(t){void 0===t&&(t=qs.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===xs(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(ls.at(),this.Rt);return null!=t?new qs(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=Fs(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Hs(t){var e=[];return vs(t.fields||{},(function(t,n){var r=new ls([t]);if(Fs(n)){var i=Hs(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new gs(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var $s=function(t,e){this.key=t,this.version=e},Gs=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return At(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}($s),Bs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return At(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}($s),Ks=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}($s),Js=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function Ws(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Js(t,e,n,r,i,o,s)}function Xs(t){var e=Uo(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+Ps(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),Ns(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=cu(e.startAt)),e.endAt&&(n+="|ub:",n+=cu(e.endAt)),e.St=n}return e.St}function Ys(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!hu(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ks(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pu(t.startAt,e.startAt)&&pu(t.endAt,e.endAt)}function Qs(t){return ps.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Zs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return At(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new tu(t,n,r):"array-contains"===n?new iu(t,r):"in"===n?new ou(t,r):"not-in"===n?new su(t,r):"array-contains-any"===n?new uu(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new eu(t,n):new nu(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(Os(e,this.value)):null!==e&&xs(this.value)===xs(e)&&this.Ct(Os(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Vo()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),tu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ps.dt(r.referenceValue),i}return At(e,t),e.prototype.matches=function(t){var e=ps.J(t.key,this.key);return this.Ct(e)},e}(Zs),eu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ru("in",n),r}return At(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Zs),nu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ru("not-in",n),r}return At(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Zs);function ru(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ps.dt(t.referenceValue)}))}var iu=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return At(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ms(e)&&Ds(e.arrayValue,this.value)},e}(Zs),ou=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return At(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ds(this.value.arrayValue,e)},e}(Zs),su=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return At(e,t),e.prototype.matches=function(t){if(Ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Ds(this.value.arrayValue,e)},e}(Zs),uu=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return At(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ms(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ds(e.value.arrayValue,t)}))},e}(Zs),au=function(t,e){this.position=t,this.before=e};function cu(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ps(t)})).join(",")}var fu=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function hu(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function lu(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?ps.J(ps.dt(s.referenceValue),n.key):Os(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function pu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ks(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var du=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Ft=null,this.Ot=null,this.startAt,this.endAt};function vu(t,e,n,r,i,o,s,u){return new du(t,e,n,r,i,o,s,u)}function yu(t){return new du(t)}function gu(t){return!Ns(t.limit)&&"F"===t.limitType}function mu(t){return!Ns(t.limit)&&"L"===t.limitType}function bu(t){return t.Nt.length>0?t.Nt[0].field:null}function wu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function _u(t){return null!==t.collectionGroup}function Iu(t){var e=Uo(t);if(null===e.Ft){e.Ft=[];var n=wu(e),r=bu(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new fu(n)),e.Ft.push(new fu(ls.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var u=s[o];e.Ft.push(u),u.field.ht()&&(i=!0)}if(!i){var a=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new fu(ls.lt(),a))}}}return e.Ft}function Eu(t){var e=Uo(t);if(!e.Ot)if("F"===e.limitType)e.Ot=Ws(e.path,e.collectionGroup,Iu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Iu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new fu(o.field,s))}var u=e.endAt?new au(e.endAt.position,!e.endAt.before):null,a=e.startAt?new au(e.startAt.position,!e.startAt.before):null;e.Ot=Ws(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.Ot}function Tu(t,e,n){return new du(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nu(t,e){return Ys(Eu(t),Eu(e))&&t.limitType===e.limitType}function Su(t){return Xs(Eu(t))+"|lt:"+t.limitType}function Au(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+Ps(e.value);var e})).join(", ")+"]"),Ns(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+cu(t.startAt)),t.endAt&&(e+=", endAt: "+cu(t.endAt)),"Target("+e+")"}(Eu(t))+"; limitType="+t.limitType+")"}function xu(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):ps.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!lu(t.startAt,Iu(t),e)||t.endAt&&lu(t.endAt,Iu(t),e))}(t,e)}function ku(t){return function(e,n){for(var r=!1,i=0,o=Iu(t);i<o.length;i++){var s=o[i],u=Du(s,e,n);if(0!==u)return u;r=r||s.field.ht()}return 0}}function Du(t,e,n){var r=t.field.ht()?ps.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Os(r,i):Vo()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Vo()}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ou=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=as.min()),void 0===o&&(o=as.min()),void 0===s&&(s=$o.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cu(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ss(e)?"-0":e}}function Pu(t){return{integerValue:""+t}}function Lu(t,e){return As(e)?Pu(e):Cu(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ru=function(){this.Ut=void 0};function Vu(t,e,n){return t instanceof ju?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Fu?qu(t,e):t instanceof zu?Hu(t,e):function(t,e){var n=Uu(t,e),r=Gu(n)+Gu(t.Qt);return Vs(n)&&Vs(t.Qt)?Pu(r):Cu(t.Kt,r)}(t,e)}function Mu(t,e,n){return t instanceof Fu?qu(t,e):t instanceof zu?Hu(t,e):n}function Uu(t,e){return t instanceof $u?Vs(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e}(Ru),Fu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return At(e,t),e}(Ru);function qu(t,e){for(var n=Bu(e),r=function(t){n.some((function(e){return ks(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var zu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return At(e,t),e}(Ru);function Hu(t,e){for(var n=Bu(e),r=function(t){n=n.filter((function(e){return!ks(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var $u=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return At(e,t),e}(Ru);function Gu(t){return ws(t.integerValue||t.doubleValue)}function Bu(t){return Ms(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ku=function(t,e){this.field=t,this.transform=e},Ju=function(t,e){this.version=t,this.transformResults=e},Wu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Xu(t,e){return void 0!==t.updateTime?e instanceof Gs&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Gs}var Yu=function(){};function Qu(t,e,n){return t instanceof ra?function(t,e,n){var r=t.value;if(n.transformResults){var i=sa(t.fieldTransforms,e,n.transformResults);r=aa(t.fieldTransforms,r,i)}return new Gs(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ia?function(t,e,n){if(!Xu(t.Gt,e))return new Ks(t.key,n.version);var r=oa(t,e,n.transformResults?sa(t.fieldTransforms,e,n.transformResults):[]);return new Gs(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Bs(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Zu(t,e,n,r){return t instanceof ra?function(t,e,n,r){if(!Xu(t.Gt,e))return e;var i=t.value,o=ua(t.fieldTransforms,n,e);i=aa(t.fieldTransforms,i,o);var s=na(e);return new Gs(t.key,s,i,{bt:!0})}(t,e,r):t instanceof ia?function(t,e,n,r){if(!Xu(t.Gt,e))return e;var i=na(e),o=oa(t,e,ua(t.fieldTransforms,n,e));return new Gs(t.key,i,o,{bt:!0})}(t,e,r):function(t,e){return Xu(t.Gt,e)?new Bs(t.key,as.min()):e}(t,e)}function ta(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Gs?e.field(o.field):void 0,u=Uu(o.transform,s||null);null!=u&&(n=null==n?(new zs).set(o.field,u):n.set(o.field,u))}return n?n.yt():null}(t.fieldTransforms,e)}function ea(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&zo(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Fu&&e instanceof Fu||t instanceof zu&&e instanceof zu?zo(t.elements,e.elements,ks):t instanceof $u&&e instanceof $u?ks(t.Qt,e.Qt):t instanceof ju&&e instanceof ju}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function na(t){return t instanceof Gs?t.version:as.min()}var ra=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return At(e,t),e}(Yu),ia=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return At(e,t),e}(Yu);function oa(t,e,n){var r;return r=function(t,e){var n=new zs(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof Gs?e.data():qs.empty()),aa(t.fieldTransforms,r,n)}function sa(t,e,n){var r=[];Mo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof Gs&&(u=e.field(o.field)),r.push(Mu(s,u,n[i]))}return r}function ua(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof Gs&&(c=n.field(u.field)),i.push(Vu(a,c,e))}return i}function aa(t,e,n){for(var r=new zs(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}var ca,fa,ha=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return At(e,t),e}(Yu),la=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return At(e,t),e}(Yu),pa=function(t){this.count=t};function da(t){switch(t){case Go.OK:return Vo();case Go.CANCELLED:case Go.UNKNOWN:case Go.DEADLINE_EXCEEDED:case Go.RESOURCE_EXHAUSTED:case Go.INTERNAL:case Go.UNAVAILABLE:case Go.UNAUTHENTICATED:return!1;case Go.INVALID_ARGUMENT:case Go.NOT_FOUND:case Go.ALREADY_EXISTS:case Go.PERMISSION_DENIED:case Go.FAILED_PRECONDITION:case Go.ABORTED:case Go.OUT_OF_RANGE:case Go.UNIMPLEMENTED:case Go.DATA_LOSS:return!0;default:return Vo()}}function va(t){if(void 0===t)return Po("GRPC error has no .code"),Go.UNKNOWN;switch(t){case ca.OK:return Go.OK;case ca.CANCELLED:return Go.CANCELLED;case ca.UNKNOWN:return Go.UNKNOWN;case ca.DEADLINE_EXCEEDED:return Go.DEADLINE_EXCEEDED;case ca.RESOURCE_EXHAUSTED:return Go.RESOURCE_EXHAUSTED;case ca.INTERNAL:return Go.INTERNAL;case ca.UNAVAILABLE:return Go.UNAVAILABLE;case ca.UNAUTHENTICATED:return Go.UNAUTHENTICATED;case ca.INVALID_ARGUMENT:return Go.INVALID_ARGUMENT;case ca.NOT_FOUND:return Go.NOT_FOUND;case ca.ALREADY_EXISTS:return Go.ALREADY_EXISTS;case ca.PERMISSION_DENIED:return Go.PERMISSION_DENIED;case ca.FAILED_PRECONDITION:return Go.FAILED_PRECONDITION;case ca.ABORTED:return Go.ABORTED;case ca.OUT_OF_RANGE:return Go.OUT_OF_RANGE;case ca.UNIMPLEMENTED:return Go.UNIMPLEMENTED;case ca.DATA_LOSS:return Go.DATA_LOSS;default:return Vo()}}(fa=ca||(ca={}))[fa.OK=0]="OK",fa[fa.CANCELLED=1]="CANCELLED",fa[fa.UNKNOWN=2]="UNKNOWN",fa[fa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fa[fa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fa[fa.NOT_FOUND=5]="NOT_FOUND",fa[fa.ALREADY_EXISTS=6]="ALREADY_EXISTS",fa[fa.PERMISSION_DENIED=7]="PERMISSION_DENIED",fa[fa.UNAUTHENTICATED=16]="UNAUTHENTICATED",fa[fa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fa[fa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fa[fa.ABORTED=10]="ABORTED",fa[fa.OUT_OF_RANGE=11]="OUT_OF_RANGE",fa[fa.UNIMPLEMENTED=12]="UNIMPLEMENTED",fa[fa.INTERNAL=13]="INTERNAL",fa[fa.UNAVAILABLE=14]="UNAVAILABLE",fa[fa.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ya=function(){function t(t,e){this.J=t,this.root=e||ma.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,ma.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,ma.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new ga(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new ga(this.root,t,this.J,!1)},t.prototype.se=function(){return new ga(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new ga(this.root,t,this.J,!0)},t}(),ga=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),ma=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw Vo();if(this.right._e())throw Vo();var t=this.left.me();if(t!==this.right.me())throw Vo();return t+(this._e()?0:1)},t}();ma.EMPTY=null,ma.RED=!0,ma.Jt=!1,ma.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Vo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Vo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Vo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Vo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Vo()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new ma(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ba=function(){function t(t){this.J=t,this.data=new ya(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new wa(this.data.ee())},t.prototype.ne=function(t){return new wa(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),wa=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),_a=new ya(ps.J);function Ia(){return _a}function Ea(){return Ia()}var Ta=new ya(ps.J);function Na(){return Ta}var Sa=new ya(ps.J);var Aa=new ba(ps.J);function xa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Aa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ka=new ba(qo);function Da(){return ka}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Oa=function(){function t(t){this.J=t?function(e,n){return t(e,n)||ps.J(e.key,n.key)}:function(t,e){return ps.J(t.key,e.key)},this.Ve=Na(),this.pe=new ya(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),Ca=function(){function t(){this.ve=new ya(ps.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):Vo():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),Pa=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=u}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Oa.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&Nu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),La=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,Ra.Be(e,n)),new t(as.min(),r,Da(),Ia(),xa())},t}(),Ra=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t($o.h,n,xa(),xa(),xa())},t}(),Va=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},Ma=function(t,e){this.targetId=t,this.Ge=e},Ua=function(t,e,n,r){void 0===n&&(n=$o.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ja=function(){function t(){this.ze=0,this.He=za(),this.Je=$o.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=xa(),e=xa(),n=xa();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Vo()}})),new Ra(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=za()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),Fa=function(){function t(t){this.hn=t,this.ln=new Map,this._n=Ia(),this.fn=qa(),this.dn=new ba(qo)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof Gs?this.En(r,t.je):t.je instanceof Bs&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:Vo()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Qs(i))if(0===n){var o=new ps(i.path);this.Tn(e,o,new Bs(o,as.min()))}else Mo(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&Qs(o.target)){var s=new ps(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new Bs(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=xa();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new La(t,n,this.dn,this._n,r);return this._n=Ia(),this.fn=qa(),this.dn=new ba(qo),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new ja,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new ba(qo),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||Co("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new ja),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qa(){return new ya(ps.J)}function za(){return new ya(ps.J)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ha={asc:"ASCENDING",desc:"DESCENDING"},$a={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ga=function(t,e){this.T=t,this.qt=e};function Ba(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ka(t,e){return t.qt?e.toBase64():e.toUint8Array()}function Ja(t,e){return Ba(t,e.G())}function Wa(t){return Mo(!!t),as.W(function(t){var e=bs(t);return new us(e.seconds,e.nanos)}(t))}function Xa(t,e){return function(t){return new fs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function Ya(t){var e=fs.ct(t);return Mo(wc(e)),e}function Qa(t,e){return Xa(t.T,e.path)}function Za(t,e){var n=Ya(e);if(n.get(1)!==t.T.projectId)throw new Bo(Go.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new Bo(Go.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new ps(rc(n))}function tc(t,e){return Xa(t.T,e)}function ec(t){var e=Ya(t);return 4===e.length?fs.at():rc(e)}function nc(t){return new fs(["projects",t.T.projectId,"databases",t.T.database]).ot()}function rc(t){return Mo(t.length>4&&"documents"===t.get(4)),t.X(5)}function ic(t,e,n){return{name:Qa(t,e),fields:n.proto.mapValue.fields}}function oc(t,e){var n;if(e instanceof ra)n={update:ic(t,e.key,e.value)};else if(e instanceof ha)n={delete:Qa(t,e.key)};else if(e instanceof ia)n={update:ic(t,e.key,e.data),updateMask:bc(e.zt)};else{if(!(e instanceof la))return Vo();n={verify:Qa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ju)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fu)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof zu)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof $u)return{fieldPath:e.field.ot(),increment:n.Qt};throw Vo()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ja(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Vo()}(t,e.Gt)),n}function sc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Wu.updateTime(Wa(t.updateTime)):void 0!==t.exists?Wu.exists(t.exists):Wu.Wt()}(e.currentDocument):Wu.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Mo("REQUEST_TIME"===e.setToServerValue),n=new ju;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Fu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new zu(i)}else"increment"in e?n=new $u(t,e.increment):Vo();var o=ls._t(e.fieldPath);return new Ku(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Za(t,e.update.name),o=new qs({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new gs(e.map((function(t){return ls._t(t)})))}(e.updateMask);return new ia(i,o,s,n,r)}return new ra(i,o,n,r)}if(e.delete){var u=Za(t,e.delete);return new ha(u,n)}if(e.verify){var a=Za(t,e.verify);return new la(a,n)}return Vo()}function uc(t,e){return{documents:[tc(t,e.path)]}}function ac(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=tc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=tc(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(js(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NAN"}};if(Us(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(js(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NOT_NAN"}};if(Us(t.value))return{unaryFilter:{field:vc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vc(t.field),op:dc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:vc(t.field),direction:pc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||Ns(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=hc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=hc(e.endAt)),n}function cc(t){var e=ec(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Mo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=fc(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new fu(yc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return Ns(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=lc(n.startAt));var f=null;return n.endAt&&(f=lc(n.endAt)),vu(e,i,u,s,a,"F",c,f)}function fc(t){return t?void 0!==t.unaryFilter?[mc(t)]:void 0!==t.fieldFilter?[gc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return fc(t)})).reduce((function(t,e){return t.concat(e)})):Vo():[]}function hc(t){return{before:t.before,values:t.position}}function lc(t){var e=!!t.before,n=t.values||[];return new au(n,e)}function pc(t){return Ha[t]}function dc(t){return $a[t]}function vc(t){return{fieldPath:t.ot()}}function yc(t){return ls._t(t.fieldPath)}function gc(t){return Zs.create(yc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Vo()}}(t.fieldFilter.op),t.fieldFilter.value)}function mc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=yc(t.unaryFilter.field);return Zs.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=yc(t.unaryFilter.field);return Zs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=yc(t.unaryFilter.field);return Zs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=yc(t.unaryFilter.field);return Zs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Vo()}}function bc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function wc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var _c=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Ic=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&Vo(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),Ec=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new _c,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new Sc(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=Oc(e.target.error);n.qn.reject(new Sc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Sc(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(Co("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new xc(e)},t}(),Tc=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(Mt())&&Po("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Co("SimpleDb","Removing database:",t),kc(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=Mt(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return kt(this,void 0,void 0,(function(){var e,n=this;return Dt(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Co("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Sc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Bo(Go.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Sc(t,n))},i.onupgradeneeded=function(t){Co("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Qn.Yn(e,i.transaction,t.oldVersion,n.version).next((function(){Co("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return kt(this,void 0,void 0,(function(){var i,o,s,u,a;return Dt(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,f;return Dt(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,u.Jn(t)];case 2:return u.db=h.sent(),e=Ec.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Ic.reject(t)})).Mn(),a={},s.catch((function(){})),[4,e.Un];case 3:return[2,(a.value=(h.sent(),s),a)];case 4:return c=h.sent(),f="FirebaseError"!==c.name&&o<3,Co("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Nc=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return kc(this.ts.delete())},t}(),Sc=function(t){function e(e,n){var r=this;return(r=t.call(this,Go.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return At(e,t),e}(Bo);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ac(t){return"IndexedDbTransactionError"===t.name}var xc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Co("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Co("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),kc(n)},t.prototype.add=function(t){return Co("SimpleDb","ADD",this.store.name,t,t),kc(this.store.add(t))},t.prototype.get=function(t){var e=this;return kc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Co("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Co("SimpleDb","DELETE",this.store.name,t),kc(this.store.delete(t))},t.prototype.count=function(){return Co("SimpleDb","COUNT",this.store.name),kc(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){Co("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new Ic((function(n,r){e.onerror=function(t){var e=Oc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new Ic((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Nc(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ic){var u=s.catch((function(t){return o.done(),Ic.reject(t)}));n.push(u)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return Ic.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function kc(t){return new Ic((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Oc(t.target.error);n(e)}}))}var Dc=!1;function Oc(t){var e=Tc.Kn(Mt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Bo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Dc||(Dc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cc=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new _c,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new Bo(Go.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function Pc(t,e){if(Po("AsyncQueue",e+": "+t),Ac(t))return new Bo(Go.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rc=function(){function t(){this.gs=[]}return t.prototype.Vs=function(t){this.gs.push(t)},t.prototype.ps=function(){this.gs.forEach((function(t){return t()}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Uc(e)),e=Mc(t.get(n),e);return Uc(e)}function Mc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Uc(t){return t+""}function jc(t){var e=t.length;if(Mo(e>=2),2===e)return Mo(""===t.charAt(0)&&""===t.charAt(1)),fs.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Vo(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Vo()}o=s+2}return new fs(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fc=function(t,e){this.seconds=t,this.nanoseconds=e},qc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};qc.store="owner",qc.key="owner";var zc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};zc.store="mutationQueues",zc.keyPath="userId";var Hc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Hc.store="mutations",Hc.keyPath="batchId",Hc.userMutationsIndex="userMutationsIndex",Hc.userMutationsKeyPath=["userId","batchId"];var $c=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Vc(e)]},t.key=function(t,e,n){return[t,Vc(e),n]},t}();$c.store="documentMutations",$c.PLACEHOLDER=new $c;var Gc=function(t,e){this.path=t,this.readTime=e},Bc=function(t,e){this.path=t,this.version=e},Kc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Kc.store="remoteDocuments",Kc.readTimeIndex="readTimeIndex",Kc.readTimeIndexPath="readTime",Kc.collectionReadTimeIndex="collectionReadTimeIndex",Kc.collectionReadTimeIndexPath=["parentPath","readTime"];var Jc=function(t){this.byteSize=t};Jc.store="remoteDocumentGlobal",Jc.key="remoteDocumentGlobalKey";var Wc=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Wc.store="targets",Wc.keyPath="targetId",Wc.queryTargetsIndexName="queryTargetsIndex",Wc.queryTargetsKeyPath=["canonicalId","targetId"];var Xc=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Xc.store="targetDocuments",Xc.keyPath=["targetId","path"],Xc.documentTargetsIndex="documentTargetsIndex",Xc.documentTargetsKeyPath=["path","targetId"];var Yc=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Yc.key="targetGlobalKey",Yc.store="targetGlobal";var Qc=function(t,e){this.collectionId=t,this.parent=e};Qc.store="collectionParents",Qc.keyPath=["collectionId","parent"];var Zc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Zc.store="clientMetadata",Zc.keyPath="clientId";var tf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};tf.store="bundles",tf.keyPath="bundleId";var ef=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ef.store="namedQueries",ef.keyPath="name";var nf=Lt(Lt(Lt(Lt([zc.store,Hc.store,$c.store,Kc.store,Wc.store,qc.store,Yc.store,Xc.store],[Zc.store]),[Jc.store]),[Qc.store]),[tf.store,ef.store]),rf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bs=e,r.vs=n,r}return At(e,t),e}(Rc);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function of(t,e){var n=Uo(t);return Tc.Hn(n.bs,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sf=function(){function t(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ds=function(t,e,n){for(var r=n.Cs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Qu(o,e,r[i]))}return e},t.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Zu(s,e,0,this.Ss));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Zu(s,e,0,this.Ss))}return e},t.prototype.Ns=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.xs(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),xa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&zo(this.mutations,t.mutations,(function(t,e){return ea(t,e)}))&&zo(this.baseMutations,t.baseMutations,(function(t,e){return ea(t,e)}))},t}(),uf=function(){function t(t,e,n,r){this.batch=t,this.Fs=e,this.Cs=n,this.Os=r}return t.from=function(e,n,r){Mo(e.mutations.length===r.length);for(var i=Sa,o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),af=function(t){this.ks=t};function cf(t,e){if(e.document)return function(t,e,n){var r=Za(t,e.name),i=Wa(e.updateTime),o=new qs({mapValue:{fields:e.fields}});return new Gs(r,i,o,{hasCommittedMutations:!!n})}(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ps.Tt(e.noDocument.path),r=df(e.noDocument.readTime);return new Bs(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ps.Tt(e.unknownDocument.path);return r=df(e.unknownDocument.version),new Ks(i,r)}return Vo()}function ff(t,e,n){var r=hf(n),i=e.key.path.Z().rt();if(e instanceof Gs){var o=function(t,e){return{name:Qa(t,e.key),fields:e.vt().mapValue.fields,updateTime:Ba(t,e.version.G())}}(t.ks,e),s=e.hasCommittedMutations;return new Kc(null,null,o,s,r,i)}if(e instanceof Bs){var u=e.key.path.rt(),a=pf(e.version);return s=e.hasCommittedMutations,new Kc(null,new Gc(u,a),null,s,r,i)}if(e instanceof Ks){var c=e.key.path.rt(),f=pf(e.version);return new Kc(new Bc(c,f),null,null,!0,r,i)}return Vo()}function hf(t){var e=t.G();return[e.seconds,e.nanoseconds]}function lf(t){var e=new us(t[0],t[1]);return as.W(e)}function pf(t){var e=t.G();return new Fc(e.seconds,e.nanoseconds)}function df(t){var e=new us(t.seconds,t.nanoseconds);return as.W(e)}function vf(t,e){for(var n=(e.baseMutations||[]).map((function(e){return sc(t.ks,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return sc(t.ks,e)})),s=us.fromMillis(e.localWriteTimeMs);return new sf(e.batchId,s,n,o)}function yf(t){var e,n,r=df(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?df(t.lastLimboFreeSnapshotVersion):as.min();return void 0!==t.query.documents?(Mo(1===(n=t.query).documents.length),e=Eu(yu(ec(n.documents[0])))):e=function(t){return Eu(cc(t))}(t.query),new Ou(e,t.targetId,0,t.lastListenSequenceNumber,r,i,$o.fromBase64String(t.resumeToken))}function gf(t,e){var n,r=pf(e.Mt),i=pf(e.lastLimboFreeSnapshotVersion);n=Qs(e.target)?uc(t.ks,e.target):ac(t.ks,e.target);var o=e.resumeToken.toBase64();return new Wc(e.targetId,Xs(e.target),r,o,e.sequenceNumber,i,n)}function mf(t){var e=cc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Tu(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var bf=function(){function t(){}return t.prototype.Ms=function(t,e){return wf(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:df(e.createTime),version:e.version};var e}))},t.prototype.Ls=function(t,e){return wf(t).put({bundleId:(n=e).id,createTime:pf(Wa(n.createTime)),version:n.version});var n},t.prototype.$s=function(t,e){return _f(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:mf(e.bundledQuery),readTime:df(e.readTime)};var e}))},t.prototype.Bs=function(t,e){return _f(t).put(function(t){return{name:t.name,readTime:pf(Wa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function wf(t){return of(t,tf.store)}function _f(t){return of(t,ef.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var If=function(){function t(){this.qs=new Ef}return t.prototype.Us=function(t,e){return this.qs.add(e),Ic.resolve()},t.prototype.Qs=function(t,e){return Ic.resolve(this.qs.getEntries(e))},t}(),Ef=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new ba(fs.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ba(fs.J)).rt()},t}(),Tf=function(){function t(){this.Ks=new Ef}return t.prototype.Us=function(t,e){var n=this;if(!this.Ks.has(e)){var r=e.et(),i=e.Z();t.Vs((function(){n.Ks.add(e)}));var o={collectionId:r,parent:Vc(i)};return Nf(t).put(o)}return Ic.resolve()},t.prototype.Qs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ho(e),""],!1,!0);return Nf(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(jc(o.parent))}return n}))},t}();function Nf(t){return of(t,Qc.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Sf={Ws:!1,js:0,Gs:0,zs:0},Af=function(){function t(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}return t.Xs=function(e){return new t(e,t.Zs,t.ti)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xf(t){return kt(this,void 0,void 0,(function(){return Dt(this,(function(e){if(t.code!==Go.FAILED_PRECONDITION||t.message!==Lc)throw t;return Co("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Af.Zs=10,Af.ti=1e3,Af.ei=new Af(41943040,Af.Zs,Af.ti),Af.ni=new Af(-1,0,0);var kf=function(){function t(t,e){this.si=t,this.ii=e,this.ri={}}return t.prototype.get=function(t){var e=this.si(t),n=this.ri[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.ii(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){vs(this.ri,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.nt=function(){return ys(this.ri)},t}(),Df=function(){function t(){this.oi=new kf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ci=!1}return t.prototype.ai=function(t){var e=this.oi.get(t);return e?e.readTime:as.min()},t.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},t.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},t.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?Ic.resolve(n.li):this.di(t,e)},t.prototype.getEntries=function(t,e){return this.wi(t,e)},t.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},t.prototype.hi=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Of(t,e,n){var r=t.store(Hc.store),i=t.store($c.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.ls({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){Mo(1===u)})));for(var c=[],f=0,h=n.mutations;f<h.length;f++){var l=h[f],p=$c.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Ic.$n(o).next((function(){return c}))}function Cf(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Vo();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Pf=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}return t.Ai=function(e,n,r,i){return Mo(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Ri=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rf(t).ls({index:Hc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Pi=function(t,e,n,r){var i=this,o=Vf(t),s=Rf(t);return s.add({}).next((function(u){Mo("number"==typeof u);for(var a=new sf(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return oc(t.ks,e)})),i=n.mutations.map((function(e){return oc(t.ks,e)}));return new Hc(e,n.batchId,n.Ss.toMillis(),r,i)}(i.Kt,i.userId,a),f=[],h=new ba((function(t,e){return qo(t.ot(),e.ot())})),l=0,p=r;l<p.length;l++){var d=p[l],v=$c.key(i.userId,d.key.path,u);h=h.add(d.key.path.Z()),f.push(s.put(c)),f.push(o.put(v,$c.PLACEHOLDER))}return h.forEach((function(e){f.push(i.Ti.Us(t,e))})),t.Vs((function(){i.mi[u]=a.keys()})),Ic.$n(f).next((function(){return a}))}))},t.prototype.yi=function(t,e){var n=this;return Rf(t).get(e).next((function(t){return t?(Mo(t.userId===n.userId),vf(n.Kt,t)):null}))},t.prototype.gi=function(t,e){var n=this;return this.mi[e]?Ic.resolve(this.mi[e]):this.yi(t,e).next((function(t){if(t){var r=t.keys();return n.mi[e]=r,r}return null}))},t.prototype.Vi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Rf(t).ls({index:Hc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Mo(e.batchId>=r),o=vf(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Rf(t).ls({index:Hc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rf(t).os(Hc.userMutationsIndex,n).next((function(t){return t.map((function(t){return vf(e.Kt,t)}))}))},t.prototype.vi=function(t,e){var n=this,r=$c.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Vf(t).ls({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],f=jc(a);if(u===n.userId&&e.path.isEqual(f))return Rf(t).get(c).next((function(t){if(!t)throw Vo();Mo(t.userId===n.userId),o.push(vf(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Si=function(t,e){var n=this,r=new ba(qo),i=[];return e.forEach((function(e){var o=$c.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Vf(t).ls({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=jc(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Ic.$n(i).next((function(){return n.Di(t,r)}))},t.prototype.Ci=function(t,e){var n=this,r=e.path,i=r.length+1,o=$c.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new ba(qo);return Vf(t).ls({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],f=jc(a);s===n.userId&&r.st(f)?f.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Di(t,u)}))},t.prototype.Di=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Rf(t).get(e).next((function(t){if(null===t)throw Vo();Mo(t.userId===n.userId),r.push(vf(n.Kt,t))})))})),Ic.$n(i).next((function(){return r}))},t.prototype.xi=function(t,e){var n=this;return Of(t.bs,this.userId,e).next((function(r){return t.Vs((function(){n.Ni(e.batchId)})),Ic.forEach(r,(function(e){return n.Ii.Fi(t,e)}))}))},t.prototype.Ni=function(t){delete this.mi[t]},t.prototype.Oi=function(t){var e=this;return this.Ri(t).next((function(n){if(!n)return Ic.resolve();var r=IDBKeyRange.lowerBound($c.prefixForUser(e.userId)),i=[];return Vf(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=jc(t[1]);i.push(o)}else r.done()})).next((function(){Mo(0===i.length)}))}))},t.prototype.ki=function(t,e){return Lf(t,this.userId,e)},t.prototype.Mi=function(t){var e=this;return Mf(t).get(this.userId).next((function(t){return t||new zc(e.userId,-1,"")}))},t}();function Lf(t,e,n){var r=$c.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Vf(t).ls({range:o,hs:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Rf(t){return of(t,Hc.store)}function Vf(t){return of(t,$c.store)}function Mf(t){return of(t,zc.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Uf=function(){function t(t){this.Li=t}return t.prototype.next=function(){return this.Li+=2,this.Li},t.$i=function(){return new t(0)},t.Bi=function(){return new t(-1)},t}(),jf=function(){function t(t,e){this.Ii=t,this.Kt=e}return t.prototype.qi=function(t){var e=this;return this.Ui(t).next((function(n){var r=new Uf(n.highestTargetId);return n.highestTargetId=r.next(),e.Qi(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ki=function(t){return this.Ui(t).next((function(t){return as.W(new us(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Wi=function(t){return this.Ui(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.ji=function(t,e,n){var r=this;return this.Ui(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Qi(t,i)}))},t.prototype.Gi=function(t,e){var n=this;return this.zi(t,e).next((function(){return n.Ui(t).next((function(r){return r.targetCount+=1,n.Hi(e,r),n.Qi(t,r)}))}))},t.prototype.Ji=function(t,e){return this.zi(t,e)},t.prototype.Yi=function(t,e){var n=this;return this.Xi(t,e.targetId).next((function(){return Ff(t).delete(e.targetId)})).next((function(){return n.Ui(t)})).next((function(e){return Mo(e.targetCount>0),e.targetCount-=1,n.Qi(t,e)}))},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return Ff(t).ls((function(s,u){var a=yf(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Yi(t,a)))})).next((function(){return Ic.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return Ff(t).ls((function(t,n){var r=yf(n);e(r)}))},t.prototype.Ui=function(t){return qf(t).get(Yc.key).next((function(t){return Mo(null!==t),t}))},t.prototype.Qi=function(t,e){return qf(t).put(Yc.key,e)},t.prototype.zi=function(t,e){return Ff(t).put(gf(this.Kt,e))},t.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tr=function(t){return this.Ui(t).next((function(t){return t.targetCount}))},t.prototype.er=function(t,e){var n=Xs(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ff(t).ls({range:r,index:Wc.queryTargetsIndexName},(function(t,n,r){var o=yf(n);Ys(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nr=function(t,e,n){var r=this,i=[],o=zf(t);return e.forEach((function(e){var s=Vc(e.path);i.push(o.put(new Xc(n,s))),i.push(r.Ii.sr(t,n,e))})),Ic.$n(i)},t.prototype.ir=function(t,e,n){var r=this,i=zf(t);return Ic.forEach(e,(function(e){var o=Vc(e.path);return Ic.$n([i.delete([n,o]),r.Ii.rr(t,n,e)])}))},t.prototype.Xi=function(t,e){var n=zf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.cr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=zf(t),i=xa();return r.ls({range:n,hs:!0},(function(t,e,n){var r=jc(t[1]),o=new ps(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ki=function(t,e){var n=Vc(e.path),r=IDBKeyRange.bound([n],[Ho(n)],!1,!0),i=0;return zf(t).ls({index:Xc.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return Ff(t).get(e).next((function(t){return t?yf(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ff(t){return of(t,Wc.store)}function qf(t){return of(t,Yc.store)}function zf(t){return of(t,Xc.store)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hf(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=qo(n,i);return 0===s?qo(r,o):s}var $f=function(){function t(t){this.ar=t,this.buffer=new ba(Hf),this.ur=0}return t.prototype.hr=function(){return++this.ur},t.prototype.lr=function(t){var e=[t,this.hr()];if(this.buffer.size<this.ar)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Hf(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Gf=function(){function t(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}return t.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},t.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(t.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),t.prototype.Er=function(t){var e=this,n=this.dr?3e5:6e4;Co("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",n,(function(){return kt(e,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:this.wr=null,this.dr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mr(this._r)];case 2:return n.sent(),[3,7];case 3:return Ac(e=n.sent())?(Co("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,xf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Er(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Bf=function(){function t(t,e){this.Ar=t,this.params=e}return t.prototype.Rr=function(t,e){return this.Ar.Pr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yr=function(t,e){var n=this;if(0===e)return Ic.resolve(ss.U);var r=new $f(e);return this.Ar.mn(t,(function(t){return r.lr(t.sequenceNumber)})).next((function(){return n.Ar.gr(t,(function(t){return r.lr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},t.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},t.prototype.pr=function(t,e){var n=this;return-1===this.params.Hs?(Co("LruGarbageCollector","Garbage collection skipped; disabled"),Ic.resolve(Sf)):this.br(t).next((function(r){return r<n.params.Hs?(Co("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Hs),Sf):n.vr(t,e)}))},t.prototype.br=function(t){return this.Ar.br(t)},t.prototype.vr=function(t,e){var n,r,i,o,s,u,a,c=this,f=Date.now();return this.Rr(t,this.params.Js).next((function(e){return e>c.params.Ys?(Co("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Ys+" from "+e),r=c.params.Ys):r=e,o=Date.now(),c.yr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Zi(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.Vr(t,n)})).next((function(t){return a=Date.now(),Oo()<=Zt.DEBUG&&Co("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-f)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-f)+"ms"),Ic.resolve({Ws:!0,js:r,Gs:i,zs:t})}))},t}(),Kf=function(){function t(t,e){this.db=t,this._r=function(t,e){return new Bf(t,e)}(this,e)}return t.prototype.Pr=function(t){var e=this.Sr(t);return this.db.Dr().tr(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Sr=function(t){var e=0;return this.gr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},t.prototype.gr=function(t,e){return this.Cr(t,(function(t,n){return e(n)}))},t.prototype.sr=function(t,e,n){return Jf(t,n)},t.prototype.rr=function(t,e,n){return Jf(t,n)},t.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},t.prototype.Fi=function(t,e){return Jf(t,e)},t.prototype.Nr=function(t,e){return function(t,e){var n=!1;return Mf(t)._s((function(r){return Lf(t,r,e).next((function(t){return t&&(n=!0),Ic.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Vr=function(t,e){var n=this,r=this.db.Or().Fr(),i=[],o=0;return this.Cr(t,(function(s,u){if(u<=e){var a=n.Nr(t,s).next((function(e){if(!e)return o++,r.fi(t,s).next((function(){return r._i(s),zf(t).delete([0,Vc(s.path)])}))}));i.push(a)}})).next((function(){return Ic.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.vs);return this.db.Dr().Ji(t,n)},t.prototype.kr=function(t,e){return Jf(t,e)},t.prototype.Cr=function(t,e){var n,r=zf(t),i=ss.U;return r.ls({index:Xc.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==ss.U&&e(new ps(jc(n)),i),i=u,n=s):i=ss.U})).next((function(){i!==ss.U&&e(new ps(jc(n)),i)}))},t.prototype.br=function(t){return this.db.Or().Mr(t)},t}();function Jf(t,e){return zf(t).put(function(t,e){return new Xc(0,Vc(t.path),e)}(e,t.vs))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Wf=function(){function t(t,e){this.Kt=t,this.Ti=e}return t.prototype.ui=function(t,e,n){return Qf(t).put(Zf(e),n)},t.prototype._i=function(t,e){var n=Qf(t),r=Zf(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Lr(t,r)}))},t.prototype.fi=function(t,e){var n=this;return Qf(t).get(Zf(e)).next((function(t){return n.$r(t)}))},t.prototype.Br=function(t,e){var n=this;return Qf(t).get(Zf(e)).next((function(t){var e=n.$r(t);return e?{li:e,size:Cf(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ea();return this.qr(t,e,(function(t,e){var i=n.$r(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Ur=function(t,e){var n=this,r=Ea(),i=new ya(ps.J);return this.qr(t,e,(function(t,e){var o=n.$r(e);o?(r=r.Ht(t,o),i=i.Ht(t,Cf(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Qr:r,Kr:i}}))},t.prototype.qr=function(t,e,n){if(e.nt())return Ic.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return Qf(t).ls({range:r},(function(t,e,r){for(var s=ps.Tt(t);o&&ps.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.Wr=function(t,e,n){var r=this,i=Na(),o=e.path.length+1,s={};if(n.isEqual(as.min())){var u=e.path.rt();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.rt(),c=hf(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Kc.collectionReadTimeIndex}return Qf(t).ls(s,(function(t,n,s){if(t.length===o){var u=cf(r.Kt,n);e.path.st(u.key.path)?u instanceof Gs&&xu(e,u)&&(i=i.Ht(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.Fr=function(t){return new Xf(this,!!t&&t.jr)},t.prototype.Mr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Yf(t).get(Jc.key).next((function(t){return Mo(!!t),t}))},t.prototype.Lr=function(t,e){return Yf(t).put(Jc.key,e)},t.prototype.$r=function(t){if(t){var e=cf(this.Kt,t);return e instanceof Bs&&e.version.isEqual(as.min())?null:e}return null},t}(),Xf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Gr=e,r.jr=n,r.zr=new kf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return At(e,t),e.prototype.Ei=function(t){var e=this,n=[],r=0,i=new ba((function(t,e){return qo(t.ot(),e.ot())}));return this.oi.forEach((function(o,s){var u=e.zr.get(o);if(s.li){var a=ff(e.Gr.Kt,s.li,e.ai(o));i=i.add(o.path.Z());var c=Cf(a);r+=c-u,n.push(e.Gr.ui(t,o,a))}else if(r-=u,e.jr){var f=ff(e.Gr.Kt,new Bs(o,as.min()),e.ai(o));n.push(e.Gr.ui(t,o,f))}else n.push(e.Gr._i(t,o))})),i.forEach((function(r){n.push(e.Gr.Ti.Us(t,r))})),n.push(this.Gr.updateMetadata(t,r)),Ic.$n(n)},e.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next((function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)}))},e.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next((function(t){var e=t.Qr;return t.Kr.forEach((function(t,e){n.zr.set(t,e)})),e}))},e}(Df);function Yf(t){return of(t,Jc.store)}function Qf(t){return of(t,Kc.store)}function Zf(t){return t.path.rt()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var th=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;Mo(n<r&&n>=0&&r<=11);var o=new Ec("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(qc.store)}(t),function(t){t.createObjectStore(zc.store,{keyPath:zc.keyPath}),t.createObjectStore(Hc.store,{keyPath:Hc.keyPath,autoIncrement:!0}).createIndex(Hc.userMutationsIndex,Hc.userMutationsKeyPath,{unique:!0}),t.createObjectStore($c.store)}(t),eh(t),function(t){t.createObjectStore(Kc.store)}(t));var s=Ic.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Xc.store),t.deleteObjectStore(Wc.store),t.deleteObjectStore(Yc.store)}(t),eh(t)),s=s.next((function(){return function(t){var e=t.store(Yc.store),n=new Yc(0,0,as.min().G(),0);return e.put(Yc.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Hc.store).os().next((function(n){t.deleteObjectStore(Hc.store),t.createObjectStore(Hc.store,{keyPath:Hc.keyPath,autoIncrement:!0}).createIndex(Hc.userMutationsIndex,Hc.userMutationsKeyPath,{unique:!0});var r=e.store(Hc.store),i=n.map((function(t){return r.put(t)}));return Ic.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Zc.store,{keyPath:Zc.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Hr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Jc.store)}(t),i.Jr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Yr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Xr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Kc.store);e.createIndex(Kc.readTimeIndex,Kc.readTimeIndexPath,{unique:!1}),e.createIndex(Kc.collectionReadTimeIndex,Kc.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Zr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(tf.store,{keyPath:tf.keyPath})}(t),function(t){t.createObjectStore(ef.store,{keyPath:ef.keyPath})}(t)}))),s},t.prototype.Jr=function(t){var e=0;return t.store(Kc.store).ls((function(t,n){e+=Cf(n)})).next((function(){var n=new Jc(e);return t.store(Jc.store).put(Jc.key,n)}))},t.prototype.Hr=function(t){var e=this,n=t.store(zc.store),r=t.store(Hc.store);return n.os().next((function(n){return Ic.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(Hc.userMutationsIndex,i).next((function(r){return Ic.forEach(r,(function(r){Mo(r.userId===n.userId);var i=vf(e.Kt,r);return Of(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Yr=function(t){var e=t.store(Xc.store),n=t.store(Kc.store);return t.store(Yc.store).get(Yc.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new fs(n),s=function(t){return[0,Vc(t)]}(o);r.push(e.get(s).next((function(n){return n?Ic.resolve():function(n){return e.put(new Xc(0,Vc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Ic.$n(r)}))}))},t.prototype.Xr=function(t,e){t.createObjectStore(Qc.store,{keyPath:Qc.keyPath});var n=e.store(Qc.store),r=new Ef,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:Vc(i)})}};return e.store(Kc.store).ls({hs:!0},(function(t,e){var n=new fs(t);return i(n.Z())})).next((function(){return e.store($c.store).ls({hs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],jc(n));return i(r.Z())}))}))},t.prototype.Zr=function(t){var e=this,n=t.store(Wc.store);return n.ls((function(t,r){var i=yf(r),o=gf(e.Kt,i);return n.put(o)}))},t}();function eh(t){t.createObjectStore(Xc.store,{keyPath:Xc.keyPath}).createIndex(Xc.documentTargetsIndex,Xc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Wc.store,{keyPath:Wc.keyPath}).createIndex(Wc.queryTargetsIndexName,Wc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yc.store)}var nh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rh=function(){function t(e,n,r,i,o,s,u,a,c,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.eo=o,this.window=s,this.document=u,this.no=c,this.so=f,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!t.Wn())throw new Bo(Go.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new Kf(this,i),this.lo=n+"main",this.Kt=new af(a),this._o=new Tc(this.lo,11,new th(this.Kt)),this.fo=new jf(this.Ii,this.Kt),this.Ti=new Tf,this.wo=function(t,e){return new Wf(t,e)}(this.Kt,this.Ti),this.Eo=new bf,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===f&&Po("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Io().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Bo(Go.FAILED_PRECONDITION,nh);return t.mo(),t.Ao(),t.Ro(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.fo.Wi(e)}))})).then((function(e){t.io=new ss(e,t.no)})).then((function(){t.ro=!0})).catch((function(e){return t._o&&t._o.close(),Promise.reject(e)}))},t.prototype.Po=function(t){var e=this;return this.ho=function(n){return kt(e,void 0,void 0,(function(){return Dt(this,(function(e){return this.Tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.yo=function(t){var e=this;this._o.Zn((function(n){return kt(e,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys((function(){return kt(e,void 0,void 0,(function(){return Dt(this,(function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Io=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return oh(e).put(new Zc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.po(e).next((function(e){e||(t.isPrimary=!1,t.eo.bo((function(){return t.ho(!1)})))}))})).next((function(){return t.vo(e)})).next((function(n){return t.isPrimary&&!n?t.So(e).next((function(){return!1})):!!n&&t.Do(e).next((function(){return!0}))}))})).catch((function(e){if(Ac(e))return Co("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Co("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.eo.bo((function(){return t.ho(e)})),t.isPrimary=e}))},t.prototype.po=function(t){var e=this;return ih(t).get(qc.key).next((function(t){return Ic.resolve(e.Co(t))}))},t.prototype.xo=function(t){return oh(t).delete(this.clientId)},t.prototype.No=function(){return kt(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Dt(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Fo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=of(t,Zc.store);return e.os().next((function(t){var n=i.Oo(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Ic.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.To)for(e=0,n=t;e<n.length;e++)r=n[e],this.To.removeItem(this.ko(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,(function(){return t.Io().then((function(){return t.No()})).then((function(){return t.Ro()}))}))},t.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.vo=function(t){var e=this;return this.so?Ic.resolve(!0):ih(t).get(qc.key).next((function(n){if(null!==n&&e.Fo(n.leaseTimestampMs,5e3)&&!e.Mo(n.ownerId)){if(e.Co(n)&&e.networkEnabled)return!0;if(!e.Co(n)){if(!n.allowTabSynchronization)throw new Bo(Go.FAILED_PRECONDITION,nh);return!1}}return!(!e.networkEnabled||!e.inForeground)||oh(t).os().next((function(t){return void 0===e.Oo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Co("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Lo=function(){return kt(this,void 0,void 0,(function(){var t=this;return Dt(this,(function(e){switch(e.label){case 0:return this.ro=!1,this.$o(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[qc.store,Zc.store],(function(e){var n=new rf(e,ss.U);return t.So(n).next((function(){return t.xo(n)}))}))];case 1:return e.sent(),this._o.close(),this.Uo(),[2]}}))}))},t.prototype.Oo=function(t,e){var n=this;return t.filter((function(t){return n.Fo(t.updateTimeMs,e)&&!n.Mo(t.clientId)}))},t.prototype.Qo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return oh(e).os().next((function(e){return t.Oo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.Ko=function(t){return Pf.Ai(t,this.Kt,this.Ti,this.Ii)},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.Wo=function(){return this.Ti},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;Co("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this._o.runTransaction(t,o,nf,(function(o){return i=new rf(o,r.io?r.io.next():ss.U),"readwrite-primary"===e?r.po(i).next((function(t){return!!t||r.vo(i)})).next((function(e){if(!e)throw Po("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.eo.bo((function(){return r.ho(!1)})),new Bo(Go.FAILED_PRECONDITION,Lc);return n(i)})).next((function(t){return r.Do(i).next((function(){return t}))})):r.Go(i).next((function(){return n(i)}))})).then((function(t){return i.ps(),t}))},t.prototype.Go=function(t){var e=this;return ih(t).get(qc.key).next((function(t){if(null!==t&&e.Fo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Bo(Go.FAILED_PRECONDITION,nh)}))},t.prototype.Do=function(t){var e=new qc(this.clientId,this.allowTabSynchronization,Date.now());return ih(t).put(qc.key,e)},t.Wn=function(){return Tc.Wn()},t.prototype.So=function(t){var e=this,n=ih(t);return n.get(qc.key).next((function(t){return e.Co(t)?(Co("IndexedDbPersistence","Releasing primary lease."),n.delete(qc.key)):Ic.resolve()}))},t.prototype.Fo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Po("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()}))},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},t.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.$o(),e.eo.ys((function(){return e.Lo()}))},this.window.addEventListener("unload",this.oo))},t.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},t.prototype.Mo=function(t){var e;try{var n=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return Co("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Po("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.$o=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){Po("Failed to set zombie client id.",t)}},t.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},t.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ih(t){return of(t,qc.store)}function oh(t){return of(t,Zc.store)}function sh(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var uh=function(){function t(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.vi(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.wo.fi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].xs(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=Ea();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].xs(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.wo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){var i=n.Xo(t,e,r),o=Ia();return i.forEach((function(t,e){e||(e=new Bs(t,as.min())),o=o.Ht(t,e)})),o}))},t.prototype.Wr=function(t,e,n){return function(t){return ps.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):_u(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new ps(e)).next((function(t){var e=Na();return t instanceof Gs&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=Na();return this.Ti.Qs(t,i).next((function(s){return Ic.forEach(s,(function(s){var u=function(t,e){return new du(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,u,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.wo.Wr(t,e,n).next((function(n){return r=n,o.Ho.Ci(t,e)})).next((function(e){return i=e,o.ic(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,f=Zu(a,r.get(c),0,o.Ss);r=f instanceof Gs?r.Ht(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){xu(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=xa(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof ia&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.wo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Gs&&(c=c.Ht(t,e))})),c}))},t}(),ah=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=xa(),i=xa(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ch=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.Wr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(as.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(o){var s=i.lc(e,o);return(gu(e)||mu(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(Oo()<=Zt.DEBUG&&Co("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Au(e)),i.uc.Wr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new ba(ku(t));return e.forEach((function(e,r){r instanceof Gs&&xu(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return Oo()<=Zt.DEBUG&&Co("QueryEngine","Using full collection scan to execute query:",Au(e)),this.uc.Wr(t,e,as.min())},t}(),fh=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new ya(qo),this.wc=new kf((function(t){return Xs(t)}),Ys),this.Ec=as.min(),this.Ho=t.Ko(n),this.Tc=t.Or(),this.fo=t.Dr(),this.Ic=new uh(this.Tc,this.Ho,this.persistence.Wo()),this.Eo=t.jo(),this.fc.ac(this.Ic)}return t.prototype.mr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.pr(n,e.dc)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hh(t,e,n,r){return new fh(t,e,n,r)}function lh(t,e){return kt(this,void 0,void 0,(function(){var n,r,i,o;return Dt(this,(function(s){switch(s.label){case 0:return n=Uo(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.bi(t).next((function(s){return o=s,r=n.persistence.Ko(e),i=new uh(n.Tc,r,n.persistence.Wo()),r.bi(t)})).next((function(e){for(var n=[],r=[],s=xa(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var f=0,h=c.mutations;f<h.length;f++){var l=h[f];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function ph(t,e){var n=Uo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Fr({jr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ic.resolve();return o.forEach((function(t){s=s.next((function(){return r.fi(e,t)})).next((function(e){var o=e,s=n.Os.get(t);Mo(null!==s),(!o||o.version.u(s)<0)&&(o=i.Ds(t,o,n))&&r.ui(o,n.Fs)}))})),s.next((function(){return t.Ho.xi(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.Oi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function dh(t){var e=Uo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.fo.Ki(t)}))}function vh(t,e){var n=Uo(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Fr({jr:!0});i=n.dc;var s=[];e.Oe.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.fo.ir(t,e.Ke,o).next((function(){return n.fo.nr(t,e.Ue,o)})));var a=e.resumeToken;if(a.o()>0){var c=u.$t(a,r).Lt(t.vs);i=i.Ht(o,c),function(t,e,n){return Mo(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(u,c,e)&&s.push(n.fo.Ji(t,c))}}}));var u=Ia();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.Ii.kr(t,r))})),s.push(function(t,e,n,r,i){var o=xa();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ia();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof Bs&&s.version.isEqual(as.min())?(e._i(n,a),o=o.Ht(n,s)):null==u||s.version.u(u.version)>0||0===s.version.u(u.version)&&u.hasPendingWrites?(e.ui(s,a),o=o.Ht(n,s)):Co("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}(t,o,e.Me,r,void 0).next((function(t){u=t}))),!r.isEqual(as.min())){var a=n.fo.Ki(t).next((function(e){return n.fo.ji(t,t.vs,r)}));s.push(a)}return Ic.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,u)}))})).then((function(t){return n.dc=i,t}))}function yh(t,e){var n=Uo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.Vi(t,e)}))}function gh(t,e){var n=Uo(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.fo.er(t,e).next((function(i){return i?(r=i,Ic.resolve(r)):n.fo.qi(t).next((function(i){return r=new Ou(e,i,0,t.vs),n.fo.Gi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function mh(t,e,n){return kt(this,void 0,void 0,(function(){var r,i,o,s;return Dt(this,(function(u){switch(u.label){case 0:r=Uo(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ii.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Ac(s=u.sent()))throw s;return Co("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function bh(t,e,n){var r=Uo(t),i=as.min(),o=xa();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Uo(t),i=r.wc.get(n);return void 0!==i?Ic.resolve(r.dc.get(i)):r.fo.er(e,n)}(r,t,Eu(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.fo.cr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.Wr(t,e,n?i:as.min(),n?o:xa())})).next((function(t){return{documents:t,Pc:o}}))}))}function wh(t,e){var n=Uo(t),r=Uo(n.fo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function _h(t){var e=Uo(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Uo(t),i=Ia(),o=hf(n),s=Qf(e),u=IDBKeyRange.lowerBound(o,!0);return s.ls({index:Kc.readTimeIndex,range:u},(function(t,e){var n=cf(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{zo:i,readTime:lf(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.zo,r=t.readTime;return e.Ec=r,n}))}function Ih(t){return kt(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){return[2,(e=Uo(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Qf(t),n=as.min();return e.ls({index:Kc.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=lf(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Eh=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ms=function(t,e){return Ic.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:Wa(n.createTime)}),Ic.resolve()},t.prototype.$s=function(t,e){return Ic.resolve(this.vc.get(e))},t.prototype.Bs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:mf(t.bundledQuery),readTime:Wa(t.readTime)}}(e)),Ic.resolve()},t}(),Th=function(){function t(){this.Sc=new ba(Nh.Dc),this.Cc=new ba(Nh.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.sr=function(t,e){var n=new Nh(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.sr(t,e)}))},t.prototype.rr=function(t,e){this.Fc(new Nh(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.rr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new ps(new fs([])),r=new Nh(n,t),i=new Nh(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new ps(new fs([])),n=new Nh(e,t),r=new Nh(e,t+1),i=xa();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ki=function(t){var e=new Nh(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),Nh=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return ps.J(t.key,e.key)||qo(t.$c,e.$c)},t.xc=function(t,e){return qo(t.$c,e.$c)||ps.J(t.key,e.key)},t}(),Sh=function(){function t(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new ba(Nh.Dc)}return t.prototype.Ri=function(t){return Ic.resolve(0===this.Ho.length)},t.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++,this.Ho.length>0&&this.Ho[this.Ho.length-1];var o=new sf(i,e,n,r);this.Ho.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.qc=this.qc.add(new Nh(a.key,i)),this.Ti.Us(t,a.key.path.Z())}return Ic.resolve(o)},t.prototype.yi=function(t,e){return Ic.resolve(this.Uc(e))},t.prototype.Vi=function(t,e){var n=e+1,r=this.Qc(n),i=r<0?0:r;return Ic.resolve(this.Ho.length>i?this.Ho[i]:null)},t.prototype.pi=function(){return Ic.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.bi=function(t){return Ic.resolve(this.Ho.slice())},t.prototype.vi=function(t,e){var n=this,r=new Nh(e,0),i=new Nh(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),Ic.resolve(o)},t.prototype.Si=function(t,e){var n=this,r=new ba(qo);return e.forEach((function(t){var e=new Nh(t,0),i=new Nh(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),Ic.resolve(this.Kc(r))},t.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,i=n;ps.Et(i)||(i=i.child(""));var o=new Nh(new ps(i),0),s=new ba(qo);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),Ic.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.xi=function(t,e){var n=this;Mo(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return Ic.forEach(e.mutations,(function(i){var o=new Nh(i.key,e.batchId);return r=r.delete(o),n.Ii.Fi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Ni=function(t){},t.prototype.ki=function(t,e){var n=new Nh(e,0),r=this.qc.Pe(n);return Ic.resolve(e.isEqual(r&&r.key))},t.prototype.Oi=function(t){return this.Ho.length,Ic.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),Ah=function(){function t(t,e){this.Ti=t,this.jc=e,this.docs=new ya(ps.J),this.size=0}return t.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{li:e,size:s,readTime:n}),this.size+=s-o,this.Ti.Us(t,r.path.Z())},t.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.fi=function(t,e){var n=this.docs.get(e);return Ic.resolve(n?n.li:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ea();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)})),Ic.resolve(r)},t.prototype.Wr=function(t,e,n){for(var r=Na(),i=new ps(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),u=s.key,a=s.value,c=a.li,f=a.readTime;if(!e.path.st(u.path))break;f.u(n)<=0||c instanceof Gs&&xu(e,c)&&(r=r.Ht(c.key,c))}return Ic.resolve(r)},t.prototype.Gc=function(t,e){return Ic.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Fr=function(t){return new xh(this)},t.prototype.Mr=function(t){return Ic.resolve(this.size)},t}(),xh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Gr=e,n}return At(e,t),e.prototype.Ei=function(t){var e=this,n=[];return this.oi.forEach((function(r,i){i&&i.li?n.push(e.Gr.ui(t,i.li,e.ai(r))):e.Gr._i(r)})),Ic.$n(n)},e.prototype.di=function(t,e){return this.Gr.fi(t,e)},e.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},e}(Df),kh=function(){function t(t){this.persistence=t,this.zc=new kf((function(t){return Xs(t)}),Ys),this.lastRemoteSnapshotVersion=as.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new Th,this.targetCount=0,this.Yc=Uf.$i()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),Ic.resolve()},t.prototype.Ki=function(t){return Ic.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Wi=function(t){return Ic.resolve(this.Hc)},t.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),Ic.resolve(this.highestTargetId)},t.prototype.ji=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),Ic.resolve()},t.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new Uf(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,Ic.resolve()},t.prototype.Ji=function(t,e){return this.zi(e),Ic.resolve()},t.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,Ic.resolve()},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.zc.delete(s),o.push(r.Xi(t,u.targetId)),i++)})),Ic.$n(o).next((function(){return i}))},t.prototype.tr=function(t){return Ic.resolve(this.targetCount)},t.prototype.er=function(t,e){var n=this.zc.get(e)||null;return Ic.resolve(n)},t.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),Ic.resolve()},t.prototype.ir=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.Ii,i=[];return r&&e.forEach((function(e){i.push(r.Fi(t,e))})),Ic.$n(i)},t.prototype.Xi=function(t,e){return this.Jc.kc(e),Ic.resolve()},t.prototype.cr=function(t,e){var n=this.Jc.Lc(e);return Ic.resolve(n)},t.prototype.ki=function(t,e){return Ic.resolve(this.Jc.ki(e))},t}(),Dh=function(){function t(t,e){var n=this;this.Xc={},this.io=new ss(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new kh(this),this.Ti=new If,this.wo=function(t,e){return new Ah(t,(function(t){return n.Ii.Zc(t)}))}(this.Ti),this.Kt=new af(e),this.Eo=new Eh(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Lo=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.yo=function(){},t.prototype.Vo=function(){},t.prototype.Wo=function(){return this.Ti},t.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new Sh(this.Ti,this.Ii),this.Xc[t.R()]=e),e},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;Co("MemoryPersistence","Starting transaction:",t);var i=new Oh(this.io.next());return this.Ii.ta(),n(i).next((function(t){return r.Ii.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.ps(),t}))},t.prototype.na=function(t,e){return Ic.Bn(Object.values(this.Xc).map((function(n){return function(){return n.ki(t,e)}})))},t}(),Oh=function(t){function e(e){var n=this;return(n=t.call(this)||this).vs=e,n}return At(e,t),e}(Rc),Ch=function(){function t(t){this.persistence=t,this.sa=new Th,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw Vo()},enumerable:!1,configurable:!0}),t.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),Ic.resolve()},t.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),Ic.resolve()},t.prototype.Fi=function(t,e){return this.oa.add(e.toString()),Ic.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Dr();return r.cr(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Yi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.Or().Fr();return Ic.forEach(this.oa,(function(r){var i=ps.ft(r);return e.ca(t,i).next((function(t){t||n._i(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return Ic.Bn([function(){return Ic.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ph(t,e){return"firestore_clients_"+t+"_"+e}function Lh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function Rh(t,e){return"firestore_targets_"+t+"_"+e}var Vh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Bo(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Po("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Mh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Bo(r.error.code,r.error.message)),i?new t(e,r.state,o):(Po("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Uh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Da(),s=0;i&&s<r.activeTargetIds.length;++s)i=As(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Po("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),jh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Po("SharedClientState","Failed to parse online state: "+e),null)},t}(),Fh=function(){function t(){this.activeTargetIds=Da()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),qh=function(){function t(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new ya(qo),this.Tr=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=Ph(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new Fh),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return kt(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,f,h=this;return Dt(this,(function(l){switch(l.label){case 0:return[4,this.fa.Qo()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(Ph(this.persistenceKey,r)))&&(o=Uh.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(u=this.ba(s))&&this.va(u),a=0,c=this.Ia;a<c.length;a++)f=c[a],this.Ea(f);return this.Ia=[],this.window.addEventListener("unload",(function(){return h.Lo()})),this.Tr=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(Rh(this.persistenceKey,t));if(n){var r=Mh.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(Rh(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.Lo=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Co("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Co("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Co("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Co("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void Po("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo((function(){return kt(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Dt(this,(function(u){if(this.Tr){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(s=function(t){var e=ss.U;if(null!=t)try{var n=JSON.parse(t);Mo("number"==typeof n),e=n}catch(t){Po("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ss.U&&this.L(s);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new Vh(this.currentUser,t,e,n),i=Lh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=Lh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){var e={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(e))},t.prototype.Ua=function(t,e,n){var r=Rh(this.persistenceKey,t),i=new Mh(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return Uh.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Vh.aa(new ts(i),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return Mh.aa(r,e)},t.prototype.ba=function(t){return jh.aa(t)},t.prototype.Xa=function(t){return kt(this,void 0,void 0,(function(){return Dt(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(Co("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.fa.iu(s,u).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=Da();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),zh=function(){function t(){this.ru=new Fh,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new Fh,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.Lo=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),Hh=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.Lo=function(){},t}(),$h=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.Lo=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){Co("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){Co("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Gh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Bh=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Kh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return At(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new ko;s.listenOnce(To.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Eo.NO_ERROR:var e=s.getResponseJson();Co("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Eo.TIMEOUT:Co("Connection",'RPC "'+t+'" timed out'),o(new Bo(Go.DEADLINE_EXCEEDED,"Request time out"));break;case Eo.HTTP_ERROR:var n=s.getStatus();if(Co("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Go).indexOf(e)>=0?e:Go.UNKNOWN}(r.status);o(new Bo(u,r.message))}else o(new Bo(Go.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Bo(Go.UNAVAILABLE,"Connection failed."));break;default:Vo()}}finally{Co("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.xu=function(t,e){var n,r=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new mo,o=br(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())||"object"==typeof navigator&&"ReactNative"===navigator.product||Mt().indexOf("Electron/")>=0||function(){var t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||Mt().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Co("Connection","Creating WebChannel: "+u,s);var a=i.createWebChannel(u,s),c=!1,f=!1,h=new Bh({du:function(t){f?Co("Connection","Not sending because WebChannel is closed:",t):(c||(Co("Connection","Opening WebChannel transport."),a.open(),c=!0),Co("Connection","WebChannel sending:",t),a.send(t))},wu:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,xo.EventType.OPEN,(function(){f||Co("Connection","WebChannel transport opened.")})),l(a,xo.EventType.CLOSE,(function(){f||(f=!0,Co("Connection","WebChannel transport closed"),h.Pu())})),l(a,xo.EventType.ERROR,(function(t){f||(f=!0,Lo("Connection","WebChannel transport errored:",t),h.Pu(new Bo(Go.UNAVAILABLE,"The operation could not be completed")))})),l(a,xo.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];Mo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Co("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=ca[t];if(void 0!==e)return va(e)}(o),u=i.message;void 0===s&&(s=Go.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),f=!0,h.Pu(new Bo(s,u)),a.close()}else Co("Connection","WebChannel received:",n),h.yu(n)}})),l(o,No.STAT_EVENT,(function(t){t.stat===So?Co("Connection","Detected buffering proxy"):t.stat===Ao&&Co("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Ru()}),0),h},e}(function(){function t(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);Co("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return Co("RestConnection","Received: ",t),t}),(function(e){throw Lo("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.5",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){var n=Gh[t];return this.Vu+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jh(){return"undefined"!=typeof window?window:null}function Wh(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xh(t){return new Ga(t,!0)}var Yh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&Co("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),Qh=function(){function t(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new Yh(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return kt(this,void 0,void 0,(function(){return Dt(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return kt(this,void 0,void 0,(function(){return Dt(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return kt(this,void 0,void 0,(function(){return Dt(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===Go.RESOURCE_EXHAUSTED?(Po(e.toString()),Po("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===Go.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new Bo(Go.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return kt(t,void 0,void 0,(function(){return Dt(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return Co("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.eo.ys((function(){return e.ju===t?n():(Co("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Zh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return At(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Vo()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(Mo(void 0===e||"string"==typeof e),$o.fromBase64String(e||"")):(Mo(void 0===e||e instanceof Uint8Array),$o.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Go.UNKNOWN:va(t.code);return new Bo(e,t.message||"")}(u);n=new Ua(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Za(t,r.document.name),o=Wa(r.document.updateTime);var u=new qs({mapValue:{fields:r.document.fields}}),a=(s=new Gs(i,o,u,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new Va(a,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Za(t,r.document),o=r.readTime?Wa(r.readTime):as.min(),u=new Bs(i,o),s=r.removedTargetIds||[],n=new Va([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Za(t,r.document),o=r.removedTargetIds||[],n=new Va([],o,i,null);else{if(!("filter"in e))return Vo();e.filter;var f=e.filter;f.targetId,r=f.count||0,i=new pa(r),o=f.targetId,n=new Ma(o,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return as.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?as.min():e.readTime?Wa(e.readTime):as.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=nc(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Qs(r)?{documents:uc(t,r)}:{query:ac(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Ka(t,e.resumeToken):e.Mt.u(as.min())>0&&(n.readTime=Ba(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vo()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(this.Kt,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=nc(this.Kt),e.removeTarget=t,this.eh(e)},e}(Qh),tl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return At(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(Mo(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(Mo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Wa(t.updateTime):Wa(e);n.isEqual(as.min())&&(n=Wa(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ju(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Wa(t.commitTime);return this.listener.wh(n,e)}return Mo(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=nc(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return oc(e.Kt,t)}))};this.eh(n)},e}(Qh),el=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return At(e,t),e.prototype.mh=function(){if(this.Ih)throw new Bo(Go.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===Go.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===Go.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),nl=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(Po(e),this.Ph=!1):Co("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),rl=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return kt(o,void 0,void 0,(function(){return Dt(this,(function(t){switch(t.label){case 0:return ll(this)?(Co("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return kt(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:return(e=Uo(t)).Fh.add(4),[4,ol(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,il(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new nl(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function il(t){return kt(this,void 0,void 0,(function(){var e,n;return Dt(this,(function(r){switch(r.label){case 0:if(!ll(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ol(t){return kt(this,void 0,void 0,(function(){var e,n;return Dt(this,(function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function sl(t,e){var n=Uo(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),hl(n)?fl(n):Al(n).Ju()&&al(n,e))}function ul(t,e){var n=Uo(t),r=Al(n);n.Nh.delete(e),r.Ju()&&cl(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():ll(n)&&n.Mh.set("Unknown"))}function al(t,e){t.Lh.cn(e.targetId),Al(t).hh(e)}function cl(t,e){t.Lh.cn(e),Al(t).lh(e)}function fl(t){t.Lh=new Fa({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),Al(t).start(),t.Mh.yh()}function hl(t){return ll(t)&&!Al(t).Hu()&&t.Nh.size>0}function ll(t){return 0===Uo(t).Fh.size}function pl(t){t.Lh=void 0}function dl(t){return kt(this,void 0,void 0,(function(){return Dt(this,(function(e){return t.Nh.forEach((function(e,n){al(t,e)})),[2]}))}))}function vl(t,e){return kt(this,void 0,void 0,(function(){return Dt(this,(function(n){return pl(t),hl(t)?(t.Mh.ph(e),fl(t)):t.Mh.set("Unknown"),[2]}))}))}function yl(t,e,n){return kt(this,void 0,void 0,(function(){var r,i,o;return Dt(this,(function(s){switch(s.label){case 0:if(t.Mh.set("Online"),!(e instanceof Ua&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return kt(this,void 0,void 0,(function(){var n,r,i,o;return Dt(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.Nh.has(o)?[4,t.Ch.$h(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Co("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,gl(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Va?t.Lh.wn(e):e instanceof Ma?t.Lh.yn(e):t.Lh.In(e),n.isEqual(as.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,dh(t.Sh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t($o.h,n.Mt)),cl(t,e);var r=new Ou(n.target,e,1,n.sequenceNumber);al(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Co("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,gl(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function gl(t,e,n){return kt(this,void 0,void 0,(function(){var r=this;return Dt(this,(function(i){switch(i.label){case 0:if(!Ac(e))throw e;return t.Fh.add(1),[4,ol(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return dh(t.Sh)}),t.fs.bo((function(){return kt(r,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return Co("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,il(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function ml(t,e){return e().catch((function(n){return gl(t,n,e)}))}function bl(t){return kt(this,void 0,void 0,(function(){var e,n,r,i,o;return Dt(this,(function(s){switch(s.label){case 0:e=Uo(t),n=xl(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ll(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,yh(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=xl(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,gl(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return wl(e)&&_l(e),[2]}}))}))}function wl(t){return ll(t)&&!xl(t).Hu()&&t.xh.length>0}function _l(t){xl(t).start()}function Il(t){return kt(this,void 0,void 0,(function(){return Dt(this,(function(e){return xl(t).Th(),[2]}))}))}function El(t){return kt(this,void 0,void 0,(function(){var e,n,r,i;return Dt(this,(function(o){for(e=xl(t),n=0,r=t.xh;n<r.length;n++)i=r[n],e.dh(i.mutations);return[2]}))}))}function Tl(t,e,n){return kt(this,void 0,void 0,(function(){var r,i;return Dt(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=uf.from(r,e,n),[4,ml(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,bl(t)];case 2:return o.sent(),[2]}}))}))}function Nl(t,e){return kt(this,void 0,void 0,(function(){return Dt(this,(function(n){switch(n.label){case 0:return e&&xl(t).fh?[4,function(t,e){return kt(this,void 0,void 0,(function(){var n,r;return Dt(this,(function(i){switch(i.label){case 0:return da(r=e.code)&&r!==Go.ABORTED?(n=t.xh.shift(),xl(t).Xu(),[4,ml(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,bl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return wl(t)&&_l(t),[2]}}))}))}function Sl(t,e){return kt(this,void 0,void 0,(function(){var n;return Dt(this,(function(r){switch(r.label){case 0:return n=Uo(t),e?(n.Fh.delete(2),[4,il(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,ol(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Al(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Uo(t);return r.mh(),new Zh(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:dl.bind(null,t),Iu:vl.bind(null,t),uh:yl.bind(null,t)}),t.Oh.push((function(n){return kt(e,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),hl(t)?fl(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),pl(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function xl(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=Uo(t);return r.mh(),new tl(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:Il.bind(null,t),Iu:Nl.bind(null,t),Eh:El.bind(null,t),wh:Tl.bind(null,t)}),t.Oh.push((function(n){return kt(e,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,bl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(Co("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var kl=function(){this.Wh=void 0,this.listeners=[]},Dl=function(){this.queries=new kf((function(t){return Su(t)}),Nu),this.onlineState="Unknown",this.jh=new Set};function Ol(t,e){return kt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return Dt(this,(function(c){switch(c.label){case 0:if(n=Uo(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new kl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Gh(r)];case 2:return s.Wh=c.sent(),[3,4];case 3:return u=c.sent(),a=Pc(u,"Initialization of query '"+Au(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.Wh&&e.Hh(o.Wh)&&Rl(n),[2]}}))}))}function Cl(t,e){return kt(this,void 0,void 0,(function(){var n,r,i,o,s;return Dt(this,(function(u){return n=Uo(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function Pl(t,e){for(var n=Uo(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,f=a.listeners;c<f.length;c++)f[c].Hh(s)&&(r=!0);a.Wh=s}}r&&Rl(n)}function Ll(t,e,n){var r=Uo(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Rl(t){t.jh.forEach((function(t){t.next()}))}var Vl=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Pa(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){if(t.docChanges.length>0)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=Pa.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),Ml=function(t){this.key=t},Ul=function(t){this.key=t},jl=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=xa(),this.Ce=xa(),this.ll=ku(t),this._l=new Oa(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new Ca,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,u=!1,a=gu(this.query)&&i.size===this.query.limit?i.last():null,c=mu(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var f=i.get(t),h=e instanceof Gs?e:null;h&&(h=xu(n.query,h)?h:null);var l=!!f&&n.Ce.has(f.key),p=!!h&&(h.bt||n.Ce.has(h.key)&&h.hasCommittedMutations),d=!1;f&&h?f.data().isEqual(h.data())?l!==p&&(r.track({type:3,doc:h}),d=!0):n.El(f,h)||(r.track({type:2,doc:h}),d=!0,(a&&n.ll(h,a)>0||c&&n.ll(h,c)<0)&&(u=!0)):!f&&h?(r.track({type:0,doc:h}),d=!0):f&&!h&&(r.track({type:1,doc:f}),d=!0,(a||c)&&(u=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),gu(this.query)||mu(this.query))for(;s.size>this.query.limit;){var f=gu(this.query)?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{_l:s,wl:r,_c:u,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ei=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vo()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],u=0===this.hl.size&&this.qe?1:0,a=u!==this.ul;return this.ul=u,0!==o.length||a?{snapshot:new Pa(this.query,t._l,i,o,t.Ce,0===u,a,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new Ca,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=xa(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new Ul(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new Ml(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=xa();var e=this.dl(t.documents);return this.Ei(e,!0)},t.prototype.Pl=function(){return Pa.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),Fl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ql=function(t){this.key=t,this.yl=!1},zl=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new kf((function(t){return Su(t)}),Nu),this.Dl=new Map,this.Cl=[],this.xl=new ya(ps.J),this.Nl=new Map,this.Fl=new Th,this.Ol={},this.kl=new Map,this.Ml=Uf.Bi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hl(t,e){return kt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Dt(this,(function(a){switch(a.label){case 0:return n=mp(t),(o=n.Sl.get(e))?(r=o.targetId,n.pl.ka(r),i=o.view.Pl(),[3,4]):[3,1];case 1:return[4,gh(n.Sh,Eu(e))];case 2:return s=a.sent(),u=n.pl.ka(s.targetId),r=s.targetId,[4,$l(n,e,r,"current"===u)];case 3:i=a.sent(),n.$l&&sl(n.gl,s),a.label=4;case 4:return[2,i]}}))}))}function $l(t,e,n,r){return kt(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Dt(this,(function(f){switch(f.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return kt(this,void 0,void 0,(function(){var i,o,s;return Dt(this,(function(u){switch(u.label){case 0:return(i=e.view.dl(n))._c?[4,bh(t.Sh,e.query,!1).then((function(t){var n=t.documents;return e.view.dl(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.Oe.get(e.targetId),s=e.view.Ei(i,t.$l,o),[2,(rp(t,e.targetId,s.ml),s.snapshot)]}}))}))}(t,e,n,r)},[4,bh(t.Sh,e,!0)];case 1:return i=f.sent(),o=new jl(e,i.Pc),s=o.dl(i.documents),u=Ra.Be(n,r&&"Offline"!==t.onlineState),a=o.Ei(s,t.$l,u),rp(t,n,a.ml),c=new Fl(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),a.snapshot)]}}))}))}function Gl(t,e){return kt(this,void 0,void 0,(function(){var n,r,i;return Dt(this,(function(o){switch(o.label){case 0:return n=Uo(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!Nu(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,mh(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),ul(n.gl,r.targetId),ep(n,r.targetId)})).catch(xf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ep(n,r.targetId),[4,mh(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Bl(t,e,n){return kt(this,void 0,void 0,(function(){var r,i,o,s;return Dt(this,(function(u){switch(u.label){case 0:r=bp(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=Uo(t),i=us.now(),o=e.reduce((function(t,e){return t.add(e.key)}),xa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],f=ta(c,n.get(c.key));null!=f&&s.push(new ia(c.key,f,Hs(f.proto.mapValue),Wu.exists(!0)))}return r.Ho.Pi(t,i,s,e)}))})).then((function(t){var e=t.Ns(n);return{batchId:t.batchId,oi:e}}))}(r.Sh,e)];case 2:return i=u.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new ya(qo)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,sp(r,i.oi)];case 3:return u.sent(),[4,bl(r.gl)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=Pc(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Kl(t,e){return kt(this,void 0,void 0,(function(){var n,r;return Dt(this,(function(i){switch(i.label){case 0:n=Uo(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,vh(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach((function(t,e){var r=n.Nl.get(e);r&&(Mo(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?Mo(r.yl):t.Ke.size>0&&(Mo(r.yl),r.yl=!1))})),[4,sp(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,xf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Jl(t,e,n){var r=Uo(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Uo(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&Rl(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function Wl(t,e,n){return kt(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Dt(this,(function(c){switch(c.label){case 0:return(r=Uo(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(s=(s=new ya(ps.J)).Ht(o,new Bs(o,as.min())),u=xa().add(o),a=new La(as.min(),new Map,new ba(qo),s,u),[4,Kl(r,a)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),op(r),[3,4];case 2:return[4,mh(r.Sh,e,!1).then((function(){return ep(r,e,n)})).catch(xf)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Xl(t,e){return kt(this,void 0,void 0,(function(){var n,r,i;return Dt(this,(function(o){switch(o.label){case 0:n=Uo(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,ph(n.Sh,e)];case 2:return i=o.sent(),tp(n,r,null),Zl(n,r),n.pl.Fa(r,"acknowledged"),[4,sp(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,xf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Yl(t,e,n){return kt(this,void 0,void 0,(function(){var r,i;return Dt(this,(function(o){switch(o.label){case 0:r=Uo(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Uo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.yi(t,e).next((function(e){return Mo(null!==e),r=e.keys(),n.Ho.xi(t,e)})).next((function(){return n.Ho.Oi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),tp(r,e,n),Zl(r,e),r.pl.Fa(e,"rejected",n),[4,sp(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,xf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ql(t,e){return kt(this,void 0,void 0,(function(){var n,r,i,o,s;return Dt(this,(function(u){switch(u.label){case 0:ll((n=Uo(t)).gl)||Co("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=Uo(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.pi(t)}))}(n.Sh)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=u.sent(),s=Pc(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Zl(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function tp(t,e,n){var r=Uo(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function ep(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.ki(e)||np(t,e)}))}function np(t,e){var n=t.xl.get(e);null!==n&&(ul(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),op(t))}function rp(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Ml?(t.Fl.sr(o.key,e),ip(t,o)):o instanceof Ul?(Co("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.rr(o.key,e),t.Fl.ki(o.key)||np(t,o.key)):Vo()}}function ip(t,e){var n=e.key;t.xl.get(n)||(Co("SyncEngine","New document in limbo: "+n),t.Cl.push(n),op(t))}function op(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new ql(e)),t.xl=t.xl.Ht(e,n),sl(t.gl,new Ou(Eu(yu(e.path)),n,2,ss.U))}}function sp(t,e,n){return kt(this,void 0,void 0,(function(){var r,i,o,s;return Dt(this,(function(u){switch(u.label){case 0:return r=Uo(t),i=[],o=[],s=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,u){s.push(r.Bl(u,e,n).then((function(t){if(t){r.$l&&r.pl.qa(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ah.cc(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vl.uh(i),[4,function(t,e){return kt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,f;return Dt(this,(function(h){switch(h.label){case 0:n=Uo(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Ic.forEach(e,(function(e){return Ic.forEach(e.rc,(function(r){return n.persistence.Ii.sr(t,e.targetId,r)})).next((function(){return Ic.forEach(e.oc,(function(r){return n.persistence.Ii.rr(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Ac(r=h.sent()))throw r;return Co("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.dc.get(u),c=a.Mt,f=a.Bt(c),n.dc=n.dc.Ht(u,f));return[2]}}))}))}(r.Sh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function up(t,e){return kt(this,void 0,void 0,(function(){var n,r;return Dt(this,(function(i){switch(i.label){case 0:return(n=Uo(t)).currentUser.isEqual(e)?[3,3]:(Co("SyncEngine","User change. New user:",e.R()),[4,lh(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new Bo(Go.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,sp(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ap(t,e){var n=Uo(t),r=n.Nl.get(e);if(r&&r.yl)return xa().add(r.key);var i=xa(),o=n.Dl.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Sl.get(a);i=i.ye(c.view.fl)}return i}function cp(t,e){return kt(this,void 0,void 0,(function(){var n,r,i;return Dt(this,(function(o){switch(o.label){case 0:return[4,bh((n=Uo(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&rp(n,e.targetId,i.ml),i)]}}))}))}function fp(t){return kt(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){return[2,_h((e=Uo(t)).Sh).then((function(t){return sp(e,t)}))]}))}))}function hp(t,e,n,r){return kt(this,void 0,void 0,(function(){var i,o;return Dt(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Uo(t),r=Uo(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.gi(t,e).next((function(e){return e?n.Ic.Zo(t,e):Ic.resolve(null)}))}))}((i=Uo(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,bl(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(tp(i,e,r||null),Zl(i,e),function(t,e){Uo(Uo(t).Ho).Ni(e)}(i.Sh,e)):Vo(),s.label=4;case 4:return[4,sp(i,o)];case 5:return s.sent(),[3,7];case 6:Co("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function lp(t,e){return kt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return Dt(this,(function(f){switch(f.label){case 0:return mp(n=Uo(t)),bp(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,pp(n,r.rt())]);case 1:return i=f.sent(),n.Ll=!0,[4,Sl(n.gl,!0)];case 2:for(f.sent(),o=0,s=i;o<s.length;o++)u=s[o],sl(n.gl,u);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(a=[],c=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?a.push(e):c=c.then((function(){return ep(n,e),mh(n.Sh,e,!0)})),ul(n.gl,e)})),[4,c]);case 4:return f.sent(),[4,pp(n,a)];case 5:return f.sent(),function(t){var e=Uo(t);e.Nl.forEach((function(t,n){ul(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new ya(ps.J)}(n),n.Ll=!1,[4,Sl(n.gl,!1)];case 6:f.sent(),f.label=7;case 7:return[2]}}))}))}function pp(t,e,n){return kt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,f,h,l,p,d,v;return Dt(this,(function(y){switch(y.label){case 0:n=Uo(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.Dl.get(u))&&0!==c.length?[4,gh(n.Sh,Eu(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),f=0,h=c,y.label=3;case 3:return f<h.length?(l=h[f],p=n.Sl.get(l),[4,cp(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,wh(n.Sh,u)];case 8:return v=y.sent(),[4,gh(n.Sh,v)];case 9:return a=y.sent(),[4,$l(n,dp(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function dp(t){return vu(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vp(t){var e=Uo(t);return Uo(Uo(e.Sh).persistence).Qo()}function yp(t,e,n,r){return kt(this,void 0,void 0,(function(){var i,o,s;return Dt(this,(function(u){switch(u.label){case 0:return(i=Uo(t)).Ll?(Co("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,_h(i.Sh)];case 3:return o=u.sent(),s=La.$e(e,"current"===n),[4,sp(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,mh(i.Sh,e,!0)];case 6:return u.sent(),ep(i,e,r),[3,8];case 7:Vo(),u.label=8;case 8:return[2]}}))}))}function gp(t,e,n){return kt(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,f,h,l;return Dt(this,(function(p){switch(p.label){case 0:if(!(r=mp(t)).Ll)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Dl.has(s)?(Co("SyncEngine","Adding an already active target "+s),[3,5]):[4,wh(r.Sh,s)]):[3,6];case 2:return u=p.sent(),[4,gh(r.Sh,u)];case 3:return a=p.sent(),[4,$l(r,dp(u),a.targetId,!1)];case 4:p.sent(),sl(r.gl,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Dt(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,mh(r.Sh,t,!1).then((function(){ul(r.gl,t),ep(r,t)})).catch(xf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,h=n,p.label=7;case 7:return f<h.length?(l=h[f],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function mp(t){var e=Uo(t);return e.gl.Ch.Bh=Kl.bind(null,e),e.gl.Ch.Sn=ap.bind(null,e),e.gl.Ch.$h=Wl.bind(null,e),e.vl.uh=Pl.bind(null,e.Vl),e.vl.ql=Ll.bind(null,e.Vl),e}function bp(t){var e=Uo(t);return e.gl.Ch.qh=Xl.bind(null,e),e.gl.Ch.Uh=Yl.bind(null,e),e}var wp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return kt(this,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return this.Kt=Xh(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return hh(this.persistence,new ch,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new Dh(Ch.ra,this.Kt)},t.prototype.jl=function(t){return new zh},t.prototype.terminate=function(){return kt(this,void 0,void 0,(function(){return Dt(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.Lo()];case 1:return t.sent(),[4,this.persistence.Lo()];case 2:return t.sent(),[2]}}))}))},t}(),_p=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return At(e,t),e.prototype.initialize=function(e){return kt(this,void 0,void 0,(function(){return Dt(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ih(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,bp(this.Xl.fa)];case 4:return n.sent(),[4,bl(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return hh(this.persistence,new ch,t.Yl,this.Kt)},e.prototype.Hl=function(t){var e=this.persistence.Ii._r;return new Gf(e,t.fs)},e.prototype.Gl=function(t){var e=sh(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?Af.Xs(this.cacheSizeBytes):Af.ei;return new rh(this.synchronizeTabs,e,t.clientId,n,t.fs,Jh(),Wh(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new zh},e}(wp),Ip=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return At(e,t),e.prototype.initialize=function(e){return kt(this,void 0,void 0,(function(){var n,r=this;return Dt(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof qh?(this.pl.fa={nu:hp.bind(null,n),su:yp.bind(null,n),iu:gp.bind(null,n),Qo:vp.bind(null,n),eu:fp.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Po((function(t){return kt(r,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return[4,lp(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Tr?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=Jh();if(!qh.Wn(e))throw new Bo(Go.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sh(t.gu.T,t.gu.persistenceKey);return new qh(e,t.fs,n,t.clientId,t.Yl)},e}(_p),Ep=function(){function t(){}return t.prototype.initialize=function(t,e){return kt(this,void 0,void 0,(function(){var n=this;return Dt(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return Jl(n.fa,t,1)},this.gl.Ch.s_=up.bind(null,this.fa),[4,Sl(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new Dl},t.prototype.Zl=function(t){var e,n=Xh(t.gu.T),r=(e=t.gu,new Kh(e));return function(t,e,n){return new el(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return Jl(s.fa,t,0)},o=$h.Wn()?new $h:new Hh,new rl(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new zl(t,e,n,r,i,o);return s&&(u.Ll=!0),u}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return kt(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:return e=Uo(t),Co("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,ol(e)];case 1:return n.sent(),e.kh.Lo(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),Tp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Np=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Bo(Go.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new ls(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}(),Sp=function(t){this._methodName=t};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Ap(t,e,n){if(!n)throw new Bo(Go.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function xp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Bo(Go.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function kp(t,e,n,r){if(!0===e&&!0===r)throw new Bo(Go.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Dp(t){if(!ps.Et(t))throw new Bo(Go.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Op(t){if(ps.Et(t))throw new Bo(Go.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Cp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Vo()}function Pp(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new Bo(Go.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Cp(t);throw new Bo(Go.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Lp(t,e){if(e<=0)throw new Bo(Go.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Rp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Bo(Go.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Bo(Go.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,kp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Vp=new Map,Mp=function(){function t(t,e){this.w_="(lite)",this.E_=new Rp({}),this.T_=!1,t instanceof Zo?(this.I_=t,this.m_=new ns):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Bo(Go.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(t.options.projectId)}(t),this.m_=new rs(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Bo(Go.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Bo(Go.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Rp(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new ns;switch(t.type){case"gapi":var e=t.client;return Mo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new os(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Bo(Go.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,T:this.I_,settings:this.E_}},t.prototype.b_=function(){return this,(t=Vp.get(this))&&(Co("ComponentProvider","Removing Datastore"),Vp.delete(this),t.terminate()),Promise.resolve();var t},t}(),Up=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Fp(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),jp=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Fp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,yu(r))||this).firestore=e,i.D_=r,i.type="collection",i}return At(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Up(this.firestore,null,new ps(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(jp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Jo&&(t=t._),Ap("collection","path",e),t instanceof Mp)return Op(n=fs.ct.apply(fs,Lt([e],r))),new Fp(t,null,n);if(!(t instanceof Up||t instanceof Fp))throw new Bo(Go.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Op(n=fs.ct.apply(fs,Lt([t.path],r)).child(fs.ct(e))),new Fp(t.firestore,null,n)}function zp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Jo&&(t=t._),1===arguments.length&&(e=Fo.t()),Ap("doc","path",e),t instanceof Mp)return Dp(n=fs.ct.apply(fs,Lt([e],r))),new Up(t,null,new ps(n));if(!(t instanceof Up||t instanceof Fp))throw new Bo(Go.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Dp(n=t.D_.child(fs.ct.apply(fs,Lt([e],r)))),new Up(t.firestore,t instanceof Fp?t.v_:null,new ps(n))}function Hp(t,e){return t instanceof Jo&&(t=t._),e instanceof Jo&&(e=e._),(t instanceof Up||t instanceof Fp)&&(e instanceof Up||e instanceof Fp)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function $p(t,e){return t instanceof Jo&&(t=t._),e instanceof Jo&&(e=e._),t instanceof jp&&e instanceof jp&&t.firestore===e.firestore&&Nu(t.C_,e.C_)&&t.v_===e.v_
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Gp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Bo(Go.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Bo(Go.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return qo(this.x_,t.x_)||qo(this.N_,t.N_)},t}(),Bp=/^__.*__$/,Kp=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new ia(t,this.data,this.zt,e,this.fieldTransforms):new ra(t,this.data,e,this.fieldTransforms)},t}(),Jp=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new ia(t,this.data,this.zt,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vo()}}var Xp=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return yd(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Wp(this.k_)&&Bp.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Yp=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Xh(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Xp({k_:t,methodName:e,j_:n,path:ls.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Qp(t){var e=t.p_(),n=Xh(t.I_);return new Yp(t.I_,!!e.ignoreUndefinedProperties,n)}function Zp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);ld("Data must be an object, but it was:",s,r);var u,a,c=fd(r,s);if(o.merge)u=new gs(s.zt),a=s.fieldTransforms;else if(o.mergeFields){for(var f=[],h=0,l=o.mergeFields;h<l.length;h++){var p=pd(e,l[h],n);if(!s.contains(p))throw new Bo(Go.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");gd(f,p)||f.push(p)}u=new gs(f),a=s.fieldTransforms.filter((function(t){return u.It(t.field)}))}else u=null,a=s.fieldTransforms;return new Kp(new qs(c),u,a)}var td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Sp);function ed(t,e,n){return new Xp({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.prototype.z_=function(t){return new Ku(t.path,new ju)},e.prototype.isEqual=function(t){return t instanceof e},e}(Sp),rd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return At(e,t),e.prototype.z_=function(t){var e=ed(this,t,!0),n=this.H_.map((function(t){return cd(t,e)})),r=new Fu(n);return new Ku(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Sp),id=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return At(e,t),e.prototype.z_=function(t){var e=ed(this,t,!0),n=this.H_.map((function(t){return cd(t,e)})),r=new zu(n);return new Ku(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Sp),od=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return At(e,t),e.prototype.z_=function(t){var e=new $u(t.Kt,Lu(t.Kt,this.J_));return new Ku(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Sp);function sd(t,e,n,r){var i=t.G_(1,e,n);ld("Data must be an object, but it was:",i,r);var o=[],s=new zs;vs(r,(function(t,r){var u=vd(e,t,n);r instanceof Jo&&(r=r._);var a=i.U_(u);if(r instanceof td)o.push(u);else{var c=cd(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new gs(o);return new Jp(s.yt(),u,i.fieldTransforms)}function ud(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[pd(e,r,n)],a=[i];if(o.length%2!=0)throw new Bo(Go.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(pd(e,o[c])),a.push(o[c+1]);for(var f=[],h=new zs,l=u.length-1;l>=0;--l)if(!gd(f,u[l])){var p=u[l],d=a[l];d instanceof Jo&&(d=d._);var v=s.U_(p);if(d instanceof td)f.push(p);else{var y=cd(d,v);null!=y&&(f.push(p),h.set(p,y))}}var g=new gs(f);return new Jp(h.yt(),g,s.fieldTransforms)}function ad(t,e,n,r){return void 0===r&&(r=!1),cd(n,t.G_(r?4:3,e))}function cd(t,e){if(t instanceof Jo&&(t=t._),hd(t))return ld("Unsupported field value:",e,t),fd(t,e);if(t instanceof Sp)return function(t,e){if(!Wp(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=cd(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Jo&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Lu(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=us.fromDate(t);return{timestampValue:Ba(e.Kt,n)}}if(t instanceof us)return n=new us(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ba(e.Kt,n)};if(t instanceof Gp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ko)return{bytesValue:Ka(e.Kt,t.l)};if(t instanceof Up){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Xa(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+Cp(t))}(t,e)}function fd(t,e){var n={};return ys(t)?e.path&&e.path.length>0&&e.zt.push(e.path):vs(t,(function(t,r){var i=cd(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function hd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof us||t instanceof Gp||t instanceof Ko||t instanceof Up||t instanceof Sp)}function ld(t,e,n){if(!hd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Cp(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function pd(t,e,n){if(e instanceof Jo&&(e=e._),e instanceof Np)return e.d_;if("string"==typeof e)return vd(t,e);throw yd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var dd=new RegExp("[~\\*/\\[\\]]");function vd(t,e,n){if(e.search(dd)>=0)throw yd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Np.bind.apply(Np,Lt([void 0],e.split("."))))).d_}catch(r){throw yd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function yd(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new Bo(Go.INVALID_ARGUMENT,(u+=". ")+t+a)}function gd(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var md=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return kt(this,void 0,void 0,(function(){var e,n=this;return Dt(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Bo(Go.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return kt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Dt(this,(function(a){switch(a.label){case 0:return n=Uo(t),r=nc(n.Kt)+"/documents",i={documents:e.map((function(t){return Qa(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Mo(!!e.found),e.found.name,e.found.updateTime;var n=Za(t,e.found.name),r=Wa(e.found.updateTime),i=new qs({mapValue:{fields:e.found.fields}});return new Gs(n,r,i,{})}(t,e):"missing"in e?function(t,e){Mo(!!e.missing),Mo(!!e.readTime);var n=Za(t,e.missing),r=Wa(e.readTime);return new Bs(n,r)}(t,e):Vo()}(n.Kt,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Mo(!!e),u.push(e)})),u)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Bs||t instanceof Gs?n.sf(t):Vo()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new ha(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return kt(this,void 0,void 0,(function(){var t,e=this;return Dt(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ps.ft(n);e.mutations.push(new la(r,e.Gt(r)))})),[4,function(t,e){return kt(this,void 0,void 0,(function(){var n,r,i;return Dt(this,(function(o){switch(o.label){case 0:return n=Uo(t),r=nc(n.Kt)+"/documents",i={writes:e.map((function(t){return oc(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Gs)e=t.version;else{if(!(t instanceof Bs))throw Vo();e=as.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Bo(Go.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Wu.updateTime(e):Wu.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(as.min()))throw new Bo(Go.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wu.updateTime(e)}return Wu.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),bd=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new Yh(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return kt(t,void 0,void 0,(function(){var t,e,n=this;return Dt(this,(function(r){return t=new md(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Ns(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!da(e)}return!1},t}(),wd=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=ts.UNAUTHENTICATED,this.clientId=Fo.t(),this._f=function(){},this.N=new _c,this.credentials.S((function(t){Co("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return kt(this,void 0,void 0,(function(){return Dt(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new Bo(Go.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new _c;return this.fs.Tf((function(){return kt(t,void 0,void 0,(function(){var t,n;return Dt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Pc(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function _d(t,e){return kt(this,void 0,void 0,(function(){var n,r,i=this;return Dt(this,(function(o){switch(o.label){case 0:return t.fs.Af(),Co("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.bo((function(){return kt(i,void 0,void 0,(function(){return Dt(this,(function(t){switch(t.label){case 0:return[4,lh(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.yo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Id(t,e){return kt(this,void 0,void 0,(function(){var n,r;return Dt(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,Ed(t)];case 1:return n=i.sent(),Co("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.bo((function(){return function(t,e){return kt(this,void 0,void 0,(function(){var n,r;return Dt(this,(function(i){switch(i.label){case 0:return(n=Uo(t)).fs.Af(),Co("RemoteStore","RemoteStore received new credentials"),r=ll(n),n.Fh.add(3),[4,ol(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,il(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function Ed(t){return kt(this,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(Co("FirestoreClient","Using default OfflineComponentProvider"),[4,_d(t,new wp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Td(t){return kt(this,void 0,void 0,(function(){return Dt(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(Co("FirestoreClient","Using default OnlineComponentProvider"),[4,Id(t,new Ep)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Nd(t){return Ed(t).then((function(t){return t.persistence}))}function Sd(t){return Ed(t).then((function(t){return t.Sh}))}function Ad(t){return Td(t).then((function(t){return t.gl}))}function xd(t){return Td(t).then((function(t){return t.fa}))}function kd(t){return kt(this,void 0,void 0,(function(){var e,n;return Dt(this,(function(r){switch(r.label){case 0:return[4,Td(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=Hl.bind(null,e.fa),n.Jh=Gl.bind(null,e.fa),n)]}}))}))}function Dd(t,e,n){var r=this;void 0===n&&(n={});var i=new _c;return t.fs.ys((function(){return kt(r,void 0,void 0,(function(){var r;return Dt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Tp({next:function(o){e.ys((function(){return Cl(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new Bo(Go.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new Bo(Go.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Vl(yu(n.path),o,{includeMetadataChanges:!0,sl:!0});return Ol(t,s)},[4,kd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function Od(t,e,n){var r=this;void 0===n&&(n={});var i=new _c;return t.fs.ys((function(){return kt(r,void 0,void 0,(function(){var r;return Dt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Tp({next:function(n){e.ys((function(){return Cl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Bo(Go.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Vl(n,o,{includeMetadataChanges:!0,sl:!0});return Ol(t,s)},[4,kd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var Cd=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new Yh(this,"async_queue_retry"),this.vf=function(){var e=Wh();e&&Co("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=Wh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Wh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.bo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return kt(this,void 0,void 0,(function(){var t,e=this;return Dt(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!Ac(t=n.sent()))throw t;return Co("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,Po("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Ir=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Cc.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Vo()},t.prototype.Af=function(){},t.prototype.Nf=function(){return kt(this,void 0,void 0,(function(){var t;return Dt(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),Pd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new Cd,r.w_="name"in e?e.name:"[DEFAULT]",r}return At(e,t),e.prototype.b_=function(){return this.Lf||Rd(this),this.Lf.terminate()},e}(Mp);function Ld(t){return t.Lf||Rd(t),t.Lf.df(),t.Lf}function Rd(t){var e=t.p_(),n=function(t,e,n){return new Qo(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new wd(t.m_,t.Mf,n)}function Vd(t,e,n){var r=this,i=new _c;return t.fs.enqueue((function(){return kt(r,void 0,void 0,(function(){var r;return Dt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,_d(t,n)];case 1:return o.sent(),[4,Id(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Go.FAILED_PRECONDITION||t.code===Go.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Md(t){if(t.R_||t.P_)throw new Bo(Go.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ud=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),xs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ws(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(_s(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw Vo()}},t.prototype.jf=function(t,e){var n=this,r={};return vs(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Gp(ws(t.latitude),ws(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=Es(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(Ts(t));default:return null}},t.prototype.Bf=function(t){var e=bs(t);return new us(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=fs.ct(t);Mo(wc(n));var r=new Zo(n.get(1),n.get(3)),i=new ps(n.X(5));return r.isEqual(e)||Po("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),jd=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Up(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Fd(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(qd("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Fd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(jd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qd(t,e){return"string"==typeof e?vd(t,e):e instanceof Jo?e._.d_:e.d_}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zd(t){if(mu(t)&&0===t.Nt.length)throw new Bo(Go.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hd=function(){};function $d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Gd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return At(e,t),e.prototype.Yf=function(t){var e=Qp(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new Bo(Go.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Qd(s,o);for(var a=[],c=0,f=s;c<f.length;c++){var h=f[c];a.push(Yd(r,t,h))}u={arrayValue:{values:a}}}else u=Yd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Qd(s,o),u=ad(n,"where",s,"in"===o||"not-in"===o);var l=Zs.create(i,o,u);return function(t,e){if(e.xt()){var n=wu(t);if(null!==n&&!n.isEqual(e.field))throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=bu(t);null!==r&&Zd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Bo(Go.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Bo(Go.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new jp(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new du(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Hd),Bd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return At(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new fu(e,n);return function(t,e){if(null===bu(t)){var n=wu(t);null!==n&&Zd(t,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new jp(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new du(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Hd),Kd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return At(e,t),e.prototype.Yf=function(t){return new jp(t.firestore,t.v_,Tu(t.C_,this.nd,this.sd))},e}(Hd),Jd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return At(e,t),e.prototype.Yf=function(t){var e=Xd(t,this.type,this.rd,this.od);return new jp(t.firestore,t.v_,function(t,e){return new du(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Hd),Wd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return At(e,t),e.prototype.Yf=function(t){var e=Xd(t,this.type,this.rd,this.od);return new jp(t.firestore,t.v_,function(t,e){return new du(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Hd);function Xd(t,e,n,r){if(n[0]instanceof Jo&&(n[0]=n[0]._),n[0]instanceof jd)return function(t,e,n,r,i){if(!r)throw new Bo(Go.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Iu(t);s<u.length;s++){var a=u[s];if(a.field.ht())o.push(Rs(e,r.key));else{var c=r.field(a.field);if(Is(c))throw new Bo(Go.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var f=a.field.ot();throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(c)}}return new au(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Qp(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new Bo(Go.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.ht()){if("string"!=typeof c)throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!_u(t)&&-1!==c.indexOf("/"))throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var f=t.path.child(fs.ct(c));if(!ps.Et(f))throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var h=new ps(f);u.push(Rs(e,h))}else{var l=ad(n,r,c);u.push(l)}}return new au(u,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Yd(t,e,n){if(n instanceof Jo&&(n=n._),"string"==typeof n){if(""===n)throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_u(e)&&-1!==n.indexOf("/"))throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(fs.ct(n));if(!ps.Et(r))throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Rs(t,new ps(r))}if(n instanceof Up)return Rs(t,n.S_);throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Cp(n)+".")}function Qd(t,e){if(!Array.isArray(t)||0===t.length)throw new Bo(Go.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Bo(Go.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Zd(t,e,n){if(!n.isEqual(e))throw new Bo(Go.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function tv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function ev(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var nv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return At(e,t),e.prototype.Uf=function(t){return new Ko(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Up(this.firestore,null,e)},e}(Ud),rv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),iv=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).zf=e,u.ad=e,u.metadata=o,u}return At(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new ov(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(qd("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(jd),ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(iv),sv=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new rv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new ov(n.zf,n.Hf,r.key,r,new rv(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new Bo(Go.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){var r=new ov(t.zf,t.Hf,e.doc.key,e.doc,new rv(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new ov(t.zf,t.Hf,e.doc.key,e.doc,new rv(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:uv(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function uv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vo()}}function av(t,e){return t instanceof iv&&e instanceof iv?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof sv&&e instanceof sv&&t.zf===e.zf&&$p(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var cv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return At(e,t),e.prototype.Uf=function(t){return new Ko(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Up(this.firestore,null,e)},e}(Ud);function fv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Pp(t,Up);var o=Pp(t.firestore,Pd),s=Qp(o);return e instanceof Jo&&(e=e._),lv(o,[("string"==typeof e||e instanceof Np?ud(s,"updateDoc",t.S_,e,n,r):sd(s,"updateDoc",t.S_,e)).F_(t.S_,Wu.exists(!0))])}function hv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Jo&&(t=t._);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||tv(i[u])||(s=i[u],u++);var a,c,f,h={includeMetadataChanges:s.includeMetadataChanges};if(tv(i[u])){var l=i[u];i[u]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[u+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[u+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof Up)c=Pp(t.firestore,Pd),f=yu(t.S_.path),a={next:function(e){i[u]&&i[u](pv(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=Pp(t,jp);c=Pp(p.firestore,Pd),f=p.C_;var d=new cv(c);a={next:function(t){i[u]&&i[u](new sv(c,d,p,t))},error:i[u+1],complete:i[u+2]},zd(t.C_)}return function(t,e,n,r){var i=this,o=new Tp(r),s=new Vl(e,o,n);return t.fs.ys((function(){return kt(i,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:return e=Ol,[4,kd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return kt(i,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:return e=Cl,[4,kd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ld(c),f,h,a)}function lv(t,e){return function(t,e){var n=this,r=new _c;return t.fs.ys((function(){return kt(n,void 0,void 0,(function(){var n;return Dt(this,(function(i){switch(i.label){case 0:return n=Bl,[4,xd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Ld(t),e)}function pv(t,e,n){var r=n.docs.get(e.S_),i=new cv(t);return new iv(t,i,e.S_,r,new rv(n.hasPendingWrites,n.fromCache),e.v_)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var dv=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Qp(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=vv(t,this.zf),i=ev(r.v_,e,n),o=Zp(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Wu.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=vv(t,this.zf);return e instanceof Jo&&(e=e._),o="string"==typeof e||e instanceof Np?ud(this.wd,"WriteBatch.update",s.S_,e,n,r):sd(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,Wu.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=vv(t,this.zf);return this.fd=this.fd.concat(new ha(e.S_,Wu.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new Bo(Go.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function vv(t,e){if(t instanceof Jo&&(t=t._),t.firestore!==e)throw new Bo(Go.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var yv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return At(e,t),e.prototype.get=function(e){var n=this,r=vv(e,this.zf),i=new cv(this.zf);return t.prototype.get.call(this,e).then((function(t){return new iv(n.zf,i,r.S_,t.Jf,new rv(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Qp(t)}return t.prototype.get=function(t){var e=this,n=vv(t,this.zf),r=new nv(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return Vo();var i=t[0];if(i instanceof Bs)return new jd(e.zf,r,n.S_,null,n.v_);if(i instanceof Gs)return new jd(e.zf,r,i.key,i,n.v_);throw Vo()}))},t.prototype.set=function(t,e,n){var r=vv(t,this.zf),i=ev(r.v_,e,n),o=Zp(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=vv(t,this.zf);return e instanceof Jo&&(e=e._),o="string"==typeof e||e instanceof Np?ud(this.wd,"Transaction.update",s.S_,e,n,r):sd(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=vv(t,this.zf);return this.Td.delete(e.S_),this},t}()),gv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Md(t=Pp(t,Pd));var n=Ld(t),r=t.p_(),i=new Ep;return Vd(n,i,new _p(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Md(t=Pp(t,Pd));var e=Ld(t),n=t.p_(),r=new Ep;return Vd(e,r,new Ip(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Bo(Go.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new _c;return t.Mf.Tf((function(){return kt(e,void 0,void 0,(function(){var e;return Dt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return kt(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:return Tc.Wn()?(e=t+"main",[4,Tc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(sh(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),mv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Zo||(i.md=e),i}return At(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Pp(t,Mp)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Lo("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return kt(e,void 0,void 0,(function(){var e,n;return Dt(this,(function(r){switch(r.label){case 0:return[4,Nd(t)];case 1:return e=r.sent(),[4,Ad(t)];case 2:return n=r.sent(),[2,(e.Vo(!0),function(t){var e=Uo(t);return e.Fh.delete(0),il(e)}(n))]}}))}))}))}(Ld(Pp(this._,Pd)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return kt(e,void 0,void 0,(function(){var e,n;return Dt(this,(function(r){switch(r.label){case 0:return[4,Nd(t)];case 1:return e=r.sent(),[4,Ad(t)];case 2:return n=r.sent(),[2,(e.Vo(!1),function(t){return kt(this,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:return(e=Uo(t)).Fh.add(0),[4,ol(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ld(Pp(this._,Pd)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&kp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.md&&(this.md._removeServiceInstance("firestore"),this.md._removeServiceInstance("firestore-exp")),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new _c;return t.fs.ys((function(){return kt(e,void 0,void 0,(function(){var e;return Dt(this,(function(r){switch(r.label){case 0:return e=Ql,[4,xd(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ld(Pp(this._,Pd)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Tp(e);return t.fs.ys((function(){return kt(n,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:return e=function(t,e){Uo(t).jh.add(e),e.next()},[4,kd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return kt(n,void 0,void 0,(function(){var e;return Dt(this,(function(n){switch(n.label){case 0:return e=function(t,e){Uo(t).jh.delete(e)},[4,kd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ld(t=Pp(t,Pd)),tv(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new Bo(Go.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Cv(this,qp(this._,t))}catch(t){throw Tv(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Ev(this,zp(this._,t))}catch(t){throw Tv(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new kv(this,function(t,e){if(t=Pp(t,Mp),Ap("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Bo(Go.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new jp(t,null,function(t){return new du(fs.at(),t)}(e))}(this._,t))}catch(t){throw Tv(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new _c;return t.fs.ys((function(){return kt(n,void 0,void 0,(function(){var n;return Dt(this,(function(i){switch(i.label){case 0:return[4,function(t){return Td(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new bd(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(Ld(t),(function(n){return e(new yv(t,n))}))}(this._,(function(n){return t(new wv(e,n))}))},e.prototype.batch=function(){var t=this;return Ld(this._),new _v(new dv(this._,(function(e){return lv(t._,e)})))},e.prototype.loadBundle=function(t){throw new Bo(Go.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Bo(Go.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Jo),bv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return At(e,t),e.prototype.Uf=function(t){return new Yo(new Ko(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return Ev.Ad(e,this.firestore,null)},e}(Ud);var wv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r.Hf=new bv(e),r}return At(e,t),e.prototype.get=function(t){var e=this,n=Pv(t);return this._.get(n).then((function(t){return new Av(e.zf,new iv(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=Pv(t);return n?(xp("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Pv(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Lt([s,e,n],i)),this},e.prototype.delete=function(t){var e=Pv(t);return this._.delete(e),this},e}(Jo),_v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.prototype.set=function(t,e,n){var r=Pv(t);return n?(xp("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Pv(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Lt([s,e,n],i)),this},e.prototype.delete=function(t){var e=Pv(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(Jo),Iv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).zf=e,i.Hf=n,i}return At(e,t),e.prototype.fromFirestore=function(t,e){var n=new ov(this.zf._,this.Hf,t.S_,t.Jf,t.metadata,null);return this._.fromFirestore(new xv(this.zf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._.toFirestore(t,e):this._.toFirestore(t)},e.Rd=function(t,n){var r=e.Pd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new bv(t),n),i.set(n,o)),o},e}(Jo);Iv.Pd=new WeakMap;var Ev=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new bv(e),r}return At(e,t),e.yd=function(t,n,r){if(t.length%2!=0)throw new Bo(Go.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new Up(n._,r,new ps(t)))},e.Ad=function(t,n,r){return new e(n,new Up(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Cv(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Cv(this.firestore,qp(this._,t))}catch(t){throw Tv(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Jo&&(t=t._),t instanceof Up&&Hp(this._,t)},e.prototype.set=function(t,e){e=xp("DocumentReference.set",e);try{return function(t,e,n){t=Pp(t,Up);var r=Pp(t.firestore,Pd),i=ev(t.v_,e,n);return lv(r,[Zp(Qp(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Wu.Wt())])}(this._,t,e)}catch(t){throw Tv(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?fv(this._,t):fv.apply(void 0,Lt([this._,t,e],n))}catch(t){throw Tv(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return lv(Pp((t=this._).firestore,Pd),[new ha(t.S_,Wu.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Nv(e),i=Sv(e,(function(e){return new Av(t.firestore,new iv(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return hv(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Pp(t,Up);var e=Pp(t.firestore,Pd),n=Ld(e),r=new cv(e);return function(t,e){var n=this,r=new _c;return t.fs.ys((function(){return kt(n,void 0,void 0,(function(){var n;return Dt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return kt(this,void 0,void 0,(function(){var r,i;return Dt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Uo(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Gs?n.resolve(i):i instanceof Bs?n.resolve(null):n.reject(new Bo(Go.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Pc(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Sd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new iv(e,r,t.S_,n,new rv(n instanceof Gs&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Pp(t,Up);var e=Pp(t.firestore,Pd);return Dd(Ld(e),t.S_,{source:"server"}).then((function(n){return pv(e,t,n)}))}(this._):function(t){t=Pp(t,Up);var e=Pp(t.firestore,Pd);return Dd(Ld(e),t.S_).then((function(n){return pv(e,t,n)}))}(this._)).then((function(t){return new Av(e.firestore,new iv(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(Iv.Rd(this.firestore,t)))},e}(Jo);function Tv(t,e,n){return t.message=t.message.replace(e,n),t}function Nv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!tv(r))return r}return{}}function Sv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=tv(t[0])?t[0]:tv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Av=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return At(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ev(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return av(this._,t._)},e}(Jo),xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.prototype.data=function(t){return this._.data(t)},e}(Av),kv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new bv(e),r}return At(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,$d(this._,function(t,e,n){var r=e,i=qd("where",t);return new Gd(i,r,n)}(t,n,r)))}catch(t){throw Tv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,$d(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=qd("orderBy",t);return new Bd(r,n)}(t,n)))}catch(t){throw Tv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,$d(this._,function(t){return Lp("limit",t),new Kd("limit",t,"F")}(t)))}catch(t){throw Tv(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,$d(this._,function(t){return Lp("limitToLast",t),new Kd("limitToLast",t,"L")}(t)))}catch(t){throw Tv(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,$d(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jd("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Tv(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,$d(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jd("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Tv(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,$d(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wd("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Tv(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,$d(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wd("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Tv(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return $p(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Pp(t,jp);var e=Pp(t.firestore,Pd),n=Ld(e),r=new cv(e);return function(t,e){var n=this,r=new _c;return t.fs.ys((function(){return kt(n,void 0,void 0,(function(){var n;return Dt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return kt(this,void 0,void 0,(function(){var r,i,o,s,u;return Dt(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,bh(t,e,!0)];case 1:return u=a.sent(),r=new jl(e,u.Pc),i=r.dl(u.documents),o=r.Ei(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Pc(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Sd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new sv(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Pp(t,jp);var e=Pp(t.firestore,Pd),n=Ld(e),r=new cv(e);return Od(n,t.C_,{source:"server"}).then((function(n){return new sv(e,r,t,n)}))}(this._):function(t){t=Pp(t,jp);var e=Pp(t.firestore,Pd),n=Ld(e),r=new cv(e);return zd(t.C_),Od(n,t.C_).then((function(n){return new sv(e,r,t,n)}))}(this._)).then((function(t){return new Ov(e.firestore,new sv(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Nv(e),i=Sv(e,(function(e){return new Ov(t.firestore,new sv(t.firestore._,t.Hf,t._,e.ud))}));return hv(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(Iv.Rd(this.firestore,t)))},e}(Jo),Dv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return At(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new xv(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(Jo),Ov=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return At(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new kv(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new xv(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new Dv(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new xv(n.zf,r))}))},e.prototype.isEqual=function(t){return av(this._,t._)},e}(Jo),Cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return At(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new Ev(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ev(this.firestore,void 0===t?zp(this._):zp(this._,t))}catch(t){throw Tv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Pp(t.firestore,Pd),r=zp(t),i=ev(t.v_,e);return lv(n,[Zp(Qp(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Wu.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new Ev(e.firestore,t)}))},e.prototype.isEqual=function(t){return Hp(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(Iv.Rd(this.firestore,t)))},e}(kv);function Pv(t){return t instanceof Jo&&(t=t._),Pp(t,Up)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lv,Rv=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Np.bind.apply(Np,Lt([void 0],e))))||this}return At(e,t),e.documentId=function(){return new e(ls.lt().ot())},e.prototype.isEqual=function(t){return t instanceof Jo&&(t=t._),t instanceof Np&&this._.d_.isEqual(t.d_)},e}(Jo),Vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return At(e,t),e.serverTimestamp=function(){var t=new nd("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new td("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rd("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new id("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new od("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(Jo),Mv={Firestore:mv,GeoPoint:Gp,Timestamp:us,Blob:Yo,Transaction:wv,WriteBatch:_v,DocumentReference:Ev,DocumentSnapshot:Av,Query:kv,QueryDocumentSnapshot:xv,QuerySnapshot:Ov,CollectionReference:Cv,FieldPath:Rv,FieldValue:Vv,setLogLevel:function(t){var e;e=t,Do.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Kt("firestore",(function(t){return function(t,e){return new mv(t,new Pd(t,e),new gv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Mv)))})(Lv=_e),Lv.registerVersion("@firebase/firestore","2.1.4");_e.initializeApp({projectId:"sample-project-294713"});const Uv=function(){const t=window.location.search;let e;if(t)e=t.substring(1);else{const t=Nt();window.location.hash=t,window.history.replaceState("","","?"+t),e=t}return e}(),jv=_e.firestore().collection("rooms").doc(Uv),Fv=function(){const{subscribe:t,set:e}=gt([]);return{subscribe:t,set:e,append:(t,e)=>{jv.get().then((n=>{let r=[],i={closed:!0};if(n&&n.exists){const e=n.data();r=[...e.estimates.filter((e=>e.name!==t))],i=e.tableState}r.push({name:t,point:e,appendedAt:_e.firestore.Timestamp.now()}),jv.set({estimates:r,tableState:i})}))},remove:(t,e=null)=>{jv.get().then((n=>{if(n&&n.exists){const r=n.data();r.estimates=r.estimates.filter((e=>e.name!==t)),jv.set(r).then(e)}else e()}))},clear:()=>{jv.delete()}}}(),qv=function(){const{subscribe:t,set:e,update:n}=gt({closed:!0});return{subscribe:t,set:e,open:()=>{jv.get().then((t=>{if(t&&t.exists){const e=t.data();e.tableState={closed:!1},jv.set(e)}}))},close:()=>{jv.delete()}}}(),zv=new Promise((t=>{jv.onSnapshot((t=>{if(t&&t.exists){const e=t.data(),n=(t,e)=>t.appendedAt.seconds-e.appendedAt.seconds;Fv.set(e.estimates.sort(n)),qv.set(e.tableState)}else Fv.set([]),qv.set({closed:!0})})),t()}));function Hv(e){let n,r,i,o,s=(e[2]?"":e[0])+"";return{c(){n=_("div"),r=I(s),S(n,"class","card svelte-tq9sw8"),D(n,"closed",e[2]),D(n,"selected",e[1])},m(t,s){b(t,n,s),m(n,r),i||(o=T(n,"click",e[3]),i=!0)},p(t,[e]){5&e&&s!==(s=(t[2]?"":t[0])+"")&&A(r,s),4&e&&D(n,"closed",t[2]),2&e&&D(n,"selected",t[1])},i:t,o:t,d(t){t&&w(n),i=!1,o()}}}function $v(t,e,n){let{point:r}=e,{selected:i=!1}=e,{closed:o=!1}=e;const s=function(){const t=U();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=O(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}();return t.$$set=t=>{"point"in t&&n(0,r=t.point),"selected"in t&&n(1,i=t.selected),"closed"in t&&n(2,o=t.closed)},[r,i,o,function(){s("selectCard",{point:r})}]}class Gv extends pt{constructor(t){super(),lt(this,t,$v,Hv,u,{point:0,selected:1,closed:2})}}function Bv(t){let e,n,r,i,o;const s=t[3].default,u=function(t,e,n,r){if(t){const i=c(t,e,n,r);return t[0](i)}}(s,t,t[2],null);return{c(){e=_("button"),u&&u.c(),S(e,"class",n=l(t[1].class)+" svelte-xozke3"),e.disabled=t[0]},m(n,s){b(n,e,s),u&&u.m(e,null),r=!0,i||(o=T(e,"click",t[4]),i=!0)},p(t,[i]){u&&u.p&&4&i&&f(u,s,t,t[2],i,null,null),(!r||2&i&&n!==(n=l(t[1].class)+" svelte-xozke3"))&&S(e,"class",n),(!r||1&i)&&(e.disabled=t[0])},i(t){r||(nt(u,t),r=!0)},o(t){rt(u,t),r=!1},d(t){t&&w(e),u&&u.d(t),i=!1,o()}}}function Kv(t,e,r){let{$$slots:i={},$$scope:o}=e,{disabled:s=!1}=e;return t.$$set=t=>{r(1,e=n(n({},e),h(t))),"disabled"in t&&r(0,s=t.disabled),"$$scope"in t&&r(2,o=t.$$scope)},e=h(e),[s,e,o,i,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)}]}class Jv extends pt{constructor(t){super(),lt(this,t,Kv,Bv,u,{disabled:0})}}function Wv(t,e,n){const r=t.slice();return r[6]=e[n],r}function Xv(t,e){let n,r,i,o,s,u,a,c,f=e[6].name+"";return r=new Gv({props:{point:e[6].point,closed:e[1].closed}}),{key:t,first:null,c(){n=_("div"),at(r.$$.fragment),i=E(),o=_("div"),s=I(f),u=E(),S(o,"class","name svelte-1nazvb7"),S(n,"class","estimate svelte-1nazvb7"),this.first=n},m(t,e){b(t,n,e),ct(r,n,null),m(n,i),m(n,o),m(o,s),m(n,u),c=!0},p(t,n){e=t;const i={};4&n&&(i.point=e[6].point),2&n&&(i.closed=e[1].closed),r.$set(i),(!c||4&n)&&f!==(f=e[6].name+"")&&A(s,f)},i(t){c||(nt(r.$$.fragment,t),G((()=>{a||(a=ot(n,vt,{y:100},!0)),a.run(1)})),c=!0)},o(t){rt(r.$$.fragment,t),a||(a=ot(n,vt,{y:100},!1)),a.run(0),c=!1},d(t){t&&w(n),ft(r),t&&a&&a.end()}}}function Yv(t){let e,n,r;return n=new Jv({props:{class:"open-button",$$slots:{default:[Qv]},$$scope:{ctx:t}}}),n.$on("click",t[3]),{c(){e=_("div"),at(n.$$.fragment),S(e,"class","open-button-area svelte-1nazvb7")},m(t,i){b(t,e,i),ct(n,e,null),r=!0},p(t,e){const r={};514&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||(nt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){t&&w(e),ft(n)}}}function Qv(t){let e,n=t[1].closed?"OPEN":"RETURN";return{c(){e=I(n)},m(t,n){b(t,e,n)},p(t,r){2&r&&n!==(n=t[1].closed?"OPEN":"RETURN")&&A(e,n)},d(t){t&&w(e)}}}function Zv(t){let e,n;return e=new Jv({props:{class:"copy-button",$$slots:{default:[ty]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){at(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(t,n){const r={};513&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function ty(t){let e;return{c(){e=I(t[0])},m(t,n){b(t,e,n)},p(t,n){1&n&&A(e,t[0])},d(t){t&&w(e)}}}function ey(t){let e,n,r,i,o,s=[],u=new Map,a=t[2];const c=t=>t[6].name;for(let e=0;e<a.length;e+=1){let n=Wv(t,a,e),r=c(n);u.set(r,s[e]=Xv(r,n))}let f=(t[2].length>0||!t[1].closed)&&Yv(t),h=!t[1].closed&&Zv(t);return{c(){e=_("div"),n=_("div");for(let t=0;t<s.length;t+=1)s[t].c();r=E(),f&&f.c(),i=E(),h&&h.c(),S(n,"class","estimates svelte-1nazvb7"),S(e,"class","table svelte-1nazvb7")},m(t,u){b(t,e,u),m(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);m(e,r),f&&f.m(e,null),m(e,i),h&&h.m(e,null),o=!0},p(t,[r]){6&r&&(a=t[2],tt(),s=function(t,e,n,r,i,o,s,u,a,c,f,h){let l=t.length,p=o.length,d=l;const v={};for(;d--;)v[t[d].key]=d;const y=[],g=new Map,m=new Map;for(d=p;d--;){const t=h(i,o,d),u=n(t);let a=s.get(u);a?r&&a.p(t,e):(a=c(u,t),a.c()),g.set(u,y[d]=a),u in v&&m.set(u,Math.abs(d-v[u]))}const b=new Set,w=new Set;function _(t){nt(t,1),t.m(u,f),s.set(t.key,t),f=t.first,p--}for(;l&&p;){const e=y[p-1],n=t[l-1],r=e.key,i=n.key;e===n?(f=e.first,l--,p--):g.has(i)?!s.has(r)||b.has(r)?_(e):w.has(i)?l--:m.get(r)>m.get(i)?(w.add(r),_(e)):(b.add(i),l--):(a(n,s),l--)}for(;l--;){const e=t[l];g.has(e.key)||a(e,s)}for(;p;)_(y[p-1]);return y}(s,r,c,1,t,a,u,n,ut,Xv,null,Wv),et()),t[2].length>0||!t[1].closed?f?(f.p(t,r),6&r&&nt(f,1)):(f=Yv(t),f.c(),nt(f,1),f.m(e,i)):f&&(tt(),rt(f,1,1,(()=>{f=null})),et()),t[1].closed?h&&(tt(),rt(h,1,1,(()=>{h=null})),et()):h?(h.p(t,r),2&r&&nt(h,1)):(h=Zv(t),h.c(),nt(h,1),h.m(e,null))},i(t){if(!o){for(let t=0;t<a.length;t+=1)nt(s[t]);nt(f),nt(h),o=!0}},o(t){for(let t=0;t<s.length;t+=1)rt(s[t]);rt(f),rt(h),o=!1},d(t){t&&w(e);for(let t=0;t<s.length;t+=1)s[t].d();f&&f.d(),h&&h.d()}}}function ny(t,e,n){let r,i;a(t,qv,(t=>n(1,r=t))),a(t,Fv,(t=>n(2,i=t)));let o="COPY";return[o,r,i,function(t){r.closed?i.length>0&&qv.open():(Fv.clear(),qv.close())},function(t){const e=function(){if(0===i.length)return"empty.";const t=new Date;return"["+t.toLocaleDateString()+" "+t.toLocaleTimeString()+"] "+i.sort(((t,e)=>t.name>e.name?1:-1)).reduce(((t,e)=>(t?t+" ":"")+`${e.name}(${e.point})`),null)}();navigator.clipboard.writeText(e),t.target.classList.add("copied"),t.target.disabled=!0;const r=o;n(0,o="COPIED!"),setTimeout((()=>{t.target.classList.remove("copied"),t.target.disabled=!1,n(0,o=r)}),2e3)}]}class ry extends pt{constructor(t){super(),lt(this,t,ny,ey,u,{})}}function iy(t,e,n){const r=t.slice();return r[8]=e[n],r}function oy(t){let e,n,r,i,s,u,a,c=t[1]&&uy(t);return{c(){e=_("div"),n=_("form"),r=_("input"),i=E(),c&&c.c(),S(r,"placeholder","your name"),r.autofocus=!0,S(r,"class","svelte-1pf8moc"),S(e,"class","user-name svelte-1pf8moc")},m(o,f){b(o,e,f),m(e,n),m(n,r),x(r,t[1]),m(n,i),c&&c.m(n,null),s=!0,r.focus(),u||(a=[T(r,"input",t[7]),T(n,"submit",N(t[4]))],u=!0)},p(t,e){2&e&&r.value!==t[1]&&x(r,t[1]),t[1]?c?(c.p(t,e),2&e&&nt(c,1)):(c=uy(t),c.c(),nt(c,1),c.m(n,null)):c&&(tt(),rt(c,1,1,(()=>{c=null})),et())},i(t){s||(nt(c),s=!0)},o(t){rt(c),s=!1},d(t){t&&w(e),c&&c.d(),u=!1,o(a)}}}function sy(t){let e,n,r,i,o,s=t[3],u=[];for(let e=0;e<s.length;e+=1)u[e]=cy(iy(t,s,e));const a=t=>rt(u[t],1,1,(()=>{u[t]=null}));return{c(){e=_("div"),n=I(t[0]),r=E();for(let t=0;t<u.length;t+=1)u[t].c();i=I(""),S(e,"class","user-name svelte-1pf8moc")},m(t,s){b(t,e,s),m(e,n),b(t,r,s);for(let e=0;e<u.length;e+=1)u[e].m(t,s);b(t,i,s),o=!0},p(t,e){if((!o||1&e)&&A(n,t[0]),44&e){let n;for(s=t[3],n=0;n<s.length;n+=1){const r=iy(t,s,n);u[n]?(u[n].p(r,e),nt(u[n],1)):(u[n]=cy(r),u[n].c(),nt(u[n],1),u[n].m(i.parentNode,i))}for(tt(),n=s.length;n<u.length;n+=1)a(n);et()}},i(t){if(!o){for(let t=0;t<s.length;t+=1)nt(u[t]);o=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)rt(u[t]);o=!1},d(t){t&&w(e),t&&w(r),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(u,t),t&&w(i)}}}function uy(t){let e,n;return e=new Jv({props:{class:"ok-button",$$slots:{default:[ay]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){at(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(t,n){const r={};2048&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function ay(t){let e;return{c(){e=I("OK")},m(t,n){b(t,e,n)},d(t){t&&w(e)}}}function cy(t){let e,n;return e=new Gv({props:{point:t[8],selected:t[2]===t[8]}}),e.$on("selectCard",t[5]),{c(){at(e.$$.fragment)},m(t,r){ct(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.selected=t[2]===t[8]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function fy(t){let e,n,r,i;const o=[sy,oy],s=[];function u(t,e){return t[0]?0:1}return n=u(t),r=s[n]=o[n](t),{c(){e=_("div"),r.c(),S(e,"class","svelte-1pf8moc")},m(t,r){b(t,e,r),s[n].m(e,null),i=!0},p(t,[i]){let a=n;n=u(t),n===a?s[n].p(t,i):(tt(),rt(s[a],1,1,(()=>{s[a]=null})),et(),r=s[n],r?r.p(t,i):(r=s[n]=o[n](t),r.c()),nt(r,1),r.m(e,null))},i(t){i||(nt(r),i=!0)},o(t){rt(r),i=!1},d(t){t&&w(e),s[n].d()}}}function hy(t,e,n){let r,i;a(t,Fv,(t=>n(6,i=t)));let o,s;return t.$$.update=()=>{65&t.$$.dirty&&n(2,r=i.filter((t=>t.name===o)).map((t=>t.point)).pop())},[o,s,r,["0","1","2","3","5","8","13","21","34","55","?",""],function(t){s&&n(0,o=s)},function(t){const e=()=>Fv.append(o,t.detail.point);r?Fv.remove(o,r===t.detail.point?null:()=>setTimeout(e,300)):e()},i,function(){s=this.value,n(1,s)}]}class ly extends pt{constructor(t){super(),lt(this,t,hy,fy,u,{})}}function py(e){let n;return{c(){n=_("div"),n.innerHTML='<a href="https://unsplash.com" target="_blank" rel="noopener noreferrer" title="Photo by Unsplash"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="_1Jlgk" version="1.1" viewBox="0 0 32 32" aria-labelledby="unsplash-home" aria-hidden="false"><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"></path></svg></a>',S(n,"class","unsplash-credit svelte-1vmngv8")},m(t,e){b(t,n,e)},p:t,i:t,o:t,d(t){t&&w(n)}}}class dy extends pt{constructor(t){super(),lt(this,t,null,py,u,{})}}const{document:vy}=st;function yy(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function gy(t){let e,n,r,i,o,s,u,a,c;return s=new ry({}),a=new ly({}),{c(){e=_("h1"),n=I(t[0]),r=E(),i=_("p"),i.textContent="share the URL of this page with your team members.",o=E(),at(s.$$.fragment),u=E(),at(a.$$.fragment),S(e,"class","svelte-yhe7dg"),S(i,"class","svelte-yhe7dg")},m(t,f){b(t,e,f),m(e,n),b(t,r,f),b(t,i,f),b(t,o,f),ct(s,t,f),b(t,u,f),ct(a,t,f),c=!0},p(t,e){(!c||1&e)&&A(n,t[0])},i(t){c||(nt(s.$$.fragment,t),nt(a.$$.fragment,t),c=!0)},o(t){rt(s.$$.fragment,t),rt(a.$$.fragment,t),c=!1},d(t){t&&w(e),t&&w(r),t&&w(i),t&&w(o),ft(s,t),t&&w(u),ft(a,t)}}}function my(e){let n;return{c(){n=_("p"),n.textContent="...waiting",S(n,"class","svelte-yhe7dg")},m(t,e){b(t,n,e)},p:t,i:t,o:t,d(t){t&&w(n)}}}function by(t){let e,n,r,i,s,u,a,c,f;vy.title=e=t[0];let h={ctx:t,current:null,token:null,hasCatch:!1,pending:my,then:gy,catch:yy,blocks:[,,,]};return function(t,e){const n=e.token={};function r(t,r,i,o){if(e.token!==n)return;e.resolved=o;let s=e.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const u=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(tt(),rt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),et())})):e.block.d(1),u.c(),nt(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&J()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=U();if(t.then((t=>{M(n),r(e.then,1,e.value,t),M(null)}),(t=>{if(M(n),r(e.catch,2,e.error,t),M(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var i}(zv,h),u=new dy({}),{c(){n=_("link"),r=E(),i=_("main"),h.block.c(),s=E(),at(u.$$.fragment),S(n,"href","https://fonts.googleapis.com/css?family=M+PLUS+1p"),S(n,"rel","stylesheet"),k(i,"height",t[1]),S(i,"class","svelte-yhe7dg")},m(e,o){m(vy.head,n),b(e,r,o),b(e,i,o),h.block.m(i,h.anchor=null),h.mount=()=>i,h.anchor=s,m(i,s),ct(u,i,null),a=!0,c||(f=[T(window,"resize",t[2]),T(window,"load",t[2])],c=!0)},p(n,[r]){t=n,(!a||1&r)&&e!==(e=t[0])&&(vy.title=e);{const e=t.slice();h.block.p(e,r)}(!a||2&r)&&k(i,"height",t[1])},i(t){a||(nt(h.block),nt(u.$$.fragment,t),a=!0)},o(t){for(let t=0;t<3;t+=1){rt(h.blocks[t])}rt(u.$$.fragment,t),a=!1},d(t){w(n),t&&w(r),t&&w(i),h.block.d(),h.token=null,h=null,ft(u),c=!1,o(f)}}}function wy(t,e,n){let{name:r}=e,i=null;return t.$$set=t=>{"name"in t&&n(0,r=t.name)},[r,i,()=>{n(1,i=document.documentElement.offsetHeight<document.documentElement.scrollHeight?"auto":"100%")}]}return new class extends pt{constructor(t){super(),lt(this,t,wy,by,u,{name:0})}}({target:document.body,props:{name:"Planning Poker"}})}();
//# sourceMappingURL=bundle.js.map
