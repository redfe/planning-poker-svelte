var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}const a="undefined"!=typeof window;let c=a?()=>window.performance.now():()=>Date.now(),h=a?t=>requestAnimationFrame(t):t;const f=new Set;function l(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&h(l)}function p(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function b(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e,n){t.classList[n?"add":"remove"](e)}function _(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const T=new Set;let A,N=0;function S(t,e,n,r,i,o,s,u=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const h=c+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${u}`,l=t.ownerDocument;T.add(l);const p=l.__svelte_stylesheet||(l.__svelte_stylesheet=l.head.appendChild(y("style")).sheet),d=l.__svelte_rules||(l.__svelte_rules={});d[f]||(d[f]=!0,p.insertRule(`@keyframes ${f} ${h}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?v+", ":""}${f} ${r}ms linear ${i}ms 1 both`,N+=1,f}function O(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),N-=i,N||h((()=>{N||(T.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),T.clear())})))}function k(t){A=t}function x(){if(!A)throw new Error("Function called outside component initialization");return A}const D=[],P=[],C=[],R=[],L=Promise.resolve();let U=!1;function V(t){C.push(t)}let M=!1;const j=new Set;function F(){if(!M){M=!0;do{for(let t=0;t<D.length;t+=1){const e=D[t];k(e),q(e.$$)}for(k(null),D.length=0;P.length;)P.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];j.has(e)||(j.add(e),e())}C.length=0}while(D.length);for(;R.length;)R.pop()();U=!1,M=!1,j.clear()}}function q(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(V)}}let B;function G(t,e,n){t.dispatchEvent(_(`${e?"intro":"outro"}${n}`))}const z=new Set;let $;function H(){$={r:0,c:[],p:$}}function K(){$.r||i($.c),$=$.p}function W(t,e){t&&t.i&&(z.delete(t),t.i(e))}function Y(t,e,n,r){if(t&&t.o){if(z.has(t))return;z.add(t),$.c.push((()=>{z.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const Q={duration:0};function J(n,r,s,u){let a=r(n,s),p=u?0:1,d=null,v=null,y=null;function g(){y&&O(n,y)}function m(t,e){const n=t.b-p;return e*=Math.abs(n),{a:p,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(r){const{delay:o=0,duration:s=300,easing:u=e,tick:b=t,css:w}=a||Q,I={start:c()+o,b:r};r||(I.group=$,$.r+=1),d||v?v=I:(w&&(g(),y=S(n,p,r,s,o,u,w)),r&&b(0,1),d=m(I,s),V((()=>G(n,r,"start"))),function(t){let e;0===f.size&&h(l),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(v&&t>v.start&&(d=m(v,s),v=null,G(n,d.b,"start"),w&&(g(),y=S(n,p,d.b,d.duration,0,u,a.css))),d)if(t>=d.end)b(p=d.b,1-p),G(n,d.b,"end"),v||(d.b?g():--d.group.r||i(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;p=d.a+d.d*u(e/d.duration),b(p,1-p)}return!(!d&&!v)})))}return{run(t){o(a)?(B||(B=Promise.resolve(),B.then((()=>{B=null}))),B).then((()=>{a=a(),b(t)})):b(t)},end(){g(),d=v=null}}}function X(t,e){Y(t,1,1,(()=>{e.delete(t.key)}))}function Z(t){t&&t.c()}function tt(t,e,r){const{fragment:s,on_mount:u,on_destroy:a,after_update:c}=t.$$;s&&s.m(e,r),V((()=>{const e=u.map(n).filter(o);a?a.push(...e):i(e),t.$$.on_mount=[]})),c.forEach(V)}function et(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(D.push(t),U||(U=!0,L.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(e,n,o,s,u,a,c=[-1]){const h=A;k(e);const f=n.props||{},l=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(l.ctx=o?o(e,f,((t,n,...r)=>{const i=r.length?r[0]:n;return l.ctx&&u(l.ctx[t],l.ctx[t]=i)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](i),p&&nt(e,t)),n})):[],l.update(),p=!0,i(l.before_update),l.fragment=!!s&&s(l.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);l.fragment&&l.fragment.l(t),t.forEach(v)}else l.fragment&&l.fragment.c();n.intro&&W(e.$$.fragment),tt(e,n.target,n.anchor),F()}k(h)}class it{$destroy(){et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ot(t){const e=t-1;return e*e*e+1}function st(t,{delay:e=0,duration:n=400,easing:r=ot,x:i=0,y:o=0,opacity:s=0}){const u=getComputedStyle(t),a=+u.opacity,c="none"===u.transform?"":u.transform,h=a*(1-s);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${a-h*e}`}}const ut=[];function at(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!ut.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),ut.push(n,e)}if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,u=t){const a=[s,u];return i.push(a),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(a);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}var ct,ht=new Uint8Array(16);function ft(){if(!ct&&!(ct="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ct(ht)}var lt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function pt(t){return"string"==typeof t&&lt.test(t)}for(var dt=[],vt=0;vt<256;++vt)dt.push((vt+256).toString(16).substr(1));function yt(t,e,n){var r=(t=t||{}).random||(t.rng||ft)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(dt[t[e+0]]+dt[t[e+1]]+dt[t[e+2]]+dt[t[e+3]]+"-"+dt[t[e+4]]+dt[t[e+5]]+"-"+dt[t[e+6]]+dt[t[e+7]]+"-"+dt[t[e+8]]+dt[t[e+9]]+"-"+dt[t[e+10]]+dt[t[e+11]]+dt[t[e+12]]+dt[t[e+13]]+dt[t[e+14]]+dt[t[e+15]]).toLowerCase();if(!pt(n))throw TypeError("Stringified UUID is invalid");return n}(r)}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var gt=function(t,e){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function mt(t,e){function n(){this.constructor=t}gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var bt=function(){return(bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function wt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function It(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function Et(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _t(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Tt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_t(arguments[e]));return t}function At(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Nt(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var St=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ot(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function kt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Dt.prototype.create),o}return mt(e,t),e}(Error),Dt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Pt(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new xt(i,u,r);return a},t}();function Pt(t,e){return t.replace(Ct,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Ct=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Lt(t,e){var n=new Ut(t,e);return n.subscribe.bind(n)}var Ut=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Vt),void 0===r.error&&(r.error=Vt),void 0===r.complete&&(r.complete=Vt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Vt(){}var Mt=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),jt="[DEFAULT]",Ft=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=jt);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new St;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=bt({identifier:jt,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService(jt)}catch(t){}try{for(var r=Et(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=_t(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=jt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return wt(this,void 0,void 0,(function(){var t;return It(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Tt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===jt?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:jt:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qt,Bt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ft(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Gt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zt,$t=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(zt||(zt={}));var Ht,Kt={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},Wt=zt.INFO,Yt=((qt={})[zt.DEBUG]="log",qt[zt.VERBOSE]="log",qt[zt.INFO]="info",qt[zt.WARN]="warn",qt[zt.ERROR]="error",qt),Qt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Yt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Gt(["["+i+"]  "+t.name+":"],n))}},Jt=function(){function t(t){this.name=t,this._logLevel=Wt,this._logHandler=Qt,this._userLogHandler=null,$t.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in zt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Kt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.DEBUG],t)),this._logHandler.apply(this,Gt([this,zt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.VERBOSE],t)),this._logHandler.apply(this,Gt([this,zt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.INFO],t)),this._logHandler.apply(this,Gt([this,zt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.WARN],t)),this._logHandler.apply(this,Gt([this,zt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.ERROR],t)),this._logHandler.apply(this,Gt([this,zt.ERROR],t))},t}();function Xt(t){$t.forEach((function(e){e.setLogLevel(t)}))}var Zt,te=((Ht={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ht["bad-app-name"]="Illegal App name: '{$appName}",Ht["duplicate-app"]="Firebase App named '{$appName}' already exists",Ht["app-deleted"]="Firebase App named '{$appName}' already deleted",Ht["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ht["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ht),ee=new Dt("app","Firebase",te),ne="@firebase/app",re="[DEFAULT]",ie=((Zt={})[ne]="fire-core",Zt["@firebase/analytics"]="fire-analytics",Zt["@firebase/auth"]="fire-auth",Zt["@firebase/database"]="fire-rtdb",Zt["@firebase/functions"]="fire-fn",Zt["@firebase/installations"]="fire-iid",Zt["@firebase/messaging"]="fire-fcm",Zt["@firebase/performance"]="fire-perf",Zt["@firebase/remote-config"]="fire-rc",Zt["@firebase/storage"]="fire-gcs",Zt["@firebase/firestore"]="fire-fst",Zt["fire-js"]="fire-js",Zt["firebase-wrapper"]="fire-js-all",Zt),oe=new Jt("@firebase/app"),se=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Nt(void 0,t),this.container=new Bt(e.name),this._addComponent(new Mt("app",(function(){return o}),"PUBLIC"));try{for(var s=Et(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=re),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=re),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){oe.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ee.create("app-deleted",{appName:this.name_})},t}();se.prototype.name&&se.prototype.options||se.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ue(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=re);var s=o.name;if("string"!=typeof s||!s)throw ee.create("bad-app-name",{appName:String(s)});if(Rt(e,s))throw ee.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=ie[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void oe.warn(a.join(" "))}o(new Mt(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Xt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ee.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Kt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:zt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=$t;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Rt(e,t=t||re))throw ee.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return oe.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw ee.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Nt(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=Et(Object.keys(e)),f=h.next();!f.done;f=h.next()){var l=f.value;e[l]._addComponent(o)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ae=function t(){var e=ue(se);return e.INTERNAL=bt(bt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Nt(e,t)},createSubscribe:Lt,ErrorFactory:Dt,deepExtend:Nt}),e}(),ce=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){oe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var he=self.firebase.SDK_VERSION;he&&he.indexOf("LITE")>=0&&oe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var fe=ae.initializeApp;ae.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return kt()&&oe.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),fe.apply(void 0,t)};var le=ae;!function(t,e){t.INTERNAL.registerComponent(new Mt("platform-logger",(function(t){return new ce(t)}),"PRIVATE")),t.registerVersion(ne,"0.6.13",e),t.registerVersion("fire-js","")}(le);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
le.registerVersion("firebase","8.2.0","app");
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var pe=function(t,e){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function de(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ve,ye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ge=ge||{},me=ye||self;function be(){}function we(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ie(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ee="closure_uid_"+(1e9*Math.random()>>>0),_e=0;function Te(t,e,n){return t.call.apply(t.bind,arguments)}function Ae(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ne(t,e,n){return(Ne=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Te:Ae).apply(null,arguments)}function Se(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Oe(){return Date.now()}function ke(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function xe(){this.j=this.j,this.i=this.i}xe.prototype.j=!1,xe.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Ee)&&t[Ee]||(t[Ee]=++_e)})(this)},xe.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var De=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Pe=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ce(t){return Array.prototype.concat.apply([],arguments)}function Re(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Le(t){return/^[\s\xa0]*$/.test(t)}var Ue,Ve=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Me(t,e){return-1!=t.indexOf(e)}function je(t,e){return t<e?-1:t>e?1:0}t:{var Fe=me.navigator;if(Fe){var qe=Fe.userAgent;if(qe){Ue=qe;break t}}Ue=""}function Be(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ge(t){var e={};for(var n in t)e[n]=t[n];return e}var ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ze.length;o++)n=ze[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function He(t){return He[" "](t),t}He[" "]=be;var Ke,We,Ye=Me(Ue,"Opera"),Qe=Me(Ue,"Trident")||Me(Ue,"MSIE"),Je=Me(Ue,"Edge"),Xe=Je||Qe,Ze=Me(Ue,"Gecko")&&!(Me(Ue.toLowerCase(),"webkit")&&!Me(Ue,"Edge"))&&!(Me(Ue,"Trident")||Me(Ue,"MSIE"))&&!Me(Ue,"Edge"),tn=Me(Ue.toLowerCase(),"webkit")&&!Me(Ue,"Edge");function en(){var t=me.document;return t?t.documentMode:void 0}t:{var nn="",rn=(We=Ue,Ze?/rv:([^\);]+)(\)|;)/.exec(We):Je?/Edge\/([\d\.]+)/.exec(We):Qe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(We):tn?/WebKit\/(\S+)/.exec(We):Ye?/(?:Version)[ \/]?(\S+)/.exec(We):void 0);if(rn&&(nn=rn?rn[1]:""),Qe){var on=en();if(null!=on&&on>parseFloat(nn)){Ke=String(on);break t}}Ke=nn}var sn,un={};function an(t){return function(t,e){var n=un;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Ve(String(Ke)).split("."),r=Ve(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=je(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||je(0==s[2].length,0==u[2].length)||je(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(me.document&&Qe){var cn=en();sn=cn||(parseInt(Ke,10)||void 0)}else sn=void 0;var hn=sn,fn=!Qe||9<=Number(hn),ln=Qe&&!an("9"),pn=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{me.addEventListener("test",be,e),me.removeEventListener("test",be,e)}catch(t){}return t}();function dn(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function vn(t,e){if(dn.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ze){t:{try{He(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:yn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}dn.prototype.b=function(){this.defaultPrevented=!0},ke(vn,dn);var yn={2:"touch",3:"pen",4:"mouse"};vn.prototype.b=function(){vn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ln)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var gn="closure_listenable_"+(1e6*Math.random()|0),mn=0;function bn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++mn,this.Y=this.Z=!1}function wn(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function In(t){this.src=t,this.a={},this.b=0}function En(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=De(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(wn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function _n(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}In.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=_n(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new bn(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Tn="closure_lm_"+(1e6*Math.random()|0),An={};function Nn(t,e,n,r,i){if(r&&r.once)return On(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Nn(t,e[o],n,r,i);return null}return n=Un(n),t&&t[gn]?t.va(e,n,Ie(r)?!!r.capture:!!r,i):Sn(t,e,n,!1,r,i)}function Sn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ie(i)?!!i.capture:!!i;if(s&&!fn)return null;var u=Rn(t);if(u||(t[Tn]=u=new In(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Cn,e=fn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)pn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Dn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function On(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)On(t,e[o],n,r,i);return null}return n=Un(n),t&&t[gn]?t.wa(e,n,Ie(r)?!!r.capture:!!r,i):Sn(t,e,n,!0,r,i)}function kn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)kn(t,e[o],n,r,i);else r=Ie(r)?!!r.capture:!!r,n=Un(n),t&&t[gn]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=_n(o=t.a[e],n,r,i))&&(wn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Rn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=_n(e,n,r,i)),(n=-1<t?e[t]:null)&&xn(n))}function xn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[gn])En(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Dn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Rn(e))?(En(n,t),0==n.b&&(n.src=null,e[Tn]=null)):wn(t)}}}function Dn(t){return t in An?An[t]:An[t]="on"+t}function Pn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&xn(t),n.call(r,e)}function Cn(t,e){if(t.Y)return!0;if(!fn){if(!e)t:{e=["window","event"];for(var n=me,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Pn(t,e=new vn(e,this))}return Pn(t,new vn(e,this))}function Rn(t){return(t=t[Tn])instanceof In?t:null}var Ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Un(t){return"function"==typeof t?t:(t[Ln]||(t[Ln]=function(e){return t.handleEvent(e)}),t[Ln])}function Vn(){xe.call(this),this.c=new In(this),this.J=this,this.C=null}function Mn(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new dn(e,t);else if(e instanceof dn)e.target=e.target||t;else{var i=e;$e(e=new dn(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=jn(s,r,!0,e)&&i}if(i=jn(s=e.a=t,r,!0,e)&&i,i=jn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=jn(s=e.a=n[o],r,!1,e)&&i}function jn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&En(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}ke(Vn,xe),Vn.prototype[gn]=!0,(ve=Vn.prototype).addEventListener=function(t,e,n,r){Nn(this,t,e,n,r)},ve.removeEventListener=function(t,e,n,r){kn(this,t,e,n,r)},ve.G=function(){if(Vn.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)wn(n[r]);delete e.a[t],e.b--}}this.C=null},ve.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ve.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Fn=me.JSON.stringify;function qn(){this.b=this.a=null}var Bn,Gn=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new $n}),(function(t){t.reset()}));function zn(){var t=Yn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function $n(){this.next=this.b=this.a=null}function Hn(t){me.setTimeout((function(){throw t}),0)}function Kn(t,e){Bn||function(){var t=me.Promise.resolve(void 0);Bn=function(){t.then(Qn)}}(),Wn||(Bn(),Wn=!0),Yn.add(t,e)}qn.prototype.add=function(t,e){var n=Gn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},$n.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},$n.prototype.reset=function(){this.next=this.b=this.a=null};var Wn=!1,Yn=new qn;function Qn(){for(var t;t=zn();){try{t.a.call(t.b)}catch(t){Hn(t)}var e=Gn;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Wn=!1}function Jn(t,e){Vn.call(this),this.b=t||1,this.a=e||me,this.f=Ne(this.Za,this),this.g=Oe()}function Xn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Zn(t,e,n){if("function"==typeof t)n&&(t=Ne(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ne(t.handleEvent,t)}return 2147483647<Number(e)?-1:me.setTimeout(t,e||0)}function tr(t){t.a=Zn((function(){t.a=null,t.c&&(t.c=!1,tr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ke(Jn,Vn),(ve=Jn.prototype).aa=!1,ve.M=null,ve.Za=function(){if(this.aa){var t=Oe()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Mn(this,"tick"),this.aa&&(Xn(this),this.start()))}},ve.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Oe())},ve.G=function(){Jn.X.G.call(this),Xn(this),delete this.a};var er=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}pe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:tr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(me.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(xe);function nr(t){xe.call(this),this.b=t,this.a={}}ke(nr,xe);var rr=[];function ir(t,e,n,r){Array.isArray(n)||(n&&(rr[0]=n.toString()),n=rr);for(var i=0;i<n.length;i++){var o=Nn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function or(t){Be(t.a,(function(t,e){this.a.hasOwnProperty(e)&&xn(t)}),t),t.a={}}function sr(){this.a=!0}function ur(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Fn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}nr.prototype.G=function(){nr.X.G.call(this),or(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sr.prototype.info=function(){};var ar={},cr=null;function hr(){return cr=cr||new Vn}function fr(t){dn.call(this,ar.Fa,t)}function lr(t){var e=hr();Mn(e,new fr(e,t))}function pr(t,e){dn.call(this,ar.STAT_EVENT,t),this.stat=e}function dr(t){var e=hr();Mn(e,new pr(e,t))}function vr(t){dn.call(this,ar.Ga,t)}function yr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return me.setTimeout((function(){t()}),e)}ar.Fa="serverreachability",ke(fr,dn),ar.STAT_EVENT="statevent",ke(pr,dn),ar.Ga="timingevent",ke(vr,dn);var gr={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},mr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function br(){}function wr(t){var e;return(e=t.a)||(e=t.a={}),e}function Ir(){}br.prototype.a=null;var Er,_r={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Tr(){dn.call(this,"d")}function Ar(){dn.call(this,"c")}function Nr(){}function Sr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new nr(this),this.P=Or,t=Xe?125:void 0,this.R=new Jn(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ke(Tr,dn),ke(Ar,dn),ke(Nr,br),Er=new Nr;var Or=45e3,kr={},xr={};function Dr(t,e,n){t.H=1,t.i=Zr(Kr(e)),t.j=n,t.I=!0,Pr(t,null)}function Pr(t,e){t.u=Oe(),Lr(t),t.l=Kr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),li(n.b,"t",r),t.D=0,t.a=so(t.g,t.g.C?e:null),0<t.O&&(t.F=new er(Ne(t.Ca,t,t.a),t.O)),ir(t.J,t.a,"readystatechange",t.Xa),e=t.B?Ge(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),lr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Cr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Rr(t,n);if(i==xr){4==e&&(t.h=4,dr(14),r=!1),ur(t.c,t.f,null,"[Incomplete Response]");break}if(i==kr){t.h=4,dr(15),ur(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ur(t.c,t.f,i,null),Fr(t,i)}4==e&&0==n.length&&(t.h=1,dr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xi(e),e.F=!0,dr(11))):(ur(t.c,t.f,n,"[Invalid Chunked Response]"),jr(t),Mr(t))}function Rr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?xr:(n=Number(e.substring(n,r)),isNaN(n)?kr:(r+=1)+n>e.length?xr:(e=e.substr(r,n),t.D=r+n,e))}function Lr(t){t.T=Oe()+t.P,Ur(t,t.P)}function Ur(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=yr(Ne(t.Va,t),e)}function Vr(t){t.o&&(me.clearTimeout(t.o),t.o=null)}function Mr(t){0==t.g.v||t.A||eo(t.g,t)}function jr(t){Vr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Xn(t.R),or(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Fr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||bi(n.b,t)))if(n.I=t.N,!t.C&&bi(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;to(n),Gi(n)}Ji(n),dr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=yr(Ne(n.Sa,n),6e3));if(1>=mi(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else ro(n,11)}else if((t.C||n.a==t)&&to(n),!Le(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(Me(h,"spdy")||Me(h,"quic")||Me(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(wi(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Xr(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Oe()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=oo(a,a.C?a.ga:null,a.fa),p.C){Ii(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(Vr(d),Lr(d)),a.a=p}else Qi(a);0<n.g.length&&Hi(n)}else"stop"!=i[0]&&"close"!=i[0]||ro(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?ro(n,7):Bi(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);lr(4)}catch(t){}}function qr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(we(t)||"string"==typeof t)Pe(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(we(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(we(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Br(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Br)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Gr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];zr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)zr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function zr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ve=Sr.prototype).setTimeout=function(t){this.P=t},ve.Xa=function(t){t=t.target;var e=this.F;e&&3==Mi(t)?e.f():this.Ca(t)},ve.Ca=function(t){try{if(t==this.a)t:{var e=Mi(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Xe&&!this.a.$())){this.A||4!=e||7==n||lr(8==n||0>=r?3:2),Vr(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Le(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,dr(12),jr(this),Mr(this);break t}ur(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Fr(this,a)}this.I?(Cr(this,e,o),Xe&&this.b&&3==e&&(ir(this.J,this.R,"tick",this.Wa),this.R.start())):(ur(this.c,this.f,o,null),Fr(this,o)),4==e&&jr(this),this.b&&!this.A&&(4==e?eo(this.g,this):(this.b=!1,Lr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,dr(12)):(this.h=0,dr(13)),jr(this),Mr(this)}}}catch(t){}},ve.Wa=function(){if(this.a){var t=Mi(this.a),e=this.a.$();this.D<e.length&&(Vr(this),Cr(this,t,e),this.b&&4!=t&&Lr(this))}},ve.cancel=function(){this.A=!0,jr(this)},ve.Va=function(){this.o=null;var t=Oe();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(lr(3),dr(17)),jr(this),this.h=2,Mr(this)):Ur(this,this.T-t)},(ve=Br.prototype).K=function(){Gr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ve.L=function(){return Gr(this),this.a.concat()},ve.get=function(t,e){return zr(this.b,t)?this.b[t]:e},ve.set=function(t,e){zr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ve.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var $r=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Hr){this.a=void 0!==e?e:t.a,Wr(this,t.f),this.j=t.j,Yr(this,t.c),Qr(this,t.h),this.g=t.g,e=t.b;var n=new ai;n.c=e.c,e.a&&(n.a=new Br(e.a),n.b=e.b),Jr(this,n),this.i=t.i}else t&&(n=String(t).match($r))?(this.a=!!e,Wr(this,n[1]||"",!0),this.j=ti(n[2]||""),Yr(this,n[3]||"",!0),Qr(this,n[4]),this.g=ti(n[5]||"",!0),Jr(this,n[6]||"",!0),this.i=ti(n[7]||"")):(this.a=!!e,this.b=new ai(null,this.a))}function Kr(t){return new Hr(t)}function Wr(t,e,n){t.f=n?ti(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Yr(t,e,n){t.c=n?ti(e,!0):e}function Qr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Jr(t,e,n){e instanceof ai?(t.b=e,function(t,e){e&&!t.f&&(ci(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(hi(this,e),li(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ei(e,si)),t.b=new ai(e,t.a))}function Xr(t,e,n){t.b.set(e,n)}function Zr(t){return Xr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Oe()).toString(36)),t}function ti(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ei(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ni),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ni(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Hr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ei(e,ri,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ei(e,ri,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ei(n,"/"==n.charAt(0)?oi:ii,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ei(n,ui)),t.join("")};var ri=/[#\/\?@]/g,ii=/[#\?:]/g,oi=/[#\?]/g,si=/[#\?@]/g,ui=/#/g;function ai(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ci(t){t.a||(t.a=new Br,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function hi(t,e){ci(t),e=pi(t,e),zr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,zr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Gr(t)))}function fi(t,e){return ci(t),e=pi(t,e),zr(t.a.b,e)}function li(t,e,n){hi(t,e),0<n.length&&(t.c=null,t.a.set(pi(t,e),Re(n)),t.b+=n.length)}function pi(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ve=ai.prototype).add=function(t,e){ci(this),this.c=null,t=pi(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ve.forEach=function(t,e){ci(this),this.a.forEach((function(n,r){Pe(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ve.L=function(){ci(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ve.K=function(t){ci(this);var e=[];if("string"==typeof t)fi(this,t)&&(e=Ce(e,this.a.get(pi(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ce(e,t[n])}return e},ve.set=function(t,e){return ci(this),this.c=null,fi(this,t=pi(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ve.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ve.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var di=function(t,e){this.b=t,this.a=e};function vi(t){this.g=t||yi,me.PerformanceNavigationTiming?t=0<(t=me.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(me.ia&&me.ia.ya&&me.ia.ya()&&me.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var yi=10;function gi(t){return!!t.b||!!t.a&&t.a.size>=t.f}function mi(t){return t.b?1:t.a?t.a.size:0}function bi(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function wi(t,e){t.a?t.a.add(e):t.b=e}function Ii(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ei(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=de(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Re(t.c)}function _i(){}function Ti(){this.a=new _i}function Ai(t,e,n){var r=n||"";try{qr(t,(function(t,n){var i=t;Ie(t)&&(i=Fn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Ni(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}vi.prototype.cancel=function(){var t,e;if(this.c=Ei(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=de(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},_i.prototype.stringify=function(t){return me.JSON.stringify(t,void 0)},_i.prototype.parse=function(t){return me.JSON.parse(t,void 0)};var Si=me.JSON.parse;function Oi(t){Vn.call(this),this.headers=new Br,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ki,this.D=this.F=!1}ke(Oi,Vn);var ki="",xi=/^https?$/i,Di=["POST","PUT"];function Pi(t){return"content-type"==t.toLowerCase()}function Ci(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ri(t),Ui(t)}function Ri(t){t.u||(t.u=!0,Mn(t,"complete"),Mn(t,"error"))}function Li(t){if(t.b&&void 0!==ge&&(!t.s[1]||4!=Mi(t)||2!=t.W()))if(t.l&&4==Mi(t))Zn(t.za,0,t);else if(Mn(t,"readystatechange"),4==Mi(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match($r)[1]||null;if(!o&&me.self&&me.self.location){var s=me.self.location.protocol;o=s.substr(0,s.length-1)}i=!xi.test(o?o.toLowerCase():"")}e=i}if(e)Mn(t,"complete"),Mn(t,"success");else{t.h=6;try{var u=2<Mi(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",Ri(t)}}finally{Ui(t)}}}function Ui(t,e){if(t.a){Vi(t);var n=t.a,r=t.s[0]?be:null;t.a=null,t.s=null,e||Mn(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Vi(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(me.clearTimeout(t.m),t.m=null)}function Mi(t){return t.a?t.a.readyState:0}function ji(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Be(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Xr(t,e,n))}function Fi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qi(t){this.pa=0,this.g=[],this.c=new sr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Fi("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Fi("baseRetryDelayMs",5e3,t),this.Ra=Fi("retryDelaySeedMs",1e4,t),this.Ma=Fi("forwardChannelMaxRetries",2,t),this.ma=Fi("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new vi(t&&t.concurrentRequestLimit),this.ka=new Ti,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Bi(t){if(zi(t),3==t.v){var e=t.R++,n=Kr(t.B);Xr(n,"SID",t.J),Xr(n,"RID",e),Xr(n,"TYPE","terminate"),Wi(t,n),(e=new Sr(t,t.c,e,void 0)).H=2,e.i=Zr(Kr(n)),n=!1,me.navigator&&me.navigator.sendBeacon&&(n=me.navigator.sendBeacon(e.i.toString(),"")),!n&&me.Image&&((new Image).src=e.i,n=!0),n||(e.a=so(e.g,null),e.a.ba(e.i)),e.u=Oe(),Lr(e)}io(t)}function Gi(t){t.a&&(Xi(t),t.a.cancel(),t.a=null)}function zi(t){Gi(t),t.j&&(me.clearTimeout(t.j),t.j=null),to(t),t.b.cancel(),t.h&&("number"==typeof t.h&&me.clearTimeout(t.h),t.h=null)}function $i(t,e){t.g.push(new di(t.Oa++,e)),3==t.v&&Hi(t)}function Hi(t){gi(t.b)||t.h||(t.h=!0,Kn(t.Ba,t),t.u=0)}function Ki(t,e){var n;n=e?e.f:t.R++;var r=Kr(t.B);Xr(r,"SID",t.J),Xr(r,"RID",n),Xr(r,"AID",t.P),Wi(t,r),t.i&&t.l&&ji(r,t.i,t.l),n=new Sr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Yi(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),wi(t.b,n),Dr(n,r,e)}function Wi(t,e){t.f&&qr({},(function(t,n){Xr(e,n,t)}))}function Yi(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ne(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Ai(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Qi(t){t.a||t.j||(t.T=1,Kn(t.Aa,t),t.o=0)}function Ji(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=yr(Ne(t.Aa,t),no(t,t.o)),t.o++,!0)}function Xi(t){null!=t.s&&(me.clearTimeout(t.s),t.s=null)}function Zi(t){t.a=new Sr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Kr(t.la);Xr(e,"RID","rpc"),Xr(e,"SID",t.J),Xr(e,"CI",t.H?"0":"1"),Xr(e,"AID",t.P),Wi(t,e),Xr(e,"TYPE","xmlhttp"),t.i&&t.l&&ji(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Zr(Kr(e)),n.j=null,n.I=!0,Pr(n,t)}function to(t){null!=t.m&&(me.clearTimeout(t.m),t.m=null)}function eo(t,e){var n=null;if(t.a==e){to(t),Xi(t),t.a=null;var r=2}else{if(!bi(t.b,e))return;n=e.s,Ii(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Oe()-e.u;var i=t.u;Mn(r=hr(),new vr(r,n,e,i)),Hi(t)}else Qi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(mi(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=yr(Ne(t.Ba,t,e),no(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ji(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:ro(t,5);break;case 4:ro(t,10);break;case 3:ro(t,6);break;default:ro(t,2)}}function no(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function ro(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Ne(t.Ya,t);n||(n=new Hr("//www.google.com/images/cleardot.gif"),me.location&&"http"==me.location.protocol||Wr(n,"https"),Zr(n)),function(t,e){var n=new sr;if(me.Image){var r=new Image;r.onload=Se(Ni,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Se(Ni,n,r,"TestLoadImage: error",!1,e),r.onabort=Se(Ni,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Se(Ni,n,r,"TestLoadImage: timeout",!1,e),me.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else dr(2);t.v=0,t.f&&t.f.ra(e),io(t),zi(t)}function io(t){t.v=0,t.I=-1,t.f&&(0==Ei(t.b).length&&0==t.g.length||(t.b.c.length=0,Re(t.g),t.g.length=0),t.f.qa())}function oo(t,e,n){var r=function(t){return t instanceof Hr?Kr(t):new Hr(t,void 0)}(n);if(""!=r.c)e&&Yr(r,e+"."+r.c),Qr(r,r.h);else{var i=me.location;r=function(t,e,n,r){var i=new Hr(null,void 0);return t&&Wr(i,t),e&&Yr(i,e),n&&Qr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Be(t.V,(function(t,e){Xr(r,e,t)})),e=t.A,n=t.na,e&&n&&Xr(r,e,n),Xr(r,"VER",t.ha),Wi(t,r),r}function so(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Oi(t.Na)).F=t.C,e}function uo(){}function ao(){if(Qe&&!(10<=Number(hn)))throw Error("Environmental error: no available transport.")}function co(t,e){Vn.call(this),this.a=new qi(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Le(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Le(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new lo(this)}function ho(t){Tr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function fo(){Ar.call(this),this.status=1}function lo(t){this.a=t}(ve=Oi.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?wr(this.H):wr(Er),this.a.onreadystatechange=Ne(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ci(this,t)}t=n||"";var i=new Br(this.headers);r&&qr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Pi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=me.FormData&&t instanceof me.FormData,!(0<=De(Di,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Vi(this),0<this.o&&((this.D=function(t){return Qe&&an(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Ne(this.xa,this)):this.m=Zn(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ci(this,t)}},ve.xa=function(){void 0!==ge&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Mn(this,"timeout"),this.abort(8))},ve.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Mn(this,"complete"),Mn(this,"abort"),Ui(this))},ve.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ui(this,!0)),Oi.X.G.call(this)},ve.za=function(){this.j||(this.A||this.l||this.g?Li(this):this.Ua())},ve.Ua=function(){Li(this)},ve.W=function(){try{return 2<Mi(this)?this.a.status:-1}catch(t){return-1}},ve.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ve.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Si(e)}},ve.ua=function(){return this.h},ve.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ve=qi.prototype).ha=8,ve.v=1,ve.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Sr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?$e(r=Ge(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Yi(this,n,e),Xr(i=Kr(this.B),"RID",t),Xr(i,"CVER",22),this.A&&Xr(i,"X-HTTP-Session-Id",this.A),Wi(this,i),this.i&&r&&ji(i,this.i,r),wi(this.b,n),this.Ia&&Xr(i,"TYPE","init"),this.da?(Xr(i,"$req",e),Xr(i,"SID","null"),n.U=!0,Dr(n,i,null)):Dr(n,i,e),this.v=2}}else 3==this.v&&(t?Ki(this,t):0==this.g.length||gi(this.b)||Ki(this))},ve.Aa=function(){if(this.j=null,Zi(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=yr(Ne(this.Ta,this),t)}},ve.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,dr(10),Gi(this),Zi(this))},ve.Sa=function(){null!=this.m&&(this.m=null,Gi(this),Ji(this),dr(19))},ve.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),dr(2)):(this.c.info("Failed to ping google.com"),dr(1))},(ve=uo.prototype).ta=function(){},ve.sa=function(){},ve.ra=function(){},ve.qa=function(){},ve.Ja=function(){},ao.prototype.a=function(t,e){return new co(t,e)},ke(co,Vn),co.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;dr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=oo(t,null,t.fa),Hi(t)},co.prototype.close=function(){Bi(this.a)},co.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,$i(this.a,e)}else this.l?((e={}).__data__=Fn(t),$i(this.a,e)):$i(this.a,t)},co.prototype.G=function(){this.a.f=null,delete this.f,Bi(this.a),delete this.a,co.X.G.call(this)},ke(ho,Tr),ke(fo,Ar),ke(lo,uo),lo.prototype.ta=function(){Mn(this.a,"a")},lo.prototype.sa=function(t){Mn(this.a,new ho(t))},lo.prototype.ra=function(t){Mn(this.a,new fo(t))},lo.prototype.qa=function(){Mn(this.a,"b")},ao.prototype.createWebChannel=ao.prototype.a,co.prototype.send=co.prototype.h,co.prototype.open=co.prototype.g,co.prototype.close=co.prototype.close,gr.NO_ERROR=0,gr.TIMEOUT=8,gr.HTTP_ERROR=6,mr.COMPLETE="complete",Ir.EventType=_r,_r.OPEN="a",_r.CLOSE="b",_r.ERROR="c",_r.MESSAGE="d",Vn.prototype.listen=Vn.prototype.va,Oi.prototype.listenOnce=Oi.prototype.wa,Oi.prototype.getLastError=Oi.prototype.Qa,Oi.prototype.getLastErrorCode=Oi.prototype.ua,Oi.prototype.getStatus=Oi.prototype.W,Oi.prototype.getResponseJson=Oi.prototype.Pa,Oi.prototype.getResponseText=Oi.prototype.$,Oi.prototype.send=Oi.prototype.ba;var po=gr,vo=mr,yo=ar,go=10,mo=11,bo=Ir,wo=Oi,Io=new Jt("@firebase/firestore");function Eo(){return Io.logLevel}function _o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Io.logLevel<=zt.DEBUG){var r=e.map(No);Io.debug.apply(Io,At(["Firestore (8.2.0): "+t],r))}}function To(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Io.logLevel<=zt.ERROR){var r=e.map(No);Io.error.apply(Io,At(["Firestore (8.2.0): "+t],r))}}function Ao(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Io.logLevel<=zt.WARN){var r=e.map(No);Io.warn.apply(Io,At(["Firestore (8.2.0): "+t],r))}}function No(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function So(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.0) INTERNAL ASSERTION FAILED: "+t;throw To(e),new Error(e)}function Oo(t,e){t||So()}function ko(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Do=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=xo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Po(t,e){return t<e?-1:t>e?1:0}function Co(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ro(t){return t+"\0"}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lo=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return Po(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Lo.h=new Lo("");var Uo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return mt(e,t),e}(Error),Mo=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Lo.fromBase64String(e))}catch(e){throw new Vo(Uo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Lo.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),jo=function(t){this._=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fo(){if("undefined"==typeof Uint8Array)throw new Vo(Uo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function qo(){if("undefined"==typeof atob)throw new Vo(Uo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.fromBase64String=function(t){return qo(),new e(Mo.fromBase64String(t))},e.fromUint8Array=function(t){return Fo(),new e(Mo.fromUint8Array(t))},e.prototype.toBase64=function(){return qo(),this._.toBase64()},e.prototype.toUint8Array=function(){return Fo(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(jo),Go=function(){function t(t){this.uid=t}return t.prototype.T=function(){return null!=this.uid},t.prototype.I=function(){return this.T()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Go.UNAUTHENTICATED=new Go(null),Go.m=new Go("google-credentials-uid"),Go.A=new Go("first-party-uid");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var zo=function(t,e){this.user=e,this.type="OAuth",this.R={},this.R.Authorization="Bearer "+t},$o=function(){function t(){this.P=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.g=function(){},t.prototype.V=function(t){this.P=t,t(Go.UNAUTHENTICATED)},t.prototype.p=function(){this.P=null},t}(),Ho=function(){function t(t){var e=this;this.v=null,this.currentUser=Go.UNAUTHENTICATED,this.S=!1,this.D=0,this.P=null,this.forceRefresh=!1,this.v=function(){e.D++,e.currentUser=e.C(),e.S=!0,e.P&&e.P(e.currentUser)},this.D=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.v):(this.v(null),t.get().then((function(t){e.auth=t,e.v&&e.auth.addAuthTokenListener(e.v)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.D,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.D!==e?(_o("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Oo("string"==typeof n.accessToken),new zo(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.g=function(){this.forceRefresh=!0},t.prototype.V=function(t){this.P=t,this.S&&t(this.currentUser)},t.prototype.p=function(){this.auth&&this.auth.removeAuthTokenListener(this.v),this.v=null,this.P=null},t.prototype.C=function(){var t=this.auth&&this.auth.getUid();return Oo(null===t||"string"==typeof t),new Go(t)},t}(),Ko=function(){function t(t,e){this.N=t,this.F=e,this.type="FirstParty",this.user=Go.A}return Object.defineProperty(t.prototype,"R",{get:function(){var t={"X-Goog-AuthUser":this.F},e=this.N.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Wo=function(){function t(t,e){this.N=t,this.F=e}return t.prototype.getToken=function(){return Promise.resolve(new Ko(this.N,this.F))},t.prototype.V=function(t){t(Go.A)},t.prototype.p=function(){},t.prototype.g=function(){},t}(),Yo=function(t,e,n,r,i,o){this.O=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.k=o},Qo=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"M",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Jo=function(){function t(){}return t.prototype.L=function(t){},t.prototype.$=function(){},t}(),Xo=function(){function t(){var t=this;this.B=function(){return t.q()},this.U=function(){return t.K()},this.W=[],this.j()}return t.prototype.L=function(t){this.W.push(t)},t.prototype.$=function(){window.removeEventListener("online",this.B),window.removeEventListener("offline",this.U)},t.prototype.j=function(){window.addEventListener("online",this.B),window.addEventListener("offline",this.U)},t.prototype.q=function(){_o("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(0)},t.prototype.K=function(){_o("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(1)},t.G=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Zo(t){return null==t}function ts(t){return 0===t&&1/t==-1/0}function es(t){return"number"==typeof t&&Number.isInteger(t)&&!ts(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ns,rs,is={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function os(t){switch(t){case Uo.OK:return So();case Uo.CANCELLED:case Uo.UNKNOWN:case Uo.DEADLINE_EXCEEDED:case Uo.RESOURCE_EXHAUSTED:case Uo.INTERNAL:case Uo.UNAVAILABLE:case Uo.UNAUTHENTICATED:return!1;case Uo.INVALID_ARGUMENT:case Uo.NOT_FOUND:case Uo.ALREADY_EXISTS:case Uo.PERMISSION_DENIED:case Uo.FAILED_PRECONDITION:case Uo.ABORTED:case Uo.OUT_OF_RANGE:case Uo.UNIMPLEMENTED:case Uo.DATA_LOSS:return!0;default:return So()}}function ss(t){if(void 0===t)return To("GRPC error has no .code"),Uo.UNKNOWN;switch(t){case ns.OK:return Uo.OK;case ns.CANCELLED:return Uo.CANCELLED;case ns.UNKNOWN:return Uo.UNKNOWN;case ns.DEADLINE_EXCEEDED:return Uo.DEADLINE_EXCEEDED;case ns.RESOURCE_EXHAUSTED:return Uo.RESOURCE_EXHAUSTED;case ns.INTERNAL:return Uo.INTERNAL;case ns.UNAVAILABLE:return Uo.UNAVAILABLE;case ns.UNAUTHENTICATED:return Uo.UNAUTHENTICATED;case ns.INVALID_ARGUMENT:return Uo.INVALID_ARGUMENT;case ns.NOT_FOUND:return Uo.NOT_FOUND;case ns.ALREADY_EXISTS:return Uo.ALREADY_EXISTS;case ns.PERMISSION_DENIED:return Uo.PERMISSION_DENIED;case ns.FAILED_PRECONDITION:return Uo.FAILED_PRECONDITION;case ns.ABORTED:return Uo.ABORTED;case ns.OUT_OF_RANGE:return Uo.OUT_OF_RANGE;case ns.UNIMPLEMENTED:return Uo.UNIMPLEMENTED;case ns.DATA_LOSS:return Uo.DATA_LOSS;default:return So()}}(rs=ns||(ns={}))[rs.OK=0]="OK",rs[rs.CANCELLED=1]="CANCELLED",rs[rs.UNKNOWN=2]="UNKNOWN",rs[rs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rs[rs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rs[rs.NOT_FOUND=5]="NOT_FOUND",rs[rs.ALREADY_EXISTS=6]="ALREADY_EXISTS",rs[rs.PERMISSION_DENIED=7]="PERMISSION_DENIED",rs[rs.UNAUTHENTICATED=16]="UNAUTHENTICATED",rs[rs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rs[rs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rs[rs.ABORTED=10]="ABORTED",rs[rs.OUT_OF_RANGE=11]="OUT_OF_RANGE",rs[rs.UNIMPLEMENTED=12]="UNIMPLEMENTED",rs[rs.INTERNAL=13]="INTERNAL",rs[rs.UNAVAILABLE=14]="UNAVAILABLE",rs[rs.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var us=function(){function t(t){this.H=t.H,this.J=t.J}return t.prototype.Y=function(t){this.X=t},t.prototype.Z=function(t){this.tt=t},t.prototype.onMessage=function(t){this.et=t},t.prototype.close=function(){this.J()},t.prototype.send=function(t){this.H(t)},t.prototype.nt=function(){this.X()},t.prototype.st=function(t){this.tt(t)},t.prototype.it=function(t){this.et(t)},t}(),as=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},cs=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.k=e.k,n}return mt(e,t),e.prototype.lt=function(t,e,n,r){return new Promise((function(i,o){var s=new wo;s.listenOnce(vo.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case po.NO_ERROR:var e=s.getResponseJson();_o("Connection","XHR received:",JSON.stringify(e)),i(e);break;case po.TIMEOUT:_o("Connection",'RPC "'+t+'" timed out'),o(new Vo(Uo.DEADLINE_EXCEEDED,"Request time out"));break;case po.HTTP_ERROR:var n=s.getStatus();if(_o("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Uo).indexOf(e)>=0?e:Uo.UNKNOWN}(r.status);o(new Vo(u,r.message))}else o(new Vo(Uo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Vo(Uo.UNAVAILABLE,"Connection failed."));break;default:So()}}finally{_o("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.ft=function(t,e){var n,r=[this.ot,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new ao,o=hr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.O.projectId+"/databases/"+this.O.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.k};this.ht(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())||"object"==typeof navigator&&"ReactNative"===navigator.product||Ot().indexOf("Electron/")>=0||function(){var t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||Ot().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");_o("Connection","Creating WebChannel: "+u,s);var a=i.createWebChannel(u,s),c=!1,h=!1,f=new us({H:function(t){h?_o("Connection","Not sending because WebChannel is closed:",t):(c||(_o("Connection","Opening WebChannel transport."),a.open(),c=!0),_o("Connection","WebChannel sending:",t),a.send(t))},J:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,bo.EventType.OPEN,(function(){h||_o("Connection","WebChannel transport opened.")})),l(a,bo.EventType.CLOSE,(function(){h||(h=!0,_o("Connection","WebChannel transport closed"),f.st())})),l(a,bo.EventType.ERROR,(function(t){h||(h=!0,Ao("Connection","WebChannel transport errored:",t),f.st(new Vo(Uo.UNAVAILABLE,"The operation could not be completed")))})),l(a,bo.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Oo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){_o("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=ns[t];if(void 0!==e)return ss(e)}(o),u=i.message;void 0===s&&(s=Uo.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),h=!0,f.st(new Vo(s,u)),a.close()}else _o("Connection","WebChannel received:",n),f.it(n)}})),l(o,yo.STAT_EVENT,(function(t){t.stat===go?_o("Connection","Detected buffering proxy"):t.stat===mo&&_o("Connection","Detected no buffering proxy")})),setTimeout((function(){f.nt()}),0),f},e}(function(){function t(t){this.rt=t,this.O=t.O;var e=t.ssl?"https":"http";this.ot=e+"://"+t.host,this.ct="projects/"+this.O.projectId+"/databases/"+this.O.database+"/documents"}return t.prototype.at=function(t,e,n,r){var i=this.ut(t,e);_o("RestConnection","Sending: ",i,n);var o={};return this.ht(o,r),this.lt(t,i,o,n).then((function(t){return _o("RestConnection","Received: ",t),t}),(function(e){throw Ao("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype._t=function(t,e,n,r){return this.at(t,e,n,r)},t.prototype.ht=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.0",t["Content-Type"]="text/plain",e)for(var n in e.R)e.R.hasOwnProperty(n)&&(t[n]=e.R[n])},t.prototype.ut=function(t,e){var n=is[t];return this.ot+"/v1/"+e+":"+n},t}()),hs=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Vo(Uo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Vo(Uo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Vo(Uo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vo(Uo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.dt=function(t){return this.seconds===t.seconds?Po(this.nanoseconds,t.nanoseconds):Po(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),fs=function(){function t(t){this.timestamp=t}return t.wt=function(e){return new t(e)},t.min=function(){return new t(new hs(0,0))},t.prototype.u=function(t){return this.timestamp.dt(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.Et=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Tt=function(){return this.timestamp},t}(),ls=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&So(),void 0===n?n=t.length-e:n>t.length-e&&So(),this.segments=t,this.offset=e,this.It=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.At(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Rt(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Pt=function(t){return t=void 0===t?1:t,this.Rt(this.segments,this.offset+t,this.length-t)},t.prototype.yt=function(){return this.Rt(this.segments,this.offset,this.length-1)},t.prototype.gt=function(){return this.segments[this.offset]},t.prototype.Vt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.bt=function(){return 0===this.length},t.prototype.vt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.St=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.Dt=function(){return this.segments.slice(this.offset,this.limit())},t.At=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.prototype.Ct=function(){return this.Dt().join("/")},e.prototype.toString=function(){return this.Ct()},e.xt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.Nt=function(){return new e([])},e}(ls),ds=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.Ft=function(t){return ds.test(t)},e.prototype.Ct=function(){return this.Dt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.Ft(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.Ct()},e.prototype.Ot=function(){return 1===this.length&&"__name__"===this.get(0)},e.kt=function(){return new e(["__name__"])},e.Mt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new Vo(Uo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Vo(Uo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new Vo(Uo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.Nt=function(){return new e([])},e}(ls),ys=function(){function t(t){this.path=t}return t.Lt=function(e){return new t(ps.xt(e))},t.$t=function(e){return new t(ps.xt(e).Pt(5))},t.prototype.Bt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ps.At(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.At=function(t,e){return ps.At(t.path,e.path)},t.qt=function(t){return t.length%2==0},t.Ut=function(e){return new t(new ps(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gs(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ms(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ws=function(){function t(t){this.fields=t,t.sort(vs.At)}return t.prototype.Qt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].vt(t))return!0;return!1},t.prototype.isEqual=function(t){return Co(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Is=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Es(t){if(Oo(!!t),"string"==typeof t){var e=0,n=Is.exec(t);if(Oo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_s(t.seconds),nanos:_s(t.nanos)}}function _s(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ts(t){return"string"==typeof t?Lo.fromBase64String(t):Lo.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function As(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ns(t){var e=t.mapValue.fields.__previous_value__;return As(e)?Ns(e):e}function Ss(t){var e=Es(t.mapValue.fields.__local_write_time__.timestampValue);return new hs(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?As(t)?4:10:So()}function ks(t,e){var n=Os(t);if(n!==Os(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ss(t).isEqual(Ss(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Es(t.timestampValue),r=Es(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ts(t.bytesValue).isEqual(Ts(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return _s(t.geoPointValue.latitude)===_s(e.geoPointValue.latitude)&&_s(t.geoPointValue.longitude)===_s(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return _s(t.integerValue)===_s(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=_s(t.doubleValue),r=_s(e.doubleValue);return n===r?ts(n)===ts(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Co(t.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(gs(n)!==gs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ks(n[i],r[i])))return!1;return!0}(t,e);default:return So()}}function xs(t,e){return void 0!==(t.values||[]).find((function(t){return ks(t,e)}))}function Ds(t,e){var n=Os(t),r=Os(e);if(n!==r)return Po(n,r);switch(n){case 0:return 0;case 1:return Po(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=_s(t.integerValue||t.doubleValue),r=_s(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ps(t.timestampValue,e.timestampValue);case 4:return Ps(Ss(t),Ss(e));case 5:return Po(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ts(t),r=Ts(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Po(n[i],r[i]);if(0!==o)return o}return Po(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Po(_s(t.latitude),_s(e.latitude));return 0!==n?n:Po(_s(t.longitude),_s(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ds(n[i],r[i]);if(o)return o}return Po(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Po(r[s],o[s]);if(0!==u)return u;var a=Ds(n[r[s]],i[o[s]]);if(0!==a)return a}return Po(r.length,o.length)}(t.mapValue,e.mapValue);default:throw So()}}function Ps(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Po(t,e);var n=Es(t),r=Es(e),i=Po(n.seconds,r.seconds);return 0!==i?i:Po(n.nanos,r.nanos)}function Cs(t){return Rs(t)}function Rs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Es(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ts(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ys.$t(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Rs(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Rs(t.fields[o])}return e+"}"}(t.mapValue):So();var e,n}function Ls(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.Ct()}}function Us(t){return!!t&&"integerValue"in t}function Vs(t){return!!t&&"arrayValue"in t}function Ms(t){return!!t&&"nullValue"in t}function js(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fs(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qs=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.bt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Fs(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.Vt()])||null},t.prototype.isEqual=function(t){return ks(this.proto,t.proto)},t}(),Bs=function(){function t(t){void 0===t&&(t=qs.empty()),this.Kt=t,this.Wt=new Map}return t.prototype.set=function(t,e){return this.jt(t,e),this},t.prototype.delete=function(t){return this.jt(t,null),this},t.prototype.jt=function(t,e){for(var n=this.Wt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Os(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.Vt(),e)},t.prototype.Gt=function(){var t=this.zt(vs.Nt(),this.Wt);return null!=t?new qs(t):this.Kt},t.prototype.zt=function(t,e){var n=this,r=!1,i=this.Kt.field(t),o=Fs(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.zt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Gs(t){var e=[];return ms(t.fields||{},(function(t,n){var r=new vs([t]);if(Fs(n)){var i=Gs(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new ws(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var zs=function(t,e){this.key=t,this.version=e},$s=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ht=r,o.Jt=!!i.Jt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return mt(e,t),e.prototype.field=function(t){return this.Ht.field(t)},e.prototype.data=function(){return this.Ht},e.prototype.Yt=function(){return this.Ht.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Jt===t.Jt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ht.isEqual(t.Ht)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ht.toString()+", {hasLocalMutations: "+this.Jt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Jt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(zs),Hs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return mt(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(zs),Ks=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(zs),Ws=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Xt=null};function Ys(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ws(t,e,n,r,i,o,s)}function Qs(t){var e=ko(t);if(null===e.Xt){var n=e.path.Ct();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.Ct()+t.op.toString()+Cs(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.Ct()+t.dir}(t)})).join(","),Zo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=cu(e.startAt)),e.endAt&&(n+="|ub:",n+=cu(e.endAt)),e.Xt=n}return e.Xt}function Js(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!fu(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ks(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pu(t.startAt,e.startAt)&&pu(t.endAt,e.endAt)}function Xs(t){return ys.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Zs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return mt(e,t),e.create=function(t,n,r){return t.Ot()?"in"===n||"not-in"===n?this.Zt(t,n,r):new tu(t,n,r):"array-contains"===n?new iu(t,r):"in"===n?new ou(t,r):"not-in"===n?new su(t,r):"array-contains-any"===n?new uu(t,r):new e(t,n,r)},e.Zt=function(t,e,n){return"in"===e?new eu(t,n):new nu(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.te(Ds(e,this.value)):null!==e&&Os(this.value)===Os(e)&&this.te(Ds(e,this.value))},e.prototype.te=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return So()}},e.prototype.ee=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),tu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ys.$t(r.referenceValue),i}return mt(e,t),e.prototype.matches=function(t){var e=ys.At(t.key,this.key);return this.te(e)},e}(Zs),eu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ru("in",n),r}return mt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Zs),nu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ru("not-in",n),r}return mt(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Zs);function ru(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ys.$t(t.referenceValue)}))}var iu=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return mt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Vs(e)&&xs(e.arrayValue,this.value)},e}(Zs),ou=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return mt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&xs(this.value.arrayValue,e)},e}(Zs),su=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return mt(e,t),e.prototype.matches=function(t){if(xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!xs(this.value.arrayValue,e)},e}(Zs),uu=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return mt(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Vs(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return xs(e.value.arrayValue,t)}))},e}(Zs),au=function(t,e){this.position=t,this.before=e};function cu(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Cs(t)})).join(",")}var hu=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function fu(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function lu(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.Ot()?ys.At(ys.$t(s.referenceValue),n.key):Ds(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function pu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ks(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var du=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.ne=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.se=null,this.ie=null,this.startAt,this.endAt};function vu(t,e,n,r,i,o,s,u){return new du(t,e,n,r,i,o,s,u)}function yu(t){return new du(t)}function gu(t){return!Zo(t.limit)&&"F"===t.limitType}function mu(t){return!Zo(t.limit)&&"L"===t.limitType}function bu(t){return t.ne.length>0?t.ne[0].field:null}function wu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.ee())return r.field}return null}function Iu(t){return null!==t.collectionGroup}function Eu(t){var e=ko(t);if(null===e.se){e.se=[];var n=wu(e),r=bu(e);if(null!==n&&null===r)n.Ot()||e.se.push(new hu(n)),e.se.push(new hu(vs.kt(),"asc"));else{for(var i=!1,o=0,s=e.ne;o<s.length;o++){var u=s[o];e.se.push(u),u.field.Ot()&&(i=!0)}if(!i){var a=e.ne.length>0?e.ne[e.ne.length-1].dir:"asc";e.se.push(new hu(vs.kt(),a))}}}return e.se}function _u(t){var e=ko(t);if(!e.ie)if("F"===e.limitType)e.ie=Ys(e.path,e.collectionGroup,Eu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Eu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new hu(o.field,s))}var u=e.endAt?new au(e.endAt.position,!e.endAt.before):null,a=e.startAt?new au(e.startAt.position,!e.startAt.before):null;e.ie=Ys(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.ie}function Tu(t,e,n){return new du(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Au(t,e){return Js(_u(t),_u(e))&&t.limitType===e.limitType}function Nu(t){return Qs(_u(t))+"|lt:"+t.limitType}function Su(t){return"Query(target="+function(t){var e=t.path.Ct();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.Ct()+" "+e.op+" "+Cs(e.value);var e})).join(", ")+"]"),Zo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.Ct()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+cu(t.startAt)),t.endAt&&(e+=", endAt: "+cu(t.endAt)),"Target("+e+")"}(_u(t))+"; limitType="+t.limitType+")"}function Ou(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.Bt(t.collectionGroup)&&t.path.vt(n):ys.qt(t.path)?t.path.isEqual(n):t.path.St(n)}(t,e)&&function(t,e){for(var n=0,r=t.ne;n<r.length;n++){var i=r[n];if(!i.field.Ot()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!lu(t.startAt,Eu(t),e)||t.endAt&&lu(t.endAt,Eu(t),e))}(t,e)}function ku(t){return function(e,n){for(var r=!1,i=0,o=Eu(t);i<o.length;i++){var s=o[i],u=xu(s,e,n);if(0!==u)return u;r=r||s.field.Ot()}return 0}}function xu(t,e,n){var r=t.field.Ot()?ys.At(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ds(r,i):So()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return So()}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Du=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=fs.min()),void 0===o&&(o=fs.min()),void 0===s&&(s=Lo.h),this.target=t,this.targetId=e,this.re=n,this.sequenceNumber=r,this.oe=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.ce=function(e){return new t(this.target,this.targetId,this.re,e,this.oe,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ae=function(e,n){return new t(this.target,this.targetId,this.re,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ue=function(e){return new t(this.target,this.targetId,this.re,this.sequenceNumber,this.oe,e,this.resumeToken)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pu(t,e){if(t.he){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ts(e)?"-0":e}}function Cu(t){return{integerValue:""+t}}function Ru(t,e){return es(e)?Cu(e):Pu(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lu=function(){this.le=void 0};function Uu(t,e,n){return t instanceof ju?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Fu?qu(t,e):t instanceof Bu?Gu(t,e):function(t,e){var n=Mu(t,e),r=$u(n)+$u(t._e);return Us(n)&&Us(t._e)?Cu(r):Pu(t.fe,r)}(t,e)}function Vu(t,e,n){return t instanceof Fu?qu(t,e):t instanceof Bu?Gu(t,e):n}function Mu(t,e){return t instanceof zu?Us(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e}(Lu),Fu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return mt(e,t),e}(Lu);function qu(t,e){for(var n=Hu(e),r=function(t){n.some((function(e){return ks(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Bu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return mt(e,t),e}(Lu);function Gu(t,e){for(var n=Hu(e),r=function(t){n=n.filter((function(e){return!ks(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var zu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).fe=e,r._e=n,r}return mt(e,t),e}(Lu);function $u(t){return _s(t.integerValue||t.doubleValue)}function Hu(t){return Vs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ku=function(t,e){this.field=t,this.transform=e},Wu=function(t,e){this.version=t,this.transformResults=e},Yu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.de=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"we",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Qu(t,e){return void 0!==t.updateTime?e instanceof $s&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof $s}var Ju=function(){};function Xu(t,e,n){return t instanceof ra?function(t,e,n){var r=t.value;if(n.transformResults){var i=sa(t.fieldTransforms,e,n.transformResults);r=aa(t.fieldTransforms,r,i)}return new $s(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ia?function(t,e,n){if(!Qu(t.Ee,e))return new Ks(t.key,n.version);var r=oa(t,e,n.transformResults?sa(t.fieldTransforms,e,n.transformResults):[]);return new $s(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Hs(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Zu(t,e,n,r){return t instanceof ra?function(t,e,n,r){if(!Qu(t.Ee,e))return e;var i=t.value;if(t.fieldTransforms){var o=ua(t.fieldTransforms,n,e,r);i=aa(t.fieldTransforms,i,o)}var s=na(e);return new $s(t.key,s,i,{Jt:!0})}(t,e,r,n):t instanceof ia?function(t,e,n,r){if(!Qu(t.Ee,e))return e;var i=na(e),o=oa(t,e,ua(t.fieldTransforms,n,e,r));return new $s(t.key,i,o,{Jt:!0})}(t,e,r,n):function(t,e){return Qu(t.Ee,e)?new Hs(t.key,fs.min()):e}(t,e)}function ta(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof $s?e.field(o.field):void 0,u=Mu(o.transform,s||null);null!=u&&(n=null==n?(new Bs).set(o.field,u):n.set(o.field,u))}return n?n.Gt():null}(t.fieldTransforms,e):null}function ea(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ee.isEqual(e.Ee)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Co(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Fu&&e instanceof Fu||t instanceof Bu&&e instanceof Bu?Co(t.elements,e.elements,ks):t instanceof zu&&e instanceof zu?ks(t._e,e._e):t instanceof ju&&e instanceof ju}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Te.isEqual(e.Te))}function na(t){return t instanceof $s?t.version:fs.min()}var ra=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Ee=r,o.fieldTransforms=i,o.type=0,o}return mt(e,t),e}(Ju),ia=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Te=r,s.Ee=i,s.fieldTransforms=o,s.type=1,s}return mt(e,t),e}(Ju);function oa(t,e,n){var r;return r=function(t,e){var n=new Bs(e);return t.Te.fields.forEach((function(e){if(!e.bt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Gt()}(t,r=e instanceof $s?e.data():qs.empty()),aa(t.fieldTransforms,r,n)}function sa(t,e,n){var r=[];Oo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof $s&&(u=e.field(o.field)),r.push(Vu(s,u,n[i]))}return r}function ua(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof $s&&(c=n.field(u.field)),null===c&&r instanceof $s&&(c=r.field(u.field)),i.push(Uu(a,c,e))}return i}function aa(t,e,n){for(var r=new Bs(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Gt()}var ca=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=2,r.fieldTransforms=[],r}return mt(e,t),e}(Ju),ha=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=3,r.fieldTransforms=[],r}return mt(e,t),e}(Ju),fa=function(t){this.count=t},la=function(){function t(t,e){this.At=t,this.root=e||da.EMPTY}return t.prototype.Ie=function(e,n){return new t(this.At,this.root.Ie(e,n,this.At).copy(null,null,da.me,null,null))},t.prototype.remove=function(e){return new t(this.At,this.root.remove(e,this.At).copy(null,null,da.me,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.bt();){var n=this.At(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.bt();){var r=this.At(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.bt=function(){return this.root.bt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Ae=function(){return this.root.Ae()},t.prototype.Re=function(){return this.root.Re()},t.prototype.Pe=function(t){return this.root.Pe(t)},t.prototype.forEach=function(t){this.Pe((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Pe((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ye=function(t){return this.root.ye(t)},t.prototype.ge=function(){return new pa(this.root,null,this.At,!1)},t.prototype.Ve=function(t){return new pa(this.root,t,this.At,!1)},t.prototype.pe=function(){return new pa(this.root,null,this.At,!0)},t.prototype.be=function(t){return new pa(this.root,t,this.At,!0)},t}(),pa=function(){function t(t,e,n,r){this.ve=r,this.Se=[];for(var i=1;!t.bt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ve?t.left:t.right;else{if(0===i){this.Se.push(t);break}this.Se.push(t),t=this.ve?t.right:t.left}}return t.prototype.De=function(){var t=this.Se.pop(),e={key:t.key,value:t.value};if(this.ve)for(t=t.left;!t.bt();)this.Se.push(t),t=t.right;else for(t=t.right;!t.bt();)this.Se.push(t),t=t.left;return e},t.prototype.Ce=function(){return this.Se.length>0},t.prototype.xe=function(){if(0===this.Se.length)return null;var t=this.Se[this.Se.length-1];return{key:t.key,value:t.value}},t}(),da=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.bt=function(){return!1},t.prototype.Pe=function(t){return this.left.Pe(t)||t(this.key,this.value)||this.right.Pe(t)},t.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},t.prototype.min=function(){return this.left.bt()?this:this.left.min()},t.prototype.Ae=function(){return this.min().key},t.prototype.Re=function(){return this.right.bt()?this.key:this.right.Re()},t.prototype.Ie=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ie(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ie(t,e,n))).Ne()},t.prototype.Fe=function(){if(this.left.bt())return t.EMPTY;var e=this;return e.left.Oe()||e.left.left.Oe()||(e=e.ke()),(e=e.copy(null,null,null,e.left.Fe(),null)).Ne()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.bt()||i.left.Oe()||i.left.left.Oe()||(i=i.ke()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Oe()&&(i=i.Me()),i.right.bt()||i.right.Oe()||i.right.left.Oe()||(i=i.Le()),0===n(e,i.key)){if(i.right.bt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Fe())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ne()},t.prototype.Oe=function(){return this.color},t.prototype.Ne=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.$e()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Me()),t.left.Oe()&&t.right.Oe()&&(t=t.Be()),t},t.prototype.ke=function(){var t=this.Be();return t.right.left.Oe()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Me())).$e()).Be()),t},t.prototype.Le=function(){var t=this.Be();return t.left.left.Oe()&&(t=(t=t.Me()).Be()),t},t.prototype.$e=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Me=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Be=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.qe=function(){var t=this.Ue();return Math.pow(2,t)<=this.size+1},t.prototype.Ue=function(){if(this.Oe()&&this.left.Oe())throw So();if(this.right.Oe())throw So();var t=this.left.Ue();if(t!==this.right.Ue())throw So();return t+(this.Oe()?0:1)},t}();da.EMPTY=null,da.RED=!0,da.me=!1,da.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw So()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw So()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw So()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw So()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw So()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ie=function(t,e,n){return new da(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.bt=function(){return!0},t.prototype.Pe=function(t){return!1},t.prototype.ye=function(t){return!1},t.prototype.Ae=function(){return null},t.prototype.Re=function(){return null},t.prototype.Oe=function(){return!1},t.prototype.qe=function(){return!0},t.prototype.Ue=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var va=function(){function t(t){this.At=t,this.data=new la(this.At)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Ae()},t.prototype.last=function(){return this.data.Re()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pe((function(e,n){return t(e),!1}))},t.prototype.Qe=function(t,e){for(var n=this.data.Ve(t[0]);n.Ce();){var r=n.De();if(this.At(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ke=function(t,e){var n;for(n=void 0!==e?this.data.Ve(e):this.data.ge();n.Ce();)if(!t(n.De().key))return},t.prototype.We=function(t){var e=this.data.Ve(t);return e.Ce()?e.De().key:null},t.prototype.ge=function(){return new ya(this.data.ge())},t.prototype.Ve=function(t){return new ya(this.data.Ve(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ie(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.bt=function(){return this.data.bt()},t.prototype.je=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ge(),r=e.data.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(0!==this.At(i,o))return!1}return!0},t.prototype.Dt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.At);return n.data=e,n},t}(),ya=function(){function t(t){this.Ge=t}return t.prototype.De=function(){return this.Ge.De().key},t.prototype.Ce=function(){return this.Ge.Ce()},t}(),ga=new la(ys.At);function ma(){return ga}function ba(){return ma()}var wa=new la(ys.At);function Ia(){return wa}var Ea=new la(ys.At);var _a=new va(ys.At);function Ta(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=_a,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Aa=new va(Po);function Na(){return Aa}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Sa=function(){function t(t){this.At=t?function(e,n){return t(e,n)||ys.At(e.key,n.key)}:function(t,e){return ys.At(t.key,e.key)},this.ze=Ia(),this.He=new la(this.At)}return t.Je=function(e){return new t(e.At)},t.prototype.has=function(t){return null!=this.ze.get(t)},t.prototype.get=function(t){return this.ze.get(t)},t.prototype.first=function(){return this.He.Ae()},t.prototype.last=function(){return this.He.Re()},t.prototype.bt=function(){return this.He.bt()},t.prototype.indexOf=function(t){var e=this.ze.get(t);return e?this.He.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.He.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.He.Pe((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ze.Ie(t.key,t),e.He.Ie(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ze.remove(t),this.He.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.He.ge(),r=e.He.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.At=this.At,r.ze=e,r.He=n,r},t}(),Oa=function(){function t(){this.Ye=new la(ys.At)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Ye.get(e);n?0!==t.type&&3===n.type?this.Ye=this.Ye.Ie(e,t):3===t.type&&1!==n.type?this.Ye=this.Ye.Ie(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ye=this.Ye.Ie(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ye=this.Ye.remove(e):1===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):So():this.Ye=this.Ye.Ie(e,t)},t.prototype.Xe=function(){var t=[];return this.Ye.Pe((function(e,n){t.push(n)})),t},t}(),ka=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Ze=n,this.docChanges=r,this.tn=i,this.fromCache=o,this.en=s,this.nn=u}return t.sn=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Sa.Je(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.tn.bt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.en===t.en&&this.tn.isEqual(t.tn)&&Au(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ze.isEqual(t.Ze)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),xa=function(){function t(t,e,n,r,i){this.oe=t,this.rn=e,this.on=n,this.cn=r,this.an=i}return t.un=function(e,n){var r=new Map;return r.set(e,Da.hn(e,n)),new t(fs.min(),r,Na(),ma(),Ta())},t}(),Da=function(){function t(t,e,n,r,i){this.resumeToken=t,this.ln=e,this._n=n,this.fn=r,this.dn=i}return t.hn=function(e,n){return new t(Lo.h,n,Ta(),Ta(),Ta())},t}(),Pa=function(t,e,n,r){this.wn=t,this.removedTargetIds=e,this.key=n,this.En=r},Ca=function(t,e){this.targetId=t,this.Tn=e},Ra=function(t,e,n,r){void 0===n&&(n=Lo.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},La=function(){function t(){this.In=0,this.mn=Ma(),this.An=Lo.h,this.Rn=!1,this.Pn=!0}return Object.defineProperty(t.prototype,"ln",{get:function(){return this.Rn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.An},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yn",{get:function(){return 0!==this.In},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gn",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),t.prototype.Vn=function(t){t.o()>0&&(this.Pn=!0,this.An=t)},t.prototype.pn=function(){var t=Ta(),e=Ta(),n=Ta();return this.mn.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:So()}})),new Da(this.An,this.Rn,t,e,n)},t.prototype.bn=function(){this.Pn=!1,this.mn=Ma()},t.prototype.vn=function(t,e){this.Pn=!0,this.mn=this.mn.Ie(t,e)},t.prototype.Sn=function(t){this.Pn=!0,this.mn=this.mn.remove(t)},t.prototype.Dn=function(){this.In+=1},t.prototype.Cn=function(){this.In-=1},t.prototype.xn=function(){this.Pn=!0,this.Rn=!0},t}(),Ua=function(){function t(t){this.Nn=t,this.Fn=new Map,this.On=ma(),this.kn=Va(),this.Mn=new va(Po)}return t.prototype.Ln=function(t){for(var e=0,n=t.wn;e<n.length;e++){var r=n[e];t.En instanceof $s?this.$n(r,t.En):t.En instanceof Hs&&this.Bn(r,t.key,t.En)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Bn(r,t.key,t.En)},t.prototype.qn=function(t){var e=this;this.Un(t,(function(n){var r=e.Qn(n);switch(t.state){case 0:e.Kn(n)&&r.Vn(t.resumeToken);break;case 1:r.Cn(),r.yn||r.bn(),r.Vn(t.resumeToken);break;case 2:r.Cn(),r.yn||e.removeTarget(n);break;case 3:e.Kn(n)&&(r.xn(),r.Vn(t.resumeToken));break;case 4:e.Kn(n)&&(e.Wn(n),r.Vn(t.resumeToken));break;default:So()}}))},t.prototype.Un=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fn.forEach((function(t,r){n.Kn(r)&&e(r)}))},t.prototype.jn=function(t){var e=t.targetId,n=t.Tn.count,r=this.Gn(e);if(r){var i=r.target;if(Xs(i))if(0===n){var o=new ys(i.path);this.Bn(e,o,new Hs(o,fs.min()))}else Oo(1===n);else this.zn(e)!==n&&(this.Wn(e),this.Mn=this.Mn.add(e))}},t.prototype.Hn=function(t){var e=this,n=new Map;this.Fn.forEach((function(r,i){var o=e.Gn(i);if(o){if(r.ln&&Xs(o.target)){var s=new ys(o.target.path);null!==e.On.get(s)||e.Jn(i,s)||e.Bn(i,s,new Hs(s,t))}r.gn&&(n.set(i,r.pn()),r.bn())}}));var r=Ta();this.kn.forEach((function(t,n){var i=!0;n.Ke((function(t){var n=e.Gn(t);return!n||2===n.re||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new xa(t,n,this.Mn,this.On,r);return this.On=ma(),this.kn=Va(),this.Mn=new va(Po),i},t.prototype.$n=function(t,e){if(this.Kn(t)){var n=this.Jn(t,e.key)?2:0;this.Qn(t).vn(e.key,n),this.On=this.On.Ie(e.key,e),this.kn=this.kn.Ie(e.key,this.Yn(e.key).add(t))}},t.prototype.Bn=function(t,e,n){if(this.Kn(t)){var r=this.Qn(t);this.Jn(t,e)?r.vn(e,1):r.Sn(e),this.kn=this.kn.Ie(e,this.Yn(e).delete(t)),n&&(this.On=this.On.Ie(e,n))}},t.prototype.removeTarget=function(t){this.Fn.delete(t)},t.prototype.zn=function(t){var e=this.Qn(t).pn();return this.Nn.Xn(t).size+e._n.size-e.dn.size},t.prototype.Dn=function(t){this.Qn(t).Dn()},t.prototype.Qn=function(t){var e=this.Fn.get(t);return e||(e=new La,this.Fn.set(t,e)),e},t.prototype.Yn=function(t){var e=this.kn.get(t);return e||(e=new va(Po),this.kn=this.kn.Ie(t,e)),e},t.prototype.Kn=function(t){var e=null!==this.Gn(t);return e||_o("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Gn=function(t){var e=this.Fn.get(t);return e&&e.yn?null:this.Nn.Zn(t)},t.prototype.Wn=function(t){var e=this;this.Fn.set(t,new La),this.Nn.Xn(t).forEach((function(n){e.Bn(t,n,null)}))},t.prototype.Jn=function(t,e){return this.Nn.Xn(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Va(){return new la(ys.At)}function Ma(){return new la(ys.At)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ja={asc:"ASCENDING",desc:"DESCENDING"},Fa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qa=function(t,e){this.O=t,this.he=e};function Ba(t,e){return t.he?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ga(t,e){return t.he?e.toBase64():e.toUint8Array()}function za(t,e){return Ba(t,e.Tt())}function $a(t){return Oo(!!t),fs.wt(function(t){var e=Es(t);return new hs(e.seconds,e.nanos)}(t))}function Ha(t,e){return function(t){return new ps(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).Ct()}function Ka(t){var e=ps.xt(t);return Oo(yc(e)),e}function Wa(t,e){return Ha(t.O,e.path)}function Ya(t,e){var n=Ka(e);if(n.get(1)!==t.O.projectId)throw new Vo(Uo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.O.projectId);if(n.get(3)!==t.O.database)throw new Vo(Uo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.O.database);return new ys(Za(n))}function Qa(t,e){return Ha(t.O,e)}function Ja(t){var e=Ka(t);return 4===e.length?ps.Nt():Za(e)}function Xa(t){return new ps(["projects",t.O.projectId,"databases",t.O.database]).Ct()}function Za(t){return Oo(t.length>4&&"documents"===t.get(4)),t.Pt(5)}function tc(t,e,n){return{name:Wa(t,e),fields:n.proto.mapValue.fields}}function ec(t,e){var n;if(e instanceof ra)n={update:tc(t,e.key,e.value)};else if(e instanceof ca)n={delete:Wa(t,e.key)};else if(e instanceof ia)n={update:tc(t,e.key,e.data),updateMask:vc(e.Te)};else{if(!(e instanceof ha))return So();n={verify:Wa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ju)return{fieldPath:e.field.Ct(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fu)return{fieldPath:e.field.Ct(),appendMissingElements:{values:n.elements}};if(n instanceof Bu)return{fieldPath:e.field.Ct(),removeAllFromArray:{values:n.elements}};if(n instanceof zu)return{fieldPath:e.field.Ct(),increment:n._e};throw So()}(0,t)}))),e.Ee.we||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:za(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:So()}(t,e.Ee)),n}function nc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Yu.updateTime($a(t.updateTime)):void 0!==t.exists?Yu.exists(t.exists):Yu.de()}(e.currentDocument):Yu.de(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Oo("REQUEST_TIME"===e.setToServerValue),n=new ju;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Fu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Bu(i)}else"increment"in e?n=new zu(t,e.increment):So();var o=vs.Mt(e.fieldPath);return new Ku(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ya(t,e.update.name),o=new qs({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new ws(e.map((function(t){return vs.Mt(t)})))}(e.updateMask);return new ia(i,o,s,n,r)}return new ra(i,o,n,r)}if(e.delete){var u=Ya(t,e.delete);return new ca(u,n)}if(e.verify){var a=Ya(t,e.verify);return new ha(a,n)}return So()}function rc(t,e){return{documents:[Qa(t,e.path)]}}function ic(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Qa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Qa(t,r.yt()),n.structuredQuery.from=[{collectionId:r.Vt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(js(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NAN"}};if(Ms(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(js(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NOT_NAN"}};if(Ms(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(t.field),op:hc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:fc(t.field),direction:cc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.he||Zo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=uc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=uc(e.endAt)),n}function oc(t){var e=Ja(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Oo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=sc(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new hu(lc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return Zo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ac(n.startAt));var h=null;return n.endAt&&(h=ac(n.endAt)),vu(e,i,u,s,a,"F",c,h)}function sc(t){return t?void 0!==t.unaryFilter?[dc(t)]:void 0!==t.fieldFilter?[pc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return sc(t)})).reduce((function(t,e){return t.concat(e)})):So():[]}function uc(t){return{before:t.before,values:t.position}}function ac(t){var e=!!t.before,n=t.values||[];return new au(n,e)}function cc(t){return ja[t]}function hc(t){return Fa[t]}function fc(t){return{fieldPath:t.Ct()}}function lc(t){return vs.Mt(t.fieldPath)}function pc(t){return Zs.create(lc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return So()}}(t.fieldFilter.op),t.fieldFilter.value)}function dc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=lc(t.unaryFilter.field);return Zs.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=lc(t.unaryFilter.field);return Zs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=lc(t.unaryFilter.field);return Zs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=lc(t.unaryFilter.field);return Zs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return So()}}function vc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.Ct())})),{fieldPaths:e}}function yc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gc(t){return new qa(t,!0)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var mc=function(){function t(t){var e=this;this.ts=null,this.es=null,this.result=void 0,this.error=void 0,this.ns=!1,this.ss=!1,t((function(t){e.ns=!0,e.result=t,e.ts&&e.ts(t)}),(function(t){e.ns=!0,e.error=t,e.es&&e.es(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.ss&&So(),this.ss=!0,this.ns?this.error?this.rs(n,this.error):this.os(e,this.result):new t((function(t,i){r.ts=function(n){r.os(e,n).next(t,i)},r.es=function(e){r.rs(n,e).next(t,i)}}))},t.prototype.cs=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.us=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.os=function(e,n){return e?this.us((function(){return e(n)})):t.resolve(n)},t.prototype.rs=function(e,n){return e?this.us((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.hs=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.ls=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.hs(r)},t}(),bc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this._s=new as,this.transaction.oncomplete=function(){n._s.resolve()},this.transaction.onabort=function(){e.error?n._s.reject(new Ec(t,e.error)):n._s.resolve()},this.transaction.onerror=function(e){var r=Sc(e.target.error);n._s.reject(new Ec(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ec(n,e)}},Object.defineProperty(t.prototype,"fs",{get:function(){return this._s.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(_o("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Tc(e)},t}(),wc=function(){function t(e,n,r){this.name=e,this.version=n,this.ds=r,12.2===t.ws(Ot())&&To("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return _o("SimpleDb","Removing database:",t),Ac(window.indexedDB.deleteDatabase(t)).cs()},t.G=function(){if("undefined"==typeof indexedDB)return!1;if(t.Es())return!0;var e=Ot(),n=t.ws(e),r=0<n&&n<10,i=t.Ts(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Es=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Is)},t.As=function(t,e){return t.store(e)},t.ws=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ts=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Rs=function(t){return wt(this,void 0,void 0,(function(){var e,n=this;return It(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(_o("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ec(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Vo(Uo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Ec(t,n))},i.onupgradeneeded=function(t){_o("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.ds.Ps(e,i.transaction,t.oldVersion,n.version).next((function(){_o("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.ys&&(this.db.onversionchange=function(t){return n.ys(t)}),this.db)]}}))}))},t.prototype.gs=function(t){this.ys=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s,u,a;return It(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return It(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Rs(t)];case 2:return u.db=f.sent(),e=bc.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),mc.reject(t)})).cs(),a={},s.catch((function(){})),[4,e.fs];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,_o("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ic=function(){function t(t){this.Vs=t,this.ps=!1,this.bs=null}return Object.defineProperty(t.prototype,"ns",{get:function(){return this.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vs",{get:function(){return this.bs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Vs=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ps=!0},t.prototype.Ss=function(t){this.bs=t},t.prototype.delete=function(){return Ac(this.Vs.delete())},t}(),Ec=function(t){function e(e,n){var r=this;return(r=t.call(this,Uo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return mt(e,t),e}(Vo);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function _c(t){return"IndexedDbTransactionError"===t.name}var Tc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(_o("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(_o("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ac(n)},t.prototype.add=function(t){return _o("SimpleDb","ADD",this.store.name,t,t),Ac(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ac(this.store.get(t)).next((function(n){return void 0===n&&(n=null),_o("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return _o("SimpleDb","DELETE",this.store.name,t),Ac(this.store.delete(t))},t.prototype.count=function(){return _o("SimpleDb","COUNT",this.store.name),Ac(this.store.count())},t.prototype.Ds=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.xs=function(t,e){_o("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ns=!1;var r=this.cursor(n);return this.Cs(r,(function(t,e,n){return n.delete()}))},t.prototype.Fs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Cs(r,e)},t.prototype.Os=function(t){var e=this.cursor({});return new mc((function(n,r){e.onerror=function(t){var e=Sc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Cs=function(t,e){var n=[];return new mc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ic(i),s=e(i.primaryKey,i.value,o);if(s instanceof mc){var u=s.catch((function(t){return o.done(),mc.reject(t)}));n.push(u)}o.ns?r():null===o.vs?i.continue():i.continue(o.vs)}else r()}})).next((function(){return mc.hs(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ns?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ac(t){return new mc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Sc(t.target.error);n(e)}}))}var Nc=!1;function Sc(t){var e=wc.ws(Ot());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Vo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Nc||(Nc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Oc=function(){function t(t,e,n,r,i){this.ks=t,this.Ms=e,this.Ls=n,this.op=r,this.$s=i,this.Bs=new as,this.then=this.Bs.promise.then.bind(this.Bs.promise),this.Bs.promise.catch((function(t){}))}return t.qs=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Us=setTimeout((function(){return e.Qs()}),t)},t.prototype.Ks=function(){return this.Qs()},t.prototype.cancel=function(t){null!==this.Us&&(this.clearTimeout(),this.Bs.reject(new Vo(Uo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Qs=function(){var t=this;this.ks.Ws((function(){return null!==t.Us?(t.clearTimeout(),t.op().then((function(e){return t.Bs.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Us&&(this.$s(this),clearTimeout(this.Us),this.Us=null)},t}();function kc(t,e){if(To("AsyncQueue",e+": "+t),_c(t))return new Vo(Uo.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.js=t,this.Ms=e,this.Gs=n,this.zs=r,this.Hs=i,this.Js=0,this.Ys=null,this.Xs=Date.now(),this.reset()}return t.prototype.reset=function(){this.Js=0},t.prototype.Zs=function(){this.Js=this.Hs},t.prototype.ti=function(t){var e=this;this.cancel();var n=Math.floor(this.Js+this.ei()),r=Math.max(0,Date.now()-this.Xs),i=Math.max(0,n-r);i>0&&_o("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Js+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ys=this.js.ni(this.Ms,i,(function(){return e.Xs=Date.now(),t()})),this.Js*=this.zs,this.Js<this.Gs&&(this.Js=this.Gs),this.Js>this.Hs&&(this.Js=this.Hs)},t.prototype.si=function(){null!==this.Ys&&(this.Ys.Ks(),this.Ys=null)},t.prototype.cancel=function(){null!==this.Ys&&(this.Ys.cancel(),this.Ys=null)},t.prototype.ei=function(){return(Math.random()-.5)*this.Js},t}(),Dc=function(){function t(t,e,n,r,i,o){this.js=t,this.ii=n,this.ri=r,this.oi=i,this.listener=o,this.state=0,this.ci=0,this.ai=null,this.stream=null,this.ui=new xc(t,e)}return t.prototype.hi=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.li=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this._i()},t.prototype.stop=function(){return wt(this,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return this.hi()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.fi=function(){this.state=0,this.ui.reset()},t.prototype.di=function(){var t=this;this.li()&&null===this.ai&&(this.ai=this.js.ni(this.ii,6e4,(function(){return t.wi()})))},t.prototype.Ei=function(t){this.Ti(),this.stream.send(t)},t.prototype.wi=function(){return wt(this,void 0,void 0,(function(){return It(this,(function(t){return this.li()?[2,this.close(0)]:[2]}))}))},t.prototype.Ti=function(){this.ai&&(this.ai.cancel(),this.ai=null)},t.prototype.close=function(t,e){return wt(this,void 0,void 0,(function(){return It(this,(function(n){switch(n.label){case 0:return this.Ti(),this.ui.cancel(),this.ci++,3!==t?this.ui.reset():e&&e.code===Uo.RESOURCE_EXHAUSTED?(To(e.toString()),To("Using maximum backoff delay to prevent overloading the backend."),this.ui.Zs()):e&&e.code===Uo.UNAUTHENTICATED&&this.oi.g(),null!==this.stream&&(this.Ii(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Z(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Ii=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.mi(this.ci),n=this.ci;this.oi.getToken().then((function(e){t.ci===n&&t.Ai(e)}),(function(n){e((function(){var e=new Vo(Uo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ri(e)}))}))},t.prototype.Ai=function(t){var e=this,n=this.mi(this.ci);this.stream=this.Pi(t),this.stream.Y((function(){n((function(){return e.state=2,e.listener.Y()}))})),this.stream.Z((function(t){n((function(){return e.Ri(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype._i=function(){var t=this;this.state=4,this.ui.ti((function(){return wt(t,void 0,void 0,(function(){return It(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Ri=function(t){return _o("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.mi=function(t){var e=this;return function(n){e.js.Ws((function(){return e.ci===t?n():(_o("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Pc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).fe=i,s}return mt(e,t),e.prototype.Pi=function(t){return this.ri.ft("Listen",t)},e.prototype.onMessage=function(t){this.ui.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:So()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.he?(Oo(void 0===e||"string"==typeof e),Lo.fromBase64String(e||"")):(Oo(void 0===e||e instanceof Uint8Array),Lo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Uo.UNKNOWN:ss(t.code);return new Vo(e,t.message||"")}(u);n=new Ra(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ya(t,r.document.name),o=$a(r.document.updateTime);var u=new qs({mapValue:{fields:r.document.fields}}),a=(s=new $s(i,o,u,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new Pa(a,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ya(t,r.document),o=r.readTime?$a(r.readTime):fs.min(),u=new Hs(i,o),s=r.removedTargetIds||[],n=new Pa([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ya(t,r.document),o=r.removedTargetIds||[],n=new Pa([],o,i,null);else{if(!("filter"in e))return So();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new fa(r),o=h.targetId,n=new Ca(o,i)}return n}(this.fe,t),n=function(t){if(!("targetChange"in t))return fs.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?fs.min():e.readTime?$a(e.readTime):fs.min()}(t);return this.listener.yi(e,n)},e.prototype.gi=function(t){var e={};e.database=Xa(this.fe),e.addTarget=function(t,e){var n,r=e.target;return(n=Xs(r)?{documents:rc(t,r)}:{query:ic(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Ga(t,e.resumeToken):e.oe.u(fs.min())>0&&(n.readTime=Ba(t,e.oe.Tt())),n}(this.fe,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return So()}}(0,e.re);return null==n?null:{"goog-listen-tags":n}}(this.fe,t);n&&(e.labels=n),this.Ei(e)},e.prototype.Vi=function(t){var e={};e.database=Xa(this.fe),e.removeTarget=t,this.Ei(e)},e}(Dc),Cc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).fe=i,s.pi=!1,s}return mt(e,t),Object.defineProperty(e.prototype,"bi",{get:function(){return this.pi},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.pi=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Ii=function(){this.pi&&this.vi([])},e.prototype.Pi=function(t){return this.ri.ft("Write",t)},e.prototype.onMessage=function(t){if(Oo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.pi){this.ui.reset();var e=function(t,e){return t&&t.length>0?(Oo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?$a(t.updateTime):$a(e);n.isEqual(fs.min())&&(n=$a(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Wu(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=$a(t.commitTime);return this.listener.Si(n,e)}return Oo(!t.writeResults||0===t.writeResults.length),this.pi=!0,this.listener.Di()},e.prototype.Ci=function(){var t={};t.database=Xa(this.fe),this.Ei(t)},e.prototype.vi=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return ec(e.fe,t)}))};this.Ei(n)},e}(Dc),Rc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.ri=n,i.fe=r,i.xi=!1,i}return mt(e,t),e.prototype.Ni=function(){if(this.xi)throw new Vo(Uo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.at=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri.at(t,e,n,i)})).catch((function(t){throw t.code===Uo.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype._t=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri._t(t,e,n,i)})).catch((function(t){throw t.code===Uo.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype.terminate=function(){this.xi=!1},e}((function(){})),Lc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Uc=function(){function t(){this.Fi=[]}return t.prototype.Oi=function(t){this.Fi.push(t)},t.prototype.ki=function(){this.Fi.forEach((function(t){return t()}))},t}(),Vc={Mi:!1,Li:0,$i:0,Bi:0},Mc=function(){function t(t,e,n){this.qi=t,this.Ui=e,this.Qi=n}return t.Ki=function(e){return new t(e,t.Wi,t.ji)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Mc.Wi=10,Mc.ji=1e3,Mc.Gi=new Mc(41943040,Mc.Wi,Mc.ji),Mc.zi=new Mc(-1,0,0);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var jc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Hi=function(t){return n.Ji(t)},this.Yi=function(t){return e.Xi(t)})}return t.prototype.Ji=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.Yi&&this.Yi(t),t},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fc(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){if(t.code!==Uo.FAILED_PRECONDITION||t.message!==Lc)throw t;return _o("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */jc.Zi=-1;var qc=function(){function t(t,e,n,r){this.batchId=t,this.er=e,this.baseMutations=n,this.mutations=r}return t.prototype.nr=function(t,e,n){for(var r=n.sr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Xu(o,e,r[i]))}return e},t.prototype.ir=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Zu(i,e,e,this.er))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Zu(a,e,o,this.er))}return e},t.prototype.rr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ir(r.key,t.get(r.key));i&&(n=n.Ie(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ta())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Co(this.mutations,t.mutations,(function(t,e){return ea(t,e)}))&&Co(this.baseMutations,t.baseMutations,(function(t,e){return ea(t,e)}))},t}(),Bc=function(){function t(t,e,n,r){this.batch=t,this.cr=e,this.sr=n,this.ar=r}return t.from=function(e,n,r){Oo(e.mutations.length===r.length);for(var i=Ea,o=e.mutations,s=0;s<o.length;s++)i=i.Ie(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Gc=function(){function t(t,e){this.ur=t,this.hr=e,this.lr={}}return t.prototype.get=function(t){var e=this.ur(t),n=this.lr[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.hr(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ur(t),r=this.lr[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.hr(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.lr[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ur(t),n=this.lr[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.hr(n[r][0],t))return 1===n.length?delete this.lr[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ms(this.lr,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.bt=function(){return bs(this.lr)},t}(),zc=function(){function t(){this._r=new Gc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.dr=!1}return t.prototype.wr=function(t){var e=this._r.get(t);return e?e.readTime:fs.min()},t.prototype.Er=function(t,e){this.Tr(),this._r.set(t.key,{Ir:t,readTime:e})},t.prototype.mr=function(t,e){void 0===e&&(e=null),this.Tr(),this._r.set(t,{Ir:null,readTime:e})},t.prototype.Ar=function(t,e){this.Tr();var n=this._r.get(e);return void 0!==n?mc.resolve(n.Ir):this.Rr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Tr(),this.dr=!0,this.yr(t)},t.prototype.Tr=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $c(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Po(n,i);return 0===s?Po(r,o):s}var Hc=function(){function t(t){this.gr=t,this.buffer=new va($c),this.Vr=0}return t.prototype.pr=function(){return++this.Vr},t.prototype.br=function(t){var e=[t,this.pr()];if(this.buffer.size<this.gr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();$c(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Kc=function(){function t(t,e){this.vr=t,this.ks=e,this.Sr=!1,this.Dr=null}return t.prototype.start=function(t){-1!==this.vr.params.qi&&this.Cr(t)},t.prototype.stop=function(){this.Dr&&(this.Dr.cancel(),this.Dr=null)},Object.defineProperty(t.prototype,"Nr",{get:function(){return null!==this.Dr},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){var e=this,n=this.Sr?3e5:6e4;_o("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Dr=this.ks.ni("lru_garbage_collection",n,(function(){return wt(e,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:this.Dr=null,this.Sr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Fr(this.vr)];case 2:return n.sent(),[3,7];case 3:return _c(e=n.sent())?(_o("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Fc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Cr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Wc=function(){function t(t,e){this.Or=t,this.params=e}return t.prototype.kr=function(t,e){return this.Or.Mr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Lr=function(t,e){var n=this;if(0===e)return mc.resolve(jc.Zi);var r=new Hc(e);return this.Or.Un(t,(function(t){return r.br(t.sequenceNumber)})).next((function(){return n.Or.$r(t,(function(t){return r.br(t)}))})).next((function(){return r.maxValue}))},t.prototype.Br=function(t,e,n){return this.Or.Br(t,e,n)},t.prototype.qr=function(t,e){return this.Or.qr(t,e)},t.prototype.Ur=function(t,e){var n=this;return-1===this.params.qi?(_o("LruGarbageCollector","Garbage collection skipped; disabled"),mc.resolve(Vc)):this.Qr(t).next((function(r){return r<n.params.qi?(_o("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.qi),Vc):n.Kr(t,e)}))},t.prototype.Qr=function(t){return this.Or.Qr(t)},t.prototype.Kr=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.kr(t,this.params.Ui).next((function(e){return e>c.params.Qi?(_o("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Qi+" from "+e),r=c.params.Qi):r=e,o=Date.now(),c.Lr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Br(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.qr(t,n)})).next((function(t){return a=Date.now(),Eo()<=zt.DEBUG&&_o("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),mc.resolve({Mi:!0,Li:r,$i:i,Bi:t})}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Yc(t,e,n){if(!n)throw new Vo(Uo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Qc(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Jc(t,e,n,r){if(!0===e&&!0===r)throw new Vo(Uo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Xc(t){if(!ys.qt(t))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Zc(t){if(ys.qt(t))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function th(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":So()}function eh(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new Vo(Uo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=th(t);throw new Vo(Uo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function nh(t,e){if(e<=0)throw new Vo(Uo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Vo(Uo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Vo(Uo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Jc("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ih=new Map,oh=function(){function t(t,e){this.Wr="(lite)",this.jr=new rh({}),this.Gr=!1,t instanceof Qo?(this.zr=t,this.Hr=new $o):(this.Jr=t,this.zr=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Vo(Uo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qo(t.options.projectId)}(t),this.Hr=new Ho(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Jr)throw new Vo(Uo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Jr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yr",{get:function(){return this.Gr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xr",{get:function(){return void 0!==this.Zr},enumerable:!1,configurable:!0}),t.prototype.eo=function(t){if(this.Gr)throw new Vo(Uo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.jr=new rh(t),void 0!==t.credentials&&(this.Hr=function(t){if(!t)return new $o;switch(t.type){case"gapi":var e=t.client;return Oo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Wo(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Vo(Uo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.no=function(){return this.jr},t.prototype.so=function(){return this.Gr=!0,this.jr},t.prototype._delete=function(){return this.Zr||(this.Zr=this.io()),this.Zr},t.prototype.io=function(){return this,(t=ih.get(this))&&(_o("ComponentProvider","Removing Datastore"),ih.delete(this),t.terminate()),Promise.resolve();var t},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function sh(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ah(e)),e=uh(t.get(n),e);return ah(e)}function uh(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function ah(t){return t+""}function ch(t){var e=t.length;if(Oo(e>=2),2===e)return Oo(""===t.charAt(0)&&""===t.charAt(1)),ps.Nt();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&So(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:So()}o=s+2}return new ps(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hh=function(t,e){this.seconds=t,this.nanoseconds=e},fh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};fh.store="owner",fh.key="owner";var lh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};lh.store="mutationQueues",lh.keyPath="userId";var ph=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ph.store="mutations",ph.keyPath="batchId",ph.userMutationsIndex="userMutationsIndex",ph.userMutationsKeyPath=["userId","batchId"];var dh=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,sh(e)]},t.key=function(t,e,n){return[t,sh(e),n]},t}();dh.store="documentMutations",dh.PLACEHOLDER=new dh;var vh=function(t,e){this.path=t,this.readTime=e},yh=function(t,e){this.path=t,this.version=e},gh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};gh.store="remoteDocuments",gh.readTimeIndex="readTimeIndex",gh.readTimeIndexPath="readTime",gh.collectionReadTimeIndex="collectionReadTimeIndex",gh.collectionReadTimeIndexPath=["parentPath","readTime"];var mh=function(t){this.byteSize=t};mh.store="remoteDocumentGlobal",mh.key="remoteDocumentGlobalKey";var bh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};bh.store="targets",bh.keyPath="targetId",bh.queryTargetsIndexName="queryTargetsIndex",bh.queryTargetsKeyPath=["canonicalId","targetId"];var wh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};wh.store="targetDocuments",wh.keyPath=["targetId","path"],wh.documentTargetsIndex="documentTargetsIndex",wh.documentTargetsKeyPath=["path","targetId"];var Ih=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ih.key="targetGlobalKey",Ih.store="targetGlobal";var Eh=function(t,e){this.collectionId=t,this.parent=e};Eh.store="collectionParents",Eh.keyPath=["collectionId","parent"];var _h=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};_h.store="clientMetadata",_h.keyPath="clientId";var Th=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Th.store="bundles",Th.keyPath="bundleId";var Ah=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ah.store="namedQueries",Ah.keyPath="name";var Nh=At(At(At(At([lh.store,ph.store,dh.store,gh.store,bh.store,fh.store,Ih.store,wh.store],[_h.store]),[mh.store]),[Eh.store]),[Th.store,Ah.store]),Sh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ro=e,r.oo=n,r}return mt(e,t),e}(Uc);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Oh(t,e){var n=ko(t);return wc.As(n.ro,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var kh=function(t){this.co=t};function xh(t,e){if(e.document)return function(t,e,n){var r=Ya(t,e.name),i=$a(e.updateTime),o=new qs({mapValue:{fields:e.fields}});return new $s(r,i,o,{hasCommittedMutations:!!n})}(t.co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ys.Ut(e.noDocument.path),r=Lh(e.noDocument.readTime);return new Hs(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ys.Ut(e.unknownDocument.path);return r=Lh(e.unknownDocument.version),new Ks(i,r)}return So()}function Dh(t,e,n){var r=Ph(n),i=e.key.path.yt().Dt();if(e instanceof $s){var o=function(t,e){return{name:Wa(t,e.key),fields:e.Yt().mapValue.fields,updateTime:Ba(t,e.version.Tt())}}(t.co,e),s=e.hasCommittedMutations;return new gh(null,null,o,s,r,i)}if(e instanceof Hs){var u=e.key.path.Dt(),a=Rh(e.version);return s=e.hasCommittedMutations,new gh(null,new vh(u,a),null,s,r,i)}if(e instanceof Ks){var c=e.key.path.Dt(),h=Rh(e.version);return new gh(new yh(c,h),null,null,!0,r,i)}return So()}function Ph(t){var e=t.Tt();return[e.seconds,e.nanoseconds]}function Ch(t){var e=new hs(t[0],t[1]);return fs.wt(e)}function Rh(t){var e=t.Tt();return new hh(e.seconds,e.nanoseconds)}function Lh(t){var e=new hs(t.seconds,t.nanoseconds);return fs.wt(e)}function Uh(t,e){for(var n=(e.baseMutations||[]).map((function(e){return nc(t.co,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return nc(t.co,e)})),s=hs.fromMillis(e.localWriteTimeMs);return new qc(e.batchId,s,n,o)}function Vh(t){var e,n,r=Lh(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Lh(t.lastLimboFreeSnapshotVersion):fs.min();return void 0!==t.query.documents?(Oo(1===(n=t.query).documents.length),e=_u(yu(Ja(n.documents[0])))):e=function(t){return _u(oc(t))}(t.query),new Du(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Lo.fromBase64String(t.resumeToken))}function Mh(t,e){var n,r=Rh(e.oe),i=Rh(e.lastLimboFreeSnapshotVersion);n=Xs(e.target)?rc(t.co,e.target):ic(t.co,e.target);var o=e.resumeToken.toBase64();return new bh(e.targetId,Qs(e.target),r,o,e.sequenceNumber,i,n)}function jh(t){var e=oc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Tu(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fh=function(){function t(){}return t.prototype.ao=function(t,e){return qh(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Lh(e.createTime),version:e.version};var e}))},t.prototype.uo=function(t,e){return qh(t).put({bundleId:(n=e).id,createTime:Rh($a(n.createTime)),version:n.version});var n},t.prototype.ho=function(t,e){return Bh(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:jh(e.bundledQuery),readTime:Lh(e.readTime)};var e}))},t.prototype.lo=function(t,e){return Bh(t).put(function(t){return{name:t.name,readTime:Rh($a(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function qh(t){return Oh(t,Th.store)}function Bh(t){return Oh(t,Ah.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gh=function(){function t(){this._o=new zh}return t.prototype.fo=function(t,e){return this._o.add(e),mc.resolve()},t.prototype.wo=function(t,e){return mc.resolve(this._o.getEntries(e))},t}(),zh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e]||new va(ps.At),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new va(ps.At)).Dt()},t}(),$h=function(){function t(){this.Eo=new zh}return t.prototype.fo=function(t,e){var n=this;if(!this.Eo.has(e)){var r=e.Vt(),i=e.yt();t.Oi((function(){n.Eo.add(e)}));var o={collectionId:r,parent:sh(i)};return Hh(t).put(o)}return mc.resolve()},t.prototype.wo=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ro(e),""],!1,!0);return Hh(t).Ds(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ch(o.parent))}return n}))},t}();function Hh(t){return Oh(t,Eh.store)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kh(t,e,n){var r=t.store(ph.store),i=t.store(dh.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.Fs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){Oo(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=dh.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return mc.hs(o).next((function(){return c}))}function Wh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw So();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yh=function(){function t(t,e,n,r){this.userId=t,this.fe=e,this.To=n,this.Io=r,this.mo={}}return t.Ao=function(e,n,r,i){return Oo(""!==e.uid),new t(e.T()?e.uid:"",n,r,i)},t.prototype.Ro=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jh(t).Fs({index:ph.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Po=function(t,e,n,r){var i=this,o=Xh(t),s=Jh(t);return s.add({}).next((function(u){Oo("number"==typeof u);for(var a=new qc(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return ec(t.co,e)})),i=n.mutations.map((function(e){return ec(t.co,e)}));return new ph(e,n.batchId,n.er.toMillis(),r,i)}(i.fe,i.userId,a),h=[],f=new va((function(t,e){return Po(t.Ct(),e.Ct())})),l=0,p=r;l<p.length;l++){var d=p[l],v=dh.key(i.userId,d.key.path,u);f=f.add(d.key.path.yt()),h.push(s.put(c)),h.push(o.put(v,dh.PLACEHOLDER))}return f.forEach((function(e){h.push(i.To.fo(t,e))})),t.Oi((function(){i.mo[u]=a.keys()})),mc.hs(h).next((function(){return a}))}))},t.prototype.yo=function(t,e){var n=this;return Jh(t).get(e).next((function(t){return t?(Oo(t.userId===n.userId),Uh(n.fe,t)):null}))},t.prototype.Vo=function(t,e){var n=this;return this.mo[e]?mc.resolve(this.mo[e]):this.yo(t,e).next((function(t){if(t){var r=t.keys();return n.mo[e]=r,r}return null}))},t.prototype.po=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Jh(t).Fs({index:ph.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Oo(e.batchId>=r),o=Uh(n.fe,e)),i.done()})).next((function(){return o}))},t.prototype.bo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Jh(t).Fs({index:ph.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jh(t).Ds(ph.userMutationsIndex,n).next((function(t){return t.map((function(t){return Uh(e.fe,t)}))}))},t.prototype.So=function(t,e){var n=this,r=dh.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Xh(t).Fs({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=ch(a);if(u===n.userId&&e.path.isEqual(h))return Jh(t).get(c).next((function(t){if(!t)throw So();Oo(t.userId===n.userId),o.push(Uh(n.fe,t))}));s.done()})).next((function(){return o}))},t.prototype.Do=function(t,e){var n=this,r=new va(Po),i=[];return e.forEach((function(e){var o=dh.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Xh(t).Fs({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=ch(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),mc.hs(i).next((function(){return n.Co(t,r)}))},t.prototype.xo=function(t,e){var n=this,r=e.path,i=r.length+1,o=dh.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new va(Po);return Xh(t).Fs({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=ch(a);s===n.userId&&r.vt(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Co(t,u)}))},t.prototype.Co=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Jh(t).get(e).next((function(t){if(null===t)throw So();Oo(t.userId===n.userId),r.push(Uh(n.fe,t))})))})),mc.hs(i).next((function(){return r}))},t.prototype.No=function(t,e){var n=this;return Kh(t.ro,this.userId,e).next((function(r){return t.Oi((function(){n.Fo(e.batchId)})),mc.forEach(r,(function(e){return n.Io.Oo(t,e)}))}))},t.prototype.Fo=function(t){delete this.mo[t]},t.prototype.ko=function(t){var e=this;return this.Ro(t).next((function(n){if(!n)return mc.resolve();var r=IDBKeyRange.lowerBound(dh.prefixForUser(e.userId)),i=[];return Xh(t).Fs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=ch(t[1]);i.push(o)}else r.done()})).next((function(){Oo(0===i.length)}))}))},t.prototype.Mo=function(t,e){return Qh(t,this.userId,e)},t.prototype.Lo=function(t){var e=this;return Zh(t).get(this.userId).next((function(t){return t||new lh(e.userId,-1,"")}))},t}();function Qh(t,e,n){var r=dh.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Xh(t).Fs({range:o,Ns:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Jh(t){return Oh(t,ph.store)}function Xh(t){return Oh(t,dh.store)}function Zh(t){return Oh(t,lh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tf=function(){function t(t){this.$o=t}return t.prototype.next=function(){return this.$o+=2,this.$o},t.Bo=function(){return new t(0)},t.qo=function(){return new t(-1)},t}(),ef=function(){function t(t,e){this.Io=t,this.fe=e}return t.prototype.Uo=function(t){var e=this;return this.Qo(t).next((function(n){var r=new tf(n.highestTargetId);return n.highestTargetId=r.next(),e.Ko(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wo=function(t){return this.Qo(t).next((function(t){return fs.wt(new hs(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.jo=function(t){return this.Qo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Go=function(t,e,n){var r=this;return this.Qo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Tt()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ko(t,i)}))},t.prototype.zo=function(t,e){var n=this;return this.Ho(t,e).next((function(){return n.Qo(t).next((function(r){return r.targetCount+=1,n.Jo(e,r),n.Ko(t,r)}))}))},t.prototype.Yo=function(t,e){return this.Ho(t,e)},t.prototype.Xo=function(t,e){var n=this;return this.Zo(t,e.targetId).next((function(){return nf(t).delete(e.targetId)})).next((function(){return n.Qo(t)})).next((function(e){return Oo(e.targetCount>0),e.targetCount-=1,n.Ko(t,e)}))},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return nf(t).Fs((function(s,u){var a=Vh(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Xo(t,a)))})).next((function(){return mc.hs(o)})).next((function(){return i}))},t.prototype.Un=function(t,e){return nf(t).Fs((function(t,n){var r=Vh(n);e(r)}))},t.prototype.Qo=function(t){return rf(t).get(Ih.key).next((function(t){return Oo(null!==t),t}))},t.prototype.Ko=function(t,e){return rf(t).put(Ih.key,e)},t.prototype.Ho=function(t,e){return nf(t).put(Mh(this.fe,e))},t.prototype.Jo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tc=function(t){return this.Qo(t).next((function(t){return t.targetCount}))},t.prototype.ec=function(t,e){var n=Qs(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return nf(t).Fs({range:r,index:bh.queryTargetsIndexName},(function(t,n,r){var o=Vh(n);Js(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nc=function(t,e,n){var r=this,i=[],o=of(t);return e.forEach((function(e){var s=sh(e.path);i.push(o.put(new wh(n,s))),i.push(r.Io.sc(t,n,e))})),mc.hs(i)},t.prototype.ic=function(t,e,n){var r=this,i=of(t);return mc.forEach(e,(function(e){var o=sh(e.path);return mc.hs([i.delete([n,o]),r.Io.rc(t,n,e)])}))},t.prototype.Zo=function(t,e){var n=of(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.oc=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=of(t),i=Ta();return r.Fs({range:n,Ns:!0},(function(t,e,n){var r=ch(t[1]),o=new ys(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mo=function(t,e){var n=sh(e.path),r=IDBKeyRange.bound([n],[Ro(n)],!1,!0),i=0;return of(t).Fs({index:wh.documentTargetsIndex,Ns:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Zn=function(t,e){return nf(t).get(e).next((function(t){return t?Vh(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function nf(t){return Oh(t,bh.store)}function rf(t){return Oh(t,Ih.store)}function of(t){return Oh(t,wh.store)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sf=function(){function t(t,e){this.db=t,this.vr=function(t,e){return new Wc(t,e)}(this,e)}return t.prototype.Mr=function(t){var e=this.cc(t);return this.db.ac().tc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.cc=function(t){var e=0;return this.$r(t,(function(t){e++})).next((function(){return e}))},t.prototype.Un=function(t,e){return this.db.ac().Un(t,e)},t.prototype.$r=function(t,e){return this.uc(t,(function(t,n){return e(n)}))},t.prototype.sc=function(t,e,n){return uf(t,n)},t.prototype.rc=function(t,e,n){return uf(t,n)},t.prototype.Br=function(t,e,n){return this.db.ac().Br(t,e,n)},t.prototype.Oo=function(t,e){return uf(t,e)},t.prototype.hc=function(t,e){return function(t,e){var n=!1;return Zh(t).Os((function(r){return Qh(t,r,e).next((function(t){return t&&(n=!0),mc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.qr=function(t,e){var n=this,r=this.db._c().lc(),i=[],o=0;return this.uc(t,(function(s,u){if(u<=e){var a=n.hc(t,s).next((function(e){if(!e)return o++,r.Ar(t,s).next((function(){return r.mr(s),of(t).delete([0,sh(s.path)])}))}));i.push(a)}})).next((function(){return mc.hs(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.ce(t.oo);return this.db.ac().Yo(t,n)},t.prototype.fc=function(t,e){return uf(t,e)},t.prototype.uc=function(t,e){var n,r=of(t),i=jc.Zi;return r.Fs({index:wh.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==jc.Zi&&e(new ys(ch(n)),i),i=u,n=s):i=jc.Zi})).next((function(){i!==jc.Zi&&e(new ys(ch(n)),i)}))},t.prototype.Qr=function(t){return this.db._c().dc(t)},t}();function uf(t,e){return of(t).put(function(t,e){return new wh(0,sh(t.path),e)}(e,t.oo))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var af=function(){function t(t,e){this.fe=t,this.To=e}return t.prototype.Er=function(t,e,n){return ff(t).put(lf(e),n)},t.prototype.mr=function(t,e){var n=ff(t),r=lf(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.wc(t,r)}))},t.prototype.Ar=function(t,e){var n=this;return ff(t).get(lf(e)).next((function(t){return n.Ec(t)}))},t.prototype.Tc=function(t,e){var n=this;return ff(t).get(lf(e)).next((function(t){var e=n.Ec(t);return e?{Ir:e,size:Wh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ba();return this.Ic(t,e,(function(t,e){var i=n.Ec(e);r=r.Ie(t,i)})).next((function(){return r}))},t.prototype.mc=function(t,e){var n=this,r=ba(),i=new la(ys.At);return this.Ic(t,e,(function(t,e){var o=n.Ec(e);o?(r=r.Ie(t,o),i=i.Ie(t,Wh(e))):(r=r.Ie(t,null),i=i.Ie(t,0))})).next((function(){return{Ac:r,Rc:i}}))},t.prototype.Ic=function(t,e,n){if(e.bt())return mc.resolve();var r=IDBKeyRange.bound(e.first().path.Dt(),e.last().path.Dt()),i=e.ge(),o=i.De();return ff(t).Fs({range:r},(function(t,e,r){for(var s=ys.Ut(t);o&&ys.At(o,s)<0;)n(o,null),o=i.De();o&&o.isEqual(s)&&(n(o,e),o=i.Ce()?i.De():null),o?r.Ss(o.path.Dt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Ce()?i.De():null}))},t.prototype.Pc=function(t,e,n){var r=this,i=Ia(),o=e.path.length+1,s={};if(n.isEqual(fs.min())){var u=e.path.Dt();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.Dt(),c=Ph(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=gh.collectionReadTimeIndex}return ff(t).Fs(s,(function(t,n,s){if(t.length===o){var u=xh(r.fe,n);e.path.vt(u.key.path)?u instanceof $s&&Ou(e,u)&&(i=i.Ie(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.lc=function(t){return new cf(this,!!t&&t.yc)},t.prototype.dc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return hf(t).get(mh.key).next((function(t){return Oo(!!t),t}))},t.prototype.wc=function(t,e){return hf(t).put(mh.key,e)},t.prototype.Ec=function(t){if(t){var e=xh(this.fe,t);return e instanceof Hs&&e.version.isEqual(fs.min())?null:e}return null},t}(),cf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).gc=e,r.yc=n,r.Vc=new Gc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return mt(e,t),e.prototype.yr=function(t){var e=this,n=[],r=0,i=new va((function(t,e){return Po(t.Ct(),e.Ct())}));return this._r.forEach((function(o,s){var u=e.Vc.get(o);if(s.Ir){var a=Dh(e.gc.fe,s.Ir,e.wr(o));i=i.add(o.path.yt());var c=Wh(a);r+=c-u,n.push(e.gc.Er(t,o,a))}else if(r-=u,e.yc){var h=Dh(e.gc.fe,new Hs(o,fs.min()),e.wr(o));n.push(e.gc.Er(t,o,h))}else n.push(e.gc.mr(t,o))})),i.forEach((function(r){n.push(e.gc.To.fo(t,r))})),n.push(this.gc.updateMetadata(t,r)),mc.hs(n)},e.prototype.Rr=function(t,e){var n=this;return this.gc.Tc(t,e).next((function(t){return null===t?(n.Vc.set(e,0),null):(n.Vc.set(e,t.size),t.Ir)}))},e.prototype.Pr=function(t,e){var n=this;return this.gc.mc(t,e).next((function(t){var e=t.Ac;return t.Rc.forEach((function(t,e){n.Vc.set(t,e)})),e}))},e}(zc);function hf(t){return Oh(t,mh.store)}function ff(t){return Oh(t,gh.store)}function lf(t){return t.path.Dt()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var pf=function(){function t(t){this.fe=t}return t.prototype.Ps=function(t,e,n,r){var i=this;Oo(n<r&&n>=0&&r<=11);var o=new bc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(fh.store)}(t),function(t){t.createObjectStore(lh.store,{keyPath:lh.keyPath}),t.createObjectStore(ph.store,{keyPath:ph.keyPath,autoIncrement:!0}).createIndex(ph.userMutationsIndex,ph.userMutationsKeyPath,{unique:!0}),t.createObjectStore(dh.store)}(t),df(t),function(t){t.createObjectStore(gh.store)}(t));var s=mc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(wh.store),t.deleteObjectStore(bh.store),t.deleteObjectStore(Ih.store)}(t),df(t)),s=s.next((function(){return function(t){var e=t.store(Ih.store),n=new Ih(0,0,fs.min().Tt(),0);return e.put(Ih.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ph.store).Ds().next((function(n){t.deleteObjectStore(ph.store),t.createObjectStore(ph.store,{keyPath:ph.keyPath,autoIncrement:!0}).createIndex(ph.userMutationsIndex,ph.userMutationsKeyPath,{unique:!0});var r=e.store(ph.store),i=n.map((function(t){return r.put(t)}));return mc.hs(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(_h.store,{keyPath:_h.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.bc(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(mh.store)}(t),i.vc(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Sc(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Dc(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(gh.store);e.createIndex(gh.readTimeIndex,gh.readTimeIndexPath,{unique:!1}),e.createIndex(gh.collectionReadTimeIndex,gh.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Cc(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Th.store,{keyPath:Th.keyPath})}(t),function(t){t.createObjectStore(Ah.store,{keyPath:Ah.keyPath})}(t)}))),s},t.prototype.vc=function(t){var e=0;return t.store(gh.store).Fs((function(t,n){e+=Wh(n)})).next((function(){var n=new mh(e);return t.store(mh.store).put(mh.key,n)}))},t.prototype.bc=function(t){var e=this,n=t.store(lh.store),r=t.store(ph.store);return n.Ds().next((function(n){return mc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ds(ph.userMutationsIndex,i).next((function(r){return mc.forEach(r,(function(r){Oo(r.userId===n.userId);var i=Uh(e.fe,r);return Kh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Sc=function(t){var e=t.store(wh.store),n=t.store(gh.store);return t.store(Ih.store).get(Ih.key).next((function(t){var r=[];return n.Fs((function(n,i){var o=new ps(n),s=function(t){return[0,sh(t)]}(o);r.push(e.get(s).next((function(n){return n?mc.resolve():function(n){return e.put(new wh(0,sh(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return mc.hs(r)}))}))},t.prototype.Dc=function(t,e){t.createObjectStore(Eh.store,{keyPath:Eh.keyPath});var n=e.store(Eh.store),r=new zh,i=function(t){if(r.add(t)){var e=t.Vt(),i=t.yt();return n.put({collectionId:e,parent:sh(i)})}};return e.store(gh.store).Fs({Ns:!0},(function(t,e){var n=new ps(t);return i(n.yt())})).next((function(){return e.store(dh.store).Fs({Ns:!0},(function(t,e){t[0];var n=t[1],r=(t[2],ch(n));return i(r.yt())}))}))},t.prototype.Cc=function(t){var e=this,n=t.store(bh.store);return n.Fs((function(t,r){var i=Vh(r),o=Mh(e.fe,i);return n.put(o)}))},t}();function df(t){t.createObjectStore(wh.store,{keyPath:wh.keyPath}).createIndex(wh.documentTargetsIndex,wh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bh.store,{keyPath:bh.keyPath}).createIndex(bh.queryTargetsIndexName,bh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ih.store)}var vf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yf=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=o,this.window=s,this.document=u,this.xc=c,this.Nc=h,this.Fc=null,this.Oc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kc=null,this.inForeground=!1,this.Mc=null,this.Lc=null,this.$c=Number.NEGATIVE_INFINITY,this.Bc=function(t){return Promise.resolve()},!t.G())throw new Vo(Uo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Io=new sf(this,i),this.qc=n+"main",this.fe=new kh(a),this.Uc=new wc(this.qc,11,new pf(this.fe)),this.Qc=new ef(this.Io,this.fe),this.To=new $h,this.Kc=function(t,e){return new af(t,e)}(this.fe,this.To),this.Wc=new Fh,this.window&&this.window.localStorage?this.jc=this.window.localStorage:(this.jc=null,!1===h&&To("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Gc().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Vo(Uo.FAILED_PRECONDITION,vf);return t.zc(),t.Hc(),t.Jc(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Qc.jo(e)}))})).then((function(e){t.Fc=new jc(e,t.xc)})).then((function(){t.Oc=!0})).catch((function(e){return t.Uc&&t.Uc.close(),Promise.reject(e)}))},t.prototype.Yc=function(t){var e=this;return this.Bc=function(n){return wt(e,void 0,void 0,(function(){return It(this,(function(e){return this.Nr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Xc=function(t){var e=this;this.Uc.gs((function(n){return wt(e,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Zc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.Ws((function(){return wt(e,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return this.Nr?[4,this.Gc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Gc=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return mf(e).put(new _h(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ta(e).next((function(e){e||(t.isPrimary=!1,t.js.ea((function(){return t.Bc(!1)})))}))})).next((function(){return t.na(e)})).next((function(n){return t.isPrimary&&!n?t.sa(e).next((function(){return!1})):!!n&&t.ia(e).next((function(){return!0}))}))})).catch((function(e){if(_c(e))return _o("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return _o("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.js.ea((function(){return t.Bc(e)})),t.isPrimary=e}))},t.prototype.ta=function(t){var e=this;return gf(t).get(fh.key).next((function(t){return mc.resolve(e.ra(t))}))},t.prototype.oa=function(t){return mf(t).delete(this.clientId)},t.prototype.ca=function(){return wt(this,void 0,void 0,(function(){var t,e,n,r,i=this;return It(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.aa(this.$c,18e5)?[3,2]:(this.$c=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Oh(t,_h.store);return e.Ds().next((function(t){var n=i.ua(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return mc.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.jc)for(e=0,n=t;e<n.length;e++)r=n[e],this.jc.removeItem(this.ha(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Jc=function(){var t=this;this.Lc=this.js.ni("client_metadata_refresh",4e3,(function(){return t.Gc().then((function(){return t.ca()})).then((function(){return t.Jc()}))}))},t.prototype.ra=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.na=function(t){var e=this;return this.Nc?mc.resolve(!0):gf(t).get(fh.key).next((function(n){if(null!==n&&e.aa(n.leaseTimestampMs,5e3)&&!e.la(n.ownerId)){if(e.ra(n)&&e.networkEnabled)return!0;if(!e.ra(n)){if(!n.allowTabSynchronization)throw new Vo(Uo.FAILED_PRECONDITION,vf);return!1}}return!(!e.networkEnabled||!e.inForeground)||mf(t).Ds().next((function(t){return void 0===e.ua(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&_o("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$=function(){return wt(this,void 0,void 0,(function(){var t=this;return It(this,(function(e){switch(e.label){case 0:return this.Oc=!1,this._a(),this.Lc&&(this.Lc.cancel(),this.Lc=null),this.fa(),this.da(),[4,this.Uc.runTransaction("shutdown","readwrite",[fh.store,_h.store],(function(e){var n=new Sh(e,jc.Zi);return t.sa(n).next((function(){return t.oa(n)}))}))];case 1:return e.sent(),this.Uc.close(),this.wa(),[2]}}))}))},t.prototype.ua=function(t,e){var n=this;return t.filter((function(t){return n.aa(t.updateTimeMs,e)&&!n.la(t.clientId)}))},t.prototype.Ea=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return mf(e).Ds().next((function(e){return t.ua(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Ta=function(t){return Yh.Ao(t,this.fe,this.To,this.Io)},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.Ia=function(){return this.To},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r=this;_o("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Uc.runTransaction(t,o,Nh,(function(o){return i=new Sh(o,r.Fc?r.Fc.next():jc.Zi),"readwrite-primary"===e?r.ta(i).next((function(t){return!!t||r.na(i)})).next((function(e){if(!e)throw To("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.js.ea((function(){return r.Bc(!1)})),new Vo(Uo.FAILED_PRECONDITION,Lc);return n(i)})).next((function(t){return r.ia(i).next((function(){return t}))})):r.Aa(i).next((function(){return n(i)}))})).then((function(t){return i.ki(),t}))},t.prototype.Aa=function(t){var e=this;return gf(t).get(fh.key).next((function(t){if(null!==t&&e.aa(t.leaseTimestampMs,5e3)&&!e.la(t.ownerId)&&!e.ra(t)&&!(e.Nc||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Vo(Uo.FAILED_PRECONDITION,vf)}))},t.prototype.ia=function(t){var e=new fh(this.clientId,this.allowTabSynchronization,Date.now());return gf(t).put(fh.key,e)},t.G=function(){return wc.G()},t.prototype.sa=function(t){var e=this,n=gf(t);return n.get(fh.key).next((function(t){return e.ra(t)?(_o("IndexedDbPersistence","Releasing primary lease."),n.delete(fh.key)):mc.resolve()}))},t.prototype.aa=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(To("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.zc=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Mc=function(){t.js.Ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.Gc()}))},this.document.addEventListener("visibilitychange",this.Mc),this.inForeground="visible"===this.document.visibilityState)},t.prototype.fa=function(){this.Mc&&(this.document.removeEventListener("visibilitychange",this.Mc),this.Mc=null)},t.prototype.Hc=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.kc=function(){e._a(),e.js.Ws((function(){return e.$()}))},this.window.addEventListener("unload",this.kc))},t.prototype.da=function(){this.kc&&(this.window.removeEventListener("unload",this.kc),this.kc=null)},t.prototype.la=function(t){var e;try{var n=null!==(null===(e=this.jc)||void 0===e?void 0:e.getItem(this.ha(t)));return _o("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return To("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype._a=function(){if(this.jc)try{this.jc.setItem(this.ha(this.clientId),String(Date.now()))}catch(t){To("Failed to set zombie client id.",t)}},t.prototype.wa=function(){if(this.jc)try{this.jc.removeItem(this.ha(this.clientId))}catch(t){}},t.prototype.ha=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function gf(t){return Oh(t,fh.store)}function mf(t){return Oh(t,_h.store)}function bf(t,e){var n=t.projectId;return t.M||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var wf=function(){function t(t,e,n){this.Kc=t,this.Ra=e,this.To=n}return t.prototype.Pa=function(t,e){var n=this;return this.Ra.So(t,e).next((function(r){return n.ya(t,e,r)}))},t.prototype.ya=function(t,e,n){return this.Kc.Ar(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ir(e,t);return t}))},t.prototype.ga=function(t,e,n){var r=ba();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ir(t,e);r=r.Ie(t,e)})),r},t.prototype.Va=function(t,e){var n=this;return this.Kc.getEntries(t,e).next((function(e){return n.pa(t,e)}))},t.prototype.pa=function(t,e){var n=this;return this.Ra.Do(t,e).next((function(r){var i=n.ga(t,e,r),o=ma();return i.forEach((function(t,e){e||(e=new Hs(t,fs.min())),o=o.Ie(t,e)})),o}))},t.prototype.Pc=function(t,e,n){return function(t){return ys.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ba(t,e.path):Iu(e)?this.va(t,e,n):this.Sa(t,e,n)},t.prototype.ba=function(t,e){return this.Pa(t,new ys(e)).next((function(t){var e=Ia();return t instanceof $s&&(e=e.Ie(t.key,t)),e}))},t.prototype.va=function(t,e,n){var r=this,i=e.collectionGroup,o=Ia();return this.To.wo(t,i).next((function(s){return mc.forEach(s,(function(s){var u=function(t,e){return new du(e,null,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sa(t,u,n).next((function(t){t.forEach((function(t,e){o=o.Ie(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Sa=function(t,e,n){var r,i,o=this;return this.Kc.Pc(t,e,n).next((function(n){return r=n,o.Ra.xo(t,e)})).next((function(e){return i=e,o.Da(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=Zu(a,h,h,o.er);r=f instanceof $s?r.Ie(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ou(e,n)||(r=r.remove(t))})),r}))},t.prototype.Da=function(t,e,n){for(var r=Ta(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof ia&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Kc.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof $s&&(c=c.Ie(t,e))})),c}))},t}(),If=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ca=n,this.xa=r}return t.Na=function(e,n){for(var r=Ta(),i=Ta(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ef=function(){function t(){}return t.prototype.Fa=function(t){this.Oa=t},t.prototype.Pc=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.ne.length||1===t.ne.length&&t.ne[0].field.Ot())}(e)||n.isEqual(fs.min())?this.ka(t,e):this.Oa.Va(t,r).next((function(o){var s=i.Ma(e,o);return(gu(e)||mu(e))&&i.La(e.limitType,s,r,n)?i.ka(t,e):(Eo()<=zt.DEBUG&&_o("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Su(e)),i.Oa.Pc(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ie(e.key,e)})),t})))}))},t.prototype.Ma=function(t,e){var n=new va(ku(t));return e.forEach((function(e,r){r instanceof $s&&Ou(t,r)&&(n=n.add(r))})),n},t.prototype.La=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.ka=function(t,e){return Eo()<=zt.DEBUG&&_o("QueryEngine","Using full collection scan to execute query:",Su(e)),this.Oa.Pc(t,e,fs.min())},t}(),_f=function(){function t(t,e,n,r){this.persistence=t,this.$a=e,this.fe=r,this.Ba=new la(Po),this.qa=new Gc((function(t){return Qs(t)}),Js),this.Ua=fs.min(),this.Ra=t.Ta(n),this.Qa=t._c(),this.Qc=t.ac(),this.Ka=new wf(this.Qa,this.Ra,this.persistence.Ia()),this.Wc=t.ma(),this.$a.Fa(this.Ka)}return t.prototype.Fr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Ur(n,e.Ba)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Tf(t,e,n,r){return new _f(t,e,n,r)}function Af(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o;return It(this,(function(s){switch(s.label){case 0:return n=ko(t),r=n.Ra,i=n.Ka,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ra.vo(t).next((function(s){return o=s,r=n.persistence.Ta(e),i=new wf(n.Qa,r,n.persistence.Ia()),r.vo(t)})).next((function(e){for(var n=[],r=[],s=Ta(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Va(t,s).next((function(t){return{Wa:t,ja:n,Ga:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ra=r,n.Ka=i,n.$a.Fa(n.Ka),o)]}}))}))}function Nf(t,e){var n=ko(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Qa.lc({yc:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=mc.resolve();return o.forEach((function(t){s=s.next((function(){return r.Ar(e,t)})).next((function(e){var o=e,s=n.ar.get(t);Oo(null!==s),(!o||o.version.u(s)<0)&&(o=i.nr(t,o,n))&&r.Er(o,n.cr)}))})),s.next((function(){return t.Ra.No(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}function Sf(t){var e=ko(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Qc.Wo(t)}))}function Of(t,e){var n=ko(t),r=e.oe,i=n.Ba;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Qa.lc({yc:!0});i=n.Ba;var s=[];e.rn.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.Qc.ic(t,e.dn,o).next((function(){return n.Qc.nc(t,e._n,o)})));var a=e.resumeToken;if(a.o()>0){var c=u.ae(a,r).ce(t.oo);i=i.Ie(o,c),function(t,e,n){return Oo(e.resumeToken.o()>0),0===t.resumeToken.o()||e.oe.Et()-t.oe.Et()>=3e8||n._n.size+n.fn.size+n.dn.size>0}(u,c,e)&&s.push(n.Qc.Yo(t,c))}}}));var u=ma();if(e.cn.forEach((function(r,i){e.an.has(r)&&s.push(n.persistence.Io.fc(t,r))})),s.push(function(t,e,n,r,i){var o=Ta();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ma();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof Hs&&s.version.isEqual(fs.min())?(e.mr(n,a),o=o.Ie(n,s)):null==u||s.version.u(u.version)>0||0===s.version.u(u.version)&&u.hasPendingWrites?(e.Er(s,a),o=o.Ie(n,s)):_o("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}(t,o,e.cn,r,void 0).next((function(t){u=t}))),!r.isEqual(fs.min())){var a=n.Qc.Wo(t).next((function(e){return n.Qc.Go(t,t.oo,r)}));s.push(a)}return mc.hs(s).next((function(){return o.apply(t)})).next((function(){return n.Ka.pa(t,u)}))})).then((function(t){return n.Ba=i,t}))}function kf(t,e){var n=ko(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ra.po(t,e)}))}function xf(t,e){var n=ko(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Qc.ec(t,e).next((function(i){return i?(r=i,mc.resolve(r)):n.Qc.Uo(t).next((function(i){return r=new Du(e,i,0,t.oo),n.Qc.zo(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Ba.get(t.targetId);return(null===r||t.oe.u(r.oe)>0)&&(n.Ba=n.Ba.Ie(t.targetId,t),n.qa.set(e,t.targetId)),t}))}function Df(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return It(this,(function(u){switch(u.label){case 0:r=ko(t),i=r.Ba.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Io.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!_c(s=u.sent()))throw s;return _o("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Ba=r.Ba.remove(e),r.qa.delete(i.target),[2]}}))}))}function Pf(t,e,n){var r=ko(t),i=fs.min(),o=Ta();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ko(t),i=r.qa.get(n);return void 0!==i?mc.resolve(r.Ba.get(i)):r.Qc.ec(e,n)}(r,t,_u(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Qc.oc(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.$a.Pc(t,e,n?i:fs.min(),n?o:Ta())})).next((function(t){return{documents:t,za:o}}))}))}function Cf(t,e){var n=ko(t),r=ko(n.Qc),i=n.Ba.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Zn(t,e).next((function(t){return t?t.target:null}))}))}function Rf(t){var e=ko(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ko(t),i=ma(),o=Ph(n),s=ff(e),u=IDBKeyRange.lowerBound(o,!0);return s.Fs({index:gh.readTimeIndex,range:u},(function(t,e){var n=xh(r.fe,e);i=i.Ie(n.key,n),o=e.readTime})).next((function(){return{tr:i,readTime:Ch(o)}}))}(e.Qa,t,e.Ua)})).then((function(t){var n=t.tr,r=t.readTime;return e.Ua=r,n}))}function Lf(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){return[2,(e=ko(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ff(t),n=fs.min();return e.Fs({index:gh.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ch(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ua=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Uf=function(){function t(t){this.fe=t,this.Xa=new Map,this.Za=new Map}return t.prototype.ao=function(t,e){return mc.resolve(this.Xa.get(e))},t.prototype.uo=function(t,e){var n;return this.Xa.set(e.id,{id:(n=e).id,version:n.version,createTime:$a(n.createTime)}),mc.resolve()},t.prototype.ho=function(t,e){return mc.resolve(this.Za.get(e))},t.prototype.lo=function(t,e){return this.Za.set(e.name,function(t){return{name:t.name,query:jh(t.bundledQuery),readTime:$a(t.readTime)}}(e)),mc.resolve()},t}(),Vf=function(){function t(){this.tu=new va(Mf.eu),this.nu=new va(Mf.su)}return t.prototype.bt=function(){return this.tu.bt()},t.prototype.sc=function(t,e){var n=new Mf(t,e);this.tu=this.tu.add(n),this.nu=this.nu.add(n)},t.prototype.iu=function(t,e){var n=this;t.forEach((function(t){return n.sc(t,e)}))},t.prototype.rc=function(t,e){this.ru(new Mf(t,e))},t.prototype.ou=function(t,e){var n=this;t.forEach((function(t){return n.rc(t,e)}))},t.prototype.cu=function(t){var e=this,n=new ys(new ps([])),r=new Mf(n,t),i=new Mf(n,t+1),o=[];return this.nu.Qe([r,i],(function(t){e.ru(t),o.push(t.key)})),o},t.prototype.au=function(){var t=this;this.tu.forEach((function(e){return t.ru(e)}))},t.prototype.ru=function(t){this.tu=this.tu.delete(t),this.nu=this.nu.delete(t)},t.prototype.uu=function(t){var e=new ys(new ps([])),n=new Mf(e,t),r=new Mf(e,t+1),i=Ta();return this.nu.Qe([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mo=function(t){var e=new Mf(t,0),n=this.tu.We(e);return null!==n&&t.isEqual(n.key)},t}(),Mf=function(){function t(t,e){this.key=t,this.hu=e}return t.eu=function(t,e){return ys.At(t.key,e.key)||Po(t.hu,e.hu)},t.su=function(t,e){return Po(t.hu,e.hu)||ys.At(t.key,e.key)},t}(),jf=function(){function t(t,e){this.To=t,this.Io=e,this.Ra=[],this.lu=1,this._u=new va(Mf.eu)}return t.prototype.Ro=function(t){return mc.resolve(0===this.Ra.length)},t.prototype.Po=function(t,e,n,r){var i=this.lu;this.lu++,this.Ra.length>0&&this.Ra[this.Ra.length-1];var o=new qc(i,e,n,r);this.Ra.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this._u=this._u.add(new Mf(a.key,i)),this.To.fo(t,a.key.path.yt())}return mc.resolve(o)},t.prototype.yo=function(t,e){return mc.resolve(this.fu(e))},t.prototype.po=function(t,e){var n=e+1,r=this.du(n),i=r<0?0:r;return mc.resolve(this.Ra.length>i?this.Ra[i]:null)},t.prototype.bo=function(){return mc.resolve(0===this.Ra.length?-1:this.lu-1)},t.prototype.vo=function(t){return mc.resolve(this.Ra.slice())},t.prototype.So=function(t,e){var n=this,r=new Mf(e,0),i=new Mf(e,Number.POSITIVE_INFINITY),o=[];return this._u.Qe([r,i],(function(t){var e=n.fu(t.hu);o.push(e)})),mc.resolve(o)},t.prototype.Do=function(t,e){var n=this,r=new va(Po);return e.forEach((function(t){var e=new Mf(t,0),i=new Mf(t,Number.POSITIVE_INFINITY);n._u.Qe([e,i],(function(t){r=r.add(t.hu)}))})),mc.resolve(this.wu(r))},t.prototype.xo=function(t,e){var n=e.path,r=n.length+1,i=n;ys.qt(i)||(i=i.child(""));var o=new Mf(new ys(i),0),s=new va(Po);return this._u.Ke((function(t){var e=t.key.path;return!!n.vt(e)&&(e.length===r&&(s=s.add(t.hu)),!0)}),o),mc.resolve(this.wu(s))},t.prototype.wu=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.fu(t);null!==r&&n.push(r)})),n},t.prototype.No=function(t,e){var n=this;Oo(0===this.Eu(e.batchId,"removed")),this.Ra.shift();var r=this._u;return mc.forEach(e.mutations,(function(i){var o=new Mf(i.key,e.batchId);return r=r.delete(o),n.Io.Oo(t,i.key)})).next((function(){n._u=r}))},t.prototype.Fo=function(t){},t.prototype.Mo=function(t,e){var n=new Mf(e,0),r=this._u.We(n);return mc.resolve(e.isEqual(r&&r.key))},t.prototype.ko=function(t){return this.Ra.length,mc.resolve()},t.prototype.Eu=function(t,e){return this.du(t)},t.prototype.du=function(t){return 0===this.Ra.length?0:t-this.Ra[0].batchId},t.prototype.fu=function(t){var e=this.du(t);return e<0||e>=this.Ra.length?null:this.Ra[e]},t}(),Ff=function(){function t(t,e){this.To=t,this.Tu=e,this.docs=new la(ys.At),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Tu(e);return this.docs=this.docs.Ie(r,{Ir:e,size:s,readTime:n}),this.size+=s-o,this.To.fo(t,r.path.yt())},t.prototype.mr=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ar=function(t,e){var n=this.docs.get(e);return mc.resolve(n?n.Ir:null)},t.prototype.getEntries=function(t,e){var n=this,r=ba();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ie(t,e?e.Ir:null)})),mc.resolve(r)},t.prototype.Pc=function(t,e,n){for(var r=Ia(),i=new ys(e.path.child("")),o=this.docs.Ve(i);o.Ce();){var s=o.De(),u=s.key,a=s.value,c=a.Ir,h=a.readTime;if(!e.path.vt(u.path))break;h.u(n)<=0||c instanceof $s&&Ou(e,c)&&(r=r.Ie(c.key,c))}return mc.resolve(r)},t.prototype.Iu=function(t,e){return mc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.lc=function(t){return new qf(this)},t.prototype.dc=function(t){return mc.resolve(this.size)},t}(),qf=function(t){function e(e){var n=this;return(n=t.call(this)||this).gc=e,n}return mt(e,t),e.prototype.yr=function(t){var e=this,n=[];return this._r.forEach((function(r,i){i&&i.Ir?n.push(e.gc.Er(t,i.Ir,e.wr(r))):e.gc.mr(r)})),mc.hs(n)},e.prototype.Rr=function(t,e){return this.gc.Ar(t,e)},e.prototype.Pr=function(t,e){return this.gc.getEntries(t,e)},e}(zc),Bf=function(){function t(t){this.persistence=t,this.mu=new Gc((function(t){return Qs(t)}),Js),this.lastRemoteSnapshotVersion=fs.min(),this.highestTargetId=0,this.Au=0,this.Ru=new Vf,this.targetCount=0,this.Pu=tf.Bo()}return t.prototype.Un=function(t,e){return this.mu.forEach((function(t,n){return e(n)})),mc.resolve()},t.prototype.Wo=function(t){return mc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.jo=function(t){return mc.resolve(this.Au)},t.prototype.Uo=function(t){return this.highestTargetId=this.Pu.next(),mc.resolve(this.highestTargetId)},t.prototype.Go=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Au&&(this.Au=e),mc.resolve()},t.prototype.Ho=function(t){this.mu.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Pu=new tf(e),this.highestTargetId=e),t.sequenceNumber>this.Au&&(this.Au=t.sequenceNumber)},t.prototype.zo=function(t,e){return this.Ho(e),this.targetCount+=1,mc.resolve()},t.prototype.Yo=function(t,e){return this.Ho(e),mc.resolve()},t.prototype.Xo=function(t,e){return this.mu.delete(e.target),this.Ru.cu(e.targetId),this.targetCount-=1,mc.resolve()},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return this.mu.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.mu.delete(s),o.push(r.Zo(t,u.targetId)),i++)})),mc.hs(o).next((function(){return i}))},t.prototype.tc=function(t){return mc.resolve(this.targetCount)},t.prototype.ec=function(t,e){var n=this.mu.get(e)||null;return mc.resolve(n)},t.prototype.nc=function(t,e,n){return this.Ru.iu(e,n),mc.resolve()},t.prototype.ic=function(t,e,n){this.Ru.ou(e,n);var r=this.persistence.Io,i=[];return r&&e.forEach((function(e){i.push(r.Oo(t,e))})),mc.hs(i)},t.prototype.Zo=function(t,e){return this.Ru.cu(e),mc.resolve()},t.prototype.oc=function(t,e){var n=this.Ru.uu(e);return mc.resolve(n)},t.prototype.Mo=function(t,e){return mc.resolve(this.Ru.Mo(e))},t}(),Gf=function(){function t(t,e){var n=this;this.yu={},this.Fc=new jc(0),this.Oc=!1,this.Oc=!0,this.Io=t(this),this.Qc=new Bf(this),this.To=new Gh,this.Kc=function(t,e){return new Ff(t,(function(t){return n.Io.gu(t)}))}(this.To),this.fe=new kh(e),this.Wc=new Uf(this.fe)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$=function(){return this.Oc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Xc=function(){},t.prototype.Zc=function(){},t.prototype.Ia=function(){return this.To},t.prototype.Ta=function(t){var e=this.yu[t.I()];return e||(e=new jf(this.To,this.Io),this.yu[t.I()]=e),e},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r=this;_o("MemoryPersistence","Starting transaction:",t);var i=new zf(this.Fc.next());return this.Io.Vu(),n(i).next((function(t){return r.Io.pu(i).next((function(){return t}))})).cs().then((function(t){return i.ki(),t}))},t.prototype.bu=function(t,e){return mc.ls(Object.values(this.yu).map((function(n){return function(){return n.Mo(t,e)}})))},t}(),zf=function(t){function e(e){var n=this;return(n=t.call(this)||this).oo=e,n}return mt(e,t),e}(Uc),$f=function(){function t(t){this.persistence=t,this.vu=new Vf,this.Su=null}return t.Du=function(e){return new t(e)},Object.defineProperty(t.prototype,"Cu",{get:function(){if(this.Su)return this.Su;throw So()},enumerable:!1,configurable:!0}),t.prototype.sc=function(t,e,n){return this.vu.sc(n,e),this.Cu.delete(n.toString()),mc.resolve()},t.prototype.rc=function(t,e,n){return this.vu.rc(n,e),this.Cu.add(n.toString()),mc.resolve()},t.prototype.Oo=function(t,e){return this.Cu.add(e.toString()),mc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.vu.cu(e.targetId).forEach((function(t){return n.Cu.add(t.toString())}));var r=this.persistence.ac();return r.oc(t,e.targetId).next((function(t){t.forEach((function(t){return n.Cu.add(t.toString())}))})).next((function(){return r.Xo(t,e)}))},t.prototype.Vu=function(){this.Su=new Set},t.prototype.pu=function(t){var e=this,n=this.persistence._c().lc();return mc.forEach(this.Cu,(function(r){var i=ys.Lt(r);return e.xu(t,i).next((function(t){t||n.mr(i)}))})).next((function(){return e.Su=null,n.apply(t)}))},t.prototype.fc=function(t,e){var n=this;return this.xu(t,e).next((function(t){t?n.Cu.delete(e.toString()):n.Cu.add(e.toString())}))},t.prototype.gu=function(t){return 0},t.prototype.xu=function(t,e){var n=this;return mc.ls([function(){return mc.resolve(n.vu.Mo(e))},function(){return n.persistence.ac().Mo(t,e)},function(){return n.persistence.bu(t,e)}])},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hf(t,e){return"firestore_clients_"+t+"_"+e}function Kf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.T()&&(r+="_"+e.uid),r}function Wf(t,e){return"firestore_targets_"+t+"_"+e}var Yf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Nu=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Vo(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(To("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Qf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Nu=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Vo(r.error.code,r.error.message)),i?new t(e,r.state,o):(To("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Jf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Nu=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Na(),s=0;i&&s<r.activeTargetIds.length;++s)i=es(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(To("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Xf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Nu=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(To("SharedClientState","Failed to parse online state: "+e),null)},t}(),Zf=function(){function t(){this.activeTargetIds=Na()}return t.prototype.Ou=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ku=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fu=function(){var t={activeTargetIds:this.activeTargetIds.Dt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),tl=function(){function t(t,e,n,r,i){this.window=t,this.js=e,this.persistenceKey=n,this.Mu=r,this.Lu=null,this.$u=null,this.Hi=null,this.Bu=this.qu.bind(this),this.Uu=new la(Po),this.Nr=!1,this.Qu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ku=Hf(this.persistenceKey,this.Mu),this.Wu=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Uu=this.Uu.Ie(this.Mu,new Zf),this.ju=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Gu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.zu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Hu=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ju=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Bu)}return t.G=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return wt(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h,f=this;return It(this,(function(l){switch(l.label){case 0:return[4,this.Lu.Ea()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Mu&&(i=this.getItem(Hf(this.persistenceKey,r)))&&(o=Jf.Nu(r,i))&&(this.Uu=this.Uu.Ie(o.clientId,o));for(this.Yu(),(s=this.storage.getItem(this.Hu))&&(u=this.Xu(s))&&this.Zu(u),a=0,c=this.Qu;a<c.length;a++)h=c[a],this.qu(h);return this.Qu=[],this.window.addEventListener("unload",(function(){return f.$()})),this.Nr=!0,[2]}}))}))},t.prototype.Xi=function(t){this.setItem(this.Wu,JSON.stringify(t))},t.prototype.th=function(){return this.eh(this.Uu)},t.prototype.nh=function(t){var e=!1;return this.Uu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.sh=function(t){this.ih(t,"pending")},t.prototype.rh=function(t,e,n){this.ih(t,e,n),this.oh(t)},t.prototype.ah=function(t){var e="not-current";if(this.nh(t)){var n=this.storage.getItem(Wf(this.persistenceKey,t));if(n){var r=Qf.Nu(t,n);r&&(e=r.state)}}return this.uh.Ou(t),this.Yu(),e},t.prototype.hh=function(t){this.uh.ku(t),this.Yu()},t.prototype.lh=function(t){return this.uh.activeTargetIds.has(t)},t.prototype._h=function(t){this.removeItem(Wf(this.persistenceKey,t))},t.prototype.fh=function(t,e,n){this.dh(t,e,n)},t.prototype.wh=function(t,e,n){var r=this;e.forEach((function(t){r.oh(t)})),this.currentUser=t,n.forEach((function(t){r.sh(t)}))},t.prototype.Eh=function(t){this.Th(t)},t.prototype.Ih=function(){this.mh()},t.prototype.$=function(){this.Nr&&(this.window.removeEventListener("storage",this.Bu),this.removeItem(this.Ku),this.Nr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return _o("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){_o("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){_o("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.qu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(_o("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ku)return void To("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.ea((function(){return wt(e,void 0,void 0,(function(){var t,e,r,i,o,s;return It(this,(function(u){if(this.Nr){if(null!==n.key)if(this.ju.test(n.key)){if(null==n.newValue)return t=this.Ah(n.key),[2,this.Rh(t,null)];if(e=this.Ph(n.key,n.newValue))return[2,this.Rh(e.clientId,e)]}else if(this.Gu.test(n.key)){if(null!==n.newValue&&(r=this.yh(n.key,n.newValue)))return[2,this.gh(r)]}else if(this.zu.test(n.key)){if(null!==n.newValue&&(i=this.Vh(n.key,n.newValue)))return[2,this.ph(i)]}else if(n.key===this.Hu){if(null!==n.newValue&&(o=this.Xu(n.newValue)))return[2,this.Zu(o)]}else if(n.key===this.Wu)(s=function(t){var e=jc.Zi;if(null!=t)try{var n=JSON.parse(t);Oo("number"==typeof n),e=n}catch(t){To("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==jc.Zi&&this.Hi(s);else if(n.key===this.Ju)return[2,this.Lu.bh()]}else this.Qu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"uh",{get:function(){return this.Uu.get(this.Mu)},enumerable:!1,configurable:!0}),t.prototype.Yu=function(){this.setItem(this.Ku,this.uh.Fu())},t.prototype.ih=function(t,e,n){var r=new Yf(this.currentUser,t,e,n),i=Kf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fu())},t.prototype.oh=function(t){var e=Kf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Th=function(t){var e={clientId:this.Mu,onlineState:t};this.storage.setItem(this.Hu,JSON.stringify(e))},t.prototype.dh=function(t,e,n){var r=Wf(this.persistenceKey,t),i=new Qf(t,e,n);this.setItem(r,i.Fu())},t.prototype.mh=function(){this.setItem(this.Ju,"value-not-used")},t.prototype.Ah=function(t){var e=this.ju.exec(t);return e?e[1]:null},t.prototype.Ph=function(t,e){var n=this.Ah(t);return Jf.Nu(n,e)},t.prototype.yh=function(t,e){var n=this.Gu.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Yf.Nu(new Go(i),r,e)},t.prototype.Vh=function(t,e){var n=this.zu.exec(t),r=Number(n[1]);return Qf.Nu(r,e)},t.prototype.Xu=function(t){return Xf.Nu(t)},t.prototype.gh=function(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Lu.Sh(t.batchId,t.state,t.error)]:(_o("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.ph=function(t){return this.Lu.Dh(t.targetId,t.state,t.error)},t.prototype.Rh=function(t,e){var n=this,r=e?this.Uu.Ie(t,e):this.Uu.remove(t),i=this.eh(this.Uu),o=this.eh(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.Lu.Ch(s,u).then((function(){n.Uu=r}))},t.prototype.Zu=function(t){this.Uu.get(t.clientId)&&this.$u(t.onlineState)},t.prototype.eh=function(t){var e=Na();return t.forEach((function(t,n){e=e.je(n.activeTargetIds)})),e},t}(),el=function(){function t(){this.xh=new Zf,this.Nh={},this.$u=null,this.Hi=null}return t.prototype.sh=function(t){},t.prototype.rh=function(t,e,n){},t.prototype.ah=function(t){return this.xh.Ou(t),this.Nh[t]||"not-current"},t.prototype.fh=function(t,e,n){this.Nh[t]=e},t.prototype.hh=function(t){this.xh.ku(t)},t.prototype.lh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype._h=function(t){delete this.Nh[t]},t.prototype.th=function(){return this.xh.activeTargetIds},t.prototype.nh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype.start=function(){return this.xh=new Zf,Promise.resolve()},t.prototype.wh=function(t,e,n){},t.prototype.Eh=function(t){},t.prototype.$=function(){},t.prototype.Xi=function(t){},t.prototype.Ih=function(){},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function nl(){return"undefined"!=typeof window?window:null}function rl(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var il=function(){function t(t,e){this.ks=t,this.$u=e,this.state="Unknown",this.Fh=0,this.Oh=null,this.kh=!0}return t.prototype.Mh=function(){var t=this;0===this.Fh&&(this.Lh("Unknown"),this.Oh=this.ks.ni("online_state_timeout",1e4,(function(){return t.Oh=null,t.$h("Backend didn't respond within 10 seconds."),t.Lh("Offline"),Promise.resolve()})))},t.prototype.Bh=function(t){"Online"===this.state?this.Lh("Unknown"):(this.Fh++,this.Fh>=1&&(this.qh(),this.$h("Connection failed 1 times. Most recent error: "+t.toString()),this.Lh("Offline")))},t.prototype.set=function(t){this.qh(),this.Fh=0,"Online"===t&&(this.kh=!1),this.Lh(t)},t.prototype.Lh=function(t){t!==this.state&&(this.state=t,this.$u(t))},t.prototype.$h=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.kh?(To(e),this.kh=!1):_o("OnlineStateTracker",e)},t.prototype.qh=function(){null!==this.Oh&&(this.Oh.cancel(),this.Oh=null)},t}(),ol=function(t,e,n,r,i){var o=this;this.Uh=t,this.Qh=e,this.ks=n,this.Kh={},this.Wh=[],this.jh=new Map,this.Gh=new Set,this.zh=[],this.Hh=i,this.Hh.L((function(t){n.Ws((function(){return wt(o,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return dl(this)?(_o("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return(e=ko(t)).Gh.add(4),[4,ul(e)];case 1:return n.sent(),e.Jh.set("Unknown"),e.Gh.delete(4),[4,sl(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Jh=new il(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function sl(t){return wt(this,void 0,void 0,(function(){var e,n;return It(this,(function(r){switch(r.label){case 0:if(!dl(t))return[3,4];e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ul(t){return wt(this,void 0,void 0,(function(){var e,n;return It(this,(function(r){switch(r.label){case 0:e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function al(t,e){var n=ko(t);n.jh.has(e.targetId)||(n.jh.set(e.targetId,e),pl(n)?ll(n):kl(n).li()&&hl(n,e))}function cl(t,e){var n=ko(t),r=kl(n);n.jh.delete(e),r.li()&&fl(n,e),0===n.jh.size&&(r.li()?r.di():dl(n)&&n.Jh.set("Unknown"))}function hl(t,e){t.Yh.Dn(e.targetId),kl(t).gi(e)}function fl(t,e){t.Yh.Dn(e),kl(t).Vi(e)}function ll(t){t.Yh=new Ua({Xn:function(e){return t.Kh.Xn(e)},Zn:function(e){return t.jh.get(e)||null}}),kl(t).start(),t.Jh.Mh()}function pl(t){return dl(t)&&!kl(t).hi()&&t.jh.size>0}function dl(t){return 0===ko(t).Gh.size}function vl(t){t.Yh=void 0}function yl(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){return t.jh.forEach((function(e,n){hl(t,e)})),[2]}))}))}function gl(t,e){return wt(this,void 0,void 0,(function(){return It(this,(function(n){return vl(t),pl(t)?(t.Jh.Bh(e),ll(t)):t.Jh.set("Unknown"),[2]}))}))}function ml(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o;return It(this,(function(s){switch(s.label){case 0:if(t.Jh.set("Online"),!(e instanceof Ra&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o;return It(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.jh.has(o)?[4,t.Kh.Xh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.jh.delete(o),t.Yh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),_o("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,bl(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Pa?t.Yh.Ln(e):e instanceof Ca?t.Yh.jn(e):t.Yh.qn(e),n.isEqual(fs.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Sf(t.Uh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Yh.Hn(e);return n.rn.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.jh.get(r);i&&t.jh.set(r,i.ae(n.resumeToken,e))}})),n.on.forEach((function(e){var n=t.jh.get(e);if(n){t.jh.set(e,n.ae(Lo.h,n.oe)),fl(t,e);var r=new Du(n.target,e,1,n.sequenceNumber);hl(t,r)}})),t.Kh.Zh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return _o("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,bl(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function bl(t,e,n){return wt(this,void 0,void 0,(function(){var r=this;return It(this,(function(i){switch(i.label){case 0:if(!_c(e))throw e;return t.Gh.add(1),[4,ul(t)];case 1:return i.sent(),t.Jh.set("Offline"),n||(n=function(){return Sf(t.Uh)}),t.ks.ea((function(){return wt(r,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return _o("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Gh.delete(1),[4,sl(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function wl(t,e){return e().catch((function(n){return bl(t,n,e)}))}function Il(t){return wt(this,void 0,void 0,(function(){var e,n,r,i,o;return It(this,(function(s){switch(s.label){case 0:e=ko(t),n=xl(e),r=e.Wh.length>0?e.Wh[e.Wh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return dl(t)&&t.Wh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,kf(e.Uh,r)];case 3:return null===(i=s.sent())?(0===e.Wh.length&&n.di(),[3,7]):(r=i.batchId,function(t,e){t.Wh.push(e);var n=xl(t);n.li()&&n.bi&&n.vi(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,bl(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return El(e)&&_l(e),[2]}}))}))}function El(t){return dl(t)&&!xl(t).hi()&&t.Wh.length>0}function _l(t){xl(t).start()}function Tl(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){return xl(t).Ci(),[2]}))}))}function Al(t){return wt(this,void 0,void 0,(function(){var e,n,r,i;return It(this,(function(o){for(e=xl(t),n=0,r=t.Wh;n<r.length;n++)i=r[n],e.vi(i.mutations);return[2]}))}))}function Nl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i;return It(this,(function(o){switch(o.label){case 0:return r=t.Wh.shift(),i=Bc.from(r,e,n),[4,wl(t,(function(){return t.Kh.tl(i)}))];case 1:return o.sent(),[4,Il(t)];case 2:return o.sent(),[2]}}))}))}function Sl(t,e){return wt(this,void 0,void 0,(function(){return It(this,(function(n){switch(n.label){case 0:return e&&xl(t).bi?[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r;return It(this,(function(i){switch(i.label){case 0:return os(r=e.code)&&r!==Uo.ABORTED?(n=t.Wh.shift(),xl(t).fi(),[4,wl(t,(function(){return t.Kh.el(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Il(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return El(t)&&_l(t),[2]}}))}))}function Ol(t,e){return wt(this,void 0,void 0,(function(){var n;return It(this,(function(r){switch(r.label){case 0:return n=ko(t),e?(n.Gh.delete(2),[4,sl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Gh.add(2),[4,ul(n)]);case 3:r.sent(),n.Jh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function kl(t){var e=this;return t.nl||(t.nl=function(t,e,n){var r=ko(t);return r.Ni(),new Pc(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:yl.bind(null,t),Z:gl.bind(null,t),yi:ml.bind(null,t)}),t.zh.push((function(n){return wt(e,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return n?(t.nl.fi(),pl(t)?ll(t):t.Jh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.nl.stop()];case 2:e.sent(),vl(t),e.label=3;case 3:return[2]}}))}))}))),t.nl}function xl(t){var e=this;return t.sl||(t.sl=function(t,e,n){var r=ko(t);return r.Ni(),new Cc(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:Tl.bind(null,t),Z:Sl.bind(null,t),Di:Al.bind(null,t),Si:Nl.bind(null,t)}),t.zh.push((function(n){return wt(e,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return n?(t.sl.fi(),[4,Il(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.sl.stop()];case 3:e.sent(),t.Wh.length>0&&(_o("RemoteStore","Stopping write stream with "+t.Wh.length+" pending writes"),t.Wh=[]),e.label=4;case 4:return[2]}}))}))}))),t.sl
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Dl=function(){this.il=void 0,this.listeners=[]},Pl=function(){this.queries=new Gc((function(t){return Nu(t)}),Au),this.onlineState="Unknown",this.rl=new Set};function Cl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return It(this,(function(c){switch(c.label){case 0:if(n=ko(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Dl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.ol(r)];case 2:return s.il=c.sent(),[3,4];case 3:return u=c.sent(),a=kc(u,"Initialization of query '"+Su(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.cl(n.onlineState),o.il&&e.al(o.il)&&Vl(n),[2]}}))}))}function Rl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s;return It(this,(function(u){return n=ko(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.ul(r))]:[2]}))}))}function Ll(t,e){for(var n=ko(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].al(s)&&(r=!0);a.il=s}}r&&Vl(n)}function Ul(t,e,n){var r=ko(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Vl(t){t.rl.forEach((function(t){t.next()}))}var Ml=function(){function t(t,e,n){this.query=t,this.hl=e,this.ll=!1,this._l=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.al=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ka(t.query,t.docs,t.Ze,e,t.tn,t.fromCache,t.en,!0)}var o=!1;return this.ll?this.fl(t)&&(this.hl.next(t),o=!0):this.dl(t,this.onlineState)&&(this.wl(t),o=!0),this._l=t,o},t.prototype.onError=function(t){this.hl.error(t)},t.prototype.cl=function(t){this.onlineState=t;var e=!1;return this._l&&!this.ll&&this.dl(this._l,t)&&(this.wl(this._l),e=!0),e},t.prototype.dl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.El&&n||t.docs.bt()&&"Offline"!==e)},t.prototype.fl=function(t){if(t.docChanges.length>0)return!0;var e=this._l&&this._l.hasPendingWrites!==t.hasPendingWrites;return!(!t.en&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.wl=function(t){t=ka.sn(t.query,t.docs,t.tn,t.fromCache),this.ll=!0,this.hl.next(t)},t}(),jl=function(t){this.key=t},Fl=function(t){this.key=t},ql=function(){function t(t,e){this.query=t,this.Rl=e,this.Pl=null,this.ln=!1,this.yl=Ta(),this.tn=Ta(),this.gl=ku(t),this.Vl=new Sa(this.gl)}return Object.defineProperty(t.prototype,"pl",{get:function(){return this.Rl},enumerable:!1,configurable:!0}),t.prototype.bl=function(t,e){var n=this,r=e?e.vl:new Oa,i=e?e.Vl:this.Vl,o=e?e.tn:this.tn,s=i,u=!1,a=gu(this.query)&&i.size===this.query.limit?i.last():null,c=mu(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pe((function(t,e){var h=i.get(t),f=e instanceof $s?e:null;f&&(f=Ou(n.query,f)?f:null);var l=!!h&&n.tn.has(h.key),p=!!f&&(f.Jt||n.tn.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Sl(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.gl(f,a)>0||c&&n.gl(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),gu(this.query)||mu(this.query))for(;s.size>this.query.limit;){var h=gu(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Vl:s,vl:r,La:u,tn:o}},t.prototype.Sl=function(t,e){return t.Jt&&e.hasCommittedMutations&&!e.Jt},t.prototype.yr=function(t,e,n){var r=this,i=this.Vl;this.Vl=t.Vl,this.tn=t.tn;var o=t.vl.Xe();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return So()}};return n(t)-n(e)}(t.type,e.type)||r.gl(t.doc,e.doc)})),this.Dl(n);var s=e?this.Cl():[],u=0===this.yl.size&&this.ln?1:0,a=u!==this.Pl;return this.Pl=u,0!==o.length||a?{snapshot:new ka(this.query,t.Vl,i,o,t.tn,0===u,a,!1),xl:s}:{xl:s}},t.prototype.cl=function(t){return this.ln&&"Offline"===t?(this.ln=!1,this.yr({Vl:this.Vl,vl:new Oa,tn:this.tn,La:!1},!1)):{xl:[]}},t.prototype.Nl=function(t){return!this.Rl.has(t)&&!!this.Vl.has(t)&&!this.Vl.get(t).Jt},t.prototype.Dl=function(t){var e=this;t&&(t._n.forEach((function(t){return e.Rl=e.Rl.add(t)})),t.fn.forEach((function(t){})),t.dn.forEach((function(t){return e.Rl=e.Rl.delete(t)})),this.ln=t.ln)},t.prototype.Cl=function(){var t=this;if(!this.ln)return[];var e=this.yl;this.yl=Ta(),this.Vl.forEach((function(e){t.Nl(e.key)&&(t.yl=t.yl.add(e.key))}));var n=[];return e.forEach((function(e){t.yl.has(e)||n.push(new Fl(e))})),this.yl.forEach((function(t){e.has(t)||n.push(new jl(t))})),n},t.prototype.Fl=function(t){this.Rl=t.za,this.yl=Ta();var e=this.bl(t.documents);return this.yr(e,!0)},t.prototype.Ol=function(){return ka.sn(this.query,this.Vl,this.tn,0===this.Pl)},t}(),Bl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Gl=function(t){this.key=t,this.kl=!1},zl=function(){function t(t,e,n,r,i,o){this.Uh=t,this.Ml=e,this.Ll=n,this.$l=r,this.currentUser=i,this.Bl=o,this.ql={},this.Ul=new Gc((function(t){return Nu(t)}),Au),this.Ql=new Map,this.Kl=[],this.Wl=new la(ys.At),this.jl=new Map,this.Gl=new Vf,this.zl={},this.Hl=new Map,this.Jl=tf.qo(),this.onlineState="Unknown",this.Yl=void 0}return Object.defineProperty(t.prototype,"Xl",{get:function(){return!0===this.Yl},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $l(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return It(this,(function(a){switch(a.label){case 0:return n=wp(t),(o=n.Ul.get(e))?(r=o.targetId,n.$l.ah(r),i=o.view.Ol(),[3,4]):[3,1];case 1:return[4,xf(n.Uh,_u(e))];case 2:return s=a.sent(),u=n.$l.ah(s.targetId),r=s.targetId,[4,Hl(n,e,r,"current"===u)];case 3:i=a.sent(),n.Xl&&al(n.Ml,s),a.label=4;case 4:return[2,i]}}))}))}function Hl(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s,u,a,c;return It(this,(function(h){switch(h.label){case 0:return t.Zl=function(e,n,r){return function(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s;return It(this,(function(u){switch(u.label){case 0:return(i=e.view.bl(n)).La?[4,Pf(t.Uh,e.query,!1).then((function(t){var n=t.documents;return e.view.bl(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.rn.get(e.targetId),s=e.view.yr(i,t.Xl,o),[2,(op(t,e.targetId,s.xl),s.snapshot)]}}))}))}(t,e,n,r)},[4,Pf(t.Uh,e,!0)];case 1:return i=h.sent(),o=new ql(e,i.za),s=o.bl(i.documents),u=Da.hn(n,r&&"Offline"!==t.onlineState),a=o.yr(s,t.Xl,u),op(t,n,a.xl),c=new Bl(e,n,o),[2,(t.Ul.set(e,c),t.Ql.has(n)?t.Ql.get(n).push(e):t.Ql.set(n,[e]),a.snapshot)]}}))}))}function Kl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return It(this,(function(o){switch(o.label){case 0:return n=ko(t),r=n.Ul.get(e),(i=n.Ql.get(r.targetId)).length>1?[2,(n.Ql.set(r.targetId,i.filter((function(t){return!Au(t,e)}))),void n.Ul.delete(e))]:n.Xl?(n.$l.hh(r.targetId),n.$l.nh(r.targetId)?[3,2]:[4,Df(n.Uh,r.targetId,!1).then((function(){n.$l._h(r.targetId),cl(n.Ml,r.targetId),rp(n,r.targetId)})).catch(Fc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return rp(n,r.targetId),[4,Df(n.Uh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Wl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return It(this,(function(u){switch(u.label){case 0:r=Ip(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=ko(t),i=hs.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ta());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ka.Va(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=ta(c,n.get(c.key));null!=h&&s.push(new ia(c.key,h,Gs(h.proto.mapValue),Yu.exists(!0)))}return r.Ra.Po(t,i,s,e)}))})).then((function(t){var e=t.rr(n);return{batchId:t.batchId,_r:e}}))}(r.Uh,e)];case 2:return i=u.sent(),r.$l.sh(i.batchId),function(t,e,n){var r=t.zl[t.currentUser.I()];r||(r=new la(Po)),r=r.Ie(e,n),t.zl[t.currentUser.I()]=r}(r,i.batchId,n),[4,ap(r,i._r)];case 3:return u.sent(),[4,Il(r.Ml)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=kc(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Yl(t,e){return wt(this,void 0,void 0,(function(){var n,r;return It(this,(function(i){switch(i.label){case 0:n=ko(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Of(n.Uh,e)];case 2:return r=i.sent(),e.rn.forEach((function(t,e){var r=n.jl.get(e);r&&(Oo(t._n.size+t.fn.size+t.dn.size<=1),t._n.size>0?r.kl=!0:t.fn.size>0?Oo(r.kl):t.dn.size>0&&(Oo(r.kl),r.kl=!1))})),[4,ap(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Fc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ql(t,e,n){var r=ko(t);if(r.Xl&&0===n||!r.Xl&&1===n){var i=[];r.Ul.forEach((function(t,n){var r=n.view.cl(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ko(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].cl(e)&&(r=!0)})),r&&Vl(n)}(r.Ll,e),i.length&&r.ql.yi(i),r.onlineState=e,r.Xl&&r.$l.Eh(e)}}function Jl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s,u,a;return It(this,(function(c){switch(c.label){case 0:return(r=ko(t)).$l.fh(e,"rejected",n),i=r.jl.get(e),(o=i&&i.key)?(s=(s=new la(ys.At)).Ie(o,new Hs(o,fs.min())),u=Ta().add(o),a=new xa(fs.min(),new Map,new va(Po),s,u),[4,Yl(r,a)]):[3,2];case 1:return c.sent(),r.Wl=r.Wl.remove(o),r.jl.delete(e),up(r),[3,4];case 2:return[4,Df(r.Uh,e,!1).then((function(){return rp(r,e,n)})).catch(Fc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Xl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return It(this,(function(o){switch(o.label){case 0:n=ko(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Nf(n.Uh,e)];case 2:return i=o.sent(),np(n,r,null),ep(n,r),n.$l.rh(r,"acknowledged"),[4,ap(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Fc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Zl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i;return It(this,(function(o){switch(o.label){case 0:r=ko(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ko(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ra.yo(t,e).next((function(e){return Oo(null!==e),r=e.keys(),n.Ra.No(t,e)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}(r.Uh,e)];case 2:return i=o.sent(),np(r,e,n),ep(r,e),r.$l.rh(e,"rejected",n),[4,ap(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Fc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function tp(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s;return It(this,(function(u){switch(u.label){case 0:dl((n=ko(t)).Ml)||_o("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=ko(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ra.bo(t)}))}(n.Uh)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Hl.get(r)||[]).push(e),n.Hl.set(r,i),[3,4]);case 3:return o=u.sent(),s=kc(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function ep(t,e){(t.Hl.get(e)||[]).forEach((function(t){t.resolve()})),t.Hl.delete(e)}function np(t,e,n){var r=ko(t),i=r.zl[r.currentUser.I()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.zl[r.currentUser.I()]=i}}function rp(t,e,n){void 0===n&&(n=null),t.$l.hh(e);for(var r=0,i=t.Ql.get(e);r<i.length;r++){var o=i[r];t.Ul.delete(o),n&&t.ql.t_(o,n)}t.Ql.delete(e),t.Xl&&t.Gl.cu(e).forEach((function(e){t.Gl.Mo(e)||ip(t,e)}))}function ip(t,e){var n=t.Wl.get(e);null!==n&&(cl(t.Ml,n),t.Wl=t.Wl.remove(e),t.jl.delete(n),up(t))}function op(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof jl?(t.Gl.sc(o.key,e),sp(t,o)):o instanceof Fl?(_o("SyncEngine","Document no longer in limbo: "+o.key),t.Gl.rc(o.key,e),t.Gl.Mo(o.key)||ip(t,o.key)):So()}}function sp(t,e){var n=e.key;t.Wl.get(n)||(_o("SyncEngine","New document in limbo: "+n),t.Kl.push(n),up(t))}function up(t){for(;t.Kl.length>0&&t.Wl.size<t.Bl;){var e=t.Kl.shift(),n=t.Jl.next();t.jl.set(n,new Gl(e)),t.Wl=t.Wl.Ie(e,n),al(t.Ml,new Du(_u(yu(e.path)),n,2,jc.Zi))}}function ap(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return It(this,(function(u){switch(u.label){case 0:return r=ko(t),i=[],o=[],s=[],r.Ul.bt()?[3,3]:(r.Ul.forEach((function(t,u){s.push(r.Zl(u,e,n).then((function(t){if(t){r.Xl&&r.$l.fh(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=If.Na(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.ql.yi(i),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h;return It(this,(function(f){switch(f.label){case 0:n=ko(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return mc.forEach(e,(function(e){return mc.forEach(e.Ca,(function(r){return n.persistence.Io.sc(t,e.targetId,r)})).next((function(){return mc.forEach(e.xa,(function(r){return n.persistence.Io.rc(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!_c(r=f.sent()))throw r;return _o("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.Ba.get(u),c=a.oe,h=a.ue(c),n.Ba=n.Ba.Ie(u,h));return[2]}}))}))}(r.Uh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function cp(t,e){return wt(this,void 0,void 0,(function(){var n,r;return It(this,(function(i){switch(i.label){case 0:return(n=ko(t)).currentUser.isEqual(e)?[3,3]:(_o("SyncEngine","User change. New user:",e.I()),[4,Af(n.Uh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Hl.forEach((function(t){t.forEach((function(t){t.reject(new Vo(Uo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Hl.clear()}(n),n.$l.wh(e,r.ja,r.Ga),[4,ap(n,r.Wa)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function hp(t,e){var n=ko(t),r=n.jl.get(e);if(r&&r.kl)return Ta().add(r.key);var i=Ta(),o=n.Ql.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Ul.get(a);i=i.je(c.view.pl)}return i}function fp(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return It(this,(function(o){switch(o.label){case 0:return[4,Pf((n=ko(t)).Uh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Fl(r),[2,(n.Xl&&op(n,e.targetId,i.xl),i)]}}))}))}function lp(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){return[2,Rf((e=ko(t)).Uh).then((function(t){return ap(e,t)}))]}))}))}function pp(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o;return It(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=ko(t),r=ko(n.Ra);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vo(t,e).next((function(e){return e?n.Ka.Va(t,e):mc.resolve(null)}))}))}((i=ko(t)).Uh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Il(i.Ml)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(np(i,e,r||null),ep(i,e),function(t,e){ko(ko(t).Ra).Fo(e)}(i.Uh,e)):So(),s.label=4;case 4:return[4,ap(i,o)];case 5:return s.sent(),[3,7];case 6:_o("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function dp(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return It(this,(function(h){switch(h.label){case 0:return wp(n=ko(t)),Ip(n),!0!==e||!0===n.Yl?[3,3]:(r=n.$l.th(),[4,vp(n,r.Dt())]);case 1:return i=h.sent(),n.Yl=!0,[4,Ol(n.Ml,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)u=s[o],al(n.Ml,u);return[3,7];case 3:return!1!==e||!1===n.Yl?[3,7]:(a=[],c=Promise.resolve(),n.Ql.forEach((function(t,e){n.$l.lh(e)?a.push(e):c=c.then((function(){return rp(n,e),Df(n.Uh,e,!0)})),cl(n.Ml,e)})),[4,c]);case 4:return h.sent(),[4,vp(n,a)];case 5:return h.sent(),function(t){var e=ko(t);e.jl.forEach((function(t,n){cl(e.Ml,n)})),e.Gl.au(),e.jl=new Map,e.Wl=new la(ys.At)}(n),n.Yl=!1,[4,Ol(n.Ml,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function vp(t,e,n){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d,v;return It(this,(function(y){switch(y.label){case 0:n=ko(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.Ql.get(u))&&0!==c.length?[4,xf(n.Uh,_u(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.Ul.get(l),[4,fp(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Cf(n.Uh,u)];case 8:return v=y.sent(),[4,xf(n.Uh,v)];case 9:return a=y.sent(),[4,Hl(n,yp(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.ql.yi(i),r)]}}))}))}function yp(t){return vu(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function gp(t){var e=ko(t);return ko(ko(e.Uh).persistence).Ea()}function mp(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s;return It(this,(function(u){switch(u.label){case 0:return(i=ko(t)).Yl?(_o("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Ql.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Rf(i.Uh)];case 3:return o=u.sent(),s=xa.un(e,"current"===n),[4,ap(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,Df(i.Uh,e,!0)];case 6:return u.sent(),rp(i,e,r),[3,8];case 7:So(),u.label=8;case 8:return[2]}}))}))}function bp(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l;return It(this,(function(p){switch(p.label){case 0:if(!(r=wp(t)).Yl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Ql.has(s)?(_o("SyncEngine","Adding an already active target "+s),[3,5]):[4,Cf(r.Uh,s)]):[3,6];case 2:return u=p.sent(),[4,xf(r.Uh,u)];case 3:return a=p.sent(),[4,Hl(r,yp(u),a.targetId,!1)];case 4:p.sent(),al(r.Ml,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return It(this,(function(e){switch(e.label){case 0:return r.Ql.has(t)?[4,Df(r.Uh,t,!1).then((function(){cl(r.Ml,t),rp(r,t)})).catch(Fc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function wp(t){var e=ko(t);return e.Ml.Kh.Zh=Yl.bind(null,e),e.Ml.Kh.Xn=hp.bind(null,e),e.Ml.Kh.Xh=Jl.bind(null,e),e.ql.yi=Ll.bind(null,e.Ll),e.ql.t_=Ul.bind(null,e.Ll),e}function Ip(t){var e=ko(t);return e.Ml.Kh.tl=Xl.bind(null,e),e.Ml.Kh.el=Zl.bind(null,e),e}var Ep=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return this.fe=gc(t.rt.O),this.$l=this.r_(t),this.persistence=this.o_(t),[4,this.persistence.start()];case 1:return e.sent(),this.c_=this.a_(t),this.Uh=this.u_(t),[2]}}))}))},t.prototype.a_=function(t){return null},t.prototype.u_=function(t){return Tf(this.persistence,new Ef,t.h_,this.fe)},t.prototype.o_=function(t){return new Gf($f.Du,this.fe)},t.prototype.r_=function(t){return new el},t.prototype.terminate=function(){return wt(this,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return this.c_&&this.c_.stop(),[4,this.$l.$()];case 1:return t.sent(),[4,this.persistence.$()];case 2:return t.sent(),[2]}}))}))},t}(),_p=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).l_=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return mt(e,t),e.prototype.initialize=function(e){return wt(this,void 0,void 0,(function(){return It(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Lf(this.Uh)];case 2:return n.sent(),[4,this.l_.initialize(this,e)];case 3:return n.sent(),[4,Ip(this.l_.Lu)];case 4:return n.sent(),[4,Il(this.l_.Ml)];case 5:return n.sent(),[2]}}))}))},e.prototype.u_=function(t){return Tf(this.persistence,new Ef,t.h_,this.fe)},e.prototype.a_=function(t){var e=this.persistence.Io.vr;return new Kc(e,t.ks)},e.prototype.o_=function(t){var e=bf(t.rt.O,t.rt.persistenceKey),n=void 0!==this.cacheSizeBytes?Mc.Ki(this.cacheSizeBytes):Mc.Gi;return new yf(this.synchronizeTabs,e,t.clientId,n,t.ks,nl(),rl(),this.fe,this.$l,!!this.forceOwnership)},e.prototype.r_=function(t){return new el},e}(Ep),Tp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).l_=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return mt(e,t),e.prototype.initialize=function(e){return wt(this,void 0,void 0,(function(){var n,r=this;return It(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.l_.Lu,this.$l instanceof tl?(this.$l.Lu={Sh:pp.bind(null,n),Dh:mp.bind(null,n),Ch:bp.bind(null,n),Ea:gp.bind(null,n),bh:lp.bind(null,n)},[4,this.$l.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Yc((function(t){return wt(r,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return[4,dp(this.l_.Lu,t)];case 1:return e.sent(),this.c_&&(t&&!this.c_.Nr?this.c_.start(this.Uh):t||this.c_.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.r_=function(t){var e=nl();if(!tl.G(e))throw new Vo(Uo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bf(t.rt.O,t.rt.persistenceKey);return new tl(e,t.ks,n,t.clientId,t.h_)},e}(_p),Ap=function(){function t(){}return t.prototype.initialize=function(t,e){return wt(this,void 0,void 0,(function(){var n=this;return It(this,(function(r){switch(r.label){case 0:return this.Uh?[3,2]:(this.Uh=t.Uh,this.$l=t.$l,this.Qh=this.__(e),this.Ml=this.f_(e),this.Ll=this.d_(e),this.Lu=this.w_(e,!t.synchronizeTabs),this.$l.$u=function(t){return Ql(n.Lu,t,1)},this.Ml.Kh.E_=cp.bind(null,this.Lu),[4,Ol(this.Ml,this.Lu.Xl)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.d_=function(t){return new Pl},t.prototype.__=function(t){var e,n=gc(t.rt.O),r=(e=t.rt,new cs(e));return function(t,e,n){return new Rc(t,e,n)}(t.credentials,r,n)},t.prototype.f_=function(t){var e,n,r,i,o,s=this;return e=this.Uh,n=this.Qh,r=t.ks,i=function(t){return Ql(s.Lu,t,0)},o=Xo.G()?new Xo:new Jo,new ol(e,n,r,i,o)},t.prototype.w_=function(t,e){return function(t,e,n,r,i,o,s){var u=new zl(t,e,n,r,i,o);return s&&(u.Yl=!0),u}(this.Uh,this.Ml,this.Ll,this.$l,t.h_,t.Bl,e)},t.prototype.terminate=function(){return function(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return e=ko(t),_o("RemoteStore","RemoteStore shutting down."),e.Gh.add(5),[4,ul(e)];case 1:return n.sent(),e.Hh.$(),e.Jh.set("Unknown"),[2]}}))}))}(this.Ml)},t}(),Np=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.T_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.T_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.I_=function(){this.muted=!0},t.prototype.T_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Sp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.b_=new vs(t)}return t.prototype.isEqual=function(t){return this.b_.isEqual(t.b_)},t}(),Op=function(t){this._methodName=t},kp=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Dp(this.firestore,this.v_,this.S_.path.yt())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),xp=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Dp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,yu(r))||this).firestore=e,i.D_=r,i.type="collection",i}return mt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.yt();return t.bt()?null:new kp(this.firestore,null,new ys(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(xp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Pp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof jo&&(t=t._),Yc("collection","path",e),t instanceof oh)return Zc(n=ps.xt.apply(ps,At([e],r))),new Dp(t,null,n);if(!(t instanceof kp||t instanceof Dp))throw new Vo(Uo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Zc(n=ps.xt.apply(ps,At([t.path],r)).child(ps.xt(e))),new Dp(t.firestore,null,n)}function Cp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof jo&&(t=t._),1===arguments.length&&(e=Do.t()),Yc("doc","path",e),t instanceof oh)return Xc(n=ps.xt.apply(ps,At([e],r))),new kp(t,null,new ys(n));if(!(t instanceof kp||t instanceof Dp))throw new Vo(Uo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Xc(n=t.D_.child(ps.xt.apply(ps,At([e],r)))),new kp(t.firestore,t instanceof Dp?t.v_:null,new ys(n))}function Rp(t,e){return t instanceof jo&&(t=t._),e instanceof jo&&(e=e._),(t instanceof kp||t instanceof Dp)&&(e instanceof kp||e instanceof Dp)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Lp(t,e){return t instanceof jo&&(t=t._),e instanceof jo&&(e=e._),t instanceof xp&&e instanceof xp&&t.firestore===e.firestore&&Au(t.C_,e.C_)&&t.v_===e.v_
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Up=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Vo(Uo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Vo(Uo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.dt=function(t){return Po(this.x_,t.x_)||Po(this.N_,t.N_)},t}(),Vp=/^__.*__$/,Mp=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Te?new ia(t,this.data,this.Te,e,this.fieldTransforms):new ra(t,this.data,e,this.fieldTransforms)},t}(),jp=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new ia(t,this.data,this.Te,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw So()}}var qp=function(){function t(t,e,n,r,i,o){this.settings=t,this.O=e,this.fe=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Te=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.O,this.fe,this.ignoreUndefinedProperties,this.fieldTransforms,this.Te)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return ud(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Te.find((function(e){return t.vt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.vt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Fp(this.k_)&&Vp.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Bp=function(){function t(t,e,n){this.O=t,this.ignoreUndefinedProperties=e,this.fe=n||gc(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new qp({k_:t,methodName:e,j_:n,path:vs.Nt(),B_:!1,W_:r},this.O,this.fe,this.ignoreUndefinedProperties)},t}();function Gp(t){var e=t.so(),n=gc(t.zr);return new Bp(t.zr,!!e.ignoreUndefinedProperties,n)}function zp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);rd("Data must be an object, but it was:",s,r);var u,a,c=ed(r,s);if(o.merge)u=new ws(s.Te),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=id(e,l[f],n);if(!s.contains(p))throw new Vo(Uo.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");ad(h,p)||h.push(p)}u=new ws(h),a=s.fieldTransforms.filter((function(t){return u.Qt(t.field)}))}else u=null,a=s.fieldTransforms;return new Mp(new qs(c),u,a)}var $p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Te.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Op);function Hp(t,e,n){return new qp({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.O,e.fe,e.ignoreUndefinedProperties)}var Kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.z_=function(t){return new Ku(t.path,new ju)},e.prototype.isEqual=function(t){return t instanceof e},e}(Op),Wp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return mt(e,t),e.prototype.z_=function(t){var e=Hp(this,t,!0),n=this.H_.map((function(t){return td(t,e)})),r=new Fu(n);return new Ku(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Op),Yp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return mt(e,t),e.prototype.z_=function(t){var e=Hp(this,t,!0),n=this.H_.map((function(t){return td(t,e)})),r=new Bu(n);return new Ku(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Op),Qp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return mt(e,t),e.prototype.z_=function(t){var e=new zu(t.fe,Ru(t.fe,this.J_));return new Ku(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Op);function Jp(t,e,n,r){var i=t.G_(1,e,n);rd("Data must be an object, but it was:",i,r);var o=[],s=new Bs;ms(r,(function(t,r){var u=sd(e,t,n);r instanceof jo&&(r=r._);var a=i.U_(u);if(r instanceof $p)o.push(u);else{var c=td(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new ws(o);return new jp(s.Gt(),u,i.fieldTransforms)}function Xp(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[id(e,r,n)],a=[i];if(o.length%2!=0)throw new Vo(Uo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(id(e,o[c])),a.push(o[c+1]);for(var h=[],f=new Bs,l=u.length-1;l>=0;--l)if(!ad(h,u[l])){var p=u[l],d=a[l];d instanceof jo&&(d=d._);var v=s.U_(p);if(d instanceof $p)h.push(p);else{var y=td(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new ws(h);return new jp(f.Gt(),g,s.fieldTransforms)}function Zp(t,e,n,r){return void 0===r&&(r=!1),td(n,t.G_(r?4:3,e))}function td(t,e){if(t instanceof jo&&(t=t._),nd(t))return rd("Unsupported field value:",e,t),ed(t,e);if(t instanceof Op)return function(t,e){if(!Fp(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Te.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=td(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof jo&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ru(e.fe,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=hs.fromDate(t);return{timestampValue:Ba(e.fe,n)}}if(t instanceof hs)return n=new hs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ba(e.fe,n)};if(t instanceof Up)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Mo)return{bytesValue:Ga(e.fe,t.l)};if(t instanceof kp){n=e.O;var r=t.firestore.zr;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ha(t.firestore.zr||e.O,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+th(t))}(t,e)}function ed(t,e){var n={};return bs(t)?e.path&&e.path.length>0&&e.Te.push(e.path):ms(t,(function(t,r){var i=td(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function nd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof hs||t instanceof Up||t instanceof Mo||t instanceof kp||t instanceof Op)}function rd(t,e,n){if(!nd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=th(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function id(t,e,n){if(e instanceof jo&&(e=e._),e instanceof Sp)return e.b_;if("string"==typeof e)return sd(t,e);throw ud("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var od=new RegExp("[~\\*/\\[\\]]");function sd(t,e,n){if(e.search(od)>=0)throw ud("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Sp.bind.apply(Sp,At([void 0],e.split("."))))).b_}catch(r){throw ud("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ud(t,e,n,r,i){var o=r&&!r.bt(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new Vo(Uo.INVALID_ARGUMENT,(u+=". ")+t+a)}function ad(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var cd=function(){function t(t){this.Qh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return wt(this,void 0,void 0,(function(){var e,n=this;return It(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Vo(Uo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return It(this,(function(a){switch(a.label){case 0:return n=ko(t),r=Xa(n.fe)+"/documents",i={documents:e.map((function(t){return Wa(n.fe,t)}))},[4,n._t("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Oo(!!e.found),e.found.name,e.found.updateTime;var n=Ya(t,e.found.name),r=$a(e.found.updateTime),i=new qs({mapValue:{fields:e.found.fields}});return new $s(n,r,i,{})}(t,e):"missing"in e?function(t,e){Oo(!!e.missing),Oo(!!e.readTime);var n=Ya(t,e.missing),r=$a(e.readTime);return new Hs(n,r)}(t,e):So()}(n.fe,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Oo(!!e),u.push(e)})),u)]}}))}))}(this.Qh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Hs||t instanceof $s?n.sf(t):So()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new ca(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return wt(this,void 0,void 0,(function(){var t,e=this;return It(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ys.Lt(n);e.mutations.push(new ha(r,e.Ee(r)))})),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return It(this,(function(o){switch(o.label){case 0:return n=ko(t),r=Xa(n.fe)+"/documents",i={writes:e.map((function(t){return ec(n.fe,t)}))},[4,n.at("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Qh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof $s)e=t.version;else{if(!(t instanceof Hs))throw So();e=fs.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Vo(Uo.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Ee=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Yu.updateTime(e):Yu.de()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(fs.min()))throw new Vo(Uo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yu.updateTime(e)}return Yu.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),hd=function(){function t(t,e,n,r){this.ks=t,this.Qh=e,this.updateFunction=n,this.Bs=r,this.cf=5,this.ui=new xc(this.ks,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.ui.ti((function(){return wt(t,void 0,void 0,(function(){var t,e,n=this;return It(this,(function(r){return t=new cd(this.Qh),(e=this.uf(t))&&e.then((function(e){n.ks.Ws((function(){return t.commit().then((function(){n.Bs.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Zo(e)&&e.catch&&e.then?e:(this.Bs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Bs.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.ks.Ws((function(){return e.af(),Promise.resolve()}))):this.Bs.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!os(e)}return!1},t}(),fd=function(){function t(t,e,n){var r=this;this.credentials=t,this.ks=e,this.rt=n,this.user=Go.UNAUTHENTICATED,this.clientId=Do.t(),this._f=function(){},this.S=new as,this.credentials.V((function(t){_o("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r._f(t)),r.S.resolve()}))}return t.prototype.getConfiguration=function(){return wt(this,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return[4,this.S.promise];case 1:return[2,(t.sent(),{ks:this.ks,rt:this.rt,clientId:this.clientId,credentials:this.credentials,h_:this.user,Bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.S.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.ks.wf)throw new Vo(Uo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.ks.Ef();var e=new as;return this.ks.Tf((function(){return wt(t,void 0,void 0,(function(){var t,n;return It(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.p(),e.resolve(),[3,6];case 5:return t=r.sent(),n=kc(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ld(t,e){return wt(this,void 0,void 0,(function(){var n,r=this;return It(this,(function(i){switch(i.label){case 0:return t.ks.Af(),_o("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return wt(r,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return[4,Af(e.Uh,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.Xc((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function pd(t,e){return wt(this,void 0,void 0,(function(){var n,r;return It(this,(function(i){switch(i.label){case 0:return t.ks.Af(),[4,dd(t)];case 1:return n=i.sent(),_o("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return function(t,e){return wt(this,void 0,void 0,(function(){var n,r;return It(this,(function(i){switch(i.label){case 0:return(n=ko(t)).ks.Af(),_o("RemoteStore","RemoteStore received new credentials"),r=dl(n),n.Gh.add(3),[4,ul(n)];case 1:return i.sent(),r&&n.Jh.set("Unknown"),[4,n.Kh.E_(e)];case 2:return i.sent(),n.Gh.delete(3),[4,sl(n)];case 3:return i.sent(),[2]}}))}))}(e.Ml,n)}))})),t.If=e,[2]}}))}))}function dd(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(_o("FirestoreClient","Using default OfflineComponentProvider"),[4,ld(t,new Ep)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function vd(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(_o("FirestoreClient","Using default OnlineComponentProvider"),[4,pd(t,new Ap)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function yd(t){return dd(t).then((function(t){return t.persistence}))}function gd(t){return dd(t).then((function(t){return t.Uh}))}function md(t){return vd(t).then((function(t){return t.Ml}))}function bd(t){return vd(t).then((function(t){return t.Lu}))}function wd(t){return wt(this,void 0,void 0,(function(){var e,n;return It(this,(function(r){switch(r.label){case 0:return[4,vd(t)];case 1:return e=r.sent(),[2,((n=e.Ll).ol=$l.bind(null,e.Lu),n.ul=Kl.bind(null,e.Lu),n)]}}))}))}function Id(t,e,n){var r=this;void 0===n&&(n={});var i=new as;return t.ks.Ws((function(){return wt(r,void 0,void 0,(function(){var r;return It(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Np({next:function(o){e.Ws((function(){return Rl(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new Vo(Uo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new Vo(Uo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ml(yu(n.path),o,{includeMetadataChanges:!0,El:!0});return Cl(t,s)},[4,wd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}function Ed(t,e,n){var r=this;void 0===n&&(n={});var i=new as;return t.ks.Ws((function(){return wt(r,void 0,void 0,(function(){var r;return It(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Np({next:function(n){e.Ws((function(){return Rl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Vo(Uo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ml(n,o,{includeMetadataChanges:!0,El:!0});return Cl(t,s)},[4,wd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}var _d=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.ui=new xc(this,"async_queue_retry"),this.vf=function(){var e=rl();e&&_o("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ui.si()};var e=rl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ws=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=rl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.ea=function(t){var e=this;this.Ws((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return wt(this,void 0,void 0,(function(){var t,e=this;return It(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.ui.reset(),[3,4];case 3:if(!_c(t=n.sent()))throw t;return _o("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.ui.ti((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,To("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.ni=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Oc.qs(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&So()},t.prototype.Af=function(){},t.prototype.Nf=function(){return wt(this,void 0,void 0,(function(){var t;return It(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].Ms===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.Ls-e.Ls}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ms===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),Td=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new _d,r.Wr="name"in e?e.name:"[DEFAULT]",r}return mt(e,t),e.prototype.io=function(){return this.Lf||Nd(this),this.Lf.terminate()},e}(oh);function Ad(t){return t.Lf||Nd(t),t.Lf.df(),t.Lf}function Nd(t){var e=t.so(),n=function(t,e,n){return new Yo(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.zr,t.Wr,e);t.Lf=new fd(t.Hr,t.Mf,n)}function Sd(t,e,n){var r=this,i=new as;return t.ks.enqueue((function(){return wt(r,void 0,void 0,(function(){var r;return It(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ld(t,n)];case 1:return o.sent(),[4,pd(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Uo.FAILED_PRECONDITION||t.code===Uo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Od(t){if(t.Yr||t.Xr)throw new Vo(Uo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var kd=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),Os(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _s(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(Ts(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw So()}},t.prototype.jf=function(t,e){var n=this,r={};return ms(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Up(_s(t.latitude),_s(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=Ns(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(Ss(t));default:return null}},t.prototype.Bf=function(t){var e=Es(t);return new hs(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=ps.xt(t);Oo(yc(n));var r=new Qo(n.get(1),n.get(3)),i=new ys(n.Pt(5));return r.isEqual(e)||To("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),xd=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new kp(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Dd(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.Yt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Pd("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(xd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pd(t,e){return"string"==typeof e?sd(t,e):e instanceof jo?e._.b_:e.b_}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cd(t){if(mu(t)&&0===t.ne.length)throw new Vo(Uo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rd=function(){};function Ld(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Ud=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return mt(e,t),e.prototype.Yf=function(t){var e=Gp(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.Ot()){if("array-contains"===o||"array-contains-any"===o)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Gd(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(Bd(r,t,f))}u={arrayValue:{values:a}}}else u=Bd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Gd(s,o),u=Zp(n,"where",s,"in"===o||"not-in"===o);var l=Zs.create(i,o,u);return function(t,e){if(e.ee()){var n=wu(t);if(null!==n&&!n.isEqual(e.field))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=bu(t);null!==r&&zd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.zr,this.Xf,this.Zf,this.td);return new xp(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new du(t.path,t.collectionGroup,t.ne.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Rd),Vd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return mt(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new hu(e,n);return function(t,e){if(null===bu(t)){var n=wu(t);null!==n&&zd(t,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new xp(t.firestore,t.v_,function(t,e){var n=t.ne.concat([e]);return new du(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Rd),Md=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return mt(e,t),e.prototype.Yf=function(t){return new xp(t.firestore,t.v_,Tu(t.C_,this.nd,this.sd))},e}(Rd),jd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return mt(e,t),e.prototype.Yf=function(t){var e=qd(t,this.type,this.rd,this.od);return new xp(t.firestore,t.v_,function(t,e){return new du(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Rd),Fd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return mt(e,t),e.prototype.Yf=function(t){var e=qd(t,this.type,this.rd,this.od);return new xp(t.firestore,t.v_,function(t,e){return new du(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Rd);function qd(t,e,n,r){if(n[0]instanceof jo&&(n[0]=n[0]._),n[0]instanceof xd)return function(t,e,n,r,i){if(!r)throw new Vo(Uo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Eu(t);s<u.length;s++){var a=u[s];if(a.field.Ot())o.push(Ls(e,r.key));else{var c=r.field(a.field);if(As(c))throw new Vo(Uo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.Ct();throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new au(o,i)}(t.C_,t.firestore.zr,e,n[0].Jf,r);var i=Gp(t.firestore);return function(t,e,n,r,i,o){var s=t.ne;if(i.length>s.length)throw new Vo(Uo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.Ot()){if("string"!=typeof c)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Iu(t)&&-1!==c.indexOf("/"))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ps.xt(c));if(!ys.qt(h))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new ys(h);u.push(Ls(e,f))}else{var l=Zp(n,r,c);u.push(l)}}return new au(u,o)}(t.C_,t.firestore.zr,i,e,n,r)}function Bd(t,e,n){if(n instanceof jo&&(n=n._),"string"==typeof n){if(""===n)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iu(e)&&-1!==n.indexOf("/"))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ps.xt(n));if(!ys.qt(r))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ls(t,new ys(r))}if(n instanceof kp)return Ls(t,n.S_);throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+th(n)+".")}function Gd(t,e){if(!Array.isArray(t)||0===t.length)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function zd(t,e,n){if(!n.isEqual(e))throw new Vo(Uo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $d(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Hd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return mt(e,t),e.prototype.Uf=function(t){return new Mo(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new kp(this.firestore,null,e)},e}(kd);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Wd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Yd=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).zf=e,u.ad=e,u.metadata=o,u}return mt(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Qd(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.Yt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Pd("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(xd),Qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Yd),Jd=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Wd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Qd(n.zf,n.Hf,r.key,r,new Wd(n.ud.tn.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.nn)throw new Vo(Uo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.Ze.bt()){var n=0;return t.ud.docChanges.map((function(e){var r=new Qd(t.zf,t.Hf,e.doc.key,e.doc,new Wd(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.Ze;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Qd(t.zf,t.Hf,e.doc.key,e.doc,new Wd(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Xd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function Xd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return So()}}function Zd(t,e){return t instanceof Yd&&e instanceof Yd?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Jd&&e instanceof Jd&&t.zf===e.zf&&Lp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return mt(e,t),e.prototype.Uf=function(t){return new Mo(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new kp(this.firestore,null,e)},e}(kd);function ev(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=eh(t,kp);var o=eh(t.firestore,Td),s=Gp(o);return e instanceof jo&&(e=e._),rv(o,[("string"==typeof e||e instanceof Sp?Xp(s,"updateDoc",t.S_,e,n,r):Jp(s,"updateDoc",t.S_,e)).F_(t.S_,Yu.exists(!0))])}function nv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof jo&&(t=t._);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||Kd(i[u])||(s=i[u],u++);var a,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(Kd(i[u])){var l=i[u];i[u]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[u+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[u+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof kp)c=eh(t.firestore,Td),h=yu(t.S_.path),a={next:function(e){i[u]&&i[u](iv(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=eh(t,xp);c=eh(p.firestore,Td),h=p.C_;var d=new tv(c);a={next:function(t){i[u]&&i[u](new Jd(c,d,p,t))},error:i[u+1],complete:i[u+2]},Cd(t.C_)}return function(t,e,n,r){var i=this,o=new Np(r),s=new Ml(e,o,n);return t.ks.Ws((function(){return wt(i,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return e=Cl,[4,wd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.I_(),t.ks.Ws((function(){return wt(i,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return e=Rl,[4,wd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ad(c),h,f,a)}function rv(t,e){return function(t,e){var n=this,r=new as;return t.ks.Ws((function(){return wt(n,void 0,void 0,(function(){var n;return It(this,(function(i){switch(i.label){case 0:return n=Wl,[4,bd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Ad(t),e)}function iv(t,e,n){var r=n.docs.get(e.S_),i=new tv(t);return new Yd(t,i,e.S_,r,new Wd(n.hasPendingWrites,n.fromCache),e.v_)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ov=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Gp(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=sv(t,this.zf),i=$d(r.v_,e,n),o=zp(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Yu.de())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=sv(t,this.zf);return e instanceof jo&&(e=e._),o="string"==typeof e||e instanceof Sp?Xp(this.wd,"WriteBatch.update",s.S_,e,n,r):Jp(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,Yu.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=sv(t,this.zf);return this.fd=this.fd.concat(new ca(e.S_,Yu.de())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new Vo(Uo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function sv(t,e){if(t instanceof jo&&(t=t._),t.firestore!==e)throw new Vo(Uo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return mt(e,t),e.prototype.get=function(e){var n=this,r=sv(e,this.zf),i=new tv(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Yd(n.zf,i,r.S_,t.Jf,new Wd(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Gp(t)}return t.prototype.get=function(t){var e=this,n=sv(t,this.zf),r=new Hd(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return So();var i=t[0];if(i instanceof Hs)return new xd(e.zf,r,n.S_,null,n.v_);if(i instanceof $s)return new xd(e.zf,r,i.key,i,n.v_);throw So()}))},t.prototype.set=function(t,e,n){var r=sv(t,this.zf),i=$d(r.v_,e,n),o=zp(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=sv(t,this.zf);return e instanceof jo&&(e=e._),o="string"==typeof e||e instanceof Sp?Xp(this.wd,"Transaction.update",s.S_,e,n,r):Jp(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=sv(t,this.zf);return this.Td.delete(e.S_),this},t}()),av=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Od(t=eh(t,Td));var n=Ad(t),r=t.so(),i=new Ap;return Sd(n,i,new _p(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Od(t=eh(t,Td));var e=Ad(t),n=t.so(),r=new Ap;return Sd(e,r,new Tp(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.Yr&&!t.Xr)throw new Vo(Uo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new as;return t.Mf.Tf((function(){return wt(e,void 0,void 0,(function(){var e;return It(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return wc.G()?(e=t+"main",[4,wc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(bf(t.zr,t.Wr))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),cv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Qo||(i.md=e),i}return mt(e,t),Object.defineProperty(e.prototype,"zr",{get:function(){return this._.zr},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.no()),t)).merge,this._.eo(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.no().host&&Ao("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return wt(e,void 0,void 0,(function(){var e,n;return It(this,(function(r){switch(r.label){case 0:return[4,yd(t)];case 1:return e=r.sent(),[4,md(t)];case 2:return n=r.sent(),[2,(e.Zc(!0),function(t){var e=ko(t);return e.Gh.delete(0),sl(e)}(n))]}}))}))}))}(Ad(eh(this._,Td)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return wt(e,void 0,void 0,(function(){var e,n;return It(this,(function(r){switch(r.label){case 0:return[4,yd(t)];case 1:return e=r.sent(),[4,md(t)];case 2:return n=r.sent(),[2,(e.Zc(!1),function(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return(e=ko(t)).Gh.add(0),[4,ul(e)];case 1:return n.sent(),e.Jh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ad(eh(this._,Td)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Jc("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new as;return t.ks.Ws((function(){return wt(e,void 0,void 0,(function(){var e;return It(this,(function(r){switch(r.label){case 0:return e=tp,[4,bd(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ad(eh(this._,Td)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Np(e);return t.ks.Ws((function(){return wt(n,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return e=function(t,e){ko(t).rl.add(e),e.next()},[4,wd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.I_(),t.ks.Ws((function(){return wt(n,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return e=function(t,e){ko(t).rl.delete(e)},[4,wd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ad(t=eh(t,Td)),Kd(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new Vo(Uo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ev(this,Pp(this._,t))}catch(t){throw dv(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new pv(this,Cp(this._,t))}catch(t){throw dv(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new bv(this,function(t,e){if(t=eh(t,oh),Yc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new xp(t,null,function(t){return new du(ps.Nt(),t)}(e))}(this._,t))}catch(t){throw dv(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new as;return t.ks.Ws((function(){return wt(n,void 0,void 0,(function(){var n;return It(this,(function(i){switch(i.label){case 0:return[4,function(t){return vd(t).then((function(t){return t.Qh}))}(t)];case 1:return n=i.sent(),new hd(t.ks,n,e,r).run(),[2]}}))}))})),r.promise}(Ad(t),(function(n){return e(new uv(t,n))}))}(this._,(function(n){return t(new fv(e,n))}))},e.prototype.batch=function(){var t=this;return Ad(this._),new lv(new ov(this._,(function(e){return rv(t._,e)})))},e.prototype.loadBundle=function(t){throw new Vo(Uo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Vo(Uo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(jo),hv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return mt(e,t),e.prototype.Uf=function(t){return new Bo(new Mo(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return pv.Ad(e,this.firestore,null)},e}(kd);var fv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return mt(e,t),e.prototype.get=function(t){var e=this,n=_v(t);return this._.get(n).then((function(t){return new gv(e.zf,t)}))},e.prototype.set=function(t,e,n){var r=_v(t);return n?(Qc("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=_v(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,At([s,e,n],i)),this},e.prototype.delete=function(t){var e=_v(t);return this._.delete(e),this},e}(jo),lv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.set=function(t,e,n){var r=_v(t);return n?(Qc("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=_v(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,At([s,e,n],i)),this},e.prototype.delete=function(t){var e=_v(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(jo),pv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new hv(e),r}return mt(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new Vo(Uo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.Ct()+" has "+t.length);return new e(n,new kp(n._,r,new ys(t)))},e.Ad=function(t,n,r){return new e(n,new kp(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ev(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ev(this.firestore,Pp(this._,t))}catch(t){throw dv(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof jo&&(t=t._),t instanceof kp&&Rp(this._,t)},e.prototype.set=function(t,e){e=Qc("DocumentReference.set",e);try{return function(t,e,n){t=eh(t,kp);var r=eh(t.firestore,Td),i=$d(t.v_,e,n);return rv(r,[zp(Gp(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Yu.de())])}(this._,t,e)}catch(t){throw dv(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ev(this._,t):ev.apply(void 0,At([this._,t,e],n))}catch(t){throw dv(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return rv(eh((t=this._).firestore,Td),[new ca(t.S_,Yu.de())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=vv(e),i=yv(e,(function(e){return new gv(t.firestore,new Yd(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return nv(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=eh(t,kp);var e=eh(t.firestore,Td),n=Ad(e),r=new tv(e);return function(t,e){var n=this,r=new as;return t.ks.Ws((function(){return wt(n,void 0,void 0,(function(){var n;return It(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return wt(this,void 0,void 0,(function(){var r,i;return It(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ko(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ka.Pa(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof $s?n.resolve(i):i instanceof Hs?n.resolve(null):n.reject(new Vo(Uo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=kc(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,gd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Yd(e,r,t.S_,n,new Wd(n instanceof $s&&n.Jt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=eh(t,kp);var e=eh(t.firestore,Td);return Id(Ad(e),t.S_,{source:"server"}).then((function(n){return iv(e,t,n)}))}(this._):function(t){t=eh(t,kp);var e=eh(t.firestore,Td);return Id(Ad(e),t.S_).then((function(n){return iv(e,t,n)}))}(this._)).then((function(t){return new gv(e.firestore,new Yd(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(jo);function dv(t,e,n){return t.message=t.message.replace(e,n),t}function vv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Kd(r))return r}return{}}function yv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Kd(t[0])?t[0]:Kd(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var gv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return mt(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new pv(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return Zd(this._,t._)},e}(jo),mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.data=function(t){return this._.data(t)},e}(gv),bv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new hv(e),r}return mt(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ld(this._,function(t,e,n){var r=e,i=Pd("where",t);return new Ud(i,r,n)}(t,n,r)))}catch(t){throw dv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ld(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Pd("orderBy",t);return new Vd(r,n)}(t,n)))}catch(t){throw dv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ld(this._,function(t){return nh("limit",t),new Md("limit",t,"F")}(t)))}catch(t){throw dv(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ld(this._,function(t){return nh("limitToLast",t),new Md("limitToLast",t,"L")}(t)))}catch(t){throw dv(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ld(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jd("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw dv(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ld(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jd("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw dv(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ld(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fd("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw dv(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ld(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fd("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw dv(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Lp(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=eh(t,xp);var e=eh(t.firestore,Td),n=Ad(e),r=new tv(e);return function(t,e){var n=this,r=new as;return t.ks.Ws((function(){return wt(n,void 0,void 0,(function(){var n;return It(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s,u;return It(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Pf(t,e,!0)];case 1:return u=a.sent(),r=new ql(e,u.za),i=r.bl(u.documents),o=r.yr(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=kc(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,gd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Jd(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=eh(t,xp);var e=eh(t.firestore,Td),n=Ad(e),r=new tv(e);return Ed(n,t.C_,{source:"server"}).then((function(n){return new Jd(e,r,t,n)}))}(this._):function(t){t=eh(t,xp);var e=eh(t.firestore,Td),n=Ad(e),r=new tv(e);return Cd(t.C_),Ed(n,t.C_).then((function(n){return new Jd(e,r,t,n)}))}(this._)).then((function(t){return new Iv(e.firestore,new Jd(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=vv(e),i=yv(e,(function(e){return new Iv(t.firestore,new Jd(t.firestore._,t.Hf,t._,e.ud))}));return nv(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(jo),wv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return mt(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new mv(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(jo),Iv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return mt(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new bv(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new mv(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new wv(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new mv(n.zf,r))}))},e.prototype.isEqual=function(t){return Zd(this._,t._)},e}(jo),Ev=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return mt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new pv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new pv(this.firestore,void 0===t?Cp(this._):Cp(this._,t))}catch(t){throw dv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=eh(t.firestore,Td),r=Cp(t),i=$d(t.v_,e);return rv(n,[zp(Gp(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Yu.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new pv(e.firestore,t)}))},e.prototype.isEqual=function(t){return Rp(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(bv);function _v(t){return t instanceof jo&&(t=t._),eh(t,kp)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Tv,Av=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Sp.bind.apply(Sp,At([void 0],e))))||this}return mt(e,t),e.documentId=function(){return new e(vs.kt().Ct())},e.prototype.isEqual=function(t){return t instanceof jo&&(t=t._),t instanceof Sp&&this._.b_.isEqual(t.b_)},e}(jo),Nv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.serverTimestamp=function(){var t=new Kp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new $p("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wp("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yp("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Qp("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(jo),Sv={Firestore:cv,GeoPoint:Up,Timestamp:hs,Blob:Bo,Transaction:fv,WriteBatch:lv,DocumentReference:pv,DocumentSnapshot:gv,Query:bv,QueryDocumentSnapshot:mv,QuerySnapshot:Iv,CollectionReference:Ev,FieldPath:Av,FieldValue:Nv,setLogLevel:function(t){var e;e=t,Io.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Mt("firestore",(function(t){return function(t,e){return new cv(t,new Td(t,e),new av)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Sv)))})(Tv=le),Tv.registerVersion("@firebase/firestore","2.1.0");le.initializeApp({projectId:"sample-project-294713"});const Ov=function(){const t=window.location.search;let e;if(t)e=t.substring(1);else{const t=yt();window.location.hash=t,window.history.replaceState("","","?"+t),e=t}return e}(),kv=le.firestore().collection("rooms").doc(Ov),xv=function(){const{subscribe:t,set:e}=at([]);return{subscribe:t,set:e,append:(t,e)=>{kv.get().then((n=>{let r=[],i={closed:!0};if(n&&n.exists){const e=n.data();r=[...e.estimates.filter((e=>e.name!==t))],i=e.tableState}r.push({name:t,point:e,appendedAt:le.firestore.Timestamp.now()}),kv.set({estimates:r,tableState:i})}))},remove:(t,e=null)=>{kv.get().then((n=>{if(n&&n.exists){const r=n.data();r.estimates=r.estimates.filter((e=>e.name!==t)),kv.set(r).then(e)}else e()}))},clear:()=>{kv.delete()}}}(),Dv=function(){const{subscribe:t,set:e,update:n}=at({closed:!0});return{subscribe:t,set:e,open:()=>{kv.get().then((t=>{if(t&&t.exists){const e=t.data();e.tableState={closed:!1},kv.set(e)}}))},close:()=>{kv.delete()}}}(),Pv=new Promise((t=>{kv.onSnapshot((t=>{if(t&&t.exists){const e=t.data(),n=(t,e)=>t.appendedAt.seconds-e.appendedAt.seconds;xv.set(e.estimates.sort(n)),Dv.set(e.tableState)}else xv.set([]),Dv.set({closed:!0})})),t()}));function Cv(e){let n,r,i,o,s=(e[2]?"":e[0])+"";return{c(){n=y("div"),r=g(s),w(n,"class","card svelte-tq9sw8"),E(n,"closed",e[2]),E(n,"selected",e[1])},m(t,s){d(t,n,s),p(n,r),i||(o=b(n,"click",e[3]),i=!0)},p(t,[e]){5&e&&s!==(s=(t[2]?"":t[0])+"")&&I(r,s),4&e&&E(n,"closed",t[2]),2&e&&E(n,"selected",t[1])},i:t,o:t,d(t){t&&v(n),i=!1,o()}}}function Rv(t,e,n){let{point:r}=e,{selected:i=!1}=e,{closed:o=!1}=e;const s=function(){const t=x();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=_(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}();return t.$$set=t=>{"point"in t&&n(0,r=t.point),"selected"in t&&n(1,i=t.selected),"closed"in t&&n(2,o=t.closed)},[r,i,o,function(){s("selectCard",{point:r})}]}class Lv extends it{constructor(t){super(),rt(this,t,Rv,Cv,s,{point:0,selected:1,closed:2})}}function Uv(t,e,n){const r=t.slice();return r[5]=e[n],r}function Vv(t,e){let n,r,i,o,s,u,a,c,h=e[5].name+"";return r=new Lv({props:{point:e[5].point,closed:e[0].closed}}),{key:t,first:null,c(){n=y("div"),Z(r.$$.fragment),i=m(),o=y("div"),s=g(h),u=m(),w(o,"class","name svelte-1nfxwa2"),w(n,"class","estimate svelte-1nfxwa2"),this.first=n},m(t,e){d(t,n,e),tt(r,n,null),p(n,i),p(n,o),p(o,s),p(n,u),c=!0},p(t,e){const n={};2&e&&(n.point=t[5].point),1&e&&(n.closed=t[0].closed),r.$set(n),(!c||2&e)&&h!==(h=t[5].name+"")&&I(s,h)},i(t){c||(W(r.$$.fragment,t),V((()=>{a||(a=J(n,st,{y:100},!0)),a.run(1)})),c=!0)},o(t){Y(r.$$.fragment,t),a||(a=J(n,st,{y:100},!1)),a.run(0),c=!1},d(t){t&&v(n),et(r),t&&a&&a.end()}}}function Mv(t){let e,n,r,i,o=t[0].closed?"open":"return";return{c(){e=y("div"),n=g(o),w(e,"class","open-button svelte-1nfxwa2")},m(o,s){d(o,e,s),p(e,n),r||(i=b(e,"click",t[2]),r=!0)},p(t,e){1&e&&o!==(o=t[0].closed?"open":"return")&&I(n,o)},d(t){t&&v(e),r=!1,i()}}}function jv(e){let n,r,i;return{c(){n=y("div"),n.textContent="Copy",w(n,"class","copy-button svelte-1nfxwa2")},m(t,o){d(t,n,o),r||(i=b(n,"click",e[3]),r=!0)},p:t,d(t){t&&v(n),r=!1,i()}}}function Fv(t){let e,n,r,i,o,s=[],u=new Map,a=t[1];const c=t=>t[5].name;for(let e=0;e<a.length;e+=1){let n=Uv(t,a,e),r=c(n);u.set(r,s[e]=Vv(r,n))}let h=(t[1].length>0||!t[0].closed)&&Mv(t),f=!t[0].closed&&jv(t);return{c(){e=y("div"),n=y("div");for(let t=0;t<s.length;t+=1)s[t].c();r=m(),h&&h.c(),i=m(),f&&f.c(),w(n,"class","estimates svelte-1nfxwa2"),w(e,"class","table svelte-1nfxwa2")},m(t,u){d(t,e,u),p(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);p(e,r),h&&h.m(e,null),p(e,i),f&&f.m(e,null),o=!0},p(t,[r]){if(3&r){const e=t[1];H(),s=function(t,e,n,r,i,o,s,u,a,c,h,f){let l=t.length,p=o.length,d=l;const v={};for(;d--;)v[t[d].key]=d;const y=[],g=new Map,m=new Map;for(d=p;d--;){const t=f(i,o,d),u=n(t);let a=s.get(u);a?r&&a.p(t,e):(a=c(u,t),a.c()),g.set(u,y[d]=a),u in v&&m.set(u,Math.abs(d-v[u]))}const b=new Set,w=new Set;function I(t){W(t,1),t.m(u,h),s.set(t.key,t),h=t.first,p--}for(;l&&p;){const e=y[p-1],n=t[l-1],r=e.key,i=n.key;e===n?(h=e.first,l--,p--):g.has(i)?!s.has(r)||b.has(r)?I(e):w.has(i)?l--:m.get(r)>m.get(i)?(w.add(r),I(e)):(b.add(i),l--):(a(n,s),l--)}for(;l--;){const e=t[l];g.has(e.key)||a(e,s)}for(;p;)I(y[p-1]);return y}(s,r,c,1,t,e,u,n,X,Vv,null,Uv),K()}t[1].length>0||!t[0].closed?h?h.p(t,r):(h=Mv(t),h.c(),h.m(e,i)):h&&(h.d(1),h=null),t[0].closed?f&&(f.d(1),f=null):f?f.p(t,r):(f=jv(t),f.c(),f.m(e,null))},i(t){if(!o){for(let t=0;t<a.length;t+=1)W(s[t]);o=!0}},o(t){for(let t=0;t<s.length;t+=1)Y(s[t]);o=!1},d(t){t&&v(e);for(let t=0;t<s.length;t+=1)s[t].d();h&&h.d(),f&&f.d()}}}function qv(t,e,n){let r,i;return u(t,Dv,(t=>n(0,r=t))),u(t,xv,(t=>n(1,i=t))),[r,i,function(t){r.closed?i.length>0&&Dv.open():(xv.clear(),Dv.close())},function(t){const e=function(){if(0===i.length)return"empty.";const t=new Date;return"["+t.toLocaleDateString()+" "+t.toLocaleTimeString()+"] "+i.sort(((t,e)=>t.name>e.name?1:-1)).reduce(((t,e)=>(t?t+" ":"")+`${e.name}(${e.point})`),null)}();navigator.clipboard.writeText(e)}]}class Bv extends it{constructor(t){super(),rt(this,t,qv,Fv,s,{})}}function Gv(t,e,n){const r=t.slice();return r[5]=e[n],r}function zv(t){let e,n;return e=new Lv({props:{point:t[5],selected:t[1]===t[5]}}),e.$on("selectCard",t[3]),{c(){Z(e.$$.fragment)},m(t,r){tt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.selected=t[1]===t[5]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function $v(t){let e,n,r,i,o,s=t[2],u=[];for(let e=0;e<s.length;e+=1)u[e]=zv(Gv(t,s,e));const a=t=>Y(u[t],1,1,(()=>{u[t]=null}));return{c(){e=y("div"),n=y("div"),r=g(t[0]),i=m();for(let t=0;t<u.length;t+=1)u[t].c();w(n,"class","user-name svelte-4f78du"),w(e,"class","svelte-4f78du")},m(t,s){d(t,e,s),p(e,n),p(n,r),p(e,i);for(let t=0;t<u.length;t+=1)u[t].m(e,null);o=!0},p(t,[n]){if((!o||1&n)&&I(r,t[0]),14&n){let r;for(s=t[2],r=0;r<s.length;r+=1){const i=Gv(t,s,r);u[r]?(u[r].p(i,n),W(u[r],1)):(u[r]=zv(i),u[r].c(),W(u[r],1),u[r].m(e,null))}for(H(),r=s.length;r<u.length;r+=1)a(r);K()}},i(t){if(!o){for(let t=0;t<s.length;t+=1)W(u[t]);o=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)Y(u[t]);o=!1},d(t){t&&v(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(u,t)}}}function Hv(t,e,n){let r;u(t,xv,(t=>n(4,r=t)));let i,o;for(;!(i=window.prompt("your name")););return t.$$.update=()=>{17&t.$$.dirty&&n(1,o=r.filter((t=>t.name===i)).map((t=>t.point)).pop())},[i,o,["0","1","2","3","5","8","13","21","34","55","?",""],function(t){const e=()=>xv.append(i,t.detail.point);o?xv.remove(i,o===t.detail.point?null:()=>setTimeout(e,300)):e()},r]}class Kv extends it{constructor(t){super(),rt(this,t,Hv,$v,s,{})}}function Wv(e){return{c:t,m:t,i:t,o:t,d:t}}function Yv(t){let e,n,r,i,o,s,u,a;return o=new Bv({}),u=new Kv({}),{c(){e=y("h1"),e.textContent="Planning Poker",n=m(),r=y("p"),r.textContent="share the URL of this page with your team members.",i=m(),Z(o.$$.fragment),s=m(),Z(u.$$.fragment),w(e,"class","svelte-1mx68ae"),w(r,"class","svelte-1mx68ae")},m(t,c){d(t,e,c),d(t,n,c),d(t,r,c),d(t,i,c),tt(o,t,c),d(t,s,c),tt(u,t,c),a=!0},i(t){a||(W(o.$$.fragment,t),W(u.$$.fragment,t),a=!0)},o(t){Y(o.$$.fragment,t),Y(u.$$.fragment,t),a=!1},d(t){t&&v(e),t&&v(n),t&&v(r),t&&v(i),et(o,t),t&&v(s),et(u,t)}}}function Qv(e){let n;return{c(){n=y("p"),n.textContent="...waiting",w(n,"class","svelte-1mx68ae")},m(t,e){d(t,n,e)},i:t,o:t,d(t){t&&v(n)}}}function Jv(t){let e,n,r,i,o,s;document.title=e=t[0];let u={ctx:t,current:null,token:null,hasCatch:!1,pending:Qv,then:Yv,catch:Wv,blocks:[,,,]};return function(t,e){const n=e.token={};function r(t,r,i,o){if(e.token!==n)return;e.resolved=o;let s=e.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const u=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(H(),Y(t,1,1,(()=>{e.blocks[n]=null})),K())})):e.block.d(1),u.c(),W(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&F()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=x();if(t.then((t=>{k(n),r(e.then,1,e.value,t),k(null)}),(t=>{if(k(n),r(e.catch,2,e.error,t),k(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var i}(o=Pv,u),{c(){n=y("link"),r=m(),i=y("main"),u.block.c(),w(n,"href","https://fonts.googleapis.com/css?family=M+PLUS+1p"),w(n,"rel","stylesheet"),w(i,"class","svelte-1mx68ae")},m(t,e){p(document.head,n),d(t,r,e),d(t,i,e),u.block.m(i,u.anchor=null),u.mount=()=>i,u.anchor=null,s=!0},p(n,[r]){t=n,(!s||1&r)&&e!==(e=t[0])&&(document.title=e)},i(t){s||(W(u.block),s=!0)},o(t){for(let t=0;t<3;t+=1){Y(u.blocks[t])}s=!1},d(t){v(n),t&&v(r),t&&v(i),u.block.d(),u.token=null,u=null}}}function Xv(t,e,n){let{name:r}=e;return t.$$set=t=>{"name"in t&&n(0,r=t.name)},[r]}return new class extends it{constructor(t){super(),rt(this,t,Xv,Jv,s,{name:0})}}({target:document.body,props:{name:"Planning Poker"}})}();
//# sourceMappingURL=bundle.js.map
