var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}const a="undefined"!=typeof window;let c=a?()=>window.performance.now():()=>Date.now(),h=a?t=>requestAnimationFrame(t):t;const f=new Set;function l(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&h(l)}function p(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function b(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function _(t,e,n){t.classList[n?"add":"remove"](e)}function T(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const A=new Set;let N,S=0;function O(t,e,n,r,i,o,s,u=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const h=c+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${u}`,l=t.ownerDocument;A.add(l);const p=l.__svelte_stylesheet||(l.__svelte_stylesheet=l.head.appendChild(y("style")).sheet),d=l.__svelte_rules||(l.__svelte_rules={});d[f]||(d[f]=!0,p.insertRule(`@keyframes ${f} ${h}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?v+", ":""}${f} ${r}ms linear ${i}ms 1 both`,S+=1,f}function k(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),S-=i,S||h((()=>{S||(A.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),A.clear())})))}function x(t){N=t}function D(){if(!N)throw new Error("Function called outside component initialization");return N}const P=[],C=[],R=[],L=[],U=Promise.resolve();let V=!1;function M(t){R.push(t)}let j=!1;const F=new Set;function q(){if(!j){j=!0;do{for(let t=0;t<P.length;t+=1){const e=P[t];x(e),B(e.$$)}for(x(null),P.length=0;C.length;)C.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];F.has(e)||(F.add(e),e())}R.length=0}while(P.length);for(;L.length;)L.pop()();V=!1,j=!1,F.clear()}}function B(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}let G;function z(t,e,n){t.dispatchEvent(T(`${e?"intro":"outro"}${n}`))}const $=new Set;let H;function K(){H={r:0,c:[],p:H}}function W(){H.r||i(H.c),H=H.p}function Y(t,e){t&&t.i&&($.delete(t),t.i(e))}function Q(t,e,n,r){if(t&&t.o){if($.has(t))return;$.add(t),H.c.push((()=>{$.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const J={duration:0};function X(n,r,s,u){let a=r(n,s),p=u?0:1,d=null,v=null,y=null;function g(){y&&k(n,y)}function m(t,e){const n=t.b-p;return e*=Math.abs(n),{a:p,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(r){const{delay:o=0,duration:s=300,easing:u=e,tick:b=t,css:w}=a||J,I={start:c()+o,b:r};r||(I.group=H,H.r+=1),d||v?v=I:(w&&(g(),y=O(n,p,r,s,o,u,w)),r&&b(0,1),d=m(I,s),M((()=>z(n,r,"start"))),function(t){let e;0===f.size&&h(l),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(v&&t>v.start&&(d=m(v,s),v=null,z(n,d.b,"start"),w&&(g(),y=O(n,p,d.b,d.duration,0,u,a.css))),d)if(t>=d.end)b(p=d.b,1-p),z(n,d.b,"end"),v||(d.b?g():--d.group.r||i(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;p=d.a+d.d*u(e/d.duration),b(p,1-p)}return!(!d&&!v)})))}return{run(t){o(a)?(G||(G=Promise.resolve(),G.then((()=>{G=null}))),G).then((()=>{a=a(),b(t)})):b(t)},end(){g(),d=v=null}}}const Z="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function tt(t,e){Q(t,1,1,(()=>{e.delete(t.key)}))}function et(t){t&&t.c()}function nt(t,e,r){const{fragment:s,on_mount:u,on_destroy:a,after_update:c}=t.$$;s&&s.m(e,r),M((()=>{const e=u.map(n).filter(o);a?a.push(...e):i(e),t.$$.on_mount=[]})),c.forEach(M)}function rt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function it(t,e){-1===t.$$.dirty[0]&&(P.push(t),V||(V=!0,U.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(e,n,o,s,u,a,c=[-1]){const h=N;x(e);const f=n.props||{},l=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(l.ctx=o?o(e,f,((t,n,...r)=>{const i=r.length?r[0]:n;return l.ctx&&u(l.ctx[t],l.ctx[t]=i)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](i),p&&it(e,t)),n})):[],l.update(),p=!0,i(l.before_update),l.fragment=!!s&&s(l.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);l.fragment&&l.fragment.l(t),t.forEach(v)}else l.fragment&&l.fragment.c();n.intro&&Y(e.$$.fragment),nt(e,n.target,n.anchor),q()}x(h)}class st{$destroy(){rt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ut(t){const e=t-1;return e*e*e+1}function at(t,{delay:e=0,duration:n=400,easing:r=ut,x:i=0,y:o=0,opacity:s=0}){const u=getComputedStyle(t),a=+u.opacity,c="none"===u.transform?"":u.transform,h=a*(1-s);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${a-h*e}`}}const ct=[];function ht(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!ct.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),ct.push(n,e)}if(t){for(let t=0;t<ct.length;t+=2)ct[t][0](ct[t+1]);ct.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,u=t){const a=[s,u];return i.push(a),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(a);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}var ft,lt=new Uint8Array(16);function pt(){if(!ft&&!(ft="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ft(lt)}var dt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function vt(t){return"string"==typeof t&&dt.test(t)}for(var yt=[],gt=0;gt<256;++gt)yt.push((gt+256).toString(16).substr(1));function mt(t,e,n){var r=(t=t||{}).random||(t.rng||pt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(yt[t[e+0]]+yt[t[e+1]]+yt[t[e+2]]+yt[t[e+3]]+"-"+yt[t[e+4]]+yt[t[e+5]]+"-"+yt[t[e+6]]+yt[t[e+7]]+"-"+yt[t[e+8]]+yt[t[e+9]]+"-"+yt[t[e+10]]+yt[t[e+11]]+yt[t[e+12]]+yt[t[e+13]]+yt[t[e+14]]+yt[t[e+15]]).toLowerCase();if(!vt(n))throw TypeError("Stringified UUID is invalid");return n}(r)}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var bt=function(t,e){return(bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function wt(t,e){function n(){this.constructor=t}bt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var It=function(){return(It=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Et(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function _t(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function Tt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Nt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(At(arguments[e]));return t}function St(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ot(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Ot(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var kt=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Dt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Pt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Ct.prototype.create),o}return wt(e,t),e}(Error),Ct=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Rt(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new Pt(i,u,r);return a},t}();function Rt(t,e){return t.replace(Lt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Lt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ut(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vt(t,e){var n=new Mt(t,e);return n.subscribe.bind(n)}var Mt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=jt),void 0===r.error&&(r.error=jt),void 0===r.complete&&(r.complete=jt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function jt(){}var Ft=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),qt="[DEFAULT]",Bt=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=qt);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new kt;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=It({identifier:qt,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService(qt)}catch(t){}try{for(var r=Tt(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=At(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=qt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Et(this,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Nt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===qt?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:qt:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gt,zt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Bt(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function $t(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ht,Kt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Ht||(Ht={}));var Wt,Yt={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},Qt=Ht.INFO,Jt=((Gt={})[Ht.DEBUG]="log",Gt[Ht.VERBOSE]="log",Gt[Ht.INFO]="info",Gt[Ht.WARN]="warn",Gt[Ht.ERROR]="error",Gt),Xt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Jt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,$t(["["+i+"]  "+t.name+":"],n))}},Zt=function(){function t(t){this.name=t,this._logLevel=Qt,this._logHandler=Xt,this._userLogHandler=null,Kt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ht))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Yt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Ht.DEBUG],t)),this._logHandler.apply(this,$t([this,Ht.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Ht.VERBOSE],t)),this._logHandler.apply(this,$t([this,Ht.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Ht.INFO],t)),this._logHandler.apply(this,$t([this,Ht.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Ht.WARN],t)),this._logHandler.apply(this,$t([this,Ht.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,Ht.ERROR],t)),this._logHandler.apply(this,$t([this,Ht.ERROR],t))},t}();function te(t){Kt.forEach((function(e){e.setLogLevel(t)}))}var ee,ne=((Wt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Wt["bad-app-name"]="Illegal App name: '{$appName}",Wt["duplicate-app"]="Firebase App named '{$appName}' already exists",Wt["app-deleted"]="Firebase App named '{$appName}' already deleted",Wt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Wt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Wt),re=new Ct("app","Firebase",ne),ie="@firebase/app",oe="[DEFAULT]",se=((ee={})[ie]="fire-core",ee["@firebase/analytics"]="fire-analytics",ee["@firebase/auth"]="fire-auth",ee["@firebase/database"]="fire-rtdb",ee["@firebase/functions"]="fire-fn",ee["@firebase/installations"]="fire-iid",ee["@firebase/messaging"]="fire-fcm",ee["@firebase/performance"]="fire-perf",ee["@firebase/remote-config"]="fire-rc",ee["@firebase/storage"]="fire-gcs",ee["@firebase/firestore"]="fire-fst",ee["fire-js"]="fire-js",ee["firebase-wrapper"]="fire-js-all",ee),ue=new Zt("@firebase/app"),ae=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ot(void 0,t),this.container=new zt(e.name),this._addComponent(new Ft("app",(function(){return o}),"PUBLIC"));try{for(var s=Tt(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=oe),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=oe),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){ue.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw re.create("app-deleted",{appName:this.name_})},t}();ae.prototype.name&&ae.prototype.options||ae.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ce(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=oe);var s=o.name;if("string"!=typeof s||!s)throw re.create("bad-app-name",{appName:String(s)});if(Ut(e,s))throw re.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=se[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ue.warn(a.join(" "))}o(new Ft(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:te,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw re.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Yt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Ht[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Kt;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Ut(e,t=t||oe))throw re.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return ue.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw re.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Ot(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=Tt(Object.keys(e)),f=h.next();!f.done;f=h.next()){var l=f.value;e[l]._addComponent(o)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var he=function t(){var e=ce(ae);return e.INTERNAL=It(It({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Ot(e,t)},createSubscribe:Vt,ErrorFactory:Ct,deepExtend:Ot}),e}(),fe=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var le=self.firebase.SDK_VERSION;le&&le.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var pe=he.initializeApp;he.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Dt()&&ue.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),pe.apply(void 0,t)};var de=he;!function(t,e){t.INTERNAL.registerComponent(new Ft("platform-logger",(function(t){return new fe(t)}),"PRIVATE")),t.registerVersion(ie,"0.6.13",e),t.registerVersion("fire-js","")}(de);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
de.registerVersion("firebase","8.2.0","app");
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var ve=function(t,e){return(ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ye(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ge,me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},be=be||{},we=me||self;function Ie(){}function Ee(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function _e(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Te="closure_uid_"+(1e9*Math.random()>>>0),Ae=0;function Ne(t,e,n){return t.call.apply(t.bind,arguments)}function Se(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Oe(t,e,n){return(Oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ne:Se).apply(null,arguments)}function ke(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function xe(){return Date.now()}function De(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Pe(){this.j=this.j,this.i=this.i}Pe.prototype.j=!1,Pe.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Te)&&t[Te]||(t[Te]=++Ae)})(this)},Pe.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ce=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Re=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Le(t){return Array.prototype.concat.apply([],arguments)}function Ue(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ve(t){return/^[\s\xa0]*$/.test(t)}var Me,je=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Fe(t,e){return-1!=t.indexOf(e)}function qe(t,e){return t<e?-1:t>e?1:0}t:{var Be=we.navigator;if(Be){var Ge=Be.userAgent;if(Ge){Me=Ge;break t}}Me=""}function ze(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function $e(t){var e={};for(var n in t)e[n]=t[n];return e}var He="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ke(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<He.length;o++)n=He[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function We(t){return We[" "](t),t}We[" "]=Ie;var Ye,Qe,Je=Fe(Me,"Opera"),Xe=Fe(Me,"Trident")||Fe(Me,"MSIE"),Ze=Fe(Me,"Edge"),tn=Ze||Xe,en=Fe(Me,"Gecko")&&!(Fe(Me.toLowerCase(),"webkit")&&!Fe(Me,"Edge"))&&!(Fe(Me,"Trident")||Fe(Me,"MSIE"))&&!Fe(Me,"Edge"),nn=Fe(Me.toLowerCase(),"webkit")&&!Fe(Me,"Edge");function rn(){var t=we.document;return t?t.documentMode:void 0}t:{var on="",sn=(Qe=Me,en?/rv:([^\);]+)(\)|;)/.exec(Qe):Ze?/Edge\/([\d\.]+)/.exec(Qe):Xe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Qe):nn?/WebKit\/(\S+)/.exec(Qe):Je?/(?:Version)[ \/]?(\S+)/.exec(Qe):void 0);if(sn&&(on=sn?sn[1]:""),Xe){var un=rn();if(null!=un&&un>parseFloat(on)){Ye=String(un);break t}}Ye=on}var an,cn={};function hn(t){return function(t,e){var n=cn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=je(String(Ye)).split("."),r=je(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=qe(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||qe(0==s[2].length,0==u[2].length)||qe(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(we.document&&Xe){var fn=rn();an=fn||(parseInt(Ye,10)||void 0)}else an=void 0;var ln=an,pn=!Xe||9<=Number(ln),dn=Xe&&!hn("9"),vn=function(){if(!we.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{we.addEventListener("test",Ie,e),we.removeEventListener("test",Ie,e)}catch(t){}return t}();function yn(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function gn(t,e){if(yn.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(en){t:{try{We(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:mn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}yn.prototype.b=function(){this.defaultPrevented=!0},De(gn,yn);var mn={2:"touch",3:"pen",4:"mouse"};gn.prototype.b=function(){gn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,dn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var bn="closure_listenable_"+(1e6*Math.random()|0),wn=0;function In(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++wn,this.Y=this.Z=!1}function En(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function _n(t){this.src=t,this.a={},this.b=0}function Tn(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ce(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(En(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function An(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}_n.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=An(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new In(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Nn="closure_lm_"+(1e6*Math.random()|0),Sn={};function On(t,e,n,r,i){if(r&&r.once)return xn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)On(t,e[o],n,r,i);return null}return n=Mn(n),t&&t[bn]?t.va(e,n,_e(r)?!!r.capture:!!r,i):kn(t,e,n,!1,r,i)}function kn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=_e(i)?!!i.capture:!!i;if(s&&!pn)return null;var u=Un(t);if(u||(t[Nn]=u=new _n(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ln,e=pn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)vn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Cn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function xn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)xn(t,e[o],n,r,i);return null}return n=Mn(n),t&&t[bn]?t.wa(e,n,_e(r)?!!r.capture:!!r,i):kn(t,e,n,!0,r,i)}function Dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Dn(t,e[o],n,r,i);else r=_e(r)?!!r.capture:!!r,n=Mn(n),t&&t[bn]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=An(o=t.a[e],n,r,i))&&(En(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Un(t))&&(e=t.a[e.toString()],t=-1,e&&(t=An(e,n,r,i)),(n=-1<t?e[t]:null)&&Pn(n))}function Pn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[bn])Tn(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Cn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Un(e))?(Tn(n,t),0==n.b&&(n.src=null,e[Nn]=null)):En(t)}}}function Cn(t){return t in Sn?Sn[t]:Sn[t]="on"+t}function Rn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Pn(t),n.call(r,e)}function Ln(t,e){if(t.Y)return!0;if(!pn){if(!e)t:{e=["window","event"];for(var n=we,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Rn(t,e=new gn(e,this))}return Rn(t,new gn(e,this))}function Un(t){return(t=t[Nn])instanceof _n?t:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mn(t){return"function"==typeof t?t:(t[Vn]||(t[Vn]=function(e){return t.handleEvent(e)}),t[Vn])}function jn(){Pe.call(this),this.c=new _n(this),this.J=this,this.C=null}function Fn(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new yn(e,t);else if(e instanceof yn)e.target=e.target||t;else{var i=e;Ke(e=new yn(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=qn(s,r,!0,e)&&i}if(i=qn(s=e.a=t,r,!0,e)&&i,i=qn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=qn(s=e.a=n[o],r,!1,e)&&i}function qn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&Tn(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}De(jn,Pe),jn.prototype[bn]=!0,(ge=jn.prototype).addEventListener=function(t,e,n,r){On(this,t,e,n,r)},ge.removeEventListener=function(t,e,n,r){Dn(this,t,e,n,r)},ge.G=function(){if(jn.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)En(n[r]);delete e.a[t],e.b--}}this.C=null},ge.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ge.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Bn=we.JSON.stringify;function Gn(){this.b=this.a=null}var zn,$n=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Kn}),(function(t){t.reset()}));function Hn(){var t=Jn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Kn(){this.next=this.b=this.a=null}function Wn(t){we.setTimeout((function(){throw t}),0)}function Yn(t,e){zn||function(){var t=we.Promise.resolve(void 0);zn=function(){t.then(Xn)}}(),Qn||(zn(),Qn=!0),Jn.add(t,e)}Gn.prototype.add=function(t,e){var n=$n.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Kn.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Kn.prototype.reset=function(){this.next=this.b=this.a=null};var Qn=!1,Jn=new Gn;function Xn(){for(var t;t=Hn();){try{t.a.call(t.b)}catch(t){Wn(t)}var e=$n;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Qn=!1}function Zn(t,e){jn.call(this),this.b=t||1,this.a=e||we,this.f=Oe(this.Za,this),this.g=xe()}function tr(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function er(t,e,n){if("function"==typeof t)n&&(t=Oe(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Oe(t.handleEvent,t)}return 2147483647<Number(e)?-1:we.setTimeout(t,e||0)}function nr(t){t.a=er((function(){t.a=null,t.c&&(t.c=!1,nr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}De(Zn,jn),(ge=Zn.prototype).aa=!1,ge.M=null,ge.Za=function(){if(this.aa){var t=xe()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Fn(this,"tick"),this.aa&&(tr(this),this.start()))}},ge.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=xe())},ge.G=function(){Zn.X.G.call(this),tr(this),delete this.a};var rr=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}ve(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:nr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(we.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Pe);function ir(t){Pe.call(this),this.b=t,this.a={}}De(ir,Pe);var or=[];function sr(t,e,n,r){Array.isArray(n)||(n&&(or[0]=n.toString()),n=or);for(var i=0;i<n.length;i++){var o=On(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ur(t){ze(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Pn(t)}),t),t.a={}}function ar(){this.a=!0}function cr(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Bn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}ir.prototype.G=function(){ir.X.G.call(this),ur(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ar.prototype.info=function(){};var hr={},fr=null;function lr(){return fr=fr||new jn}function pr(t){yn.call(this,hr.Fa,t)}function dr(t){var e=lr();Fn(e,new pr(e,t))}function vr(t,e){yn.call(this,hr.STAT_EVENT,t),this.stat=e}function yr(t){var e=lr();Fn(e,new vr(e,t))}function gr(t){yn.call(this,hr.Ga,t)}function mr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return we.setTimeout((function(){t()}),e)}hr.Fa="serverreachability",De(pr,yn),hr.STAT_EVENT="statevent",De(vr,yn),hr.Ga="timingevent",De(gr,yn);var br={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},wr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ir(){}function Er(t){var e;return(e=t.a)||(e=t.a={}),e}function _r(){}Ir.prototype.a=null;var Tr,Ar={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Nr(){yn.call(this,"d")}function Sr(){yn.call(this,"c")}function Or(){}function kr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ir(this),this.P=xr,t=tn?125:void 0,this.R=new Zn(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}De(Nr,yn),De(Sr,yn),De(Or,Ir),Tr=new Or;var xr=45e3,Dr={},Pr={};function Cr(t,e,n){t.H=1,t.i=ei(Yr(e)),t.j=n,t.I=!0,Rr(t,null)}function Rr(t,e){t.u=xe(),Vr(t),t.l=Yr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),di(n.b,"t",r),t.D=0,t.a=ao(t.g,t.g.C?e:null),0<t.O&&(t.F=new rr(Oe(t.Ca,t,t.a),t.O)),sr(t.J,t.a,"readystatechange",t.Xa),e=t.B?$e(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),dr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Lr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ur(t,n);if(i==Pr){4==e&&(t.h=4,yr(14),r=!1),cr(t.c,t.f,null,"[Incomplete Response]");break}if(i==Dr){t.h=4,yr(15),cr(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}cr(t.c,t.f,i,null),Br(t,i)}4==e&&0==n.length&&(t.h=1,yr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),to(e),e.F=!0,yr(11))):(cr(t.c,t.f,n,"[Invalid Chunked Response]"),qr(t),Fr(t))}function Ur(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Pr:(n=Number(e.substring(n,r)),isNaN(n)?Dr:(r+=1)+n>e.length?Pr:(e=e.substr(r,n),t.D=r+n,e))}function Vr(t){t.T=xe()+t.P,Mr(t,t.P)}function Mr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=mr(Oe(t.Va,t),e)}function jr(t){t.o&&(we.clearTimeout(t.o),t.o=null)}function Fr(t){0==t.g.v||t.A||ro(t.g,t)}function qr(t){jr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,tr(t.R),ur(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Br(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ii(n.b,t)))if(n.I=t.N,!t.C&&Ii(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;no(n),$i(n)}Zi(n),yr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=mr(Oe(n.Sa,n),6e3));if(1>=wi(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else oo(n,11)}else if((t.C||n.a==t)&&no(n),!Ve(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(Fe(h,"spdy")||Fe(h,"quic")||Fe(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(Ei(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,ti(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=xe()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=uo(a,a.C?a.ga:null,a.fa),p.C){_i(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(jr(d),Vr(d)),a.a=p}else Xi(a);0<n.g.length&&Wi(n)}else"stop"!=i[0]&&"close"!=i[0]||oo(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?oo(n,7):zi(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);dr(4)}catch(t){}}function Gr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ee(t)||"string"==typeof t)Re(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ee(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ee(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function zr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof zr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function $r(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Hr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Hr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Hr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ge=kr.prototype).setTimeout=function(t){this.P=t},ge.Xa=function(t){t=t.target;var e=this.F;e&&3==Fi(t)?e.f():this.Ca(t)},ge.Ca=function(t){try{if(t==this.a)t:{var e=Fi(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!tn&&!this.a.$())){this.A||4!=e||7==n||dr(8==n||0>=r?3:2),jr(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ve(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,yr(12),qr(this),Fr(this);break t}cr(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Br(this,a)}this.I?(Lr(this,e,o),tn&&this.b&&3==e&&(sr(this.J,this.R,"tick",this.Wa),this.R.start())):(cr(this.c,this.f,o,null),Br(this,o)),4==e&&qr(this),this.b&&!this.A&&(4==e?ro(this.g,this):(this.b=!1,Vr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,yr(12)):(this.h=0,yr(13)),qr(this),Fr(this)}}}catch(t){}},ge.Wa=function(){if(this.a){var t=Fi(this.a),e=this.a.$();this.D<e.length&&(jr(this),Lr(this,t,e),this.b&&4!=t&&Vr(this))}},ge.cancel=function(){this.A=!0,qr(this)},ge.Va=function(){this.o=null;var t=xe();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(dr(3),yr(17)),qr(this),this.h=2,Fr(this)):Mr(this,this.T-t)},(ge=zr.prototype).K=function(){$r(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ge.L=function(){return $r(this),this.a.concat()},ge.get=function(t,e){return Hr(this.b,t)?this.b[t]:e},ge.set=function(t,e){Hr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ge.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Kr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Wr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Wr){this.a=void 0!==e?e:t.a,Qr(this,t.f),this.j=t.j,Jr(this,t.c),Xr(this,t.h),this.g=t.g,e=t.b;var n=new hi;n.c=e.c,e.a&&(n.a=new zr(e.a),n.b=e.b),Zr(this,n),this.i=t.i}else t&&(n=String(t).match(Kr))?(this.a=!!e,Qr(this,n[1]||"",!0),this.j=ni(n[2]||""),Jr(this,n[3]||"",!0),Xr(this,n[4]),this.g=ni(n[5]||"",!0),Zr(this,n[6]||"",!0),this.i=ni(n[7]||"")):(this.a=!!e,this.b=new hi(null,this.a))}function Yr(t){return new Wr(t)}function Qr(t,e,n){t.f=n?ni(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Jr(t,e,n){t.c=n?ni(e,!0):e}function Xr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Zr(t,e,n){e instanceof hi?(t.b=e,function(t,e){e&&!t.f&&(fi(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(li(this,e),di(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ri(e,ai)),t.b=new hi(e,t.a))}function ti(t,e,n){t.b.set(e,n)}function ei(t){return ti(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^xe()).toString(36)),t}function ni(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ri(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ii),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ii(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Wr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ri(e,oi,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ri(e,oi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ri(n,"/"==n.charAt(0)?ui:si,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ri(n,ci)),t.join("")};var oi=/[#\/\?@]/g,si=/[#\?:]/g,ui=/[#\?]/g,ai=/[#\?@]/g,ci=/#/g;function hi(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function fi(t){t.a||(t.a=new zr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function li(t,e){fi(t),e=vi(t,e),Hr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Hr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&$r(t)))}function pi(t,e){return fi(t),e=vi(t,e),Hr(t.a.b,e)}function di(t,e,n){li(t,e),0<n.length&&(t.c=null,t.a.set(vi(t,e),Ue(n)),t.b+=n.length)}function vi(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ge=hi.prototype).add=function(t,e){fi(this),this.c=null,t=vi(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ge.forEach=function(t,e){fi(this),this.a.forEach((function(n,r){Re(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ge.L=function(){fi(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ge.K=function(t){fi(this);var e=[];if("string"==typeof t)pi(this,t)&&(e=Le(e,this.a.get(vi(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Le(e,t[n])}return e},ge.set=function(t,e){return fi(this),this.c=null,pi(this,t=vi(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ge.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ge.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var yi=function(t,e){this.b=t,this.a=e};function gi(t){this.g=t||mi,we.PerformanceNavigationTiming?t=0<(t=we.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(we.ia&&we.ia.ya&&we.ia.ya()&&we.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var mi=10;function bi(t){return!!t.b||!!t.a&&t.a.size>=t.f}function wi(t){return t.b?1:t.a?t.a.size:0}function Ii(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ei(t,e){t.a?t.a.add(e):t.b=e}function _i(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ti(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ye(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ue(t.c)}function Ai(){}function Ni(){this.a=new Ai}function Si(t,e,n){var r=n||"";try{Gr(t,(function(t,n){var i=t;_e(t)&&(i=Bn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Oi(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}gi.prototype.cancel=function(){var t,e;if(this.c=Ti(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ye(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ai.prototype.stringify=function(t){return we.JSON.stringify(t,void 0)},Ai.prototype.parse=function(t){return we.JSON.parse(t,void 0)};var ki=we.JSON.parse;function xi(t){jn.call(this),this.headers=new zr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Di,this.D=this.F=!1}De(xi,jn);var Di="",Pi=/^https?$/i,Ci=["POST","PUT"];function Ri(t){return"content-type"==t.toLowerCase()}function Li(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ui(t),Mi(t)}function Ui(t){t.u||(t.u=!0,Fn(t,"complete"),Fn(t,"error"))}function Vi(t){if(t.b&&void 0!==be&&(!t.s[1]||4!=Fi(t)||2!=t.W()))if(t.l&&4==Fi(t))er(t.za,0,t);else if(Fn(t,"readystatechange"),4==Fi(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Kr)[1]||null;if(!o&&we.self&&we.self.location){var s=we.self.location.protocol;o=s.substr(0,s.length-1)}i=!Pi.test(o?o.toLowerCase():"")}e=i}if(e)Fn(t,"complete"),Fn(t,"success");else{t.h=6;try{var u=2<Fi(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",Ui(t)}}finally{Mi(t)}}}function Mi(t,e){if(t.a){ji(t);var n=t.a,r=t.s[0]?Ie:null;t.a=null,t.s=null,e||Fn(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function ji(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(we.clearTimeout(t.m),t.m=null)}function Fi(t){return t.a?t.a.readyState:0}function qi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ze(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ti(t,e,n))}function Bi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Gi(t){this.pa=0,this.g=[],this.c=new ar,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Bi("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Bi("baseRetryDelayMs",5e3,t),this.Ra=Bi("retryDelaySeedMs",1e4,t),this.Ma=Bi("forwardChannelMaxRetries",2,t),this.ma=Bi("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new gi(t&&t.concurrentRequestLimit),this.ka=new Ni,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function zi(t){if(Hi(t),3==t.v){var e=t.R++,n=Yr(t.B);ti(n,"SID",t.J),ti(n,"RID",e),ti(n,"TYPE","terminate"),Qi(t,n),(e=new kr(t,t.c,e,void 0)).H=2,e.i=ei(Yr(n)),n=!1,we.navigator&&we.navigator.sendBeacon&&(n=we.navigator.sendBeacon(e.i.toString(),"")),!n&&we.Image&&((new Image).src=e.i,n=!0),n||(e.a=ao(e.g,null),e.a.ba(e.i)),e.u=xe(),Vr(e)}so(t)}function $i(t){t.a&&(to(t),t.a.cancel(),t.a=null)}function Hi(t){$i(t),t.j&&(we.clearTimeout(t.j),t.j=null),no(t),t.b.cancel(),t.h&&("number"==typeof t.h&&we.clearTimeout(t.h),t.h=null)}function Ki(t,e){t.g.push(new yi(t.Oa++,e)),3==t.v&&Wi(t)}function Wi(t){bi(t.b)||t.h||(t.h=!0,Yn(t.Ba,t),t.u=0)}function Yi(t,e){var n;n=e?e.f:t.R++;var r=Yr(t.B);ti(r,"SID",t.J),ti(r,"RID",n),ti(r,"AID",t.P),Qi(t,r),t.i&&t.l&&qi(r,t.i,t.l),n=new kr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ji(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ei(t.b,n),Cr(n,r,e)}function Qi(t,e){t.f&&Gr({},(function(t,n){ti(e,n,t)}))}function Ji(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Oe(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Si(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Xi(t){t.a||t.j||(t.T=1,Yn(t.Aa,t),t.o=0)}function Zi(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=mr(Oe(t.Aa,t),io(t,t.o)),t.o++,!0)}function to(t){null!=t.s&&(we.clearTimeout(t.s),t.s=null)}function eo(t){t.a=new kr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Yr(t.la);ti(e,"RID","rpc"),ti(e,"SID",t.J),ti(e,"CI",t.H?"0":"1"),ti(e,"AID",t.P),Qi(t,e),ti(e,"TYPE","xmlhttp"),t.i&&t.l&&qi(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ei(Yr(e)),n.j=null,n.I=!0,Rr(n,t)}function no(t){null!=t.m&&(we.clearTimeout(t.m),t.m=null)}function ro(t,e){var n=null;if(t.a==e){no(t),to(t),t.a=null;var r=2}else{if(!Ii(t.b,e))return;n=e.s,_i(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=xe()-e.u;var i=t.u;Fn(r=lr(),new gr(r,n,e,i)),Wi(t)}else Xi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(wi(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=mr(Oe(t.Ba,t,e),io(t,t.u)),t.u++,0)))}(t,e)||2==r&&Zi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:oo(t,5);break;case 4:oo(t,10);break;case 3:oo(t,6);break;default:oo(t,2)}}function io(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function oo(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Oe(t.Ya,t);n||(n=new Wr("//www.google.com/images/cleardot.gif"),we.location&&"http"==we.location.protocol||Qr(n,"https"),ei(n)),function(t,e){var n=new ar;if(we.Image){var r=new Image;r.onload=ke(Oi,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ke(Oi,n,r,"TestLoadImage: error",!1,e),r.onabort=ke(Oi,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ke(Oi,n,r,"TestLoadImage: timeout",!1,e),we.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else yr(2);t.v=0,t.f&&t.f.ra(e),so(t),Hi(t)}function so(t){t.v=0,t.I=-1,t.f&&(0==Ti(t.b).length&&0==t.g.length||(t.b.c.length=0,Ue(t.g),t.g.length=0),t.f.qa())}function uo(t,e,n){var r=function(t){return t instanceof Wr?Yr(t):new Wr(t,void 0)}(n);if(""!=r.c)e&&Jr(r,e+"."+r.c),Xr(r,r.h);else{var i=we.location;r=function(t,e,n,r){var i=new Wr(null,void 0);return t&&Qr(i,t),e&&Jr(i,e),n&&Xr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ze(t.V,(function(t,e){ti(r,e,t)})),e=t.A,n=t.na,e&&n&&ti(r,e,n),ti(r,"VER",t.ha),Qi(t,r),r}function ao(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xi(t.Na)).F=t.C,e}function co(){}function ho(){if(Xe&&!(10<=Number(ln)))throw Error("Environmental error: no available transport.")}function fo(t,e){jn.call(this),this.a=new Gi(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ve(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ve(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new vo(this)}function lo(t){Nr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function po(){Sr.call(this),this.status=1}function vo(t){this.a=t}(ge=xi.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Er(this.H):Er(Tr),this.a.onreadystatechange=Oe(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Li(this,t)}t=n||"";var i=new zr(this.headers);r&&Gr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Ri,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=we.FormData&&t instanceof we.FormData,!(0<=Ce(Ci,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ji(this),0<this.o&&((this.D=function(t){return Xe&&hn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Oe(this.xa,this)):this.m=er(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Li(this,t)}},ge.xa=function(){void 0!==be&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Fn(this,"timeout"),this.abort(8))},ge.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Fn(this,"complete"),Fn(this,"abort"),Mi(this))},ge.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Mi(this,!0)),xi.X.G.call(this)},ge.za=function(){this.j||(this.A||this.l||this.g?Vi(this):this.Ua())},ge.Ua=function(){Vi(this)},ge.W=function(){try{return 2<Fi(this)?this.a.status:-1}catch(t){return-1}},ge.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ge.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ki(e)}},ge.ua=function(){return this.h},ge.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ge=Gi.prototype).ha=8,ge.v=1,ge.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new kr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ke(r=$e(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ji(this,n,e),ti(i=Yr(this.B),"RID",t),ti(i,"CVER",22),this.A&&ti(i,"X-HTTP-Session-Id",this.A),Qi(this,i),this.i&&r&&qi(i,this.i,r),Ei(this.b,n),this.Ia&&ti(i,"TYPE","init"),this.da?(ti(i,"$req",e),ti(i,"SID","null"),n.U=!0,Cr(n,i,null)):Cr(n,i,e),this.v=2}}else 3==this.v&&(t?Yi(this,t):0==this.g.length||bi(this.b)||Yi(this))},ge.Aa=function(){if(this.j=null,eo(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=mr(Oe(this.Ta,this),t)}},ge.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,yr(10),$i(this),eo(this))},ge.Sa=function(){null!=this.m&&(this.m=null,$i(this),Zi(this),yr(19))},ge.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),yr(2)):(this.c.info("Failed to ping google.com"),yr(1))},(ge=co.prototype).ta=function(){},ge.sa=function(){},ge.ra=function(){},ge.qa=function(){},ge.Ja=function(){},ho.prototype.a=function(t,e){return new fo(t,e)},De(fo,jn),fo.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;yr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=uo(t,null,t.fa),Wi(t)},fo.prototype.close=function(){zi(this.a)},fo.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Ki(this.a,e)}else this.l?((e={}).__data__=Bn(t),Ki(this.a,e)):Ki(this.a,t)},fo.prototype.G=function(){this.a.f=null,delete this.f,zi(this.a),delete this.a,fo.X.G.call(this)},De(lo,Nr),De(po,Sr),De(vo,co),vo.prototype.ta=function(){Fn(this.a,"a")},vo.prototype.sa=function(t){Fn(this.a,new lo(t))},vo.prototype.ra=function(t){Fn(this.a,new po(t))},vo.prototype.qa=function(){Fn(this.a,"b")},ho.prototype.createWebChannel=ho.prototype.a,fo.prototype.send=fo.prototype.h,fo.prototype.open=fo.prototype.g,fo.prototype.close=fo.prototype.close,br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,wr.COMPLETE="complete",_r.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",jn.prototype.listen=jn.prototype.va,xi.prototype.listenOnce=xi.prototype.wa,xi.prototype.getLastError=xi.prototype.Qa,xi.prototype.getLastErrorCode=xi.prototype.ua,xi.prototype.getStatus=xi.prototype.W,xi.prototype.getResponseJson=xi.prototype.Pa,xi.prototype.getResponseText=xi.prototype.$,xi.prototype.send=xi.prototype.ba;var yo=br,go=wr,mo=hr,bo=10,wo=11,Io=_r,Eo=xi,_o=new Zt("@firebase/firestore");function To(){return _o.logLevel}function Ao(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(_o.logLevel<=Ht.DEBUG){var r=e.map(Oo);_o.debug.apply(_o,St(["Firestore (8.2.0): "+t],r))}}function No(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(_o.logLevel<=Ht.ERROR){var r=e.map(Oo);_o.error.apply(_o,St(["Firestore (8.2.0): "+t],r))}}function So(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(_o.logLevel<=Ht.WARN){var r=e.map(Oo);_o.warn.apply(_o,St(["Firestore (8.2.0): "+t],r))}}function Oo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ko(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.0) INTERNAL ASSERTION FAILED: "+t;throw No(e),new Error(e)}function xo(t,e){t||ko()}function Do(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Po(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Co=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Po(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ro(t,e){return t<e?-1:t>e?1:0}function Lo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Uo(t){return t+"\0"}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vo=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return Ro(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Vo.h=new Vo("");var Mo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return wt(e,t),e}(Error),Fo=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Vo.fromBase64String(e))}catch(e){throw new jo(Mo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Vo.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),qo=function(t){this._=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bo(){if("undefined"==typeof Uint8Array)throw new jo(Mo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Go(){if("undefined"==typeof atob)throw new jo(Mo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var zo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.fromBase64String=function(t){return Go(),new e(Fo.fromBase64String(t))},e.fromUint8Array=function(t){return Bo(),new e(Fo.fromUint8Array(t))},e.prototype.toBase64=function(){return Go(),this._.toBase64()},e.prototype.toUint8Array=function(){return Bo(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(qo),$o=function(){function t(t){this.uid=t}return t.prototype.T=function(){return null!=this.uid},t.prototype.I=function(){return this.T()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */$o.UNAUTHENTICATED=new $o(null),$o.m=new $o("google-credentials-uid"),$o.A=new $o("first-party-uid");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Ho=function(t,e){this.user=e,this.type="OAuth",this.R={},this.R.Authorization="Bearer "+t},Ko=function(){function t(){this.P=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.g=function(){},t.prototype.V=function(t){this.P=t,t($o.UNAUTHENTICATED)},t.prototype.p=function(){this.P=null},t}(),Wo=function(){function t(t){var e=this;this.v=null,this.currentUser=$o.UNAUTHENTICATED,this.S=!1,this.D=0,this.P=null,this.forceRefresh=!1,this.v=function(){e.D++,e.currentUser=e.C(),e.S=!0,e.P&&e.P(e.currentUser)},this.D=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.v):(this.v(null),t.get().then((function(t){e.auth=t,e.v&&e.auth.addAuthTokenListener(e.v)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.D,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.D!==e?(Ao("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(xo("string"==typeof n.accessToken),new Ho(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.g=function(){this.forceRefresh=!0},t.prototype.V=function(t){this.P=t,this.S&&t(this.currentUser)},t.prototype.p=function(){this.auth&&this.auth.removeAuthTokenListener(this.v),this.v=null,this.P=null},t.prototype.C=function(){var t=this.auth&&this.auth.getUid();return xo(null===t||"string"==typeof t),new $o(t)},t}(),Yo=function(){function t(t,e){this.N=t,this.F=e,this.type="FirstParty",this.user=$o.A}return Object.defineProperty(t.prototype,"R",{get:function(){var t={"X-Goog-AuthUser":this.F},e=this.N.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Qo=function(){function t(t,e){this.N=t,this.F=e}return t.prototype.getToken=function(){return Promise.resolve(new Yo(this.N,this.F))},t.prototype.V=function(t){t($o.A)},t.prototype.p=function(){},t.prototype.g=function(){},t}(),Jo=function(t,e,n,r,i,o){this.O=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.k=o},Xo=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"M",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Zo=function(){function t(){}return t.prototype.L=function(t){},t.prototype.$=function(){},t}(),ts=function(){function t(){var t=this;this.B=function(){return t.q()},this.U=function(){return t.K()},this.W=[],this.j()}return t.prototype.L=function(t){this.W.push(t)},t.prototype.$=function(){window.removeEventListener("online",this.B),window.removeEventListener("offline",this.U)},t.prototype.j=function(){window.addEventListener("online",this.B),window.addEventListener("offline",this.U)},t.prototype.q=function(){Ao("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(0)},t.prototype.K=function(){Ao("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(1)},t.G=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function es(t){return null==t}function ns(t){return 0===t&&1/t==-1/0}function rs(t){return"number"==typeof t&&Number.isInteger(t)&&!ns(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var is,os,ss={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function us(t){switch(t){case Mo.OK:return ko();case Mo.CANCELLED:case Mo.UNKNOWN:case Mo.DEADLINE_EXCEEDED:case Mo.RESOURCE_EXHAUSTED:case Mo.INTERNAL:case Mo.UNAVAILABLE:case Mo.UNAUTHENTICATED:return!1;case Mo.INVALID_ARGUMENT:case Mo.NOT_FOUND:case Mo.ALREADY_EXISTS:case Mo.PERMISSION_DENIED:case Mo.FAILED_PRECONDITION:case Mo.ABORTED:case Mo.OUT_OF_RANGE:case Mo.UNIMPLEMENTED:case Mo.DATA_LOSS:return!0;default:return ko()}}function as(t){if(void 0===t)return No("GRPC error has no .code"),Mo.UNKNOWN;switch(t){case is.OK:return Mo.OK;case is.CANCELLED:return Mo.CANCELLED;case is.UNKNOWN:return Mo.UNKNOWN;case is.DEADLINE_EXCEEDED:return Mo.DEADLINE_EXCEEDED;case is.RESOURCE_EXHAUSTED:return Mo.RESOURCE_EXHAUSTED;case is.INTERNAL:return Mo.INTERNAL;case is.UNAVAILABLE:return Mo.UNAVAILABLE;case is.UNAUTHENTICATED:return Mo.UNAUTHENTICATED;case is.INVALID_ARGUMENT:return Mo.INVALID_ARGUMENT;case is.NOT_FOUND:return Mo.NOT_FOUND;case is.ALREADY_EXISTS:return Mo.ALREADY_EXISTS;case is.PERMISSION_DENIED:return Mo.PERMISSION_DENIED;case is.FAILED_PRECONDITION:return Mo.FAILED_PRECONDITION;case is.ABORTED:return Mo.ABORTED;case is.OUT_OF_RANGE:return Mo.OUT_OF_RANGE;case is.UNIMPLEMENTED:return Mo.UNIMPLEMENTED;case is.DATA_LOSS:return Mo.DATA_LOSS;default:return ko()}}(os=is||(is={}))[os.OK=0]="OK",os[os.CANCELLED=1]="CANCELLED",os[os.UNKNOWN=2]="UNKNOWN",os[os.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",os[os.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",os[os.NOT_FOUND=5]="NOT_FOUND",os[os.ALREADY_EXISTS=6]="ALREADY_EXISTS",os[os.PERMISSION_DENIED=7]="PERMISSION_DENIED",os[os.UNAUTHENTICATED=16]="UNAUTHENTICATED",os[os.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",os[os.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",os[os.ABORTED=10]="ABORTED",os[os.OUT_OF_RANGE=11]="OUT_OF_RANGE",os[os.UNIMPLEMENTED=12]="UNIMPLEMENTED",os[os.INTERNAL=13]="INTERNAL",os[os.UNAVAILABLE=14]="UNAVAILABLE",os[os.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var cs=function(){function t(t){this.H=t.H,this.J=t.J}return t.prototype.Y=function(t){this.X=t},t.prototype.Z=function(t){this.tt=t},t.prototype.onMessage=function(t){this.et=t},t.prototype.close=function(){this.J()},t.prototype.send=function(t){this.H(t)},t.prototype.nt=function(){this.X()},t.prototype.st=function(t){this.tt(t)},t.prototype.it=function(t){this.et(t)},t}(),hs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},fs=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.k=e.k,n}return wt(e,t),e.prototype.lt=function(t,e,n,r){return new Promise((function(i,o){var s=new Eo;s.listenOnce(go.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case yo.NO_ERROR:var e=s.getResponseJson();Ao("Connection","XHR received:",JSON.stringify(e)),i(e);break;case yo.TIMEOUT:Ao("Connection",'RPC "'+t+'" timed out'),o(new jo(Mo.DEADLINE_EXCEEDED,"Request time out"));break;case yo.HTTP_ERROR:var n=s.getStatus();if(Ao("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Mo).indexOf(e)>=0?e:Mo.UNKNOWN}(r.status);o(new jo(u,r.message))}else o(new jo(Mo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new jo(Mo.UNAVAILABLE,"Connection failed."));break;default:ko()}}finally{Ao("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.ft=function(t,e){var n,r=[this.ot,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new ho,o=lr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.O.projectId+"/databases/"+this.O.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.k};this.ht(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())||"object"==typeof navigator&&"ReactNative"===navigator.product||xt().indexOf("Electron/")>=0||function(){var t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||xt().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Ao("Connection","Creating WebChannel: "+u,s);var a=i.createWebChannel(u,s),c=!1,h=!1,f=new cs({H:function(t){h?Ao("Connection","Not sending because WebChannel is closed:",t):(c||(Ao("Connection","Opening WebChannel transport."),a.open(),c=!0),Ao("Connection","WebChannel sending:",t),a.send(t))},J:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,Io.EventType.OPEN,(function(){h||Ao("Connection","WebChannel transport opened.")})),l(a,Io.EventType.CLOSE,(function(){h||(h=!0,Ao("Connection","WebChannel transport closed"),f.st())})),l(a,Io.EventType.ERROR,(function(t){h||(h=!0,So("Connection","WebChannel transport errored:",t),f.st(new jo(Mo.UNAVAILABLE,"The operation could not be completed")))})),l(a,Io.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];xo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ao("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=is[t];if(void 0!==e)return as(e)}(o),u=i.message;void 0===s&&(s=Mo.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),h=!0,f.st(new jo(s,u)),a.close()}else Ao("Connection","WebChannel received:",n),f.it(n)}})),l(o,mo.STAT_EVENT,(function(t){t.stat===bo?Ao("Connection","Detected buffering proxy"):t.stat===wo&&Ao("Connection","Detected no buffering proxy")})),setTimeout((function(){f.nt()}),0),f},e}(function(){function t(t){this.rt=t,this.O=t.O;var e=t.ssl?"https":"http";this.ot=e+"://"+t.host,this.ct="projects/"+this.O.projectId+"/databases/"+this.O.database+"/documents"}return t.prototype.at=function(t,e,n,r){var i=this.ut(t,e);Ao("RestConnection","Sending: ",i,n);var o={};return this.ht(o,r),this.lt(t,i,o,n).then((function(t){return Ao("RestConnection","Received: ",t),t}),(function(e){throw So("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype._t=function(t,e,n,r){return this.at(t,e,n,r)},t.prototype.ht=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.0",t["Content-Type"]="text/plain",e)for(var n in e.R)e.R.hasOwnProperty(n)&&(t[n]=e.R[n])},t.prototype.ut=function(t,e){var n=ss[t];return this.ot+"/v1/"+e+":"+n},t}()),ls=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new jo(Mo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new jo(Mo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new jo(Mo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new jo(Mo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.dt=function(t){return this.seconds===t.seconds?Ro(this.nanoseconds,t.nanoseconds):Ro(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ps=function(){function t(t){this.timestamp=t}return t.wt=function(e){return new t(e)},t.min=function(){return new t(new ls(0,0))},t.prototype.u=function(t){return this.timestamp.dt(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.Et=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Tt=function(){return this.timestamp},t}(),ds=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ko(),void 0===n?n=t.length-e:n>t.length-e&&ko(),this.segments=t,this.offset=e,this.It=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.At(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Rt(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Pt=function(t){return t=void 0===t?1:t,this.Rt(this.segments,this.offset+t,this.length-t)},t.prototype.yt=function(){return this.Rt(this.segments,this.offset,this.length-1)},t.prototype.gt=function(){return this.segments[this.offset]},t.prototype.Vt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.bt=function(){return 0===this.length},t.prototype.vt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.St=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.Dt=function(){return this.segments.slice(this.offset,this.limit())},t.At=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.prototype.Ct=function(){return this.Dt().join("/")},e.prototype.toString=function(){return this.Ct()},e.xt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new jo(Mo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.Nt=function(){return new e([])},e}(ds),ys=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.Ft=function(t){return ys.test(t)},e.prototype.Ct=function(){return this.Dt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.Ft(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.Ct()},e.prototype.Ot=function(){return 1===this.length&&"__name__"===this.get(0)},e.kt=function(){return new e(["__name__"])},e.Mt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new jo(Mo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new jo(Mo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new jo(Mo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new jo(Mo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.Nt=function(){return new e([])},e}(ds),ms=function(){function t(t){this.path=t}return t.Lt=function(e){return new t(vs.xt(e))},t.$t=function(e){return new t(vs.xt(e).Pt(5))},t.prototype.Bt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===vs.At(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.At=function(t,e){return vs.At(t.path,e.path)},t.qt=function(t){return t.length%2==0},t.Ut=function(e){return new t(new vs(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bs(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ws(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Is(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Es=function(){function t(t){this.fields=t,t.sort(gs.At)}return t.prototype.Qt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].vt(t))return!0;return!1},t.prototype.isEqual=function(t){return Lo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),_s=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ts(t){if(xo(!!t),"string"==typeof t){var e=0,n=_s.exec(t);if(xo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:As(t.seconds),nanos:As(t.nanos)}}function As(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ns(t){return"string"==typeof t?Vo.fromBase64String(t):Vo.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ss(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Os(t){var e=t.mapValue.fields.__previous_value__;return Ss(e)?Os(e):e}function ks(t){var e=Ts(t.mapValue.fields.__local_write_time__.timestampValue);return new ls(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ss(t)?4:10:ko()}function Ds(t,e){var n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ks(t).isEqual(ks(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ts(t.timestampValue),r=Ts(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ns(t.bytesValue).isEqual(Ns(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return As(t.geoPointValue.latitude)===As(e.geoPointValue.latitude)&&As(t.geoPointValue.longitude)===As(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return As(t.integerValue)===As(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=As(t.doubleValue),r=As(e.doubleValue);return n===r?ns(n)===ns(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Lo(t.arrayValue.values||[],e.arrayValue.values||[],Ds);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(bs(n)!==bs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ds(n[i],r[i])))return!1;return!0}(t,e);default:return ko()}}function Ps(t,e){return void 0!==(t.values||[]).find((function(t){return Ds(t,e)}))}function Cs(t,e){var n=xs(t),r=xs(e);if(n!==r)return Ro(n,r);switch(n){case 0:return 0;case 1:return Ro(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=As(t.integerValue||t.doubleValue),r=As(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Rs(t.timestampValue,e.timestampValue);case 4:return Rs(ks(t),ks(e));case 5:return Ro(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ns(t),r=Ns(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ro(n[i],r[i]);if(0!==o)return o}return Ro(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ro(As(t.latitude),As(e.latitude));return 0!==n?n:Ro(As(t.longitude),As(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Cs(n[i],r[i]);if(o)return o}return Ro(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Ro(r[s],o[s]);if(0!==u)return u;var a=Cs(n[r[s]],i[o[s]]);if(0!==a)return a}return Ro(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ko()}}function Rs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ro(t,e);var n=Ts(t),r=Ts(e),i=Ro(n.seconds,r.seconds);return 0!==i?i:Ro(n.nanos,r.nanos)}function Ls(t){return Us(t)}function Us(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ts(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ns(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ms.$t(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Us(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Us(t.fields[o])}return e+"}"}(t.mapValue):ko();var e,n}function Vs(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.Ct()}}function Ms(t){return!!t&&"integerValue"in t}function js(t){return!!t&&"arrayValue"in t}function Fs(t){return!!t&&"nullValue"in t}function qs(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bs(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gs=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.bt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Bs(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.Vt()])||null},t.prototype.isEqual=function(t){return Ds(this.proto,t.proto)},t}(),zs=function(){function t(t){void 0===t&&(t=Gs.empty()),this.Kt=t,this.Wt=new Map}return t.prototype.set=function(t,e){return this.jt(t,e),this},t.prototype.delete=function(t){return this.jt(t,null),this},t.prototype.jt=function(t,e){for(var n=this.Wt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===xs(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.Vt(),e)},t.prototype.Gt=function(){var t=this.zt(gs.Nt(),this.Wt);return null!=t?new Gs(t):this.Kt},t.prototype.zt=function(t,e){var n=this,r=!1,i=this.Kt.field(t),o=Bs(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.zt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function $s(t){var e=[];return ws(t.fields||{},(function(t,n){var r=new gs([t]);if(Bs(n)){var i=$s(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Es(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Hs=function(t,e){this.key=t,this.version=e},Ks=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ht=r,o.Jt=!!i.Jt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return wt(e,t),e.prototype.field=function(t){return this.Ht.field(t)},e.prototype.data=function(){return this.Ht},e.prototype.Yt=function(){return this.Ht.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Jt===t.Jt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ht.isEqual(t.Ht)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ht.toString()+", {hasLocalMutations: "+this.Jt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Jt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Hs),Ws=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return wt(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Hs),Ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Hs),Qs=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Xt=null};function Js(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Qs(t,e,n,r,i,o,s)}function Xs(t){var e=Do(t);if(null===e.Xt){var n=e.path.Ct();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.Ct()+t.op.toString()+Ls(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.Ct()+t.dir}(t)})).join(","),es(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=fu(e.startAt)),e.endAt&&(n+="|ub:",n+=fu(e.endAt)),e.Xt=n}return e.Xt}function Zs(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!pu(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Ds(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vu(t.startAt,e.startAt)&&vu(t.endAt,e.endAt)}function tu(t){return ms.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var eu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return wt(e,t),e.create=function(t,n,r){return t.Ot()?"in"===n||"not-in"===n?this.Zt(t,n,r):new nu(t,n,r):"array-contains"===n?new su(t,r):"in"===n?new uu(t,r):"not-in"===n?new au(t,r):"array-contains-any"===n?new cu(t,r):new e(t,n,r)},e.Zt=function(t,e,n){return"in"===e?new ru(t,n):new iu(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.te(Cs(e,this.value)):null!==e&&xs(this.value)===xs(e)&&this.te(Cs(e,this.value))},e.prototype.te=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ko()}},e.prototype.ee=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),nu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ms.$t(r.referenceValue),i}return wt(e,t),e.prototype.matches=function(t){var e=ms.At(t.key,this.key);return this.te(e)},e}(eu),ru=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ou("in",n),r}return wt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(eu),iu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ou("not-in",n),r}return wt(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(eu);function ou(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ms.$t(t.referenceValue)}))}var su=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return wt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return js(e)&&Ps(e.arrayValue,this.value)},e}(eu),uu=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return wt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ps(this.value.arrayValue,e)},e}(eu),au=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return wt(e,t),e.prototype.matches=function(t){if(Ps(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Ps(this.value.arrayValue,e)},e}(eu),cu=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return wt(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!js(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ps(e.value.arrayValue,t)}))},e}(eu),hu=function(t,e){this.position=t,this.before=e};function fu(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ls(t)})).join(",")}var lu=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function pu(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function du(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.Ot()?ms.At(ms.$t(s.referenceValue),n.key):Cs(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function vu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ds(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var yu=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.ne=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.se=null,this.ie=null,this.startAt,this.endAt};function gu(t,e,n,r,i,o,s,u){return new yu(t,e,n,r,i,o,s,u)}function mu(t){return new yu(t)}function bu(t){return!es(t.limit)&&"F"===t.limitType}function wu(t){return!es(t.limit)&&"L"===t.limitType}function Iu(t){return t.ne.length>0?t.ne[0].field:null}function Eu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.ee())return r.field}return null}function _u(t){return null!==t.collectionGroup}function Tu(t){var e=Do(t);if(null===e.se){e.se=[];var n=Eu(e),r=Iu(e);if(null!==n&&null===r)n.Ot()||e.se.push(new lu(n)),e.se.push(new lu(gs.kt(),"asc"));else{for(var i=!1,o=0,s=e.ne;o<s.length;o++){var u=s[o];e.se.push(u),u.field.Ot()&&(i=!0)}if(!i){var a=e.ne.length>0?e.ne[e.ne.length-1].dir:"asc";e.se.push(new lu(gs.kt(),a))}}}return e.se}function Au(t){var e=Do(t);if(!e.ie)if("F"===e.limitType)e.ie=Js(e.path,e.collectionGroup,Tu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Tu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new lu(o.field,s))}var u=e.endAt?new hu(e.endAt.position,!e.endAt.before):null,a=e.startAt?new hu(e.startAt.position,!e.startAt.before):null;e.ie=Js(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.ie}function Nu(t,e,n){return new yu(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Su(t,e){return Zs(Au(t),Au(e))&&t.limitType===e.limitType}function Ou(t){return Xs(Au(t))+"|lt:"+t.limitType}function ku(t){return"Query(target="+function(t){var e=t.path.Ct();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.Ct()+" "+e.op+" "+Ls(e.value);var e})).join(", ")+"]"),es(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.Ct()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+fu(t.startAt)),t.endAt&&(e+=", endAt: "+fu(t.endAt)),"Target("+e+")"}(Au(t))+"; limitType="+t.limitType+")"}function xu(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.Bt(t.collectionGroup)&&t.path.vt(n):ms.qt(t.path)?t.path.isEqual(n):t.path.St(n)}(t,e)&&function(t,e){for(var n=0,r=t.ne;n<r.length;n++){var i=r[n];if(!i.field.Ot()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!du(t.startAt,Tu(t),e)||t.endAt&&du(t.endAt,Tu(t),e))}(t,e)}function Du(t){return function(e,n){for(var r=!1,i=0,o=Tu(t);i<o.length;i++){var s=o[i],u=Pu(s,e,n);if(0!==u)return u;r=r||s.field.Ot()}return 0}}function Pu(t,e,n){var r=t.field.Ot()?ms.At(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Cs(r,i):ko()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ko()}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ps.min()),void 0===o&&(o=ps.min()),void 0===s&&(s=Vo.h),this.target=t,this.targetId=e,this.re=n,this.sequenceNumber=r,this.oe=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.ce=function(e){return new t(this.target,this.targetId,this.re,e,this.oe,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ae=function(e,n){return new t(this.target,this.targetId,this.re,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ue=function(e){return new t(this.target,this.targetId,this.re,this.sequenceNumber,this.oe,e,this.resumeToken)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ru(t,e){if(t.he){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ns(e)?"-0":e}}function Lu(t){return{integerValue:""+t}}function Uu(t,e){return rs(e)?Lu(e):Ru(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vu=function(){this.le=void 0};function Mu(t,e,n){return t instanceof qu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Bu?Gu(t,e):t instanceof zu?$u(t,e):function(t,e){var n=Fu(t,e),r=Ku(n)+Ku(t._e);return Ms(n)&&Ms(t._e)?Lu(r):Ru(t.fe,r)}(t,e)}function ju(t,e,n){return t instanceof Bu?Gu(t,e):t instanceof zu?$u(t,e):n}function Fu(t,e){return t instanceof Hu?Ms(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var qu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e}(Vu),Bu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return wt(e,t),e}(Vu);function Gu(t,e){for(var n=Wu(e),r=function(t){n.some((function(e){return Ds(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var zu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return wt(e,t),e}(Vu);function $u(t,e){for(var n=Wu(e),r=function(t){n=n.filter((function(e){return!Ds(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Hu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).fe=e,r._e=n,r}return wt(e,t),e}(Vu);function Ku(t){return As(t.integerValue||t.doubleValue)}function Wu(t){return js(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Yu=function(t,e){this.field=t,this.transform=e},Qu=function(t,e){this.version=t,this.transformResults=e},Ju=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.de=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"we",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Xu(t,e){return void 0!==t.updateTime?e instanceof Ks&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Ks}var Zu=function(){};function ta(t,e,n){return t instanceof oa?function(t,e,n){var r=t.value;if(n.transformResults){var i=aa(t.fieldTransforms,e,n.transformResults);r=ha(t.fieldTransforms,r,i)}return new Ks(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof sa?function(t,e,n){if(!Xu(t.Ee,e))return new Ys(t.key,n.version);var r=ua(t,e,n.transformResults?aa(t.fieldTransforms,e,n.transformResults):[]);return new Ks(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Ws(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function ea(t,e,n,r){return t instanceof oa?function(t,e,n,r){if(!Xu(t.Ee,e))return e;var i=t.value;if(t.fieldTransforms){var o=ca(t.fieldTransforms,n,e,r);i=ha(t.fieldTransforms,i,o)}var s=ia(e);return new Ks(t.key,s,i,{Jt:!0})}(t,e,r,n):t instanceof sa?function(t,e,n,r){if(!Xu(t.Ee,e))return e;var i=ia(e),o=ua(t,e,ca(t.fieldTransforms,n,e,r));return new Ks(t.key,i,o,{Jt:!0})}(t,e,r,n):function(t,e){return Xu(t.Ee,e)?new Ws(t.key,ps.min()):e}(t,e)}function na(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Ks?e.field(o.field):void 0,u=Fu(o.transform,s||null);null!=u&&(n=null==n?(new zs).set(o.field,u):n.set(o.field,u))}return n?n.Gt():null}(t.fieldTransforms,e):null}function ra(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ee.isEqual(e.Ee)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Lo(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Bu&&e instanceof Bu||t instanceof zu&&e instanceof zu?Lo(t.elements,e.elements,Ds):t instanceof Hu&&e instanceof Hu?Ds(t._e,e._e):t instanceof qu&&e instanceof qu}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Te.isEqual(e.Te))}function ia(t){return t instanceof Ks?t.version:ps.min()}var oa=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Ee=r,o.fieldTransforms=i,o.type=0,o}return wt(e,t),e}(Zu),sa=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Te=r,s.Ee=i,s.fieldTransforms=o,s.type=1,s}return wt(e,t),e}(Zu);function ua(t,e,n){var r;return r=function(t,e){var n=new zs(e);return t.Te.fields.forEach((function(e){if(!e.bt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Gt()}(t,r=e instanceof Ks?e.data():Gs.empty()),ha(t.fieldTransforms,r,n)}function aa(t,e,n){var r=[];xo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof Ks&&(u=e.field(o.field)),r.push(ju(s,u,n[i]))}return r}function ca(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof Ks&&(c=n.field(u.field)),null===c&&r instanceof Ks&&(c=r.field(u.field)),i.push(Mu(a,c,e))}return i}function ha(t,e,n){for(var r=new zs(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Gt()}var fa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=2,r.fieldTransforms=[],r}return wt(e,t),e}(Zu),la=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=3,r.fieldTransforms=[],r}return wt(e,t),e}(Zu),pa=function(t){this.count=t},da=function(){function t(t,e){this.At=t,this.root=e||ya.EMPTY}return t.prototype.Ie=function(e,n){return new t(this.At,this.root.Ie(e,n,this.At).copy(null,null,ya.me,null,null))},t.prototype.remove=function(e){return new t(this.At,this.root.remove(e,this.At).copy(null,null,ya.me,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.bt();){var n=this.At(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.bt();){var r=this.At(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.bt=function(){return this.root.bt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Ae=function(){return this.root.Ae()},t.prototype.Re=function(){return this.root.Re()},t.prototype.Pe=function(t){return this.root.Pe(t)},t.prototype.forEach=function(t){this.Pe((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Pe((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ye=function(t){return this.root.ye(t)},t.prototype.ge=function(){return new va(this.root,null,this.At,!1)},t.prototype.Ve=function(t){return new va(this.root,t,this.At,!1)},t.prototype.pe=function(){return new va(this.root,null,this.At,!0)},t.prototype.be=function(t){return new va(this.root,t,this.At,!0)},t}(),va=function(){function t(t,e,n,r){this.ve=r,this.Se=[];for(var i=1;!t.bt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ve?t.left:t.right;else{if(0===i){this.Se.push(t);break}this.Se.push(t),t=this.ve?t.right:t.left}}return t.prototype.De=function(){var t=this.Se.pop(),e={key:t.key,value:t.value};if(this.ve)for(t=t.left;!t.bt();)this.Se.push(t),t=t.right;else for(t=t.right;!t.bt();)this.Se.push(t),t=t.left;return e},t.prototype.Ce=function(){return this.Se.length>0},t.prototype.xe=function(){if(0===this.Se.length)return null;var t=this.Se[this.Se.length-1];return{key:t.key,value:t.value}},t}(),ya=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.bt=function(){return!1},t.prototype.Pe=function(t){return this.left.Pe(t)||t(this.key,this.value)||this.right.Pe(t)},t.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},t.prototype.min=function(){return this.left.bt()?this:this.left.min()},t.prototype.Ae=function(){return this.min().key},t.prototype.Re=function(){return this.right.bt()?this.key:this.right.Re()},t.prototype.Ie=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ie(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ie(t,e,n))).Ne()},t.prototype.Fe=function(){if(this.left.bt())return t.EMPTY;var e=this;return e.left.Oe()||e.left.left.Oe()||(e=e.ke()),(e=e.copy(null,null,null,e.left.Fe(),null)).Ne()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.bt()||i.left.Oe()||i.left.left.Oe()||(i=i.ke()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Oe()&&(i=i.Me()),i.right.bt()||i.right.Oe()||i.right.left.Oe()||(i=i.Le()),0===n(e,i.key)){if(i.right.bt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Fe())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ne()},t.prototype.Oe=function(){return this.color},t.prototype.Ne=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.$e()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Me()),t.left.Oe()&&t.right.Oe()&&(t=t.Be()),t},t.prototype.ke=function(){var t=this.Be();return t.right.left.Oe()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Me())).$e()).Be()),t},t.prototype.Le=function(){var t=this.Be();return t.left.left.Oe()&&(t=(t=t.Me()).Be()),t},t.prototype.$e=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Me=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Be=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.qe=function(){var t=this.Ue();return Math.pow(2,t)<=this.size+1},t.prototype.Ue=function(){if(this.Oe()&&this.left.Oe())throw ko();if(this.right.Oe())throw ko();var t=this.left.Ue();if(t!==this.right.Ue())throw ko();return t+(this.Oe()?0:1)},t}();ya.EMPTY=null,ya.RED=!0,ya.me=!1,ya.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ko()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ko()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ko()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ko()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ko()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ie=function(t,e,n){return new ya(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.bt=function(){return!0},t.prototype.Pe=function(t){return!1},t.prototype.ye=function(t){return!1},t.prototype.Ae=function(){return null},t.prototype.Re=function(){return null},t.prototype.Oe=function(){return!1},t.prototype.qe=function(){return!0},t.prototype.Ue=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ga=function(){function t(t){this.At=t,this.data=new da(this.At)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Ae()},t.prototype.last=function(){return this.data.Re()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pe((function(e,n){return t(e),!1}))},t.prototype.Qe=function(t,e){for(var n=this.data.Ve(t[0]);n.Ce();){var r=n.De();if(this.At(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ke=function(t,e){var n;for(n=void 0!==e?this.data.Ve(e):this.data.ge();n.Ce();)if(!t(n.De().key))return},t.prototype.We=function(t){var e=this.data.Ve(t);return e.Ce()?e.De().key:null},t.prototype.ge=function(){return new ma(this.data.ge())},t.prototype.Ve=function(t){return new ma(this.data.Ve(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ie(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.bt=function(){return this.data.bt()},t.prototype.je=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ge(),r=e.data.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(0!==this.At(i,o))return!1}return!0},t.prototype.Dt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.At);return n.data=e,n},t}(),ma=function(){function t(t){this.Ge=t}return t.prototype.De=function(){return this.Ge.De().key},t.prototype.Ce=function(){return this.Ge.Ce()},t}(),ba=new da(ms.At);function wa(){return ba}function Ia(){return wa()}var Ea=new da(ms.At);function _a(){return Ea}var Ta=new da(ms.At);var Aa=new ga(ms.At);function Na(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Aa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Sa=new ga(Ro);function Oa(){return Sa}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ka=function(){function t(t){this.At=t?function(e,n){return t(e,n)||ms.At(e.key,n.key)}:function(t,e){return ms.At(t.key,e.key)},this.ze=_a(),this.He=new da(this.At)}return t.Je=function(e){return new t(e.At)},t.prototype.has=function(t){return null!=this.ze.get(t)},t.prototype.get=function(t){return this.ze.get(t)},t.prototype.first=function(){return this.He.Ae()},t.prototype.last=function(){return this.He.Re()},t.prototype.bt=function(){return this.He.bt()},t.prototype.indexOf=function(t){var e=this.ze.get(t);return e?this.He.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.He.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.He.Pe((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ze.Ie(t.key,t),e.He.Ie(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ze.remove(t),this.He.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.He.ge(),r=e.He.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.At=this.At,r.ze=e,r.He=n,r},t}(),xa=function(){function t(){this.Ye=new da(ms.At)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Ye.get(e);n?0!==t.type&&3===n.type?this.Ye=this.Ye.Ie(e,t):3===t.type&&1!==n.type?this.Ye=this.Ye.Ie(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ye=this.Ye.Ie(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ye=this.Ye.remove(e):1===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):ko():this.Ye=this.Ye.Ie(e,t)},t.prototype.Xe=function(){var t=[];return this.Ye.Pe((function(e,n){t.push(n)})),t},t}(),Da=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Ze=n,this.docChanges=r,this.tn=i,this.fromCache=o,this.en=s,this.nn=u}return t.sn=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ka.Je(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.tn.bt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.en===t.en&&this.tn.isEqual(t.tn)&&Su(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ze.isEqual(t.Ze)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Pa=function(){function t(t,e,n,r,i){this.oe=t,this.rn=e,this.on=n,this.cn=r,this.an=i}return t.un=function(e,n){var r=new Map;return r.set(e,Ca.hn(e,n)),new t(ps.min(),r,Oa(),wa(),Na())},t}(),Ca=function(){function t(t,e,n,r,i){this.resumeToken=t,this.ln=e,this._n=n,this.fn=r,this.dn=i}return t.hn=function(e,n){return new t(Vo.h,n,Na(),Na(),Na())},t}(),Ra=function(t,e,n,r){this.wn=t,this.removedTargetIds=e,this.key=n,this.En=r},La=function(t,e){this.targetId=t,this.Tn=e},Ua=function(t,e,n,r){void 0===n&&(n=Vo.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Va=function(){function t(){this.In=0,this.mn=Fa(),this.An=Vo.h,this.Rn=!1,this.Pn=!0}return Object.defineProperty(t.prototype,"ln",{get:function(){return this.Rn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.An},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yn",{get:function(){return 0!==this.In},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gn",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),t.prototype.Vn=function(t){t.o()>0&&(this.Pn=!0,this.An=t)},t.prototype.pn=function(){var t=Na(),e=Na(),n=Na();return this.mn.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ko()}})),new Ca(this.An,this.Rn,t,e,n)},t.prototype.bn=function(){this.Pn=!1,this.mn=Fa()},t.prototype.vn=function(t,e){this.Pn=!0,this.mn=this.mn.Ie(t,e)},t.prototype.Sn=function(t){this.Pn=!0,this.mn=this.mn.remove(t)},t.prototype.Dn=function(){this.In+=1},t.prototype.Cn=function(){this.In-=1},t.prototype.xn=function(){this.Pn=!0,this.Rn=!0},t}(),Ma=function(){function t(t){this.Nn=t,this.Fn=new Map,this.On=wa(),this.kn=ja(),this.Mn=new ga(Ro)}return t.prototype.Ln=function(t){for(var e=0,n=t.wn;e<n.length;e++){var r=n[e];t.En instanceof Ks?this.$n(r,t.En):t.En instanceof Ws&&this.Bn(r,t.key,t.En)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Bn(r,t.key,t.En)},t.prototype.qn=function(t){var e=this;this.Un(t,(function(n){var r=e.Qn(n);switch(t.state){case 0:e.Kn(n)&&r.Vn(t.resumeToken);break;case 1:r.Cn(),r.yn||r.bn(),r.Vn(t.resumeToken);break;case 2:r.Cn(),r.yn||e.removeTarget(n);break;case 3:e.Kn(n)&&(r.xn(),r.Vn(t.resumeToken));break;case 4:e.Kn(n)&&(e.Wn(n),r.Vn(t.resumeToken));break;default:ko()}}))},t.prototype.Un=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fn.forEach((function(t,r){n.Kn(r)&&e(r)}))},t.prototype.jn=function(t){var e=t.targetId,n=t.Tn.count,r=this.Gn(e);if(r){var i=r.target;if(tu(i))if(0===n){var o=new ms(i.path);this.Bn(e,o,new Ws(o,ps.min()))}else xo(1===n);else this.zn(e)!==n&&(this.Wn(e),this.Mn=this.Mn.add(e))}},t.prototype.Hn=function(t){var e=this,n=new Map;this.Fn.forEach((function(r,i){var o=e.Gn(i);if(o){if(r.ln&&tu(o.target)){var s=new ms(o.target.path);null!==e.On.get(s)||e.Jn(i,s)||e.Bn(i,s,new Ws(s,t))}r.gn&&(n.set(i,r.pn()),r.bn())}}));var r=Na();this.kn.forEach((function(t,n){var i=!0;n.Ke((function(t){var n=e.Gn(t);return!n||2===n.re||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Pa(t,n,this.Mn,this.On,r);return this.On=wa(),this.kn=ja(),this.Mn=new ga(Ro),i},t.prototype.$n=function(t,e){if(this.Kn(t)){var n=this.Jn(t,e.key)?2:0;this.Qn(t).vn(e.key,n),this.On=this.On.Ie(e.key,e),this.kn=this.kn.Ie(e.key,this.Yn(e.key).add(t))}},t.prototype.Bn=function(t,e,n){if(this.Kn(t)){var r=this.Qn(t);this.Jn(t,e)?r.vn(e,1):r.Sn(e),this.kn=this.kn.Ie(e,this.Yn(e).delete(t)),n&&(this.On=this.On.Ie(e,n))}},t.prototype.removeTarget=function(t){this.Fn.delete(t)},t.prototype.zn=function(t){var e=this.Qn(t).pn();return this.Nn.Xn(t).size+e._n.size-e.dn.size},t.prototype.Dn=function(t){this.Qn(t).Dn()},t.prototype.Qn=function(t){var e=this.Fn.get(t);return e||(e=new Va,this.Fn.set(t,e)),e},t.prototype.Yn=function(t){var e=this.kn.get(t);return e||(e=new ga(Ro),this.kn=this.kn.Ie(t,e)),e},t.prototype.Kn=function(t){var e=null!==this.Gn(t);return e||Ao("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Gn=function(t){var e=this.Fn.get(t);return e&&e.yn?null:this.Nn.Zn(t)},t.prototype.Wn=function(t){var e=this;this.Fn.set(t,new Va),this.Nn.Xn(t).forEach((function(n){e.Bn(t,n,null)}))},t.prototype.Jn=function(t,e){return this.Nn.Xn(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ja(){return new da(ms.At)}function Fa(){return new da(ms.At)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qa={asc:"ASCENDING",desc:"DESCENDING"},Ba={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ga=function(t,e){this.O=t,this.he=e};function za(t,e){return t.he?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function $a(t,e){return t.he?e.toBase64():e.toUint8Array()}function Ha(t,e){return za(t,e.Tt())}function Ka(t){return xo(!!t),ps.wt(function(t){var e=Ts(t);return new ls(e.seconds,e.nanos)}(t))}function Wa(t,e){return function(t){return new vs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).Ct()}function Ya(t){var e=vs.xt(t);return xo(mc(e)),e}function Qa(t,e){return Wa(t.O,e.path)}function Ja(t,e){var n=Ya(e);if(n.get(1)!==t.O.projectId)throw new jo(Mo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.O.projectId);if(n.get(3)!==t.O.database)throw new jo(Mo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.O.database);return new ms(ec(n))}function Xa(t,e){return Wa(t.O,e)}function Za(t){var e=Ya(t);return 4===e.length?vs.Nt():ec(e)}function tc(t){return new vs(["projects",t.O.projectId,"databases",t.O.database]).Ct()}function ec(t){return xo(t.length>4&&"documents"===t.get(4)),t.Pt(5)}function nc(t,e,n){return{name:Qa(t,e),fields:n.proto.mapValue.fields}}function rc(t,e){var n;if(e instanceof oa)n={update:nc(t,e.key,e.value)};else if(e instanceof fa)n={delete:Qa(t,e.key)};else if(e instanceof sa)n={update:nc(t,e.key,e.data),updateMask:gc(e.Te)};else{if(!(e instanceof la))return ko();n={verify:Qa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof qu)return{fieldPath:e.field.Ct(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bu)return{fieldPath:e.field.Ct(),appendMissingElements:{values:n.elements}};if(n instanceof zu)return{fieldPath:e.field.Ct(),removeAllFromArray:{values:n.elements}};if(n instanceof Hu)return{fieldPath:e.field.Ct(),increment:n._e};throw ko()}(0,t)}))),e.Ee.we||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ha(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ko()}(t,e.Ee)),n}function ic(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ju.updateTime(Ka(t.updateTime)):void 0!==t.exists?Ju.exists(t.exists):Ju.de()}(e.currentDocument):Ju.de(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)xo("REQUEST_TIME"===e.setToServerValue),n=new qu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Bu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new zu(i)}else"increment"in e?n=new Hu(t,e.increment):ko();var o=gs.Mt(e.fieldPath);return new Yu(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ja(t,e.update.name),o=new Gs({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Es(e.map((function(t){return gs.Mt(t)})))}(e.updateMask);return new sa(i,o,s,n,r)}return new oa(i,o,n,r)}if(e.delete){var u=Ja(t,e.delete);return new fa(u,n)}if(e.verify){var a=Ja(t,e.verify);return new la(a,n)}return ko()}function oc(t,e){return{documents:[Xa(t,e.path)]}}function sc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Xa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Xa(t,r.yt()),n.structuredQuery.from=[{collectionId:r.Vt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(qs(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NAN"}};if(Fs(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qs(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NOT_NAN"}};if(Fs(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pc(t.field),op:lc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:pc(t.field),direction:fc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.he||es(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=cc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=cc(e.endAt)),n}function uc(t){var e=Za(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){xo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=ac(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new lu(dc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return es(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=hc(n.startAt));var h=null;return n.endAt&&(h=hc(n.endAt)),gu(e,i,u,s,a,"F",c,h)}function ac(t){return t?void 0!==t.unaryFilter?[yc(t)]:void 0!==t.fieldFilter?[vc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return ac(t)})).reduce((function(t,e){return t.concat(e)})):ko():[]}function cc(t){return{before:t.before,values:t.position}}function hc(t){var e=!!t.before,n=t.values||[];return new hu(n,e)}function fc(t){return qa[t]}function lc(t){return Ba[t]}function pc(t){return{fieldPath:t.Ct()}}function dc(t){return gs.Mt(t.fieldPath)}function vc(t){return eu.create(dc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ko()}}(t.fieldFilter.op),t.fieldFilter.value)}function yc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=dc(t.unaryFilter.field);return eu.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=dc(t.unaryFilter.field);return eu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=dc(t.unaryFilter.field);return eu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=dc(t.unaryFilter.field);return eu.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ko()}}function gc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.Ct())})),{fieldPaths:e}}function mc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bc(t){return new Ga(t,!0)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wc=function(){function t(t){var e=this;this.ts=null,this.es=null,this.result=void 0,this.error=void 0,this.ns=!1,this.ss=!1,t((function(t){e.ns=!0,e.result=t,e.ts&&e.ts(t)}),(function(t){e.ns=!0,e.error=t,e.es&&e.es(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.ss&&ko(),this.ss=!0,this.ns?this.error?this.rs(n,this.error):this.os(e,this.result):new t((function(t,i){r.ts=function(n){r.os(e,n).next(t,i)},r.es=function(e){r.rs(n,e).next(t,i)}}))},t.prototype.cs=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.us=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.os=function(e,n){return e?this.us((function(){return e(n)})):t.resolve(n)},t.prototype.rs=function(e,n){return e?this.us((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.hs=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.ls=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.hs(r)},t}(),Ic=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this._s=new hs,this.transaction.oncomplete=function(){n._s.resolve()},this.transaction.onabort=function(){e.error?n._s.reject(new Tc(t,e.error)):n._s.resolve()},this.transaction.onerror=function(e){var r=kc(e.target.error);n._s.reject(new Tc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Tc(n,e)}},Object.defineProperty(t.prototype,"fs",{get:function(){return this._s.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(Ao("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Nc(e)},t}(),Ec=function(){function t(e,n,r){this.name=e,this.version=n,this.ds=r,12.2===t.ws(xt())&&No("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ao("SimpleDb","Removing database:",t),Sc(window.indexedDB.deleteDatabase(t)).cs()},t.G=function(){if("undefined"==typeof indexedDB)return!1;if(t.Es())return!0;var e=xt(),n=t.ws(e),r=0<n&&n<10,i=t.Ts(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Es=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Is)},t.As=function(t,e){return t.store(e)},t.ws=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ts=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Rs=function(t){return Et(this,void 0,void 0,(function(){var e,n=this;return _t(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ao("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Tc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new jo(Mo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Tc(t,n))},i.onupgradeneeded=function(t){Ao("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.ds.Ps(e,i.transaction,t.oldVersion,n.version).next((function(){Ao("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.ys&&(this.db.onversionchange=function(t){return n.ys(t)}),this.db)]}}))}))},t.prototype.gs=function(t){this.ys=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o,s,u,a;return _t(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return _t(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Rs(t)];case 2:return u.db=f.sent(),e=Ic.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),wc.reject(t)})).cs(),a={},s.catch((function(){})),[4,e.fs];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,Ao("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),_c=function(){function t(t){this.Vs=t,this.ps=!1,this.bs=null}return Object.defineProperty(t.prototype,"ns",{get:function(){return this.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vs",{get:function(){return this.bs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Vs=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ps=!0},t.prototype.Ss=function(t){this.bs=t},t.prototype.delete=function(){return Sc(this.Vs.delete())},t}(),Tc=function(t){function e(e,n){var r=this;return(r=t.call(this,Mo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return wt(e,t),e}(jo);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ac(t){return"IndexedDbTransactionError"===t.name}var Nc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ao("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ao("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Sc(n)},t.prototype.add=function(t){return Ao("SimpleDb","ADD",this.store.name,t,t),Sc(this.store.add(t))},t.prototype.get=function(t){var e=this;return Sc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ao("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ao("SimpleDb","DELETE",this.store.name,t),Sc(this.store.delete(t))},t.prototype.count=function(){return Ao("SimpleDb","COUNT",this.store.name),Sc(this.store.count())},t.prototype.Ds=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.xs=function(t,e){Ao("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ns=!1;var r=this.cursor(n);return this.Cs(r,(function(t,e,n){return n.delete()}))},t.prototype.Fs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Cs(r,e)},t.prototype.Os=function(t){var e=this.cursor({});return new wc((function(n,r){e.onerror=function(t){var e=kc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Cs=function(t,e){var n=[];return new wc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new _c(i),s=e(i.primaryKey,i.value,o);if(s instanceof wc){var u=s.catch((function(t){return o.done(),wc.reject(t)}));n.push(u)}o.ns?r():null===o.vs?i.continue():i.continue(o.vs)}else r()}})).next((function(){return wc.hs(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ns?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Sc(t){return new wc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=kc(t.target.error);n(e)}}))}var Oc=!1;function kc(t){var e=Ec.ws(xt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new jo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Oc||(Oc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xc=function(){function t(t,e,n,r,i){this.ks=t,this.Ms=e,this.Ls=n,this.op=r,this.$s=i,this.Bs=new hs,this.then=this.Bs.promise.then.bind(this.Bs.promise),this.Bs.promise.catch((function(t){}))}return t.qs=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Us=setTimeout((function(){return e.Qs()}),t)},t.prototype.Ks=function(){return this.Qs()},t.prototype.cancel=function(t){null!==this.Us&&(this.clearTimeout(),this.Bs.reject(new jo(Mo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Qs=function(){var t=this;this.ks.Ws((function(){return null!==t.Us?(t.clearTimeout(),t.op().then((function(e){return t.Bs.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Us&&(this.$s(this),clearTimeout(this.Us),this.Us=null)},t}();function Dc(t,e){if(No("AsyncQueue",e+": "+t),Ac(t))return new jo(Mo.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Pc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.js=t,this.Ms=e,this.Gs=n,this.zs=r,this.Hs=i,this.Js=0,this.Ys=null,this.Xs=Date.now(),this.reset()}return t.prototype.reset=function(){this.Js=0},t.prototype.Zs=function(){this.Js=this.Hs},t.prototype.ti=function(t){var e=this;this.cancel();var n=Math.floor(this.Js+this.ei()),r=Math.max(0,Date.now()-this.Xs),i=Math.max(0,n-r);i>0&&Ao("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Js+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ys=this.js.ni(this.Ms,i,(function(){return e.Xs=Date.now(),t()})),this.Js*=this.zs,this.Js<this.Gs&&(this.Js=this.Gs),this.Js>this.Hs&&(this.Js=this.Hs)},t.prototype.si=function(){null!==this.Ys&&(this.Ys.Ks(),this.Ys=null)},t.prototype.cancel=function(){null!==this.Ys&&(this.Ys.cancel(),this.Ys=null)},t.prototype.ei=function(){return(Math.random()-.5)*this.Js},t}(),Cc=function(){function t(t,e,n,r,i,o){this.js=t,this.ii=n,this.ri=r,this.oi=i,this.listener=o,this.state=0,this.ci=0,this.ai=null,this.stream=null,this.ui=new Pc(t,e)}return t.prototype.hi=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.li=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this._i()},t.prototype.stop=function(){return Et(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return this.hi()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.fi=function(){this.state=0,this.ui.reset()},t.prototype.di=function(){var t=this;this.li()&&null===this.ai&&(this.ai=this.js.ni(this.ii,6e4,(function(){return t.wi()})))},t.prototype.Ei=function(t){this.Ti(),this.stream.send(t)},t.prototype.wi=function(){return Et(this,void 0,void 0,(function(){return _t(this,(function(t){return this.li()?[2,this.close(0)]:[2]}))}))},t.prototype.Ti=function(){this.ai&&(this.ai.cancel(),this.ai=null)},t.prototype.close=function(t,e){return Et(this,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return this.Ti(),this.ui.cancel(),this.ci++,3!==t?this.ui.reset():e&&e.code===Mo.RESOURCE_EXHAUSTED?(No(e.toString()),No("Using maximum backoff delay to prevent overloading the backend."),this.ui.Zs()):e&&e.code===Mo.UNAUTHENTICATED&&this.oi.g(),null!==this.stream&&(this.Ii(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Z(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Ii=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.mi(this.ci),n=this.ci;this.oi.getToken().then((function(e){t.ci===n&&t.Ai(e)}),(function(n){e((function(){var e=new jo(Mo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ri(e)}))}))},t.prototype.Ai=function(t){var e=this,n=this.mi(this.ci);this.stream=this.Pi(t),this.stream.Y((function(){n((function(){return e.state=2,e.listener.Y()}))})),this.stream.Z((function(t){n((function(){return e.Ri(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype._i=function(){var t=this;this.state=4,this.ui.ti((function(){return Et(t,void 0,void 0,(function(){return _t(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Ri=function(t){return Ao("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.mi=function(t){var e=this;return function(n){e.js.Ws((function(){return e.ci===t?n():(Ao("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Rc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).fe=i,s}return wt(e,t),e.prototype.Pi=function(t){return this.ri.ft("Listen",t)},e.prototype.onMessage=function(t){this.ui.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ko()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.he?(xo(void 0===e||"string"==typeof e),Vo.fromBase64String(e||"")):(xo(void 0===e||e instanceof Uint8Array),Vo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Mo.UNKNOWN:as(t.code);return new jo(e,t.message||"")}(u);n=new Ua(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ja(t,r.document.name),o=Ka(r.document.updateTime);var u=new Gs({mapValue:{fields:r.document.fields}}),a=(s=new Ks(i,o,u,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new Ra(a,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ja(t,r.document),o=r.readTime?Ka(r.readTime):ps.min(),u=new Ws(i,o),s=r.removedTargetIds||[],n=new Ra([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ja(t,r.document),o=r.removedTargetIds||[],n=new Ra([],o,i,null);else{if(!("filter"in e))return ko();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new pa(r),o=h.targetId,n=new La(o,i)}return n}(this.fe,t),n=function(t){if(!("targetChange"in t))return ps.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ps.min():e.readTime?Ka(e.readTime):ps.min()}(t);return this.listener.yi(e,n)},e.prototype.gi=function(t){var e={};e.database=tc(this.fe),e.addTarget=function(t,e){var n,r=e.target;return(n=tu(r)?{documents:oc(t,r)}:{query:sc(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=$a(t,e.resumeToken):e.oe.u(ps.min())>0&&(n.readTime=za(t,e.oe.Tt())),n}(this.fe,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ko()}}(0,e.re);return null==n?null:{"goog-listen-tags":n}}(this.fe,t);n&&(e.labels=n),this.Ei(e)},e.prototype.Vi=function(t){var e={};e.database=tc(this.fe),e.removeTarget=t,this.Ei(e)},e}(Cc),Lc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).fe=i,s.pi=!1,s}return wt(e,t),Object.defineProperty(e.prototype,"bi",{get:function(){return this.pi},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.pi=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Ii=function(){this.pi&&this.vi([])},e.prototype.Pi=function(t){return this.ri.ft("Write",t)},e.prototype.onMessage=function(t){if(xo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.pi){this.ui.reset();var e=function(t,e){return t&&t.length>0?(xo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Ka(t.updateTime):Ka(e);n.isEqual(ps.min())&&(n=Ka(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Qu(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ka(t.commitTime);return this.listener.Si(n,e)}return xo(!t.writeResults||0===t.writeResults.length),this.pi=!0,this.listener.Di()},e.prototype.Ci=function(){var t={};t.database=tc(this.fe),this.Ei(t)},e.prototype.vi=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return rc(e.fe,t)}))};this.Ei(n)},e}(Cc),Uc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.ri=n,i.fe=r,i.xi=!1,i}return wt(e,t),e.prototype.Ni=function(){if(this.xi)throw new jo(Mo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.at=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri.at(t,e,n,i)})).catch((function(t){throw t.code===Mo.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype._t=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri._t(t,e,n,i)})).catch((function(t){throw t.code===Mo.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype.terminate=function(){this.xi=!1},e}((function(){})),Vc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Mc=function(){function t(){this.Fi=[]}return t.prototype.Oi=function(t){this.Fi.push(t)},t.prototype.ki=function(){this.Fi.forEach((function(t){return t()}))},t}(),jc={Mi:!1,Li:0,$i:0,Bi:0},Fc=function(){function t(t,e,n){this.qi=t,this.Ui=e,this.Qi=n}return t.Ki=function(e){return new t(e,t.Wi,t.ji)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Fc.Wi=10,Fc.ji=1e3,Fc.Gi=new Fc(41943040,Fc.Wi,Fc.ji),Fc.zi=new Fc(-1,0,0);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var qc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Hi=function(t){return n.Ji(t)},this.Yi=function(t){return e.Xi(t)})}return t.prototype.Ji=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.Yi&&this.Yi(t),t},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bc(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){if(t.code!==Mo.FAILED_PRECONDITION||t.message!==Vc)throw t;return Ao("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */qc.Zi=-1;var Gc=function(){function t(t,e,n,r){this.batchId=t,this.er=e,this.baseMutations=n,this.mutations=r}return t.prototype.nr=function(t,e,n){for(var r=n.sr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=ta(o,e,r[i]))}return e},t.prototype.ir=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=ea(i,e,e,this.er))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=ea(a,e,o,this.er))}return e},t.prototype.rr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ir(r.key,t.get(r.key));i&&(n=n.Ie(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Na())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Lo(this.mutations,t.mutations,(function(t,e){return ra(t,e)}))&&Lo(this.baseMutations,t.baseMutations,(function(t,e){return ra(t,e)}))},t}(),zc=function(){function t(t,e,n,r){this.batch=t,this.cr=e,this.sr=n,this.ar=r}return t.from=function(e,n,r){xo(e.mutations.length===r.length);for(var i=Ta,o=e.mutations,s=0;s<o.length;s++)i=i.Ie(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),$c=function(){function t(t,e){this.ur=t,this.hr=e,this.lr={}}return t.prototype.get=function(t){var e=this.ur(t),n=this.lr[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.hr(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ur(t),r=this.lr[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.hr(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.lr[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ur(t),n=this.lr[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.hr(n[r][0],t))return 1===n.length?delete this.lr[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ws(this.lr,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.bt=function(){return Is(this.lr)},t}(),Hc=function(){function t(){this._r=new $c((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.dr=!1}return t.prototype.wr=function(t){var e=this._r.get(t);return e?e.readTime:ps.min()},t.prototype.Er=function(t,e){this.Tr(),this._r.set(t.key,{Ir:t,readTime:e})},t.prototype.mr=function(t,e){void 0===e&&(e=null),this.Tr(),this._r.set(t,{Ir:null,readTime:e})},t.prototype.Ar=function(t,e){this.Tr();var n=this._r.get(e);return void 0!==n?wc.resolve(n.Ir):this.Rr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Tr(),this.dr=!0,this.yr(t)},t.prototype.Tr=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Ro(n,i);return 0===s?Ro(r,o):s}var Wc=function(){function t(t){this.gr=t,this.buffer=new ga(Kc),this.Vr=0}return t.prototype.pr=function(){return++this.Vr},t.prototype.br=function(t){var e=[t,this.pr()];if(this.buffer.size<this.gr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Kc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Yc=function(){function t(t,e){this.vr=t,this.ks=e,this.Sr=!1,this.Dr=null}return t.prototype.start=function(t){-1!==this.vr.params.qi&&this.Cr(t)},t.prototype.stop=function(){this.Dr&&(this.Dr.cancel(),this.Dr=null)},Object.defineProperty(t.prototype,"Nr",{get:function(){return null!==this.Dr},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){var e=this,n=this.Sr?3e5:6e4;Ao("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Dr=this.ks.ni("lru_garbage_collection",n,(function(){return Et(e,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:this.Dr=null,this.Sr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Fr(this.vr)];case 2:return n.sent(),[3,7];case 3:return Ac(e=n.sent())?(Ao("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Bc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Cr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Qc=function(){function t(t,e){this.Or=t,this.params=e}return t.prototype.kr=function(t,e){return this.Or.Mr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Lr=function(t,e){var n=this;if(0===e)return wc.resolve(qc.Zi);var r=new Wc(e);return this.Or.Un(t,(function(t){return r.br(t.sequenceNumber)})).next((function(){return n.Or.$r(t,(function(t){return r.br(t)}))})).next((function(){return r.maxValue}))},t.prototype.Br=function(t,e,n){return this.Or.Br(t,e,n)},t.prototype.qr=function(t,e){return this.Or.qr(t,e)},t.prototype.Ur=function(t,e){var n=this;return-1===this.params.qi?(Ao("LruGarbageCollector","Garbage collection skipped; disabled"),wc.resolve(jc)):this.Qr(t).next((function(r){return r<n.params.qi?(Ao("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.qi),jc):n.Kr(t,e)}))},t.prototype.Qr=function(t){return this.Or.Qr(t)},t.prototype.Kr=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.kr(t,this.params.Ui).next((function(e){return e>c.params.Qi?(Ao("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Qi+" from "+e),r=c.params.Qi):r=e,o=Date.now(),c.Lr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Br(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.qr(t,n)})).next((function(t){return a=Date.now(),To()<=Ht.DEBUG&&Ao("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),wc.resolve({Mi:!0,Li:r,$i:i,Bi:t})}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jc(t,e,n){if(!n)throw new jo(Mo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Xc(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jo(Mo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zc(t,e,n,r){if(!0===e&&!0===r)throw new jo(Mo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function th(t){if(!ms.qt(t))throw new jo(Mo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function eh(t){if(ms.qt(t))throw new jo(Mo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function nh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ko()}function rh(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new jo(Mo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=nh(t);throw new jo(Mo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ih(t,e){if(e<=0)throw new jo(Mo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var oh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new jo(Mo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new jo(Mo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Zc("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),sh=new Map,uh=function(){function t(t,e){this.Wr="(lite)",this.jr=new oh({}),this.Gr=!1,t instanceof Xo?(this.zr=t,this.Hr=new Ko):(this.Jr=t,this.zr=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new jo(Mo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(t.options.projectId)}(t),this.Hr=new Wo(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Jr)throw new jo(Mo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Jr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yr",{get:function(){return this.Gr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xr",{get:function(){return void 0!==this.Zr},enumerable:!1,configurable:!0}),t.prototype.eo=function(t){if(this.Gr)throw new jo(Mo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.jr=new oh(t),void 0!==t.credentials&&(this.Hr=function(t){if(!t)return new Ko;switch(t.type){case"gapi":var e=t.client;return xo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Qo(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new jo(Mo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.no=function(){return this.jr},t.prototype.so=function(){return this.Gr=!0,this.jr},t.prototype._delete=function(){return this.Zr||(this.Zr=this.io()),this.Zr},t.prototype.io=function(){return this,(t=sh.get(this))&&(Ao("ComponentProvider","Removing Datastore"),sh.delete(this),t.terminate()),Promise.resolve();var t},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ah(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=hh(e)),e=ch(t.get(n),e);return hh(e)}function ch(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function hh(t){return t+""}function fh(t){var e=t.length;if(xo(e>=2),2===e)return xo(""===t.charAt(0)&&""===t.charAt(1)),vs.Nt();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ko(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ko()}o=s+2}return new vs(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var lh=function(t,e){this.seconds=t,this.nanoseconds=e},ph=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ph.store="owner",ph.key="owner";var dh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};dh.store="mutationQueues",dh.keyPath="userId";var vh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};vh.store="mutations",vh.keyPath="batchId",vh.userMutationsIndex="userMutationsIndex",vh.userMutationsKeyPath=["userId","batchId"];var yh=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ah(e)]},t.key=function(t,e,n){return[t,ah(e),n]},t}();yh.store="documentMutations",yh.PLACEHOLDER=new yh;var gh=function(t,e){this.path=t,this.readTime=e},mh=function(t,e){this.path=t,this.version=e},bh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};bh.store="remoteDocuments",bh.readTimeIndex="readTimeIndex",bh.readTimeIndexPath="readTime",bh.collectionReadTimeIndex="collectionReadTimeIndex",bh.collectionReadTimeIndexPath=["parentPath","readTime"];var wh=function(t){this.byteSize=t};wh.store="remoteDocumentGlobal",wh.key="remoteDocumentGlobalKey";var Ih=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ih.store="targets",Ih.keyPath="targetId",Ih.queryTargetsIndexName="queryTargetsIndex",Ih.queryTargetsKeyPath=["canonicalId","targetId"];var Eh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Eh.store="targetDocuments",Eh.keyPath=["targetId","path"],Eh.documentTargetsIndex="documentTargetsIndex",Eh.documentTargetsKeyPath=["path","targetId"];var _h=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};_h.key="targetGlobalKey",_h.store="targetGlobal";var Th=function(t,e){this.collectionId=t,this.parent=e};Th.store="collectionParents",Th.keyPath=["collectionId","parent"];var Ah=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ah.store="clientMetadata",Ah.keyPath="clientId";var Nh=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Nh.store="bundles",Nh.keyPath="bundleId";var Sh=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Sh.store="namedQueries",Sh.keyPath="name";var Oh=St(St(St(St([dh.store,vh.store,yh.store,bh.store,Ih.store,ph.store,_h.store,Eh.store],[Ah.store]),[wh.store]),[Th.store]),[Nh.store,Sh.store]),kh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ro=e,r.oo=n,r}return wt(e,t),e}(Mc);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xh(t,e){var n=Do(t);return Ec.As(n.ro,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dh=function(t){this.co=t};function Ph(t,e){if(e.document)return function(t,e,n){var r=Ja(t,e.name),i=Ka(e.updateTime),o=new Gs({mapValue:{fields:e.fields}});return new Ks(r,i,o,{hasCommittedMutations:!!n})}(t.co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ms.Ut(e.noDocument.path),r=Vh(e.noDocument.readTime);return new Ws(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ms.Ut(e.unknownDocument.path);return r=Vh(e.unknownDocument.version),new Ys(i,r)}return ko()}function Ch(t,e,n){var r=Rh(n),i=e.key.path.yt().Dt();if(e instanceof Ks){var o=function(t,e){return{name:Qa(t,e.key),fields:e.Yt().mapValue.fields,updateTime:za(t,e.version.Tt())}}(t.co,e),s=e.hasCommittedMutations;return new bh(null,null,o,s,r,i)}if(e instanceof Ws){var u=e.key.path.Dt(),a=Uh(e.version);return s=e.hasCommittedMutations,new bh(null,new gh(u,a),null,s,r,i)}if(e instanceof Ys){var c=e.key.path.Dt(),h=Uh(e.version);return new bh(new mh(c,h),null,null,!0,r,i)}return ko()}function Rh(t){var e=t.Tt();return[e.seconds,e.nanoseconds]}function Lh(t){var e=new ls(t[0],t[1]);return ps.wt(e)}function Uh(t){var e=t.Tt();return new lh(e.seconds,e.nanoseconds)}function Vh(t){var e=new ls(t.seconds,t.nanoseconds);return ps.wt(e)}function Mh(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ic(t.co,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return ic(t.co,e)})),s=ls.fromMillis(e.localWriteTimeMs);return new Gc(e.batchId,s,n,o)}function jh(t){var e,n,r=Vh(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Vh(t.lastLimboFreeSnapshotVersion):ps.min();return void 0!==t.query.documents?(xo(1===(n=t.query).documents.length),e=Au(mu(Za(n.documents[0])))):e=function(t){return Au(uc(t))}(t.query),new Cu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Vo.fromBase64String(t.resumeToken))}function Fh(t,e){var n,r=Uh(e.oe),i=Uh(e.lastLimboFreeSnapshotVersion);n=tu(e.target)?oc(t.co,e.target):sc(t.co,e.target);var o=e.resumeToken.toBase64();return new Ih(e.targetId,Xs(e.target),r,o,e.sequenceNumber,i,n)}function qh(t){var e=uc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Nu(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bh=function(){function t(){}return t.prototype.ao=function(t,e){return Gh(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Vh(e.createTime),version:e.version};var e}))},t.prototype.uo=function(t,e){return Gh(t).put({bundleId:(n=e).id,createTime:Uh(Ka(n.createTime)),version:n.version});var n},t.prototype.ho=function(t,e){return zh(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:qh(e.bundledQuery),readTime:Vh(e.readTime)};var e}))},t.prototype.lo=function(t,e){return zh(t).put(function(t){return{name:t.name,readTime:Uh(Ka(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Gh(t){return xh(t,Nh.store)}function zh(t){return xh(t,Sh.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $h=function(){function t(){this._o=new Hh}return t.prototype.fo=function(t,e){return this._o.add(e),wc.resolve()},t.prototype.wo=function(t,e){return wc.resolve(this._o.getEntries(e))},t}(),Hh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e]||new ga(vs.At),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ga(vs.At)).Dt()},t}(),Kh=function(){function t(){this.Eo=new Hh}return t.prototype.fo=function(t,e){var n=this;if(!this.Eo.has(e)){var r=e.Vt(),i=e.yt();t.Oi((function(){n.Eo.add(e)}));var o={collectionId:r,parent:ah(i)};return Wh(t).put(o)}return wc.resolve()},t.prototype.wo=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Uo(e),""],!1,!0);return Wh(t).Ds(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(fh(o.parent))}return n}))},t}();function Wh(t){return xh(t,Th.store)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Yh(t,e,n){var r=t.store(vh.store),i=t.store(yh.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.Fs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){xo(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=yh.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return wc.hs(o).next((function(){return c}))}function Qh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ko();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Jh=function(){function t(t,e,n,r){this.userId=t,this.fe=e,this.To=n,this.Io=r,this.mo={}}return t.Ao=function(e,n,r,i){return xo(""!==e.uid),new t(e.T()?e.uid:"",n,r,i)},t.prototype.Ro=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zh(t).Fs({index:vh.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Po=function(t,e,n,r){var i=this,o=tf(t),s=Zh(t);return s.add({}).next((function(u){xo("number"==typeof u);for(var a=new Gc(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return rc(t.co,e)})),i=n.mutations.map((function(e){return rc(t.co,e)}));return new vh(e,n.batchId,n.er.toMillis(),r,i)}(i.fe,i.userId,a),h=[],f=new ga((function(t,e){return Ro(t.Ct(),e.Ct())})),l=0,p=r;l<p.length;l++){var d=p[l],v=yh.key(i.userId,d.key.path,u);f=f.add(d.key.path.yt()),h.push(s.put(c)),h.push(o.put(v,yh.PLACEHOLDER))}return f.forEach((function(e){h.push(i.To.fo(t,e))})),t.Oi((function(){i.mo[u]=a.keys()})),wc.hs(h).next((function(){return a}))}))},t.prototype.yo=function(t,e){var n=this;return Zh(t).get(e).next((function(t){return t?(xo(t.userId===n.userId),Mh(n.fe,t)):null}))},t.prototype.Vo=function(t,e){var n=this;return this.mo[e]?wc.resolve(this.mo[e]):this.yo(t,e).next((function(t){if(t){var r=t.keys();return n.mo[e]=r,r}return null}))},t.prototype.po=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Zh(t).Fs({index:vh.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(xo(e.batchId>=r),o=Mh(n.fe,e)),i.done()})).next((function(){return o}))},t.prototype.bo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Zh(t).Fs({index:vh.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zh(t).Ds(vh.userMutationsIndex,n).next((function(t){return t.map((function(t){return Mh(e.fe,t)}))}))},t.prototype.So=function(t,e){var n=this,r=yh.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return tf(t).Fs({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=fh(a);if(u===n.userId&&e.path.isEqual(h))return Zh(t).get(c).next((function(t){if(!t)throw ko();xo(t.userId===n.userId),o.push(Mh(n.fe,t))}));s.done()})).next((function(){return o}))},t.prototype.Do=function(t,e){var n=this,r=new ga(Ro),i=[];return e.forEach((function(e){var o=yh.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=tf(t).Fs({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=fh(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),wc.hs(i).next((function(){return n.Co(t,r)}))},t.prototype.xo=function(t,e){var n=this,r=e.path,i=r.length+1,o=yh.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new ga(Ro);return tf(t).Fs({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=fh(a);s===n.userId&&r.vt(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Co(t,u)}))},t.prototype.Co=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Zh(t).get(e).next((function(t){if(null===t)throw ko();xo(t.userId===n.userId),r.push(Mh(n.fe,t))})))})),wc.hs(i).next((function(){return r}))},t.prototype.No=function(t,e){var n=this;return Yh(t.ro,this.userId,e).next((function(r){return t.Oi((function(){n.Fo(e.batchId)})),wc.forEach(r,(function(e){return n.Io.Oo(t,e)}))}))},t.prototype.Fo=function(t){delete this.mo[t]},t.prototype.ko=function(t){var e=this;return this.Ro(t).next((function(n){if(!n)return wc.resolve();var r=IDBKeyRange.lowerBound(yh.prefixForUser(e.userId)),i=[];return tf(t).Fs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=fh(t[1]);i.push(o)}else r.done()})).next((function(){xo(0===i.length)}))}))},t.prototype.Mo=function(t,e){return Xh(t,this.userId,e)},t.prototype.Lo=function(t){var e=this;return ef(t).get(this.userId).next((function(t){return t||new dh(e.userId,-1,"")}))},t}();function Xh(t,e,n){var r=yh.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return tf(t).Fs({range:o,Ns:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Zh(t){return xh(t,vh.store)}function tf(t){return xh(t,yh.store)}function ef(t){return xh(t,dh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nf=function(){function t(t){this.$o=t}return t.prototype.next=function(){return this.$o+=2,this.$o},t.Bo=function(){return new t(0)},t.qo=function(){return new t(-1)},t}(),rf=function(){function t(t,e){this.Io=t,this.fe=e}return t.prototype.Uo=function(t){var e=this;return this.Qo(t).next((function(n){var r=new nf(n.highestTargetId);return n.highestTargetId=r.next(),e.Ko(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wo=function(t){return this.Qo(t).next((function(t){return ps.wt(new ls(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.jo=function(t){return this.Qo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Go=function(t,e,n){var r=this;return this.Qo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Tt()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ko(t,i)}))},t.prototype.zo=function(t,e){var n=this;return this.Ho(t,e).next((function(){return n.Qo(t).next((function(r){return r.targetCount+=1,n.Jo(e,r),n.Ko(t,r)}))}))},t.prototype.Yo=function(t,e){return this.Ho(t,e)},t.prototype.Xo=function(t,e){var n=this;return this.Zo(t,e.targetId).next((function(){return of(t).delete(e.targetId)})).next((function(){return n.Qo(t)})).next((function(e){return xo(e.targetCount>0),e.targetCount-=1,n.Ko(t,e)}))},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return of(t).Fs((function(s,u){var a=jh(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Xo(t,a)))})).next((function(){return wc.hs(o)})).next((function(){return i}))},t.prototype.Un=function(t,e){return of(t).Fs((function(t,n){var r=jh(n);e(r)}))},t.prototype.Qo=function(t){return sf(t).get(_h.key).next((function(t){return xo(null!==t),t}))},t.prototype.Ko=function(t,e){return sf(t).put(_h.key,e)},t.prototype.Ho=function(t,e){return of(t).put(Fh(this.fe,e))},t.prototype.Jo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tc=function(t){return this.Qo(t).next((function(t){return t.targetCount}))},t.prototype.ec=function(t,e){var n=Xs(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return of(t).Fs({range:r,index:Ih.queryTargetsIndexName},(function(t,n,r){var o=jh(n);Zs(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nc=function(t,e,n){var r=this,i=[],o=uf(t);return e.forEach((function(e){var s=ah(e.path);i.push(o.put(new Eh(n,s))),i.push(r.Io.sc(t,n,e))})),wc.hs(i)},t.prototype.ic=function(t,e,n){var r=this,i=uf(t);return wc.forEach(e,(function(e){var o=ah(e.path);return wc.hs([i.delete([n,o]),r.Io.rc(t,n,e)])}))},t.prototype.Zo=function(t,e){var n=uf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.oc=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=uf(t),i=Na();return r.Fs({range:n,Ns:!0},(function(t,e,n){var r=fh(t[1]),o=new ms(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mo=function(t,e){var n=ah(e.path),r=IDBKeyRange.bound([n],[Uo(n)],!1,!0),i=0;return uf(t).Fs({index:Eh.documentTargetsIndex,Ns:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Zn=function(t,e){return of(t).get(e).next((function(t){return t?jh(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function of(t){return xh(t,Ih.store)}function sf(t){return xh(t,_h.store)}function uf(t){return xh(t,Eh.store)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var af=function(){function t(t,e){this.db=t,this.vr=function(t,e){return new Qc(t,e)}(this,e)}return t.prototype.Mr=function(t){var e=this.cc(t);return this.db.ac().tc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.cc=function(t){var e=0;return this.$r(t,(function(t){e++})).next((function(){return e}))},t.prototype.Un=function(t,e){return this.db.ac().Un(t,e)},t.prototype.$r=function(t,e){return this.uc(t,(function(t,n){return e(n)}))},t.prototype.sc=function(t,e,n){return cf(t,n)},t.prototype.rc=function(t,e,n){return cf(t,n)},t.prototype.Br=function(t,e,n){return this.db.ac().Br(t,e,n)},t.prototype.Oo=function(t,e){return cf(t,e)},t.prototype.hc=function(t,e){return function(t,e){var n=!1;return ef(t).Os((function(r){return Xh(t,r,e).next((function(t){return t&&(n=!0),wc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.qr=function(t,e){var n=this,r=this.db._c().lc(),i=[],o=0;return this.uc(t,(function(s,u){if(u<=e){var a=n.hc(t,s).next((function(e){if(!e)return o++,r.Ar(t,s).next((function(){return r.mr(s),uf(t).delete([0,ah(s.path)])}))}));i.push(a)}})).next((function(){return wc.hs(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.ce(t.oo);return this.db.ac().Yo(t,n)},t.prototype.fc=function(t,e){return cf(t,e)},t.prototype.uc=function(t,e){var n,r=uf(t),i=qc.Zi;return r.Fs({index:Eh.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==qc.Zi&&e(new ms(fh(n)),i),i=u,n=s):i=qc.Zi})).next((function(){i!==qc.Zi&&e(new ms(fh(n)),i)}))},t.prototype.Qr=function(t){return this.db._c().dc(t)},t}();function cf(t,e){return uf(t).put(function(t,e){return new Eh(0,ah(t.path),e)}(e,t.oo))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hf=function(){function t(t,e){this.fe=t,this.To=e}return t.prototype.Er=function(t,e,n){return pf(t).put(df(e),n)},t.prototype.mr=function(t,e){var n=pf(t),r=df(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.wc(t,r)}))},t.prototype.Ar=function(t,e){var n=this;return pf(t).get(df(e)).next((function(t){return n.Ec(t)}))},t.prototype.Tc=function(t,e){var n=this;return pf(t).get(df(e)).next((function(t){var e=n.Ec(t);return e?{Ir:e,size:Qh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ia();return this.Ic(t,e,(function(t,e){var i=n.Ec(e);r=r.Ie(t,i)})).next((function(){return r}))},t.prototype.mc=function(t,e){var n=this,r=Ia(),i=new da(ms.At);return this.Ic(t,e,(function(t,e){var o=n.Ec(e);o?(r=r.Ie(t,o),i=i.Ie(t,Qh(e))):(r=r.Ie(t,null),i=i.Ie(t,0))})).next((function(){return{Ac:r,Rc:i}}))},t.prototype.Ic=function(t,e,n){if(e.bt())return wc.resolve();var r=IDBKeyRange.bound(e.first().path.Dt(),e.last().path.Dt()),i=e.ge(),o=i.De();return pf(t).Fs({range:r},(function(t,e,r){for(var s=ms.Ut(t);o&&ms.At(o,s)<0;)n(o,null),o=i.De();o&&o.isEqual(s)&&(n(o,e),o=i.Ce()?i.De():null),o?r.Ss(o.path.Dt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Ce()?i.De():null}))},t.prototype.Pc=function(t,e,n){var r=this,i=_a(),o=e.path.length+1,s={};if(n.isEqual(ps.min())){var u=e.path.Dt();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.Dt(),c=Rh(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=bh.collectionReadTimeIndex}return pf(t).Fs(s,(function(t,n,s){if(t.length===o){var u=Ph(r.fe,n);e.path.vt(u.key.path)?u instanceof Ks&&xu(e,u)&&(i=i.Ie(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.lc=function(t){return new ff(this,!!t&&t.yc)},t.prototype.dc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return lf(t).get(wh.key).next((function(t){return xo(!!t),t}))},t.prototype.wc=function(t,e){return lf(t).put(wh.key,e)},t.prototype.Ec=function(t){if(t){var e=Ph(this.fe,t);return e instanceof Ws&&e.version.isEqual(ps.min())?null:e}return null},t}(),ff=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).gc=e,r.yc=n,r.Vc=new $c((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return wt(e,t),e.prototype.yr=function(t){var e=this,n=[],r=0,i=new ga((function(t,e){return Ro(t.Ct(),e.Ct())}));return this._r.forEach((function(o,s){var u=e.Vc.get(o);if(s.Ir){var a=Ch(e.gc.fe,s.Ir,e.wr(o));i=i.add(o.path.yt());var c=Qh(a);r+=c-u,n.push(e.gc.Er(t,o,a))}else if(r-=u,e.yc){var h=Ch(e.gc.fe,new Ws(o,ps.min()),e.wr(o));n.push(e.gc.Er(t,o,h))}else n.push(e.gc.mr(t,o))})),i.forEach((function(r){n.push(e.gc.To.fo(t,r))})),n.push(this.gc.updateMetadata(t,r)),wc.hs(n)},e.prototype.Rr=function(t,e){var n=this;return this.gc.Tc(t,e).next((function(t){return null===t?(n.Vc.set(e,0),null):(n.Vc.set(e,t.size),t.Ir)}))},e.prototype.Pr=function(t,e){var n=this;return this.gc.mc(t,e).next((function(t){var e=t.Ac;return t.Rc.forEach((function(t,e){n.Vc.set(t,e)})),e}))},e}(Hc);function lf(t){return xh(t,wh.store)}function pf(t){return xh(t,bh.store)}function df(t){return t.path.Dt()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var vf=function(){function t(t){this.fe=t}return t.prototype.Ps=function(t,e,n,r){var i=this;xo(n<r&&n>=0&&r<=11);var o=new Ic("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ph.store)}(t),function(t){t.createObjectStore(dh.store,{keyPath:dh.keyPath}),t.createObjectStore(vh.store,{keyPath:vh.keyPath,autoIncrement:!0}).createIndex(vh.userMutationsIndex,vh.userMutationsKeyPath,{unique:!0}),t.createObjectStore(yh.store)}(t),yf(t),function(t){t.createObjectStore(bh.store)}(t));var s=wc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Eh.store),t.deleteObjectStore(Ih.store),t.deleteObjectStore(_h.store)}(t),yf(t)),s=s.next((function(){return function(t){var e=t.store(_h.store),n=new _h(0,0,ps.min().Tt(),0);return e.put(_h.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(vh.store).Ds().next((function(n){t.deleteObjectStore(vh.store),t.createObjectStore(vh.store,{keyPath:vh.keyPath,autoIncrement:!0}).createIndex(vh.userMutationsIndex,vh.userMutationsKeyPath,{unique:!0});var r=e.store(vh.store),i=n.map((function(t){return r.put(t)}));return wc.hs(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Ah.store,{keyPath:Ah.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.bc(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(wh.store)}(t),i.vc(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Sc(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Dc(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(bh.store);e.createIndex(bh.readTimeIndex,bh.readTimeIndexPath,{unique:!1}),e.createIndex(bh.collectionReadTimeIndex,bh.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Cc(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Nh.store,{keyPath:Nh.keyPath})}(t),function(t){t.createObjectStore(Sh.store,{keyPath:Sh.keyPath})}(t)}))),s},t.prototype.vc=function(t){var e=0;return t.store(bh.store).Fs((function(t,n){e+=Qh(n)})).next((function(){var n=new wh(e);return t.store(wh.store).put(wh.key,n)}))},t.prototype.bc=function(t){var e=this,n=t.store(dh.store),r=t.store(vh.store);return n.Ds().next((function(n){return wc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ds(vh.userMutationsIndex,i).next((function(r){return wc.forEach(r,(function(r){xo(r.userId===n.userId);var i=Mh(e.fe,r);return Yh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Sc=function(t){var e=t.store(Eh.store),n=t.store(bh.store);return t.store(_h.store).get(_h.key).next((function(t){var r=[];return n.Fs((function(n,i){var o=new vs(n),s=function(t){return[0,ah(t)]}(o);r.push(e.get(s).next((function(n){return n?wc.resolve():function(n){return e.put(new Eh(0,ah(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return wc.hs(r)}))}))},t.prototype.Dc=function(t,e){t.createObjectStore(Th.store,{keyPath:Th.keyPath});var n=e.store(Th.store),r=new Hh,i=function(t){if(r.add(t)){var e=t.Vt(),i=t.yt();return n.put({collectionId:e,parent:ah(i)})}};return e.store(bh.store).Fs({Ns:!0},(function(t,e){var n=new vs(t);return i(n.yt())})).next((function(){return e.store(yh.store).Fs({Ns:!0},(function(t,e){t[0];var n=t[1],r=(t[2],fh(n));return i(r.yt())}))}))},t.prototype.Cc=function(t){var e=this,n=t.store(Ih.store);return n.Fs((function(t,r){var i=jh(r),o=Fh(e.fe,i);return n.put(o)}))},t}();function yf(t){t.createObjectStore(Eh.store,{keyPath:Eh.keyPath}).createIndex(Eh.documentTargetsIndex,Eh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ih.store,{keyPath:Ih.keyPath}).createIndex(Ih.queryTargetsIndexName,Ih.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(_h.store)}var gf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mf=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=o,this.window=s,this.document=u,this.xc=c,this.Nc=h,this.Fc=null,this.Oc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kc=null,this.inForeground=!1,this.Mc=null,this.Lc=null,this.$c=Number.NEGATIVE_INFINITY,this.Bc=function(t){return Promise.resolve()},!t.G())throw new jo(Mo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Io=new af(this,i),this.qc=n+"main",this.fe=new Dh(a),this.Uc=new Ec(this.qc,11,new vf(this.fe)),this.Qc=new rf(this.Io,this.fe),this.To=new Kh,this.Kc=function(t,e){return new hf(t,e)}(this.fe,this.To),this.Wc=new Bh,this.window&&this.window.localStorage?this.jc=this.window.localStorage:(this.jc=null,!1===h&&No("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Gc().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new jo(Mo.FAILED_PRECONDITION,gf);return t.zc(),t.Hc(),t.Jc(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Qc.jo(e)}))})).then((function(e){t.Fc=new qc(e,t.xc)})).then((function(){t.Oc=!0})).catch((function(e){return t.Uc&&t.Uc.close(),Promise.reject(e)}))},t.prototype.Yc=function(t){var e=this;return this.Bc=function(n){return Et(e,void 0,void 0,(function(){return _t(this,(function(e){return this.Nr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Xc=function(t){var e=this;this.Uc.gs((function(n){return Et(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Zc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.Ws((function(){return Et(e,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return this.Nr?[4,this.Gc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Gc=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return wf(e).put(new Ah(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ta(e).next((function(e){e||(t.isPrimary=!1,t.js.ea((function(){return t.Bc(!1)})))}))})).next((function(){return t.na(e)})).next((function(n){return t.isPrimary&&!n?t.sa(e).next((function(){return!1})):!!n&&t.ia(e).next((function(){return!0}))}))})).catch((function(e){if(Ac(e))return Ao("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ao("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.js.ea((function(){return t.Bc(e)})),t.isPrimary=e}))},t.prototype.ta=function(t){var e=this;return bf(t).get(ph.key).next((function(t){return wc.resolve(e.ra(t))}))},t.prototype.oa=function(t){return wf(t).delete(this.clientId)},t.prototype.ca=function(){return Et(this,void 0,void 0,(function(){var t,e,n,r,i=this;return _t(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.aa(this.$c,18e5)?[3,2]:(this.$c=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=xh(t,Ah.store);return e.Ds().next((function(t){var n=i.ua(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return wc.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.jc)for(e=0,n=t;e<n.length;e++)r=n[e],this.jc.removeItem(this.ha(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Jc=function(){var t=this;this.Lc=this.js.ni("client_metadata_refresh",4e3,(function(){return t.Gc().then((function(){return t.ca()})).then((function(){return t.Jc()}))}))},t.prototype.ra=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.na=function(t){var e=this;return this.Nc?wc.resolve(!0):bf(t).get(ph.key).next((function(n){if(null!==n&&e.aa(n.leaseTimestampMs,5e3)&&!e.la(n.ownerId)){if(e.ra(n)&&e.networkEnabled)return!0;if(!e.ra(n)){if(!n.allowTabSynchronization)throw new jo(Mo.FAILED_PRECONDITION,gf);return!1}}return!(!e.networkEnabled||!e.inForeground)||wf(t).Ds().next((function(t){return void 0===e.ua(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ao("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$=function(){return Et(this,void 0,void 0,(function(){var t=this;return _t(this,(function(e){switch(e.label){case 0:return this.Oc=!1,this._a(),this.Lc&&(this.Lc.cancel(),this.Lc=null),this.fa(),this.da(),[4,this.Uc.runTransaction("shutdown","readwrite",[ph.store,Ah.store],(function(e){var n=new kh(e,qc.Zi);return t.sa(n).next((function(){return t.oa(n)}))}))];case 1:return e.sent(),this.Uc.close(),this.wa(),[2]}}))}))},t.prototype.ua=function(t,e){var n=this;return t.filter((function(t){return n.aa(t.updateTimeMs,e)&&!n.la(t.clientId)}))},t.prototype.Ea=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return wf(e).Ds().next((function(e){return t.ua(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Ta=function(t){return Jh.Ao(t,this.fe,this.To,this.Io)},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.Ia=function(){return this.To},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r=this;Ao("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Uc.runTransaction(t,o,Oh,(function(o){return i=new kh(o,r.Fc?r.Fc.next():qc.Zi),"readwrite-primary"===e?r.ta(i).next((function(t){return!!t||r.na(i)})).next((function(e){if(!e)throw No("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.js.ea((function(){return r.Bc(!1)})),new jo(Mo.FAILED_PRECONDITION,Vc);return n(i)})).next((function(t){return r.ia(i).next((function(){return t}))})):r.Aa(i).next((function(){return n(i)}))})).then((function(t){return i.ki(),t}))},t.prototype.Aa=function(t){var e=this;return bf(t).get(ph.key).next((function(t){if(null!==t&&e.aa(t.leaseTimestampMs,5e3)&&!e.la(t.ownerId)&&!e.ra(t)&&!(e.Nc||e.allowTabSynchronization&&t.allowTabSynchronization))throw new jo(Mo.FAILED_PRECONDITION,gf)}))},t.prototype.ia=function(t){var e=new ph(this.clientId,this.allowTabSynchronization,Date.now());return bf(t).put(ph.key,e)},t.G=function(){return Ec.G()},t.prototype.sa=function(t){var e=this,n=bf(t);return n.get(ph.key).next((function(t){return e.ra(t)?(Ao("IndexedDbPersistence","Releasing primary lease."),n.delete(ph.key)):wc.resolve()}))},t.prototype.aa=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(No("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.zc=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Mc=function(){t.js.Ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.Gc()}))},this.document.addEventListener("visibilitychange",this.Mc),this.inForeground="visible"===this.document.visibilityState)},t.prototype.fa=function(){this.Mc&&(this.document.removeEventListener("visibilitychange",this.Mc),this.Mc=null)},t.prototype.Hc=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.kc=function(){e._a(),e.js.Ws((function(){return e.$()}))},this.window.addEventListener("unload",this.kc))},t.prototype.da=function(){this.kc&&(this.window.removeEventListener("unload",this.kc),this.kc=null)},t.prototype.la=function(t){var e;try{var n=null!==(null===(e=this.jc)||void 0===e?void 0:e.getItem(this.ha(t)));return Ao("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return No("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype._a=function(){if(this.jc)try{this.jc.setItem(this.ha(this.clientId),String(Date.now()))}catch(t){No("Failed to set zombie client id.",t)}},t.prototype.wa=function(){if(this.jc)try{this.jc.removeItem(this.ha(this.clientId))}catch(t){}},t.prototype.ha=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function bf(t){return xh(t,ph.store)}function wf(t){return xh(t,Ah.store)}function If(t,e){var n=t.projectId;return t.M||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Ef=function(){function t(t,e,n){this.Kc=t,this.Ra=e,this.To=n}return t.prototype.Pa=function(t,e){var n=this;return this.Ra.So(t,e).next((function(r){return n.ya(t,e,r)}))},t.prototype.ya=function(t,e,n){return this.Kc.Ar(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ir(e,t);return t}))},t.prototype.ga=function(t,e,n){var r=Ia();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ir(t,e);r=r.Ie(t,e)})),r},t.prototype.Va=function(t,e){var n=this;return this.Kc.getEntries(t,e).next((function(e){return n.pa(t,e)}))},t.prototype.pa=function(t,e){var n=this;return this.Ra.Do(t,e).next((function(r){var i=n.ga(t,e,r),o=wa();return i.forEach((function(t,e){e||(e=new Ws(t,ps.min())),o=o.Ie(t,e)})),o}))},t.prototype.Pc=function(t,e,n){return function(t){return ms.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ba(t,e.path):_u(e)?this.va(t,e,n):this.Sa(t,e,n)},t.prototype.ba=function(t,e){return this.Pa(t,new ms(e)).next((function(t){var e=_a();return t instanceof Ks&&(e=e.Ie(t.key,t)),e}))},t.prototype.va=function(t,e,n){var r=this,i=e.collectionGroup,o=_a();return this.To.wo(t,i).next((function(s){return wc.forEach(s,(function(s){var u=function(t,e){return new yu(e,null,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sa(t,u,n).next((function(t){t.forEach((function(t,e){o=o.Ie(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Sa=function(t,e,n){var r,i,o=this;return this.Kc.Pc(t,e,n).next((function(n){return r=n,o.Ra.xo(t,e)})).next((function(e){return i=e,o.Da(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=ea(a,h,h,o.er);r=f instanceof Ks?r.Ie(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){xu(e,n)||(r=r.remove(t))})),r}))},t.prototype.Da=function(t,e,n){for(var r=Na(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof sa&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Kc.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Ks&&(c=c.Ie(t,e))})),c}))},t}(),_f=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ca=n,this.xa=r}return t.Na=function(e,n){for(var r=Na(),i=Na(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Tf=function(){function t(){}return t.prototype.Fa=function(t){this.Oa=t},t.prototype.Pc=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.ne.length||1===t.ne.length&&t.ne[0].field.Ot())}(e)||n.isEqual(ps.min())?this.ka(t,e):this.Oa.Va(t,r).next((function(o){var s=i.Ma(e,o);return(bu(e)||wu(e))&&i.La(e.limitType,s,r,n)?i.ka(t,e):(To()<=Ht.DEBUG&&Ao("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ku(e)),i.Oa.Pc(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ie(e.key,e)})),t})))}))},t.prototype.Ma=function(t,e){var n=new ga(Du(t));return e.forEach((function(e,r){r instanceof Ks&&xu(t,r)&&(n=n.add(r))})),n},t.prototype.La=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.ka=function(t,e){return To()<=Ht.DEBUG&&Ao("QueryEngine","Using full collection scan to execute query:",ku(e)),this.Oa.Pc(t,e,ps.min())},t}(),Af=function(){function t(t,e,n,r){this.persistence=t,this.$a=e,this.fe=r,this.Ba=new da(Ro),this.qa=new $c((function(t){return Xs(t)}),Zs),this.Ua=ps.min(),this.Ra=t.Ta(n),this.Qa=t._c(),this.Qc=t.ac(),this.Ka=new Ef(this.Qa,this.Ra,this.persistence.Ia()),this.Wc=t.ma(),this.$a.Fa(this.Ka)}return t.prototype.Fr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Ur(n,e.Ba)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nf(t,e,n,r){return new Af(t,e,n,r)}function Sf(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o;return _t(this,(function(s){switch(s.label){case 0:return n=Do(t),r=n.Ra,i=n.Ka,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ra.vo(t).next((function(s){return o=s,r=n.persistence.Ta(e),i=new Ef(n.Qa,r,n.persistence.Ia()),r.vo(t)})).next((function(e){for(var n=[],r=[],s=Na(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Va(t,s).next((function(t){return{Wa:t,ja:n,Ga:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ra=r,n.Ka=i,n.$a.Fa(n.Ka),o)]}}))}))}function Of(t,e){var n=Do(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Qa.lc({yc:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=wc.resolve();return o.forEach((function(t){s=s.next((function(){return r.Ar(e,t)})).next((function(e){var o=e,s=n.ar.get(t);xo(null!==s),(!o||o.version.u(s)<0)&&(o=i.nr(t,o,n))&&r.Er(o,n.cr)}))})),s.next((function(){return t.Ra.No(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}function kf(t){var e=Do(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Qc.Wo(t)}))}function xf(t,e){var n=Do(t),r=e.oe,i=n.Ba;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Qa.lc({yc:!0});i=n.Ba;var s=[];e.rn.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.Qc.ic(t,e.dn,o).next((function(){return n.Qc.nc(t,e._n,o)})));var a=e.resumeToken;if(a.o()>0){var c=u.ae(a,r).ce(t.oo);i=i.Ie(o,c),function(t,e,n){return xo(e.resumeToken.o()>0),0===t.resumeToken.o()||e.oe.Et()-t.oe.Et()>=3e8||n._n.size+n.fn.size+n.dn.size>0}(u,c,e)&&s.push(n.Qc.Yo(t,c))}}}));var u=wa();if(e.cn.forEach((function(r,i){e.an.has(r)&&s.push(n.persistence.Io.fc(t,r))})),s.push(function(t,e,n,r,i){var o=Na();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=wa();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof Ws&&s.version.isEqual(ps.min())?(e.mr(n,a),o=o.Ie(n,s)):null==u||s.version.u(u.version)>0||0===s.version.u(u.version)&&u.hasPendingWrites?(e.Er(s,a),o=o.Ie(n,s)):Ao("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}(t,o,e.cn,r,void 0).next((function(t){u=t}))),!r.isEqual(ps.min())){var a=n.Qc.Wo(t).next((function(e){return n.Qc.Go(t,t.oo,r)}));s.push(a)}return wc.hs(s).next((function(){return o.apply(t)})).next((function(){return n.Ka.pa(t,u)}))})).then((function(t){return n.Ba=i,t}))}function Df(t,e){var n=Do(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ra.po(t,e)}))}function Pf(t,e){var n=Do(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Qc.ec(t,e).next((function(i){return i?(r=i,wc.resolve(r)):n.Qc.Uo(t).next((function(i){return r=new Cu(e,i,0,t.oo),n.Qc.zo(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Ba.get(t.targetId);return(null===r||t.oe.u(r.oe)>0)&&(n.Ba=n.Ba.Ie(t.targetId,t),n.qa.set(e,t.targetId)),t}))}function Cf(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,s;return _t(this,(function(u){switch(u.label){case 0:r=Do(t),i=r.Ba.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Io.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Ac(s=u.sent()))throw s;return Ao("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Ba=r.Ba.remove(e),r.qa.delete(i.target),[2]}}))}))}function Rf(t,e,n){var r=Do(t),i=ps.min(),o=Na();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Do(t),i=r.qa.get(n);return void 0!==i?wc.resolve(r.Ba.get(i)):r.Qc.ec(e,n)}(r,t,Au(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Qc.oc(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.$a.Pc(t,e,n?i:ps.min(),n?o:Na())})).next((function(t){return{documents:t,za:o}}))}))}function Lf(t,e){var n=Do(t),r=Do(n.Qc),i=n.Ba.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Zn(t,e).next((function(t){return t?t.target:null}))}))}function Uf(t){var e=Do(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Do(t),i=wa(),o=Rh(n),s=pf(e),u=IDBKeyRange.lowerBound(o,!0);return s.Fs({index:bh.readTimeIndex,range:u},(function(t,e){var n=Ph(r.fe,e);i=i.Ie(n.key,n),o=e.readTime})).next((function(){return{tr:i,readTime:Lh(o)}}))}(e.Qa,t,e.Ua)})).then((function(t){var n=t.tr,r=t.readTime;return e.Ua=r,n}))}function Vf(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){return[2,(e=Do(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=pf(t),n=ps.min();return e.Fs({index:bh.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Lh(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ua=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Mf=function(){function t(t){this.fe=t,this.Xa=new Map,this.Za=new Map}return t.prototype.ao=function(t,e){return wc.resolve(this.Xa.get(e))},t.prototype.uo=function(t,e){var n;return this.Xa.set(e.id,{id:(n=e).id,version:n.version,createTime:Ka(n.createTime)}),wc.resolve()},t.prototype.ho=function(t,e){return wc.resolve(this.Za.get(e))},t.prototype.lo=function(t,e){return this.Za.set(e.name,function(t){return{name:t.name,query:qh(t.bundledQuery),readTime:Ka(t.readTime)}}(e)),wc.resolve()},t}(),jf=function(){function t(){this.tu=new ga(Ff.eu),this.nu=new ga(Ff.su)}return t.prototype.bt=function(){return this.tu.bt()},t.prototype.sc=function(t,e){var n=new Ff(t,e);this.tu=this.tu.add(n),this.nu=this.nu.add(n)},t.prototype.iu=function(t,e){var n=this;t.forEach((function(t){return n.sc(t,e)}))},t.prototype.rc=function(t,e){this.ru(new Ff(t,e))},t.prototype.ou=function(t,e){var n=this;t.forEach((function(t){return n.rc(t,e)}))},t.prototype.cu=function(t){var e=this,n=new ms(new vs([])),r=new Ff(n,t),i=new Ff(n,t+1),o=[];return this.nu.Qe([r,i],(function(t){e.ru(t),o.push(t.key)})),o},t.prototype.au=function(){var t=this;this.tu.forEach((function(e){return t.ru(e)}))},t.prototype.ru=function(t){this.tu=this.tu.delete(t),this.nu=this.nu.delete(t)},t.prototype.uu=function(t){var e=new ms(new vs([])),n=new Ff(e,t),r=new Ff(e,t+1),i=Na();return this.nu.Qe([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mo=function(t){var e=new Ff(t,0),n=this.tu.We(e);return null!==n&&t.isEqual(n.key)},t}(),Ff=function(){function t(t,e){this.key=t,this.hu=e}return t.eu=function(t,e){return ms.At(t.key,e.key)||Ro(t.hu,e.hu)},t.su=function(t,e){return Ro(t.hu,e.hu)||ms.At(t.key,e.key)},t}(),qf=function(){function t(t,e){this.To=t,this.Io=e,this.Ra=[],this.lu=1,this._u=new ga(Ff.eu)}return t.prototype.Ro=function(t){return wc.resolve(0===this.Ra.length)},t.prototype.Po=function(t,e,n,r){var i=this.lu;this.lu++,this.Ra.length>0&&this.Ra[this.Ra.length-1];var o=new Gc(i,e,n,r);this.Ra.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this._u=this._u.add(new Ff(a.key,i)),this.To.fo(t,a.key.path.yt())}return wc.resolve(o)},t.prototype.yo=function(t,e){return wc.resolve(this.fu(e))},t.prototype.po=function(t,e){var n=e+1,r=this.du(n),i=r<0?0:r;return wc.resolve(this.Ra.length>i?this.Ra[i]:null)},t.prototype.bo=function(){return wc.resolve(0===this.Ra.length?-1:this.lu-1)},t.prototype.vo=function(t){return wc.resolve(this.Ra.slice())},t.prototype.So=function(t,e){var n=this,r=new Ff(e,0),i=new Ff(e,Number.POSITIVE_INFINITY),o=[];return this._u.Qe([r,i],(function(t){var e=n.fu(t.hu);o.push(e)})),wc.resolve(o)},t.prototype.Do=function(t,e){var n=this,r=new ga(Ro);return e.forEach((function(t){var e=new Ff(t,0),i=new Ff(t,Number.POSITIVE_INFINITY);n._u.Qe([e,i],(function(t){r=r.add(t.hu)}))})),wc.resolve(this.wu(r))},t.prototype.xo=function(t,e){var n=e.path,r=n.length+1,i=n;ms.qt(i)||(i=i.child(""));var o=new Ff(new ms(i),0),s=new ga(Ro);return this._u.Ke((function(t){var e=t.key.path;return!!n.vt(e)&&(e.length===r&&(s=s.add(t.hu)),!0)}),o),wc.resolve(this.wu(s))},t.prototype.wu=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.fu(t);null!==r&&n.push(r)})),n},t.prototype.No=function(t,e){var n=this;xo(0===this.Eu(e.batchId,"removed")),this.Ra.shift();var r=this._u;return wc.forEach(e.mutations,(function(i){var o=new Ff(i.key,e.batchId);return r=r.delete(o),n.Io.Oo(t,i.key)})).next((function(){n._u=r}))},t.prototype.Fo=function(t){},t.prototype.Mo=function(t,e){var n=new Ff(e,0),r=this._u.We(n);return wc.resolve(e.isEqual(r&&r.key))},t.prototype.ko=function(t){return this.Ra.length,wc.resolve()},t.prototype.Eu=function(t,e){return this.du(t)},t.prototype.du=function(t){return 0===this.Ra.length?0:t-this.Ra[0].batchId},t.prototype.fu=function(t){var e=this.du(t);return e<0||e>=this.Ra.length?null:this.Ra[e]},t}(),Bf=function(){function t(t,e){this.To=t,this.Tu=e,this.docs=new da(ms.At),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Tu(e);return this.docs=this.docs.Ie(r,{Ir:e,size:s,readTime:n}),this.size+=s-o,this.To.fo(t,r.path.yt())},t.prototype.mr=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ar=function(t,e){var n=this.docs.get(e);return wc.resolve(n?n.Ir:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ia();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ie(t,e?e.Ir:null)})),wc.resolve(r)},t.prototype.Pc=function(t,e,n){for(var r=_a(),i=new ms(e.path.child("")),o=this.docs.Ve(i);o.Ce();){var s=o.De(),u=s.key,a=s.value,c=a.Ir,h=a.readTime;if(!e.path.vt(u.path))break;h.u(n)<=0||c instanceof Ks&&xu(e,c)&&(r=r.Ie(c.key,c))}return wc.resolve(r)},t.prototype.Iu=function(t,e){return wc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.lc=function(t){return new Gf(this)},t.prototype.dc=function(t){return wc.resolve(this.size)},t}(),Gf=function(t){function e(e){var n=this;return(n=t.call(this)||this).gc=e,n}return wt(e,t),e.prototype.yr=function(t){var e=this,n=[];return this._r.forEach((function(r,i){i&&i.Ir?n.push(e.gc.Er(t,i.Ir,e.wr(r))):e.gc.mr(r)})),wc.hs(n)},e.prototype.Rr=function(t,e){return this.gc.Ar(t,e)},e.prototype.Pr=function(t,e){return this.gc.getEntries(t,e)},e}(Hc),zf=function(){function t(t){this.persistence=t,this.mu=new $c((function(t){return Xs(t)}),Zs),this.lastRemoteSnapshotVersion=ps.min(),this.highestTargetId=0,this.Au=0,this.Ru=new jf,this.targetCount=0,this.Pu=nf.Bo()}return t.prototype.Un=function(t,e){return this.mu.forEach((function(t,n){return e(n)})),wc.resolve()},t.prototype.Wo=function(t){return wc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.jo=function(t){return wc.resolve(this.Au)},t.prototype.Uo=function(t){return this.highestTargetId=this.Pu.next(),wc.resolve(this.highestTargetId)},t.prototype.Go=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Au&&(this.Au=e),wc.resolve()},t.prototype.Ho=function(t){this.mu.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Pu=new nf(e),this.highestTargetId=e),t.sequenceNumber>this.Au&&(this.Au=t.sequenceNumber)},t.prototype.zo=function(t,e){return this.Ho(e),this.targetCount+=1,wc.resolve()},t.prototype.Yo=function(t,e){return this.Ho(e),wc.resolve()},t.prototype.Xo=function(t,e){return this.mu.delete(e.target),this.Ru.cu(e.targetId),this.targetCount-=1,wc.resolve()},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return this.mu.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.mu.delete(s),o.push(r.Zo(t,u.targetId)),i++)})),wc.hs(o).next((function(){return i}))},t.prototype.tc=function(t){return wc.resolve(this.targetCount)},t.prototype.ec=function(t,e){var n=this.mu.get(e)||null;return wc.resolve(n)},t.prototype.nc=function(t,e,n){return this.Ru.iu(e,n),wc.resolve()},t.prototype.ic=function(t,e,n){this.Ru.ou(e,n);var r=this.persistence.Io,i=[];return r&&e.forEach((function(e){i.push(r.Oo(t,e))})),wc.hs(i)},t.prototype.Zo=function(t,e){return this.Ru.cu(e),wc.resolve()},t.prototype.oc=function(t,e){var n=this.Ru.uu(e);return wc.resolve(n)},t.prototype.Mo=function(t,e){return wc.resolve(this.Ru.Mo(e))},t}(),$f=function(){function t(t,e){var n=this;this.yu={},this.Fc=new qc(0),this.Oc=!1,this.Oc=!0,this.Io=t(this),this.Qc=new zf(this),this.To=new $h,this.Kc=function(t,e){return new Bf(t,(function(t){return n.Io.gu(t)}))}(this.To),this.fe=new Dh(e),this.Wc=new Mf(this.fe)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$=function(){return this.Oc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Xc=function(){},t.prototype.Zc=function(){},t.prototype.Ia=function(){return this.To},t.prototype.Ta=function(t){var e=this.yu[t.I()];return e||(e=new qf(this.To,this.Io),this.yu[t.I()]=e),e},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r=this;Ao("MemoryPersistence","Starting transaction:",t);var i=new Hf(this.Fc.next());return this.Io.Vu(),n(i).next((function(t){return r.Io.pu(i).next((function(){return t}))})).cs().then((function(t){return i.ki(),t}))},t.prototype.bu=function(t,e){return wc.ls(Object.values(this.yu).map((function(n){return function(){return n.Mo(t,e)}})))},t}(),Hf=function(t){function e(e){var n=this;return(n=t.call(this)||this).oo=e,n}return wt(e,t),e}(Mc),Kf=function(){function t(t){this.persistence=t,this.vu=new jf,this.Su=null}return t.Du=function(e){return new t(e)},Object.defineProperty(t.prototype,"Cu",{get:function(){if(this.Su)return this.Su;throw ko()},enumerable:!1,configurable:!0}),t.prototype.sc=function(t,e,n){return this.vu.sc(n,e),this.Cu.delete(n.toString()),wc.resolve()},t.prototype.rc=function(t,e,n){return this.vu.rc(n,e),this.Cu.add(n.toString()),wc.resolve()},t.prototype.Oo=function(t,e){return this.Cu.add(e.toString()),wc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.vu.cu(e.targetId).forEach((function(t){return n.Cu.add(t.toString())}));var r=this.persistence.ac();return r.oc(t,e.targetId).next((function(t){t.forEach((function(t){return n.Cu.add(t.toString())}))})).next((function(){return r.Xo(t,e)}))},t.prototype.Vu=function(){this.Su=new Set},t.prototype.pu=function(t){var e=this,n=this.persistence._c().lc();return wc.forEach(this.Cu,(function(r){var i=ms.Lt(r);return e.xu(t,i).next((function(t){t||n.mr(i)}))})).next((function(){return e.Su=null,n.apply(t)}))},t.prototype.fc=function(t,e){var n=this;return this.xu(t,e).next((function(t){t?n.Cu.delete(e.toString()):n.Cu.add(e.toString())}))},t.prototype.gu=function(t){return 0},t.prototype.xu=function(t,e){var n=this;return wc.ls([function(){return wc.resolve(n.vu.Mo(e))},function(){return n.persistence.ac().Mo(t,e)},function(){return n.persistence.bu(t,e)}])},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wf(t,e){return"firestore_clients_"+t+"_"+e}function Yf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.T()&&(r+="_"+e.uid),r}function Qf(t,e){return"firestore_targets_"+t+"_"+e}var Jf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Nu=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new jo(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(No("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Xf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Nu=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new jo(r.error.code,r.error.message)),i?new t(e,r.state,o):(No("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Zf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Nu=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Oa(),s=0;i&&s<r.activeTargetIds.length;++s)i=rs(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(No("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),tl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Nu=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(No("SharedClientState","Failed to parse online state: "+e),null)},t}(),el=function(){function t(){this.activeTargetIds=Oa()}return t.prototype.Ou=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ku=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fu=function(){var t={activeTargetIds:this.activeTargetIds.Dt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),nl=function(){function t(t,e,n,r,i){this.window=t,this.js=e,this.persistenceKey=n,this.Mu=r,this.Lu=null,this.$u=null,this.Hi=null,this.Bu=this.qu.bind(this),this.Uu=new da(Ro),this.Nr=!1,this.Qu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ku=Wf(this.persistenceKey,this.Mu),this.Wu=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Uu=this.Uu.Ie(this.Mu,new el),this.ju=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Gu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.zu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Hu=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ju=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Bu)}return t.G=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Et(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h,f=this;return _t(this,(function(l){switch(l.label){case 0:return[4,this.Lu.Ea()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Mu&&(i=this.getItem(Wf(this.persistenceKey,r)))&&(o=Zf.Nu(r,i))&&(this.Uu=this.Uu.Ie(o.clientId,o));for(this.Yu(),(s=this.storage.getItem(this.Hu))&&(u=this.Xu(s))&&this.Zu(u),a=0,c=this.Qu;a<c.length;a++)h=c[a],this.qu(h);return this.Qu=[],this.window.addEventListener("unload",(function(){return f.$()})),this.Nr=!0,[2]}}))}))},t.prototype.Xi=function(t){this.setItem(this.Wu,JSON.stringify(t))},t.prototype.th=function(){return this.eh(this.Uu)},t.prototype.nh=function(t){var e=!1;return this.Uu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.sh=function(t){this.ih(t,"pending")},t.prototype.rh=function(t,e,n){this.ih(t,e,n),this.oh(t)},t.prototype.ah=function(t){var e="not-current";if(this.nh(t)){var n=this.storage.getItem(Qf(this.persistenceKey,t));if(n){var r=Xf.Nu(t,n);r&&(e=r.state)}}return this.uh.Ou(t),this.Yu(),e},t.prototype.hh=function(t){this.uh.ku(t),this.Yu()},t.prototype.lh=function(t){return this.uh.activeTargetIds.has(t)},t.prototype._h=function(t){this.removeItem(Qf(this.persistenceKey,t))},t.prototype.fh=function(t,e,n){this.dh(t,e,n)},t.prototype.wh=function(t,e,n){var r=this;e.forEach((function(t){r.oh(t)})),this.currentUser=t,n.forEach((function(t){r.sh(t)}))},t.prototype.Eh=function(t){this.Th(t)},t.prototype.Ih=function(){this.mh()},t.prototype.$=function(){this.Nr&&(this.window.removeEventListener("storage",this.Bu),this.removeItem(this.Ku),this.Nr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ao("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ao("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ao("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.qu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ao("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ku)return void No("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.ea((function(){return Et(e,void 0,void 0,(function(){var t,e,r,i,o,s;return _t(this,(function(u){if(this.Nr){if(null!==n.key)if(this.ju.test(n.key)){if(null==n.newValue)return t=this.Ah(n.key),[2,this.Rh(t,null)];if(e=this.Ph(n.key,n.newValue))return[2,this.Rh(e.clientId,e)]}else if(this.Gu.test(n.key)){if(null!==n.newValue&&(r=this.yh(n.key,n.newValue)))return[2,this.gh(r)]}else if(this.zu.test(n.key)){if(null!==n.newValue&&(i=this.Vh(n.key,n.newValue)))return[2,this.ph(i)]}else if(n.key===this.Hu){if(null!==n.newValue&&(o=this.Xu(n.newValue)))return[2,this.Zu(o)]}else if(n.key===this.Wu)(s=function(t){var e=qc.Zi;if(null!=t)try{var n=JSON.parse(t);xo("number"==typeof n),e=n}catch(t){No("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==qc.Zi&&this.Hi(s);else if(n.key===this.Ju)return[2,this.Lu.bh()]}else this.Qu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"uh",{get:function(){return this.Uu.get(this.Mu)},enumerable:!1,configurable:!0}),t.prototype.Yu=function(){this.setItem(this.Ku,this.uh.Fu())},t.prototype.ih=function(t,e,n){var r=new Jf(this.currentUser,t,e,n),i=Yf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fu())},t.prototype.oh=function(t){var e=Yf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Th=function(t){var e={clientId:this.Mu,onlineState:t};this.storage.setItem(this.Hu,JSON.stringify(e))},t.prototype.dh=function(t,e,n){var r=Qf(this.persistenceKey,t),i=new Xf(t,e,n);this.setItem(r,i.Fu())},t.prototype.mh=function(){this.setItem(this.Ju,"value-not-used")},t.prototype.Ah=function(t){var e=this.ju.exec(t);return e?e[1]:null},t.prototype.Ph=function(t,e){var n=this.Ah(t);return Zf.Nu(n,e)},t.prototype.yh=function(t,e){var n=this.Gu.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Jf.Nu(new $o(i),r,e)},t.prototype.Vh=function(t,e){var n=this.zu.exec(t),r=Number(n[1]);return Xf.Nu(r,e)},t.prototype.Xu=function(t){return tl.Nu(t)},t.prototype.gh=function(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Lu.Sh(t.batchId,t.state,t.error)]:(Ao("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.ph=function(t){return this.Lu.Dh(t.targetId,t.state,t.error)},t.prototype.Rh=function(t,e){var n=this,r=e?this.Uu.Ie(t,e):this.Uu.remove(t),i=this.eh(this.Uu),o=this.eh(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.Lu.Ch(s,u).then((function(){n.Uu=r}))},t.prototype.Zu=function(t){this.Uu.get(t.clientId)&&this.$u(t.onlineState)},t.prototype.eh=function(t){var e=Oa();return t.forEach((function(t,n){e=e.je(n.activeTargetIds)})),e},t}(),rl=function(){function t(){this.xh=new el,this.Nh={},this.$u=null,this.Hi=null}return t.prototype.sh=function(t){},t.prototype.rh=function(t,e,n){},t.prototype.ah=function(t){return this.xh.Ou(t),this.Nh[t]||"not-current"},t.prototype.fh=function(t,e,n){this.Nh[t]=e},t.prototype.hh=function(t){this.xh.ku(t)},t.prototype.lh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype._h=function(t){delete this.Nh[t]},t.prototype.th=function(){return this.xh.activeTargetIds},t.prototype.nh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype.start=function(){return this.xh=new el,Promise.resolve()},t.prototype.wh=function(t,e,n){},t.prototype.Eh=function(t){},t.prototype.$=function(){},t.prototype.Xi=function(t){},t.prototype.Ih=function(){},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function il(){return"undefined"!=typeof window?window:null}function ol(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sl=function(){function t(t,e){this.ks=t,this.$u=e,this.state="Unknown",this.Fh=0,this.Oh=null,this.kh=!0}return t.prototype.Mh=function(){var t=this;0===this.Fh&&(this.Lh("Unknown"),this.Oh=this.ks.ni("online_state_timeout",1e4,(function(){return t.Oh=null,t.$h("Backend didn't respond within 10 seconds."),t.Lh("Offline"),Promise.resolve()})))},t.prototype.Bh=function(t){"Online"===this.state?this.Lh("Unknown"):(this.Fh++,this.Fh>=1&&(this.qh(),this.$h("Connection failed 1 times. Most recent error: "+t.toString()),this.Lh("Offline")))},t.prototype.set=function(t){this.qh(),this.Fh=0,"Online"===t&&(this.kh=!1),this.Lh(t)},t.prototype.Lh=function(t){t!==this.state&&(this.state=t,this.$u(t))},t.prototype.$h=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.kh?(No(e),this.kh=!1):Ao("OnlineStateTracker",e)},t.prototype.qh=function(){null!==this.Oh&&(this.Oh.cancel(),this.Oh=null)},t}(),ul=function(t,e,n,r,i){var o=this;this.Uh=t,this.Qh=e,this.ks=n,this.Kh={},this.Wh=[],this.jh=new Map,this.Gh=new Set,this.zh=[],this.Hh=i,this.Hh.L((function(t){n.Ws((function(){return Et(o,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return yl(this)?(Ao("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return(e=Do(t)).Gh.add(4),[4,cl(e)];case 1:return n.sent(),e.Jh.set("Unknown"),e.Gh.delete(4),[4,al(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Jh=new sl(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function al(t){return Et(this,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:if(!yl(t))return[3,4];e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function cl(t){return Et(this,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function hl(t,e){var n=Do(t);n.jh.has(e.targetId)||(n.jh.set(e.targetId,e),vl(n)?dl(n):Dl(n).li()&&ll(n,e))}function fl(t,e){var n=Do(t),r=Dl(n);n.jh.delete(e),r.li()&&pl(n,e),0===n.jh.size&&(r.li()?r.di():yl(n)&&n.Jh.set("Unknown"))}function ll(t,e){t.Yh.Dn(e.targetId),Dl(t).gi(e)}function pl(t,e){t.Yh.Dn(e),Dl(t).Vi(e)}function dl(t){t.Yh=new Ma({Xn:function(e){return t.Kh.Xn(e)},Zn:function(e){return t.jh.get(e)||null}}),Dl(t).start(),t.Jh.Mh()}function vl(t){return yl(t)&&!Dl(t).hi()&&t.jh.size>0}function yl(t){return 0===Do(t).Gh.size}function gl(t){t.Yh=void 0}function ml(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){return t.jh.forEach((function(e,n){ll(t,e)})),[2]}))}))}function bl(t,e){return Et(this,void 0,void 0,(function(){return _t(this,(function(n){return gl(t),vl(t)?(t.Jh.Bh(e),dl(t)):t.Jh.set("Unknown"),[2]}))}))}function wl(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o;return _t(this,(function(s){switch(s.label){case 0:if(t.Jh.set("Online"),!(e instanceof Ua&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o;return _t(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.jh.has(o)?[4,t.Kh.Xh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.jh.delete(o),t.Yh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ao("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Il(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ra?t.Yh.Ln(e):e instanceof La?t.Yh.jn(e):t.Yh.qn(e),n.isEqual(ps.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,kf(t.Uh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Yh.Hn(e);return n.rn.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.jh.get(r);i&&t.jh.set(r,i.ae(n.resumeToken,e))}})),n.on.forEach((function(e){var n=t.jh.get(e);if(n){t.jh.set(e,n.ae(Vo.h,n.oe)),pl(t,e);var r=new Cu(n.target,e,1,n.sequenceNumber);ll(t,r)}})),t.Kh.Zh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ao("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Il(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Il(t,e,n){return Et(this,void 0,void 0,(function(){var r=this;return _t(this,(function(i){switch(i.label){case 0:if(!Ac(e))throw e;return t.Gh.add(1),[4,cl(t)];case 1:return i.sent(),t.Jh.set("Offline"),n||(n=function(){return kf(t.Uh)}),t.ks.ea((function(){return Et(r,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return Ao("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Gh.delete(1),[4,al(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function El(t,e){return e().catch((function(n){return Il(t,n,e)}))}function _l(t){return Et(this,void 0,void 0,(function(){var e,n,r,i,o;return _t(this,(function(s){switch(s.label){case 0:e=Do(t),n=Pl(e),r=e.Wh.length>0?e.Wh[e.Wh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return yl(t)&&t.Wh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Df(e.Uh,r)];case 3:return null===(i=s.sent())?(0===e.Wh.length&&n.di(),[3,7]):(r=i.batchId,function(t,e){t.Wh.push(e);var n=Pl(t);n.li()&&n.bi&&n.vi(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Il(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Tl(e)&&Al(e),[2]}}))}))}function Tl(t){return yl(t)&&!Pl(t).hi()&&t.Wh.length>0}function Al(t){Pl(t).start()}function Nl(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){return Pl(t).Ci(),[2]}))}))}function Sl(t){return Et(this,void 0,void 0,(function(){var e,n,r,i;return _t(this,(function(o){for(e=Pl(t),n=0,r=t.Wh;n<r.length;n++)i=r[n],e.vi(i.mutations);return[2]}))}))}function Ol(t,e,n){return Et(this,void 0,void 0,(function(){var r,i;return _t(this,(function(o){switch(o.label){case 0:return r=t.Wh.shift(),i=zc.from(r,e,n),[4,El(t,(function(){return t.Kh.tl(i)}))];case 1:return o.sent(),[4,_l(t)];case 2:return o.sent(),[2]}}))}))}function kl(t,e){return Et(this,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return e&&Pl(t).bi?[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return us(r=e.code)&&r!==Mo.ABORTED?(n=t.Wh.shift(),Pl(t).fi(),[4,El(t,(function(){return t.Kh.el(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,_l(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Tl(t)&&Al(t),[2]}}))}))}function xl(t,e){return Et(this,void 0,void 0,(function(){var n;return _t(this,(function(r){switch(r.label){case 0:return n=Do(t),e?(n.Gh.delete(2),[4,al(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Gh.add(2),[4,cl(n)]);case 3:r.sent(),n.Jh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Dl(t){var e=this;return t.nl||(t.nl=function(t,e,n){var r=Do(t);return r.Ni(),new Rc(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:ml.bind(null,t),Z:bl.bind(null,t),yi:wl.bind(null,t)}),t.zh.push((function(n){return Et(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return n?(t.nl.fi(),vl(t)?dl(t):t.Jh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.nl.stop()];case 2:e.sent(),gl(t),e.label=3;case 3:return[2]}}))}))}))),t.nl}function Pl(t){var e=this;return t.sl||(t.sl=function(t,e,n){var r=Do(t);return r.Ni(),new Lc(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:Nl.bind(null,t),Z:kl.bind(null,t),Di:Sl.bind(null,t),Si:Ol.bind(null,t)}),t.zh.push((function(n){return Et(e,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return n?(t.sl.fi(),[4,_l(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.sl.stop()];case 3:e.sent(),t.Wh.length>0&&(Ao("RemoteStore","Stopping write stream with "+t.Wh.length+" pending writes"),t.Wh=[]),e.label=4;case 4:return[2]}}))}))}))),t.sl
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Cl=function(){this.il=void 0,this.listeners=[]},Rl=function(){this.queries=new $c((function(t){return Ou(t)}),Su),this.onlineState="Unknown",this.rl=new Set};function Ll(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return _t(this,(function(c){switch(c.label){case 0:if(n=Do(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Cl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.ol(r)];case 2:return s.il=c.sent(),[3,4];case 3:return u=c.sent(),a=Dc(u,"Initialization of query '"+ku(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.cl(n.onlineState),o.il&&e.al(o.il)&&jl(n),[2]}}))}))}function Ul(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,s;return _t(this,(function(u){return n=Do(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.ul(r))]:[2]}))}))}function Vl(t,e){for(var n=Do(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].al(s)&&(r=!0);a.il=s}}r&&jl(n)}function Ml(t,e,n){var r=Do(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function jl(t){t.rl.forEach((function(t){t.next()}))}var Fl=function(){function t(t,e,n){this.query=t,this.hl=e,this.ll=!1,this._l=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.al=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Da(t.query,t.docs,t.Ze,e,t.tn,t.fromCache,t.en,!0)}var o=!1;return this.ll?this.fl(t)&&(this.hl.next(t),o=!0):this.dl(t,this.onlineState)&&(this.wl(t),o=!0),this._l=t,o},t.prototype.onError=function(t){this.hl.error(t)},t.prototype.cl=function(t){this.onlineState=t;var e=!1;return this._l&&!this.ll&&this.dl(this._l,t)&&(this.wl(this._l),e=!0),e},t.prototype.dl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.El&&n||t.docs.bt()&&"Offline"!==e)},t.prototype.fl=function(t){if(t.docChanges.length>0)return!0;var e=this._l&&this._l.hasPendingWrites!==t.hasPendingWrites;return!(!t.en&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.wl=function(t){t=Da.sn(t.query,t.docs,t.tn,t.fromCache),this.ll=!0,this.hl.next(t)},t}(),ql=function(t){this.key=t},Bl=function(t){this.key=t},Gl=function(){function t(t,e){this.query=t,this.Rl=e,this.Pl=null,this.ln=!1,this.yl=Na(),this.tn=Na(),this.gl=Du(t),this.Vl=new ka(this.gl)}return Object.defineProperty(t.prototype,"pl",{get:function(){return this.Rl},enumerable:!1,configurable:!0}),t.prototype.bl=function(t,e){var n=this,r=e?e.vl:new xa,i=e?e.Vl:this.Vl,o=e?e.tn:this.tn,s=i,u=!1,a=bu(this.query)&&i.size===this.query.limit?i.last():null,c=wu(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pe((function(t,e){var h=i.get(t),f=e instanceof Ks?e:null;f&&(f=xu(n.query,f)?f:null);var l=!!h&&n.tn.has(h.key),p=!!f&&(f.Jt||n.tn.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Sl(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.gl(f,a)>0||c&&n.gl(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),bu(this.query)||wu(this.query))for(;s.size>this.query.limit;){var h=bu(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Vl:s,vl:r,La:u,tn:o}},t.prototype.Sl=function(t,e){return t.Jt&&e.hasCommittedMutations&&!e.Jt},t.prototype.yr=function(t,e,n){var r=this,i=this.Vl;this.Vl=t.Vl,this.tn=t.tn;var o=t.vl.Xe();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ko()}};return n(t)-n(e)}(t.type,e.type)||r.gl(t.doc,e.doc)})),this.Dl(n);var s=e?this.Cl():[],u=0===this.yl.size&&this.ln?1:0,a=u!==this.Pl;return this.Pl=u,0!==o.length||a?{snapshot:new Da(this.query,t.Vl,i,o,t.tn,0===u,a,!1),xl:s}:{xl:s}},t.prototype.cl=function(t){return this.ln&&"Offline"===t?(this.ln=!1,this.yr({Vl:this.Vl,vl:new xa,tn:this.tn,La:!1},!1)):{xl:[]}},t.prototype.Nl=function(t){return!this.Rl.has(t)&&!!this.Vl.has(t)&&!this.Vl.get(t).Jt},t.prototype.Dl=function(t){var e=this;t&&(t._n.forEach((function(t){return e.Rl=e.Rl.add(t)})),t.fn.forEach((function(t){})),t.dn.forEach((function(t){return e.Rl=e.Rl.delete(t)})),this.ln=t.ln)},t.prototype.Cl=function(){var t=this;if(!this.ln)return[];var e=this.yl;this.yl=Na(),this.Vl.forEach((function(e){t.Nl(e.key)&&(t.yl=t.yl.add(e.key))}));var n=[];return e.forEach((function(e){t.yl.has(e)||n.push(new Bl(e))})),this.yl.forEach((function(t){e.has(t)||n.push(new ql(t))})),n},t.prototype.Fl=function(t){this.Rl=t.za,this.yl=Na();var e=this.bl(t.documents);return this.yr(e,!0)},t.prototype.Ol=function(){return Da.sn(this.query,this.Vl,this.tn,0===this.Pl)},t}(),zl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},$l=function(t){this.key=t,this.kl=!1},Hl=function(){function t(t,e,n,r,i,o){this.Uh=t,this.Ml=e,this.Ll=n,this.$l=r,this.currentUser=i,this.Bl=o,this.ql={},this.Ul=new $c((function(t){return Ou(t)}),Su),this.Ql=new Map,this.Kl=[],this.Wl=new da(ms.At),this.jl=new Map,this.Gl=new jf,this.zl={},this.Hl=new Map,this.Jl=nf.qo(),this.onlineState="Unknown",this.Yl=void 0}return Object.defineProperty(t.prototype,"Xl",{get:function(){return!0===this.Yl},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kl(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,s,u;return _t(this,(function(a){switch(a.label){case 0:return n=Ep(t),(o=n.Ul.get(e))?(r=o.targetId,n.$l.ah(r),i=o.view.Ol(),[3,4]):[3,1];case 1:return[4,Pf(n.Uh,Au(e))];case 2:return s=a.sent(),u=n.$l.ah(s.targetId),r=s.targetId,[4,Wl(n,e,r,"current"===u)];case 3:i=a.sent(),n.Xl&&hl(n.Ml,s),a.label=4;case 4:return[2,i]}}))}))}function Wl(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o,s,u,a,c;return _t(this,(function(h){switch(h.label){case 0:return t.Zl=function(e,n,r){return function(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o,s;return _t(this,(function(u){switch(u.label){case 0:return(i=e.view.bl(n)).La?[4,Rf(t.Uh,e.query,!1).then((function(t){var n=t.documents;return e.view.bl(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.rn.get(e.targetId),s=e.view.yr(i,t.Xl,o),[2,(up(t,e.targetId,s.xl),s.snapshot)]}}))}))}(t,e,n,r)},[4,Rf(t.Uh,e,!0)];case 1:return i=h.sent(),o=new Gl(e,i.za),s=o.bl(i.documents),u=Ca.hn(n,r&&"Offline"!==t.onlineState),a=o.yr(s,t.Xl,u),up(t,n,a.xl),c=new zl(e,n,o),[2,(t.Ul.set(e,c),t.Ql.has(n)?t.Ql.get(n).push(e):t.Ql.set(n,[e]),a.snapshot)]}}))}))}function Yl(t,e){return Et(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:return n=Do(t),r=n.Ul.get(e),(i=n.Ql.get(r.targetId)).length>1?[2,(n.Ql.set(r.targetId,i.filter((function(t){return!Su(t,e)}))),void n.Ul.delete(e))]:n.Xl?(n.$l.hh(r.targetId),n.$l.nh(r.targetId)?[3,2]:[4,Cf(n.Uh,r.targetId,!1).then((function(){n.$l._h(r.targetId),fl(n.Ml,r.targetId),op(n,r.targetId)})).catch(Bc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return op(n,r.targetId),[4,Cf(n.Uh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ql(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,s;return _t(this,(function(u){switch(u.label){case 0:r=_p(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=Do(t),i=ls.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Na());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ka.Va(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=na(c,n.get(c.key));null!=h&&s.push(new sa(c.key,h,$s(h.proto.mapValue),Ju.exists(!0)))}return r.Ra.Po(t,i,s,e)}))})).then((function(t){var e=t.rr(n);return{batchId:t.batchId,_r:e}}))}(r.Uh,e)];case 2:return i=u.sent(),r.$l.sh(i.batchId),function(t,e,n){var r=t.zl[t.currentUser.I()];r||(r=new da(Ro)),r=r.Ie(e,n),t.zl[t.currentUser.I()]=r}(r,i.batchId,n),[4,hp(r,i._r)];case 3:return u.sent(),[4,_l(r.Ml)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=Dc(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Jl(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:n=Do(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,xf(n.Uh,e)];case 2:return r=i.sent(),e.rn.forEach((function(t,e){var r=n.jl.get(e);r&&(xo(t._n.size+t.fn.size+t.dn.size<=1),t._n.size>0?r.kl=!0:t.fn.size>0?xo(r.kl):t.dn.size>0&&(xo(r.kl),r.kl=!1))})),[4,hp(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Bc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Xl(t,e,n){var r=Do(t);if(r.Xl&&0===n||!r.Xl&&1===n){var i=[];r.Ul.forEach((function(t,n){var r=n.view.cl(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Do(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].cl(e)&&(r=!0)})),r&&jl(n)}(r.Ll,e),i.length&&r.ql.yi(i),r.onlineState=e,r.Xl&&r.$l.Eh(e)}}function Zl(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,s,u,a;return _t(this,(function(c){switch(c.label){case 0:return(r=Do(t)).$l.fh(e,"rejected",n),i=r.jl.get(e),(o=i&&i.key)?(s=(s=new da(ms.At)).Ie(o,new Ws(o,ps.min())),u=Na().add(o),a=new Pa(ps.min(),new Map,new ga(Ro),s,u),[4,Jl(r,a)]):[3,2];case 1:return c.sent(),r.Wl=r.Wl.remove(o),r.jl.delete(e),cp(r),[3,4];case 2:return[4,Cf(r.Uh,e,!1).then((function(){return op(r,e,n)})).catch(Bc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function tp(t,e){return Et(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:n=Do(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Of(n.Uh,e)];case 2:return i=o.sent(),ip(n,r,null),rp(n,r),n.$l.rh(r,"acknowledged"),[4,hp(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Bc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ep(t,e,n){return Et(this,void 0,void 0,(function(){var r,i;return _t(this,(function(o){switch(o.label){case 0:r=Do(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Do(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ra.yo(t,e).next((function(e){return xo(null!==e),r=e.keys(),n.Ra.No(t,e)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}(r.Uh,e)];case 2:return i=o.sent(),ip(r,e,n),rp(r,e),r.$l.rh(e,"rejected",n),[4,hp(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Bc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function np(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,s;return _t(this,(function(u){switch(u.label){case 0:yl((n=Do(t)).Ml)||Ao("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=Do(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ra.bo(t)}))}(n.Uh)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Hl.get(r)||[]).push(e),n.Hl.set(r,i),[3,4]);case 3:return o=u.sent(),s=Dc(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function rp(t,e){(t.Hl.get(e)||[]).forEach((function(t){t.resolve()})),t.Hl.delete(e)}function ip(t,e,n){var r=Do(t),i=r.zl[r.currentUser.I()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.zl[r.currentUser.I()]=i}}function op(t,e,n){void 0===n&&(n=null),t.$l.hh(e);for(var r=0,i=t.Ql.get(e);r<i.length;r++){var o=i[r];t.Ul.delete(o),n&&t.ql.t_(o,n)}t.Ql.delete(e),t.Xl&&t.Gl.cu(e).forEach((function(e){t.Gl.Mo(e)||sp(t,e)}))}function sp(t,e){var n=t.Wl.get(e);null!==n&&(fl(t.Ml,n),t.Wl=t.Wl.remove(e),t.jl.delete(n),cp(t))}function up(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ql?(t.Gl.sc(o.key,e),ap(t,o)):o instanceof Bl?(Ao("SyncEngine","Document no longer in limbo: "+o.key),t.Gl.rc(o.key,e),t.Gl.Mo(o.key)||sp(t,o.key)):ko()}}function ap(t,e){var n=e.key;t.Wl.get(n)||(Ao("SyncEngine","New document in limbo: "+n),t.Kl.push(n),cp(t))}function cp(t){for(;t.Kl.length>0&&t.Wl.size<t.Bl;){var e=t.Kl.shift(),n=t.Jl.next();t.jl.set(n,new $l(e)),t.Wl=t.Wl.Ie(e,n),hl(t.Ml,new Cu(Au(mu(e.path)),n,2,qc.Zi))}}function hp(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,s;return _t(this,(function(u){switch(u.label){case 0:return r=Do(t),i=[],o=[],s=[],r.Ul.bt()?[3,3]:(r.Ul.forEach((function(t,u){s.push(r.Zl(u,e,n).then((function(t){if(t){r.Xl&&r.$l.fh(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=_f.Na(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.ql.yi(i),[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h;return _t(this,(function(f){switch(f.label){case 0:n=Do(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return wc.forEach(e,(function(e){return wc.forEach(e.Ca,(function(r){return n.persistence.Io.sc(t,e.targetId,r)})).next((function(){return wc.forEach(e.xa,(function(r){return n.persistence.Io.rc(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!Ac(r=f.sent()))throw r;return Ao("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.Ba.get(u),c=a.oe,h=a.ue(c),n.Ba=n.Ba.Ie(u,h));return[2]}}))}))}(r.Uh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function fp(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return(n=Do(t)).currentUser.isEqual(e)?[3,3]:(Ao("SyncEngine","User change. New user:",e.I()),[4,Sf(n.Uh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Hl.forEach((function(t){t.forEach((function(t){t.reject(new jo(Mo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Hl.clear()}(n),n.$l.wh(e,r.ja,r.Ga),[4,hp(n,r.Wa)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function lp(t,e){var n=Do(t),r=n.jl.get(e);if(r&&r.kl)return Na().add(r.key);var i=Na(),o=n.Ql.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Ul.get(a);i=i.je(c.view.pl)}return i}function pp(t,e){return Et(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:return[4,Rf((n=Do(t)).Uh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Fl(r),[2,(n.Xl&&up(n,e.targetId,i.xl),i)]}}))}))}function dp(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){return[2,Uf((e=Do(t)).Uh).then((function(t){return hp(e,t)}))]}))}))}function vp(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o;return _t(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Do(t),r=Do(n.Ra);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vo(t,e).next((function(e){return e?n.Ka.Va(t,e):wc.resolve(null)}))}))}((i=Do(t)).Uh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,_l(i.Ml)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ip(i,e,r||null),rp(i,e),function(t,e){Do(Do(t).Ra).Fo(e)}(i.Uh,e)):ko(),s.label=4;case 4:return[4,hp(i,o)];case 5:return s.sent(),[3,7];case 6:Ao("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function yp(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return _t(this,(function(h){switch(h.label){case 0:return Ep(n=Do(t)),_p(n),!0!==e||!0===n.Yl?[3,3]:(r=n.$l.th(),[4,gp(n,r.Dt())]);case 1:return i=h.sent(),n.Yl=!0,[4,xl(n.Ml,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)u=s[o],hl(n.Ml,u);return[3,7];case 3:return!1!==e||!1===n.Yl?[3,7]:(a=[],c=Promise.resolve(),n.Ql.forEach((function(t,e){n.$l.lh(e)?a.push(e):c=c.then((function(){return op(n,e),Cf(n.Uh,e,!0)})),fl(n.Ml,e)})),[4,c]);case 4:return h.sent(),[4,gp(n,a)];case 5:return h.sent(),function(t){var e=Do(t);e.jl.forEach((function(t,n){fl(e.Ml,n)})),e.Gl.au(),e.jl=new Map,e.Wl=new da(ms.At)}(n),n.Yl=!1,[4,xl(n.Ml,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function gp(t,e,n){return Et(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d,v;return _t(this,(function(y){switch(y.label){case 0:n=Do(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.Ql.get(u))&&0!==c.length?[4,Pf(n.Uh,Au(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.Ul.get(l),[4,pp(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Lf(n.Uh,u)];case 8:return v=y.sent(),[4,Pf(n.Uh,v)];case 9:return a=y.sent(),[4,Wl(n,mp(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.ql.yi(i),r)]}}))}))}function mp(t){return gu(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function bp(t){var e=Do(t);return Do(Do(e.Uh).persistence).Ea()}function wp(t,e,n,r){return Et(this,void 0,void 0,(function(){var i,o,s;return _t(this,(function(u){switch(u.label){case 0:return(i=Do(t)).Yl?(Ao("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Ql.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Uf(i.Uh)];case 3:return o=u.sent(),s=Pa.un(e,"current"===n),[4,hp(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,Cf(i.Uh,e,!0)];case 6:return u.sent(),op(i,e,r),[3,8];case 7:ko(),u.label=8;case 8:return[2]}}))}))}function Ip(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l;return _t(this,(function(p){switch(p.label){case 0:if(!(r=Ep(t)).Yl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Ql.has(s)?(Ao("SyncEngine","Adding an already active target "+s),[3,5]):[4,Lf(r.Uh,s)]):[3,6];case 2:return u=p.sent(),[4,Pf(r.Uh,u)];case 3:return a=p.sent(),[4,Wl(r,mp(u),a.targetId,!1)];case 4:p.sent(),hl(r.Ml,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return _t(this,(function(e){switch(e.label){case 0:return r.Ql.has(t)?[4,Cf(r.Uh,t,!1).then((function(){fl(r.Ml,t),op(r,t)})).catch(Bc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ep(t){var e=Do(t);return e.Ml.Kh.Zh=Jl.bind(null,e),e.Ml.Kh.Xn=lp.bind(null,e),e.Ml.Kh.Xh=Zl.bind(null,e),e.ql.yi=Vl.bind(null,e.Ll),e.ql.t_=Ml.bind(null,e.Ll),e}function _p(t){var e=Do(t);return e.Ml.Kh.tl=tp.bind(null,e),e.Ml.Kh.el=ep.bind(null,e),e}var Tp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return this.fe=bc(t.rt.O),this.$l=this.r_(t),this.persistence=this.o_(t),[4,this.persistence.start()];case 1:return e.sent(),this.c_=this.a_(t),this.Uh=this.u_(t),[2]}}))}))},t.prototype.a_=function(t){return null},t.prototype.u_=function(t){return Nf(this.persistence,new Tf,t.h_,this.fe)},t.prototype.o_=function(t){return new $f(Kf.Du,this.fe)},t.prototype.r_=function(t){return new rl},t.prototype.terminate=function(){return Et(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return this.c_&&this.c_.stop(),[4,this.$l.$()];case 1:return t.sent(),[4,this.persistence.$()];case 2:return t.sent(),[2]}}))}))},t}(),Ap=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).l_=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return wt(e,t),e.prototype.initialize=function(e){return Et(this,void 0,void 0,(function(){return _t(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Vf(this.Uh)];case 2:return n.sent(),[4,this.l_.initialize(this,e)];case 3:return n.sent(),[4,_p(this.l_.Lu)];case 4:return n.sent(),[4,_l(this.l_.Ml)];case 5:return n.sent(),[2]}}))}))},e.prototype.u_=function(t){return Nf(this.persistence,new Tf,t.h_,this.fe)},e.prototype.a_=function(t){var e=this.persistence.Io.vr;return new Yc(e,t.ks)},e.prototype.o_=function(t){var e=If(t.rt.O,t.rt.persistenceKey),n=void 0!==this.cacheSizeBytes?Fc.Ki(this.cacheSizeBytes):Fc.Gi;return new mf(this.synchronizeTabs,e,t.clientId,n,t.ks,il(),ol(),this.fe,this.$l,!!this.forceOwnership)},e.prototype.r_=function(t){return new rl},e}(Tp),Np=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).l_=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return wt(e,t),e.prototype.initialize=function(e){return Et(this,void 0,void 0,(function(){var n,r=this;return _t(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.l_.Lu,this.$l instanceof nl?(this.$l.Lu={Sh:vp.bind(null,n),Dh:wp.bind(null,n),Ch:Ip.bind(null,n),Ea:bp.bind(null,n),bh:dp.bind(null,n)},[4,this.$l.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Yc((function(t){return Et(r,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return[4,yp(this.l_.Lu,t)];case 1:return e.sent(),this.c_&&(t&&!this.c_.Nr?this.c_.start(this.Uh):t||this.c_.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.r_=function(t){var e=il();if(!nl.G(e))throw new jo(Mo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=If(t.rt.O,t.rt.persistenceKey);return new nl(e,t.ks,n,t.clientId,t.h_)},e}(Ap),Sp=function(){function t(){}return t.prototype.initialize=function(t,e){return Et(this,void 0,void 0,(function(){var n=this;return _t(this,(function(r){switch(r.label){case 0:return this.Uh?[3,2]:(this.Uh=t.Uh,this.$l=t.$l,this.Qh=this.__(e),this.Ml=this.f_(e),this.Ll=this.d_(e),this.Lu=this.w_(e,!t.synchronizeTabs),this.$l.$u=function(t){return Xl(n.Lu,t,1)},this.Ml.Kh.E_=fp.bind(null,this.Lu),[4,xl(this.Ml,this.Lu.Xl)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.d_=function(t){return new Rl},t.prototype.__=function(t){var e,n=bc(t.rt.O),r=(e=t.rt,new fs(e));return function(t,e,n){return new Uc(t,e,n)}(t.credentials,r,n)},t.prototype.f_=function(t){var e,n,r,i,o,s=this;return e=this.Uh,n=this.Qh,r=t.ks,i=function(t){return Xl(s.Lu,t,0)},o=ts.G()?new ts:new Zo,new ul(e,n,r,i,o)},t.prototype.w_=function(t,e){return function(t,e,n,r,i,o,s){var u=new Hl(t,e,n,r,i,o);return s&&(u.Yl=!0),u}(this.Uh,this.Ml,this.Ll,this.$l,t.h_,t.Bl,e)},t.prototype.terminate=function(){return function(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=Do(t),Ao("RemoteStore","RemoteStore shutting down."),e.Gh.add(5),[4,cl(e)];case 1:return n.sent(),e.Hh.$(),e.Jh.set("Unknown"),[2]}}))}))}(this.Ml)},t}(),Op=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.T_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.T_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.I_=function(){this.muted=!0},t.prototype.T_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),kp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new jo(Mo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.b_=new gs(t)}return t.prototype.isEqual=function(t){return this.b_.isEqual(t.b_)},t}(),xp=function(t){this._methodName=t},Dp=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Cp(this.firestore,this.v_,this.S_.path.yt())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Pp=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Cp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,mu(r))||this).firestore=e,i.D_=r,i.type="collection",i}return wt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.yt();return t.bt()?null:new Dp(this.firestore,null,new ms(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Pp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Rp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof qo&&(t=t._),Jc("collection","path",e),t instanceof uh)return eh(n=vs.xt.apply(vs,St([e],r))),new Cp(t,null,n);if(!(t instanceof Dp||t instanceof Cp))throw new jo(Mo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return eh(n=vs.xt.apply(vs,St([t.path],r)).child(vs.xt(e))),new Cp(t.firestore,null,n)}function Lp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof qo&&(t=t._),1===arguments.length&&(e=Co.t()),Jc("doc","path",e),t instanceof uh)return th(n=vs.xt.apply(vs,St([e],r))),new Dp(t,null,new ms(n));if(!(t instanceof Dp||t instanceof Cp))throw new jo(Mo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return th(n=t.D_.child(vs.xt.apply(vs,St([e],r)))),new Dp(t.firestore,t instanceof Cp?t.v_:null,new ms(n))}function Up(t,e){return t instanceof qo&&(t=t._),e instanceof qo&&(e=e._),(t instanceof Dp||t instanceof Cp)&&(e instanceof Dp||e instanceof Cp)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Vp(t,e){return t instanceof qo&&(t=t._),e instanceof qo&&(e=e._),t instanceof Pp&&e instanceof Pp&&t.firestore===e.firestore&&Su(t.C_,e.C_)&&t.v_===e.v_
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Mp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new jo(Mo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new jo(Mo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.dt=function(t){return Ro(this.x_,t.x_)||Ro(this.N_,t.N_)},t}(),jp=/^__.*__$/,Fp=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Te?new sa(t,this.data,this.Te,e,this.fieldTransforms):new oa(t,this.data,e,this.fieldTransforms)},t}(),qp=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new sa(t,this.data,this.Te,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ko()}}var Gp=function(){function t(t,e,n,r,i,o){this.settings=t,this.O=e,this.fe=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Te=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.O,this.fe,this.ignoreUndefinedProperties,this.fieldTransforms,this.Te)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return cd(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Te.find((function(e){return t.vt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.vt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Bp(this.k_)&&jp.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),zp=function(){function t(t,e,n){this.O=t,this.ignoreUndefinedProperties=e,this.fe=n||bc(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Gp({k_:t,methodName:e,j_:n,path:gs.Nt(),B_:!1,W_:r},this.O,this.fe,this.ignoreUndefinedProperties)},t}();function $p(t){var e=t.so(),n=bc(t.zr);return new zp(t.zr,!!e.ignoreUndefinedProperties,n)}function Hp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);od("Data must be an object, but it was:",s,r);var u,a,c=rd(r,s);if(o.merge)u=new Es(s.Te),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=sd(e,l[f],n);if(!s.contains(p))throw new jo(Mo.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");hd(h,p)||h.push(p)}u=new Es(h),a=s.fieldTransforms.filter((function(t){return u.Qt(t.field)}))}else u=null,a=s.fieldTransforms;return new Fp(new Gs(c),u,a)}var Kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Te.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(xp);function Wp(t,e,n){return new Gp({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.O,e.fe,e.ignoreUndefinedProperties)}var Yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.z_=function(t){return new Yu(t.path,new qu)},e.prototype.isEqual=function(t){return t instanceof e},e}(xp),Qp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return wt(e,t),e.prototype.z_=function(t){var e=Wp(this,t,!0),n=this.H_.map((function(t){return nd(t,e)})),r=new Bu(n);return new Yu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(xp),Jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return wt(e,t),e.prototype.z_=function(t){var e=Wp(this,t,!0),n=this.H_.map((function(t){return nd(t,e)})),r=new zu(n);return new Yu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(xp),Xp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return wt(e,t),e.prototype.z_=function(t){var e=new Hu(t.fe,Uu(t.fe,this.J_));return new Yu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(xp);function Zp(t,e,n,r){var i=t.G_(1,e,n);od("Data must be an object, but it was:",i,r);var o=[],s=new zs;ws(r,(function(t,r){var u=ad(e,t,n);r instanceof qo&&(r=r._);var a=i.U_(u);if(r instanceof Kp)o.push(u);else{var c=nd(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Es(o);return new qp(s.Gt(),u,i.fieldTransforms)}function td(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[sd(e,r,n)],a=[i];if(o.length%2!=0)throw new jo(Mo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(sd(e,o[c])),a.push(o[c+1]);for(var h=[],f=new zs,l=u.length-1;l>=0;--l)if(!hd(h,u[l])){var p=u[l],d=a[l];d instanceof qo&&(d=d._);var v=s.U_(p);if(d instanceof Kp)h.push(p);else{var y=nd(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new Es(h);return new qp(f.Gt(),g,s.fieldTransforms)}function ed(t,e,n,r){return void 0===r&&(r=!1),nd(n,t.G_(r?4:3,e))}function nd(t,e){if(t instanceof qo&&(t=t._),id(t))return od("Unsupported field value:",e,t),rd(t,e);if(t instanceof xp)return function(t,e){if(!Bp(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Te.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=nd(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof qo&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Uu(e.fe,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ls.fromDate(t);return{timestampValue:za(e.fe,n)}}if(t instanceof ls)return n=new ls(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:za(e.fe,n)};if(t instanceof Mp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fo)return{bytesValue:$a(e.fe,t.l)};if(t instanceof Dp){n=e.O;var r=t.firestore.zr;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Wa(t.firestore.zr||e.O,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+nh(t))}(t,e)}function rd(t,e){var n={};return Is(t)?e.path&&e.path.length>0&&e.Te.push(e.path):ws(t,(function(t,r){var i=nd(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function id(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ls||t instanceof Mp||t instanceof Fo||t instanceof Dp||t instanceof xp)}function od(t,e,n){if(!id(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=nh(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function sd(t,e,n){if(e instanceof qo&&(e=e._),e instanceof kp)return e.b_;if("string"==typeof e)return ad(t,e);throw cd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var ud=new RegExp("[~\\*/\\[\\]]");function ad(t,e,n){if(e.search(ud)>=0)throw cd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(kp.bind.apply(kp,St([void 0],e.split("."))))).b_}catch(r){throw cd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function cd(t,e,n,r,i){var o=r&&!r.bt(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new jo(Mo.INVALID_ARGUMENT,(u+=". ")+t+a)}function hd(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fd=function(){function t(t){this.Qh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Et(this,void 0,void 0,(function(){var e,n=this;return _t(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new jo(Mo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r,i,o,s,u;return _t(this,(function(a){switch(a.label){case 0:return n=Do(t),r=tc(n.fe)+"/documents",i={documents:e.map((function(t){return Qa(n.fe,t)}))},[4,n._t("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){xo(!!e.found),e.found.name,e.found.updateTime;var n=Ja(t,e.found.name),r=Ka(e.found.updateTime),i=new Gs({mapValue:{fields:e.found.fields}});return new Ks(n,r,i,{})}(t,e):"missing"in e?function(t,e){xo(!!e.missing),xo(!!e.readTime);var n=Ja(t,e.missing),r=Ka(e.readTime);return new Ws(n,r)}(t,e):ko()}(n.fe,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());xo(!!e),u.push(e)})),u)]}}))}))}(this.Qh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Ws||t instanceof Ks?n.sf(t):ko()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new fa(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Et(this,void 0,void 0,(function(){var t,e=this;return _t(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ms.Lt(n);e.mutations.push(new la(r,e.Ee(r)))})),[4,function(t,e){return Et(this,void 0,void 0,(function(){var n,r,i;return _t(this,(function(o){switch(o.label){case 0:return n=Do(t),r=tc(n.fe)+"/documents",i={writes:e.map((function(t){return rc(n.fe,t)}))},[4,n.at("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Qh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Ks)e=t.version;else{if(!(t instanceof Ws))throw ko();e=ps.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new jo(Mo.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Ee=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Ju.updateTime(e):Ju.de()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(ps.min()))throw new jo(Mo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ju.updateTime(e)}return Ju.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),ld=function(){function t(t,e,n,r){this.ks=t,this.Qh=e,this.updateFunction=n,this.Bs=r,this.cf=5,this.ui=new Pc(this.ks,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.ui.ti((function(){return Et(t,void 0,void 0,(function(){var t,e,n=this;return _t(this,(function(r){return t=new fd(this.Qh),(e=this.uf(t))&&e.then((function(e){n.ks.Ws((function(){return t.commit().then((function(){n.Bs.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!es(e)&&e.catch&&e.then?e:(this.Bs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Bs.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.ks.Ws((function(){return e.af(),Promise.resolve()}))):this.Bs.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!us(e)}return!1},t}(),pd=function(){function t(t,e,n){var r=this;this.credentials=t,this.ks=e,this.rt=n,this.user=$o.UNAUTHENTICATED,this.clientId=Co.t(),this._f=function(){},this.S=new hs,this.credentials.V((function(t){Ao("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r._f(t)),r.S.resolve()}))}return t.prototype.getConfiguration=function(){return Et(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return[4,this.S.promise];case 1:return[2,(t.sent(),{ks:this.ks,rt:this.rt,clientId:this.clientId,credentials:this.credentials,h_:this.user,Bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.S.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.ks.wf)throw new jo(Mo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.ks.Ef();var e=new hs;return this.ks.Tf((function(){return Et(t,void 0,void 0,(function(){var t,n;return _t(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.p(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Dc(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function dd(t,e){return Et(this,void 0,void 0,(function(){var n,r=this;return _t(this,(function(i){switch(i.label){case 0:return t.ks.Af(),Ao("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return Et(r,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:return[4,Sf(e.Uh,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.Xc((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function vd(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return t.ks.Af(),[4,yd(t)];case 1:return n=i.sent(),Ao("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return function(t,e){return Et(this,void 0,void 0,(function(){var n,r;return _t(this,(function(i){switch(i.label){case 0:return(n=Do(t)).ks.Af(),Ao("RemoteStore","RemoteStore received new credentials"),r=yl(n),n.Gh.add(3),[4,cl(n)];case 1:return i.sent(),r&&n.Jh.set("Unknown"),[4,n.Kh.E_(e)];case 2:return i.sent(),n.Gh.delete(3),[4,al(n)];case 3:return i.sent(),[2]}}))}))}(e.Ml,n)}))})),t.If=e,[2]}}))}))}function yd(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(Ao("FirestoreClient","Using default OfflineComponentProvider"),[4,dd(t,new Tp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function gd(t){return Et(this,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(Ao("FirestoreClient","Using default OnlineComponentProvider"),[4,vd(t,new Sp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function md(t){return yd(t).then((function(t){return t.persistence}))}function bd(t){return yd(t).then((function(t){return t.Uh}))}function wd(t){return gd(t).then((function(t){return t.Ml}))}function Id(t){return gd(t).then((function(t){return t.Lu}))}function Ed(t){return Et(this,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:return[4,gd(t)];case 1:return e=r.sent(),[2,((n=e.Ll).ol=Kl.bind(null,e.Lu),n.ul=Yl.bind(null,e.Lu),n)]}}))}))}function _d(t,e,n){var r=this;void 0===n&&(n={});var i=new hs;return t.ks.Ws((function(){return Et(r,void 0,void 0,(function(){var r;return _t(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Op({next:function(o){e.Ws((function(){return Ul(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new jo(Mo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new jo(Mo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Fl(mu(n.path),o,{includeMetadataChanges:!0,El:!0});return Ll(t,s)},[4,Ed(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}function Td(t,e,n){var r=this;void 0===n&&(n={});var i=new hs;return t.ks.Ws((function(){return Et(r,void 0,void 0,(function(){var r;return _t(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Op({next:function(n){e.Ws((function(){return Ul(t,s)})),n.fromCache&&"server"===r.source?i.reject(new jo(Mo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Fl(n,o,{includeMetadataChanges:!0,El:!0});return Ll(t,s)},[4,Ed(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}var Ad=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.ui=new Pc(this,"async_queue_retry"),this.vf=function(){var e=ol();e&&Ao("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ui.si()};var e=ol();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ws=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=ol();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.ea=function(t){var e=this;this.Ws((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Et(this,void 0,void 0,(function(){var t,e=this;return _t(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.ui.reset(),[3,4];case 3:if(!Ac(t=n.sent()))throw t;return Ao("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.ui.ti((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,No("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.ni=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=xc.qs(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&ko()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Et(this,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].Ms===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.Ls-e.Ls}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ms===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),Nd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new Ad,r.Wr="name"in e?e.name:"[DEFAULT]",r}return wt(e,t),e.prototype.io=function(){return this.Lf||Od(this),this.Lf.terminate()},e}(uh);function Sd(t){return t.Lf||Od(t),t.Lf.df(),t.Lf}function Od(t){var e=t.so(),n=function(t,e,n){return new Jo(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.zr,t.Wr,e);t.Lf=new pd(t.Hr,t.Mf,n)}function kd(t,e,n){var r=this,i=new hs;return t.ks.enqueue((function(){return Et(r,void 0,void 0,(function(){var r;return _t(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,dd(t,n)];case 1:return o.sent(),[4,vd(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Mo.FAILED_PRECONDITION||t.code===Mo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function xd(t){if(t.Yr||t.Xr)throw new jo(Mo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dd=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),xs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return As(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(Ns(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw ko()}},t.prototype.jf=function(t,e){var n=this,r={};return ws(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Mp(As(t.latitude),As(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=Os(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(ks(t));default:return null}},t.prototype.Bf=function(t){var e=Ts(t);return new ls(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=vs.xt(t);xo(mc(n));var r=new Xo(n.get(1),n.get(3)),i=new ms(n.Pt(5));return r.isEqual(e)||No("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Pd=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Dp(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Cd(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.Yt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Rd("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Cd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Pd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rd(t,e){return"string"==typeof e?ad(t,e):e instanceof qo?e._.b_:e.b_}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ld(t){if(wu(t)&&0===t.ne.length)throw new jo(Mo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ud=function(){};function Vd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Md=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return wt(e,t),e.prototype.Yf=function(t){var e=$p(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.Ot()){if("array-contains"===o||"array-contains-any"===o)throw new jo(Mo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){$d(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(zd(r,t,f))}u={arrayValue:{values:a}}}else u=zd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||$d(s,o),u=ed(n,"where",s,"in"===o||"not-in"===o);var l=eu.create(i,o,u);return function(t,e){if(e.ee()){var n=Eu(t);if(null!==n&&!n.isEqual(e.field))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Iu(t);null!==r&&Hd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new jo(Mo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new jo(Mo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.zr,this.Xf,this.Zf,this.td);return new Pp(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new yu(t.path,t.collectionGroup,t.ne.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Ud),jd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return wt(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new lu(e,n);return function(t,e){if(null===Iu(t)){var n=Eu(t);null!==n&&Hd(t,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Pp(t.firestore,t.v_,function(t,e){var n=t.ne.concat([e]);return new yu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Ud),Fd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return wt(e,t),e.prototype.Yf=function(t){return new Pp(t.firestore,t.v_,Nu(t.C_,this.nd,this.sd))},e}(Ud),qd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return wt(e,t),e.prototype.Yf=function(t){var e=Gd(t,this.type,this.rd,this.od);return new Pp(t.firestore,t.v_,function(t,e){return new yu(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Ud),Bd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return wt(e,t),e.prototype.Yf=function(t){var e=Gd(t,this.type,this.rd,this.od);return new Pp(t.firestore,t.v_,function(t,e){return new yu(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Ud);function Gd(t,e,n,r){if(n[0]instanceof qo&&(n[0]=n[0]._),n[0]instanceof Pd)return function(t,e,n,r,i){if(!r)throw new jo(Mo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Tu(t);s<u.length;s++){var a=u[s];if(a.field.Ot())o.push(Vs(e,r.key));else{var c=r.field(a.field);if(Ss(c))throw new jo(Mo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.Ct();throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new hu(o,i)}(t.C_,t.firestore.zr,e,n[0].Jf,r);var i=$p(t.firestore);return function(t,e,n,r,i,o){var s=t.ne;if(i.length>s.length)throw new jo(Mo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.Ot()){if("string"!=typeof c)throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!_u(t)&&-1!==c.indexOf("/"))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(vs.xt(c));if(!ms.qt(h))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new ms(h);u.push(Vs(e,f))}else{var l=ed(n,r,c);u.push(l)}}return new hu(u,o)}(t.C_,t.firestore.zr,i,e,n,r)}function zd(t,e,n){if(n instanceof qo&&(n=n._),"string"==typeof n){if(""===n)throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_u(e)&&-1!==n.indexOf("/"))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(vs.xt(n));if(!ms.qt(r))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Vs(t,new ms(r))}if(n instanceof Dp)return Vs(t,n.S_);throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+nh(n)+".")}function $d(t,e){if(!Array.isArray(t)||0===t.length)throw new jo(Mo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new jo(Mo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Hd(t,e,n){if(!n.isEqual(e))throw new jo(Mo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Wd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return wt(e,t),e.prototype.Uf=function(t){return new Fo(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new Dp(this.firestore,null,e)},e}(Dd);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Yd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Qd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Jd=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).zf=e,u.ad=e,u.metadata=o,u}return wt(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Xd(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.Yt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Rd("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Pd),Xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Jd),Zd=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Qd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Xd(n.zf,n.Hf,r.key,r,new Qd(n.ud.tn.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.nn)throw new jo(Mo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.Ze.bt()){var n=0;return t.ud.docChanges.map((function(e){var r=new Xd(t.zf,t.Hf,e.doc.key,e.doc,new Qd(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.Ze;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Xd(t.zf,t.Hf,e.doc.key,e.doc,new Qd(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:tv(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function tv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ko()}}function ev(t,e){return t instanceof Jd&&e instanceof Jd?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Zd&&e instanceof Zd&&t.zf===e.zf&&Vp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return wt(e,t),e.prototype.Uf=function(t){return new Fo(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new Dp(this.firestore,null,e)},e}(Dd);function rv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=rh(t,Dp);var o=rh(t.firestore,Nd),s=$p(o);return e instanceof qo&&(e=e._),ov(o,[("string"==typeof e||e instanceof kp?td(s,"updateDoc",t.S_,e,n,r):Zp(s,"updateDoc",t.S_,e)).F_(t.S_,Ju.exists(!0))])}function iv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof qo&&(t=t._);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||Yd(i[u])||(s=i[u],u++);var a,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(Yd(i[u])){var l=i[u];i[u]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[u+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[u+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof Dp)c=rh(t.firestore,Nd),h=mu(t.S_.path),a={next:function(e){i[u]&&i[u](sv(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=rh(t,Pp);c=rh(p.firestore,Nd),h=p.C_;var d=new nv(c);a={next:function(t){i[u]&&i[u](new Zd(c,d,p,t))},error:i[u+1],complete:i[u+2]},Ld(t.C_)}return function(t,e,n,r){var i=this,o=new Op(r),s=new Fl(e,o,n);return t.ks.Ws((function(){return Et(i,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=Ll,[4,Ed(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.I_(),t.ks.Ws((function(){return Et(i,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=Ul,[4,Ed(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Sd(c),h,f,a)}function ov(t,e){return function(t,e){var n=this,r=new hs;return t.ks.Ws((function(){return Et(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return n=Ql,[4,Id(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Sd(t),e)}function sv(t,e,n){var r=n.docs.get(e.S_),i=new nv(t);return new Jd(t,i,e.S_,r,new Qd(n.hasPendingWrites,n.fromCache),e.v_)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uv=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=$p(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=av(t,this.zf),i=Kd(r.v_,e,n),o=Hp(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Ju.de())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=av(t,this.zf);return e instanceof qo&&(e=e._),o="string"==typeof e||e instanceof kp?td(this.wd,"WriteBatch.update",s.S_,e,n,r):Zp(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,Ju.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=av(t,this.zf);return this.fd=this.fd.concat(new fa(e.S_,Ju.de())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new jo(Mo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function av(t,e){if(t instanceof qo&&(t=t._),t.firestore!==e)throw new jo(Mo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return wt(e,t),e.prototype.get=function(e){var n=this,r=av(e,this.zf),i=new nv(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Jd(n.zf,i,r.S_,t.Jf,new Qd(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=$p(t)}return t.prototype.get=function(t){var e=this,n=av(t,this.zf),r=new Wd(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return ko();var i=t[0];if(i instanceof Ws)return new Pd(e.zf,r,n.S_,null,n.v_);if(i instanceof Ks)return new Pd(e.zf,r,i.key,i,n.v_);throw ko()}))},t.prototype.set=function(t,e,n){var r=av(t,this.zf),i=Kd(r.v_,e,n),o=Hp(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=av(t,this.zf);return e instanceof qo&&(e=e._),o="string"==typeof e||e instanceof kp?td(this.wd,"Transaction.update",s.S_,e,n,r):Zp(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=av(t,this.zf);return this.Td.delete(e.S_),this},t}()),hv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){xd(t=rh(t,Nd));var n=Sd(t),r=t.so(),i=new Sp;return kd(n,i,new Ap(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){xd(t=rh(t,Nd));var e=Sd(t),n=t.so(),r=new Sp;return kd(e,r,new Np(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.Yr&&!t.Xr)throw new jo(Mo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new hs;return t.Mf.Tf((function(){return Et(e,void 0,void 0,(function(){var e;return _t(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return Ec.G()?(e=t+"main",[4,Ec.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(If(t.zr,t.Wr))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),fv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Xo||(i.md=e),i}return wt(e,t),Object.defineProperty(e.prototype,"zr",{get:function(){return this._.zr},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.no()),t)).merge,this._.eo(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.no().host&&So("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return Et(e,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:return[4,md(t)];case 1:return e=r.sent(),[4,wd(t)];case 2:return n=r.sent(),[2,(e.Zc(!0),function(t){var e=Do(t);return e.Gh.delete(0),al(e)}(n))]}}))}))}))}(Sd(rh(this._,Nd)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return Et(e,void 0,void 0,(function(){var e,n;return _t(this,(function(r){switch(r.label){case 0:return[4,md(t)];case 1:return e=r.sent(),[4,wd(t)];case 2:return n=r.sent(),[2,(e.Zc(!1),function(t){return Et(this,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return(e=Do(t)).Gh.add(0),[4,cl(e)];case 1:return n.sent(),e.Jh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Sd(rh(this._,Nd)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Zc("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new hs;return t.ks.Ws((function(){return Et(e,void 0,void 0,(function(){var e;return _t(this,(function(r){switch(r.label){case 0:return e=np,[4,Id(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Sd(rh(this._,Nd)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Op(e);return t.ks.Ws((function(){return Et(n,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=function(t,e){Do(t).rl.add(e),e.next()},[4,Ed(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.I_(),t.ks.Ws((function(){return Et(n,void 0,void 0,(function(){var e;return _t(this,(function(n){switch(n.label){case 0:return e=function(t,e){Do(t).rl.delete(e)},[4,Ed(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Sd(t=rh(t,Nd)),Yd(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new jo(Mo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Tv(this,Rp(this._,t))}catch(t){throw yv(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new vv(this,Lp(this._,t))}catch(t){throw yv(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Iv(this,function(t,e){if(t=rh(t,uh),Jc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new jo(Mo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Pp(t,null,function(t){return new yu(vs.Nt(),t)}(e))}(this._,t))}catch(t){throw yv(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new hs;return t.ks.Ws((function(){return Et(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return[4,function(t){return gd(t).then((function(t){return t.Qh}))}(t)];case 1:return n=i.sent(),new ld(t.ks,n,e,r).run(),[2]}}))}))})),r.promise}(Sd(t),(function(n){return e(new cv(t,n))}))}(this._,(function(n){return t(new pv(e,n))}))},e.prototype.batch=function(){var t=this;return Sd(this._),new dv(new uv(this._,(function(e){return ov(t._,e)})))},e.prototype.loadBundle=function(t){throw new jo(Mo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new jo(Mo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(qo),lv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return wt(e,t),e.prototype.Uf=function(t){return new zo(new Fo(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return vv.Ad(e,this.firestore,null)},e}(Dd);var pv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return wt(e,t),e.prototype.get=function(t){var e=this,n=Av(t);return this._.get(n).then((function(t){return new bv(e.zf,t)}))},e.prototype.set=function(t,e,n){var r=Av(t);return n?(Xc("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Av(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,St([s,e,n],i)),this},e.prototype.delete=function(t){var e=Av(t);return this._.delete(e),this},e}(qo),dv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.set=function(t,e,n){var r=Av(t);return n?(Xc("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Av(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,St([s,e,n],i)),this},e.prototype.delete=function(t){var e=Av(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(qo),vv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new lv(e),r}return wt(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new jo(Mo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.Ct()+" has "+t.length);return new e(n,new Dp(n._,r,new ms(t)))},e.Ad=function(t,n,r){return new e(n,new Dp(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Tv(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Tv(this.firestore,Rp(this._,t))}catch(t){throw yv(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof qo&&(t=t._),t instanceof Dp&&Up(this._,t)},e.prototype.set=function(t,e){e=Xc("DocumentReference.set",e);try{return function(t,e,n){t=rh(t,Dp);var r=rh(t.firestore,Nd),i=Kd(t.v_,e,n);return ov(r,[Hp($p(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Ju.de())])}(this._,t,e)}catch(t){throw yv(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?rv(this._,t):rv.apply(void 0,St([this._,t,e],n))}catch(t){throw yv(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return ov(rh((t=this._).firestore,Nd),[new fa(t.S_,Ju.de())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=gv(e),i=mv(e,(function(e){return new bv(t.firestore,new Jd(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return iv(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=rh(t,Dp);var e=rh(t.firestore,Nd),n=Sd(e),r=new nv(e);return function(t,e){var n=this,r=new hs;return t.ks.Ws((function(){return Et(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Et(this,void 0,void 0,(function(){var r,i;return _t(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Do(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ka.Pa(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Ks?n.resolve(i):i instanceof Ws?n.resolve(null):n.reject(new jo(Mo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Dc(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,bd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Jd(e,r,t.S_,n,new Qd(n instanceof Ks&&n.Jt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=rh(t,Dp);var e=rh(t.firestore,Nd);return _d(Sd(e),t.S_,{source:"server"}).then((function(n){return sv(e,t,n)}))}(this._):function(t){t=rh(t,Dp);var e=rh(t.firestore,Nd);return _d(Sd(e),t.S_).then((function(n){return sv(e,t,n)}))}(this._)).then((function(t){return new bv(e.firestore,new Jd(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(qo);function yv(t,e,n){return t.message=t.message.replace(e,n),t}function gv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Yd(r))return r}return{}}function mv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Yd(t[0])?t[0]:Yd(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var bv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return wt(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new vv(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return ev(this._,t._)},e}(qo),wv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.data=function(t){return this._.data(t)},e}(bv),Iv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new lv(e),r}return wt(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Vd(this._,function(t,e,n){var r=e,i=Rd("where",t);return new Md(i,r,n)}(t,n,r)))}catch(t){throw yv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Vd(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Rd("orderBy",t);return new jd(r,n)}(t,n)))}catch(t){throw yv(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Vd(this._,function(t){return ih("limit",t),new Fd("limit",t,"F")}(t)))}catch(t){throw yv(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Vd(this._,function(t){return ih("limitToLast",t),new Fd("limitToLast",t,"L")}(t)))}catch(t){throw yv(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Vd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qd("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw yv(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Vd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qd("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw yv(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Vd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bd("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw yv(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Vd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bd("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw yv(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Vp(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=rh(t,Pp);var e=rh(t.firestore,Nd),n=Sd(e),r=new nv(e);return function(t,e){var n=this,r=new hs;return t.ks.Ws((function(){return Et(n,void 0,void 0,(function(){var n;return _t(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Et(this,void 0,void 0,(function(){var r,i,o,s,u;return _t(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Rf(t,e,!0)];case 1:return u=a.sent(),r=new Gl(e,u.za),i=r.bl(u.documents),o=r.yr(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Dc(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,bd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Zd(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=rh(t,Pp);var e=rh(t.firestore,Nd),n=Sd(e),r=new nv(e);return Td(n,t.C_,{source:"server"}).then((function(n){return new Zd(e,r,t,n)}))}(this._):function(t){t=rh(t,Pp);var e=rh(t.firestore,Nd),n=Sd(e),r=new nv(e);return Ld(t.C_),Td(n,t.C_).then((function(n){return new Zd(e,r,t,n)}))}(this._)).then((function(t){return new _v(e.firestore,new Zd(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=gv(e),i=mv(e,(function(e){return new _v(t.firestore,new Zd(t.firestore._,t.Hf,t._,e.ud))}));return iv(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(qo),Ev=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return wt(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new wv(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(qo),_v=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return wt(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Iv(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new wv(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new Ev(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new wv(n.zf,r))}))},e.prototype.isEqual=function(t){return ev(this._,t._)},e}(qo),Tv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return wt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new vv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new vv(this.firestore,void 0===t?Lp(this._):Lp(this._,t))}catch(t){throw yv(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=rh(t.firestore,Nd),r=Lp(t),i=Kd(t.v_,e);return ov(n,[Hp($p(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Ju.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new vv(e.firestore,t)}))},e.prototype.isEqual=function(t){return Up(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Iv);function Av(t){return t instanceof qo&&(t=t._),rh(t,Dp)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Nv,Sv=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(kp.bind.apply(kp,St([void 0],e))))||this}return wt(e,t),e.documentId=function(){return new e(gs.kt().Ct())},e.prototype.isEqual=function(t){return t instanceof qo&&(t=t._),t instanceof kp&&this._.b_.isEqual(t.b_)},e}(qo),Ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.serverTimestamp=function(){var t=new Yp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Kp("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qp("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jp("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Xp("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(qo),kv={Firestore:fv,GeoPoint:Mp,Timestamp:ls,Blob:zo,Transaction:pv,WriteBatch:dv,DocumentReference:vv,DocumentSnapshot:bv,Query:Iv,QueryDocumentSnapshot:wv,QuerySnapshot:_v,CollectionReference:Tv,FieldPath:Sv,FieldValue:Ov,setLogLevel:function(t){var e;e=t,_o.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Ft("firestore",(function(t){return function(t,e){return new fv(t,new Nd(t,e),new hv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},kv)))})(Nv=de),Nv.registerVersion("@firebase/firestore","2.1.0");de.initializeApp({projectId:"sample-project-294713"});const xv=function(){const t=window.location.search;let e;if(t)e=t.substring(1);else{const t=mt();window.location.hash=t,window.history.replaceState("","","?"+t),e=t}return e}(),Dv=de.firestore().collection("rooms").doc(xv),Pv=function(){const{subscribe:t,set:e}=ht([]);return{subscribe:t,set:e,append:(t,e)=>{Dv.get().then((n=>{let r=[],i={closed:!0};if(n&&n.exists){const e=n.data();r=[...e.estimates.filter((e=>e.name!==t))],i=e.tableState}r.push({name:t,point:e,appendedAt:de.firestore.Timestamp.now()}),Dv.set({estimates:r,tableState:i})}))},remove:(t,e=null)=>{Dv.get().then((n=>{if(n&&n.exists){const r=n.data();r.estimates=r.estimates.filter((e=>e.name!==t)),Dv.set(r).then(e)}else e()}))},clear:()=>{Dv.delete()}}}(),Cv=function(){const{subscribe:t,set:e,update:n}=ht({closed:!0});return{subscribe:t,set:e,open:()=>{Dv.get().then((t=>{if(t&&t.exists){const e=t.data();e.tableState={closed:!1},Dv.set(e)}}))},close:()=>{Dv.delete()}}}(),Rv=new Promise((t=>{Dv.onSnapshot((t=>{if(t&&t.exists){const e=t.data(),n=(t,e)=>t.appendedAt.seconds-e.appendedAt.seconds;Pv.set(e.estimates.sort(n)),Cv.set(e.tableState)}else Pv.set([]),Cv.set({closed:!0})})),t()}));function Lv(e){let n,r,i,o,s=(e[2]?"":e[0])+"";return{c(){n=y("div"),r=g(s),w(n,"class","card svelte-tq9sw8"),_(n,"closed",e[2]),_(n,"selected",e[1])},m(t,s){d(t,n,s),p(n,r),i||(o=b(n,"click",e[3]),i=!0)},p(t,[e]){5&e&&s!==(s=(t[2]?"":t[0])+"")&&I(r,s),4&e&&_(n,"closed",t[2]),2&e&&_(n,"selected",t[1])},i:t,o:t,d(t){t&&v(n),i=!1,o()}}}function Uv(t,e,n){let{point:r}=e,{selected:i=!1}=e,{closed:o=!1}=e;const s=function(){const t=D();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=T(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}();return t.$$set=t=>{"point"in t&&n(0,r=t.point),"selected"in t&&n(1,i=t.selected),"closed"in t&&n(2,o=t.closed)},[r,i,o,function(){s("selectCard",{point:r})}]}class Vv extends st{constructor(t){super(),ot(this,t,Uv,Lv,s,{point:0,selected:1,closed:2})}}function Mv(t,e,n){const r=t.slice();return r[5]=e[n],r}function jv(t,e){let n,r,i,o,s,u,a,c,h=e[5].name+"";return r=new Vv({props:{point:e[5].point,closed:e[0].closed}}),{key:t,first:null,c(){n=y("div"),et(r.$$.fragment),i=m(),o=y("div"),s=g(h),u=m(),w(o,"class","name svelte-1nfxwa2"),w(n,"class","estimate svelte-1nfxwa2"),this.first=n},m(t,e){d(t,n,e),nt(r,n,null),p(n,i),p(n,o),p(o,s),p(n,u),c=!0},p(t,e){const n={};2&e&&(n.point=t[5].point),1&e&&(n.closed=t[0].closed),r.$set(n),(!c||2&e)&&h!==(h=t[5].name+"")&&I(s,h)},i(t){c||(Y(r.$$.fragment,t),M((()=>{a||(a=X(n,at,{y:100},!0)),a.run(1)})),c=!0)},o(t){Q(r.$$.fragment,t),a||(a=X(n,at,{y:100},!1)),a.run(0),c=!1},d(t){t&&v(n),rt(r),t&&a&&a.end()}}}function Fv(t){let e,n,r,i,o=t[0].closed?"open":"return";return{c(){e=y("div"),n=g(o),w(e,"class","open-button svelte-1nfxwa2")},m(o,s){d(o,e,s),p(e,n),r||(i=b(e,"click",t[2]),r=!0)},p(t,e){1&e&&o!==(o=t[0].closed?"open":"return")&&I(n,o)},d(t){t&&v(e),r=!1,i()}}}function qv(e){let n,r,i;return{c(){n=y("div"),n.textContent="Copy",w(n,"class","copy-button svelte-1nfxwa2")},m(t,o){d(t,n,o),r||(i=b(n,"click",e[3]),r=!0)},p:t,d(t){t&&v(n),r=!1,i()}}}function Bv(t){let e,n,r,i,o,s=[],u=new Map,a=t[1];const c=t=>t[5].name;for(let e=0;e<a.length;e+=1){let n=Mv(t,a,e),r=c(n);u.set(r,s[e]=jv(r,n))}let h=(t[1].length>0||!t[0].closed)&&Fv(t),f=!t[0].closed&&qv(t);return{c(){e=y("div"),n=y("div");for(let t=0;t<s.length;t+=1)s[t].c();r=m(),h&&h.c(),i=m(),f&&f.c(),w(n,"class","estimates svelte-1nfxwa2"),w(e,"class","table svelte-1nfxwa2")},m(t,u){d(t,e,u),p(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);p(e,r),h&&h.m(e,null),p(e,i),f&&f.m(e,null),o=!0},p(t,[r]){if(3&r){const e=t[1];K(),s=function(t,e,n,r,i,o,s,u,a,c,h,f){let l=t.length,p=o.length,d=l;const v={};for(;d--;)v[t[d].key]=d;const y=[],g=new Map,m=new Map;for(d=p;d--;){const t=f(i,o,d),u=n(t);let a=s.get(u);a?r&&a.p(t,e):(a=c(u,t),a.c()),g.set(u,y[d]=a),u in v&&m.set(u,Math.abs(d-v[u]))}const b=new Set,w=new Set;function I(t){Y(t,1),t.m(u,h),s.set(t.key,t),h=t.first,p--}for(;l&&p;){const e=y[p-1],n=t[l-1],r=e.key,i=n.key;e===n?(h=e.first,l--,p--):g.has(i)?!s.has(r)||b.has(r)?I(e):w.has(i)?l--:m.get(r)>m.get(i)?(w.add(r),I(e)):(b.add(i),l--):(a(n,s),l--)}for(;l--;){const e=t[l];g.has(e.key)||a(e,s)}for(;p;)I(y[p-1]);return y}(s,r,c,1,t,e,u,n,tt,jv,null,Mv),W()}t[1].length>0||!t[0].closed?h?h.p(t,r):(h=Fv(t),h.c(),h.m(e,i)):h&&(h.d(1),h=null),t[0].closed?f&&(f.d(1),f=null):f?f.p(t,r):(f=qv(t),f.c(),f.m(e,null))},i(t){if(!o){for(let t=0;t<a.length;t+=1)Y(s[t]);o=!0}},o(t){for(let t=0;t<s.length;t+=1)Q(s[t]);o=!1},d(t){t&&v(e);for(let t=0;t<s.length;t+=1)s[t].d();h&&h.d(),f&&f.d()}}}function Gv(t,e,n){let r,i;return u(t,Cv,(t=>n(0,r=t))),u(t,Pv,(t=>n(1,i=t))),[r,i,function(t){r.closed?i.length>0&&Cv.open():(Pv.clear(),Cv.close())},function(t){const e=function(){if(0===i.length)return"empty.";const t=new Date;return"["+t.toLocaleDateString()+" "+t.toLocaleTimeString()+"] "+i.sort(((t,e)=>t.name>e.name?1:-1)).reduce(((t,e)=>(t?t+" ":"")+`${e.name}(${e.point})`),null)}();navigator.clipboard.writeText(e)}]}class zv extends st{constructor(t){super(),ot(this,t,Gv,Bv,s,{})}}function $v(t,e,n){const r=t.slice();return r[5]=e[n],r}function Hv(t){let e,n;return e=new Vv({props:{point:t[5],selected:t[1]===t[5]}}),e.$on("selectCard",t[3]),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.selected=t[1]===t[5]),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function Kv(t){let e,n,r,i,o,s=t[2],u=[];for(let e=0;e<s.length;e+=1)u[e]=Hv($v(t,s,e));const a=t=>Q(u[t],1,1,(()=>{u[t]=null}));return{c(){e=y("div"),n=y("div"),r=g(t[0]),i=m();for(let t=0;t<u.length;t+=1)u[t].c();w(n,"class","user-name svelte-4f78du"),w(e,"class","svelte-4f78du")},m(t,s){d(t,e,s),p(e,n),p(n,r),p(e,i);for(let t=0;t<u.length;t+=1)u[t].m(e,null);o=!0},p(t,[n]){if((!o||1&n)&&I(r,t[0]),14&n){let r;for(s=t[2],r=0;r<s.length;r+=1){const i=$v(t,s,r);u[r]?(u[r].p(i,n),Y(u[r],1)):(u[r]=Hv(i),u[r].c(),Y(u[r],1),u[r].m(e,null))}for(K(),r=s.length;r<u.length;r+=1)a(r);W()}},i(t){if(!o){for(let t=0;t<s.length;t+=1)Y(u[t]);o=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)Q(u[t]);o=!1},d(t){t&&v(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(u,t)}}}function Wv(t,e,n){let r;u(t,Pv,(t=>n(4,r=t)));let i,o;for(;!(i=window.prompt("your name")););return t.$$.update=()=>{17&t.$$.dirty&&n(1,o=r.filter((t=>t.name===i)).map((t=>t.point)).pop())},[i,o,["0","1","2","3","5","8","13","21","34","55","?","∞"],function(t){const e=()=>Pv.append(i,t.detail.point);o?Pv.remove(i,o===t.detail.point?null:()=>setTimeout(e,300)):e()},r]}class Yv extends st{constructor(t){super(),ot(this,t,Wv,Kv,s,{})}}const{document:Qv}=Z;function Jv(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Xv(t){let e,n,r,i,o,s,u,a,c;return s=new zv({}),a=new Yv({}),{c(){e=y("h1"),n=g(t[0]),r=m(),i=y("p"),i.textContent="share the URL of this page with your team members.",o=m(),et(s.$$.fragment),u=m(),et(a.$$.fragment),w(e,"class","svelte-1jbuo5y"),w(i,"class","svelte-1jbuo5y")},m(h,f){d(h,e,f),p(e,n),t[4](e),d(h,r,f),d(h,i,f),d(h,o,f),nt(s,h,f),d(h,u,f),nt(a,h,f),c=!0},p(t,e){(!c||1&e)&&I(n,t[0])},i(t){c||(Y(s.$$.fragment,t),Y(a.$$.fragment,t),c=!0)},o(t){Q(s.$$.fragment,t),Q(a.$$.fragment,t),c=!1},d(n){n&&v(e),t[4](null),n&&v(r),n&&v(i),n&&v(o),rt(s,n),n&&v(u),rt(a,n)}}}function Zv(e){let n;return{c(){n=y("p"),n.textContent="...waiting",w(n,"class","svelte-1jbuo5y")},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&v(n)}}}function ty(t){let e,n,r,i,o,s,u,a;Qv.title=e=t[0];let c={ctx:t,current:null,token:null,hasCatch:!1,pending:Zv,then:Xv,catch:Jv,blocks:[,,,]};return function(t,e){const n=e.token={};function r(t,r,i,o){if(e.token!==n)return;e.resolved=o;let s=e.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const u=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(K(),Q(t,1,1,(()=>{e.blocks[n]=null})),W())})):e.block.d(1),u.c(),Y(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&q()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=D();if(t.then((t=>{x(n),r(e.then,1,e.value,t),x(null)}),(t=>{if(x(n),r(e.catch,2,e.error,t),x(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var i}(o=Rv,c),{c(){n=y("link"),r=m(),i=y("main"),c.block.c(),w(n,"href","https://fonts.googleapis.com/css?family=M+PLUS+1p"),w(n,"rel","stylesheet"),E(i,"height",t[2]),w(i,"class","svelte-1jbuo5y")},m(e,o){p(Qv.head,n),d(e,r,o),d(e,i,o),c.block.m(i,c.anchor=null),c.mount=()=>i,c.anchor=null,s=!0,u||(a=b(window,"resize",t[3]),u=!0)},p(n,[r]){t=n,(!s||1&r)&&e!==(e=t[0])&&(Qv.title=e);{const e=t.slice();c.block.p(e,r)}(!s||4&r)&&E(i,"height",t[2])},i(t){s||(Y(c.block),s=!0)},o(t){for(let t=0;t<3;t+=1){Q(c.blocks[t])}s=!1},d(t){v(n),t&&v(r),t&&v(i),c.block.d(),c.token=null,c=null,u=!1,a()}}}function ey(t,e,n){let r,{name:i}=e,o="auto";const s=()=>{n(2,o=document.documentElement.offsetHeight<document.documentElement.scrollHeight?"auto":"100%")};return t.$$set=t=>{"name"in t&&n(0,i=t.name)},t.$$.update=()=>{2&t.$$.dirty&&r&&s()},[i,r,o,s,function(t){C[t?"unshift":"push"]((()=>{r=t,n(1,r)}))}]}return new class extends st{constructor(t){super(),ot(this,t,ey,ty,s,{name:0})}}({target:document.body,props:{name:"Planning Poker"}})}();
//# sourceMappingURL=bundle.js.map
