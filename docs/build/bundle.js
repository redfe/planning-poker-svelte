var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}const a="undefined"!=typeof window;let c=a?()=>window.performance.now():()=>Date.now(),h=a?t=>requestAnimationFrame(t):t;const f=new Set;function l(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&h(l)}function p(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function b(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e,n){t.classList[n?"add":"remove"](e)}function _(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const T=new Set;let A,N=0;function S(t,e,n,r,i,o,s,u=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const h=c+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${u}`,l=t.ownerDocument;T.add(l);const p=l.__svelte_stylesheet||(l.__svelte_stylesheet=l.head.appendChild(y("style")).sheet),d=l.__svelte_rules||(l.__svelte_rules={});d[f]||(d[f]=!0,p.insertRule(`@keyframes ${f} ${h}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?v+", ":""}${f} ${r}ms linear ${i}ms 1 both`,N+=1,f}function D(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),N-=i,N||h((()=>{N||(T.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),T.clear())})))}function x(t){A=t}function k(){if(!A)throw new Error("Function called outside component initialization");return A}const O=[],P=[],L=[],C=[],R=Promise.resolve();let V=!1;function M(t){L.push(t)}let U=!1;const j=new Set;function F(){if(!U){U=!0;do{for(let t=0;t<O.length;t+=1){const e=O[t];x(e),q(e.$$)}for(x(null),O.length=0;P.length;)P.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];j.has(e)||(j.add(e),e())}L.length=0}while(O.length);for(;C.length;)C.pop()();V=!1,U=!1,j.clear()}}function q(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}let B;function G(t,e,n){t.dispatchEvent(_(`${e?"intro":"outro"}${n}`))}const z=new Set;let $;function H(){$={r:0,c:[],p:$}}function K(){$.r||i($.c),$=$.p}function W(t,e){t&&t.i&&(z.delete(t),t.i(e))}function X(t,e,n,r){if(t&&t.o){if(z.has(t))return;z.add(t),$.c.push((()=>{z.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const Y={duration:0};function Q(n,r,s,u){let a=r(n,s),p=u?0:1,d=null,v=null,y=null;function g(){y&&D(n,y)}function m(t,e){const n=t.b-p;return e*=Math.abs(n),{a:p,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(r){const{delay:o=0,duration:s=300,easing:u=e,tick:b=t,css:w}=a||Y,I={start:c()+o,b:r};r||(I.group=$,$.r+=1),d||v?v=I:(w&&(g(),y=S(n,p,r,s,o,u,w)),r&&b(0,1),d=m(I,s),M((()=>G(n,r,"start"))),function(t){let e;0===f.size&&h(l),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(v&&t>v.start&&(d=m(v,s),v=null,G(n,d.b,"start"),w&&(g(),y=S(n,p,d.b,d.duration,0,u,a.css))),d)if(t>=d.end)b(p=d.b,1-p),G(n,d.b,"end"),v||(d.b?g():--d.group.r||i(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;p=d.a+d.d*u(e/d.duration),b(p,1-p)}return!(!d&&!v)})))}return{run(t){o(a)?(B||(B=Promise.resolve(),B.then((()=>{B=null}))),B).then((()=>{a=a(),b(t)})):b(t)},end(){g(),d=v=null}}}function J(t,e){X(t,1,1,(()=>{e.delete(t.key)}))}function Z(t){t&&t.c()}function tt(t,e,r){const{fragment:s,on_mount:u,on_destroy:a,after_update:c}=t.$$;s&&s.m(e,r),M((()=>{const e=u.map(n).filter(o);a?a.push(...e):i(e),t.$$.on_mount=[]})),c.forEach(M)}function et(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(O.push(t),V||(V=!0,R.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(e,n,o,s,u,a,c=[-1]){const h=A;x(e);const f=n.props||{},l=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(l.ctx=o?o(e,f,((t,n,...r)=>{const i=r.length?r[0]:n;return l.ctx&&u(l.ctx[t],l.ctx[t]=i)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](i),p&&nt(e,t)),n})):[],l.update(),p=!0,i(l.before_update),l.fragment=!!s&&s(l.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);l.fragment&&l.fragment.l(t),t.forEach(v)}else l.fragment&&l.fragment.c();n.intro&&W(e.$$.fragment),tt(e,n.target,n.anchor),F()}x(h)}class it{$destroy(){et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ot(t){const e=t-1;return e*e*e+1}function st(t,{delay:e=0,duration:n=400,easing:r=ot,x:i=0,y:o=0,opacity:s=0}){const u=getComputedStyle(t),a=+u.opacity,c="none"===u.transform?"":u.transform,h=a*(1-s);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${a-h*e}`}}const ut=[];function at(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!ut.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),ut.push(n,e)}if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,u=t){const a=[s,u];return i.push(a),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(a);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}var ct="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),ht=new Uint8Array(16);function ft(){if(!ct)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ct(ht)}var lt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function pt(t){return"string"==typeof t&&lt.test(t)}for(var dt=[],vt=0;vt<256;++vt)dt.push((vt+256).toString(16).substr(1));function yt(t,e,n){var r=(t=t||{}).random||(t.rng||ft)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(dt[t[e+0]]+dt[t[e+1]]+dt[t[e+2]]+dt[t[e+3]]+"-"+dt[t[e+4]]+dt[t[e+5]]+"-"+dt[t[e+6]]+dt[t[e+7]]+"-"+dt[t[e+8]]+dt[t[e+9]]+"-"+dt[t[e+10]]+dt[t[e+11]]+dt[t[e+12]]+dt[t[e+13]]+dt[t[e+14]]+dt[t[e+15]]).toLowerCase();if(!pt(n))throw TypeError("Stringified UUID is invalid");return n}(r)}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var gt=function(t,e){return(gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function mt(t,e){function n(){this.constructor=t}gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var bt=function(){return(bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function wt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function It(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function Et(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _t(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Tt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_t(arguments[e]));return t}function At(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Nt(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var St=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var kt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Ot.prototype.create),o}return mt(e,t),e}(Error),Ot=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Pt(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new kt(i,u,r);return a},t}();function Pt(t,e){return t.replace(Lt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Lt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ct(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Rt(t,e){var n=new Vt(t,e);return n.subscribe.bind(n)}var Vt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Mt),void 0===r.error&&(r.error=Mt),void 0===r.complete&&(r.complete=Mt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Mt(){}var Ut=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),jt="[DEFAULT]",Ft=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=jt);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new St;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=bt({identifier:jt,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService(jt)}catch(t){}try{for(var r=Et(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=_t(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=jt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return wt(this,void 0,void 0,(function(){var t;return It(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Tt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===jt?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:jt:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qt,Bt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ft(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Gt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zt,$t=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(zt||(zt={}));var Ht,Kt={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},Wt=zt.INFO,Xt=((qt={})[zt.DEBUG]="log",qt[zt.VERBOSE]="log",qt[zt.INFO]="info",qt[zt.WARN]="warn",qt[zt.ERROR]="error",qt),Yt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Xt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Gt(["["+i+"]  "+t.name+":"],n))}},Qt=function(){function t(t){this.name=t,this._logLevel=Wt,this._logHandler=Yt,this._userLogHandler=null,$t.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in zt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Kt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.DEBUG],t)),this._logHandler.apply(this,Gt([this,zt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.VERBOSE],t)),this._logHandler.apply(this,Gt([this,zt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.INFO],t)),this._logHandler.apply(this,Gt([this,zt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.WARN],t)),this._logHandler.apply(this,Gt([this,zt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Gt([this,zt.ERROR],t)),this._logHandler.apply(this,Gt([this,zt.ERROR],t))},t}();function Jt(t){$t.forEach((function(e){e.setLogLevel(t)}))}var Zt,te=((Ht={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ht["bad-app-name"]="Illegal App name: '{$appName}",Ht["duplicate-app"]="Firebase App named '{$appName}' already exists",Ht["app-deleted"]="Firebase App named '{$appName}' already deleted",Ht["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ht["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ht),ee=new Ot("app","Firebase",te),ne="@firebase/app",re="[DEFAULT]",ie=((Zt={})[ne]="fire-core",Zt["@firebase/analytics"]="fire-analytics",Zt["@firebase/auth"]="fire-auth",Zt["@firebase/database"]="fire-rtdb",Zt["@firebase/functions"]="fire-fn",Zt["@firebase/installations"]="fire-iid",Zt["@firebase/messaging"]="fire-fcm",Zt["@firebase/performance"]="fire-perf",Zt["@firebase/remote-config"]="fire-rc",Zt["@firebase/storage"]="fire-gcs",Zt["@firebase/firestore"]="fire-fst",Zt["fire-js"]="fire-js",Zt["firebase-wrapper"]="fire-js-all",Zt),oe=new Qt("@firebase/app"),se=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Nt(void 0,t),this.container=new Bt(e.name),this._addComponent(new Ut("app",(function(){return o}),"PUBLIC"));try{for(var s=Et(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=re),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=re),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){oe.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ee.create("app-deleted",{appName:this.name_})},t}();se.prototype.name&&se.prototype.options||se.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ue(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=re);var s=o.name;if("string"!=typeof s||!s)throw ee.create("bad-app-name",{appName:String(s)});if(Ct(e,s))throw ee.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=ie[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void oe.warn(a.join(" "))}o(new Ut(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Jt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ee.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Kt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:zt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=$t;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.0.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Ct(e,t=t||re))throw ee.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return oe.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw ee.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Nt(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=Et(Object.keys(e)),f=h.next();!f.done;f=h.next()){var l=f.value;e[l]._addComponent(o)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ae=function t(){var e=ue(se);return e.INTERNAL=bt(bt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Nt(e,t)},createSubscribe:Rt,ErrorFactory:Ot,deepExtend:Nt}),e}(),ce=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){oe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var he=self.firebase.SDK_VERSION;he&&he.indexOf("LITE")>=0&&oe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var fe=ae.initializeApp;ae.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xt()&&oe.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),fe.apply(void 0,t)};var le=ae;!function(t,e){t.INTERNAL.registerComponent(new Ut("platform-logger",(function(t){return new ce(t)}),"PRIVATE")),t.registerVersion(ne,"0.6.12",e),t.registerVersion("fire-js","")}(le);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
le.registerVersion("firebase","8.0.0","app");
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var pe=function(t,e){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function de(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ve,ye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ge=ge||{},me=ye||self;function be(){}function we(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Ie(t){var e=we(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Ee(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var _e="closure_uid_"+(1e9*Math.random()>>>0),Te=0;function Ae(t,e,n){return t.call.apply(t.bind,arguments)}function Ne(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Se(t,e,n){return(Se=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ae:Ne).apply(null,arguments)}function De(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var xe=Date.now;function ke(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Oe(){this.j=this.j,this.i=this.i}Oe.prototype.j=!1,Oe.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,_e)&&t[_e]||(t[_e]=++Te)})(this)},Oe.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Pe=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Le=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ce(t){return Array.prototype.concat.apply([],arguments)}function Re(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ve(t){return/^[\s\xa0]*$/.test(t)}var Me,Ue=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function je(t,e){return-1!=t.indexOf(e)}function Fe(t,e){return t<e?-1:t>e?1:0}t:{var qe=me.navigator;if(qe){var Be=qe.userAgent;if(Be){Me=Be;break t}}Me=""}function Ge(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ze(t){var e={};for(var n in t)e[n]=t[n];return e}var $e="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function He(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<$e.length;o++)n=$e[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ke(t){return Ke[" "](t),t}Ke[" "]=be;var We,Xe,Ye=je(Me,"Opera"),Qe=je(Me,"Trident")||je(Me,"MSIE"),Je=je(Me,"Edge"),Ze=Je||Qe,tn=je(Me,"Gecko")&&!(je(Me.toLowerCase(),"webkit")&&!je(Me,"Edge"))&&!(je(Me,"Trident")||je(Me,"MSIE"))&&!je(Me,"Edge"),en=je(Me.toLowerCase(),"webkit")&&!je(Me,"Edge");function nn(){var t=me.document;return t?t.documentMode:void 0}t:{var rn="",on=(Xe=Me,tn?/rv:([^\);]+)(\)|;)/.exec(Xe):Je?/Edge\/([\d\.]+)/.exec(Xe):Qe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xe):en?/WebKit\/(\S+)/.exec(Xe):Ye?/(?:Version)[ \/]?(\S+)/.exec(Xe):void 0);if(on&&(rn=on?on[1]:""),Qe){var sn=nn();if(null!=sn&&sn>parseFloat(rn)){We=String(sn);break t}}We=rn}var un,an={};function cn(t){return function(t,e){var n=an;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Ue(String(We)).split("."),r=Ue(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=Fe(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Fe(0==s[2].length,0==u[2].length)||Fe(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(me.document&&Qe){var hn=nn();un=hn||(parseInt(We,10)||void 0)}else un=void 0;var fn=un,ln=!Qe||9<=Number(fn),pn=Qe&&!cn("9"),dn=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{me.addEventListener("test",be,e),me.removeEventListener("test",be,e)}catch(t){}return t}();function vn(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function yn(t,e){if(vn.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(tn){t:{try{Ke(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:gn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}vn.prototype.b=function(){this.defaultPrevented=!0},ke(yn,vn);var gn={2:"touch",3:"pen",4:"mouse"};yn.prototype.b=function(){yn.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,pn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var mn="closure_listenable_"+(1e6*Math.random()|0),bn=0;function wn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++bn,this.Y=this.Z=!1}function In(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function En(t){this.src=t,this.a={},this.b=0}function _n(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Pe(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(In(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Tn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}En.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Tn(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new wn(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var An="closure_lm_"+(1e6*Math.random()|0),Nn={};function Sn(t,e,n,r,i){if(r&&r.once)return xn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Sn(t,e[o],n,r,i);return null}return n=Mn(n),t&&t[mn]?t.va(e,n,Ee(r)?!!r.capture:!!r,i):Dn(t,e,n,!1,r,i)}function Dn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ee(i)?!!i.capture:!!i;if(s&&!ln)return null;var u=Rn(t);if(u||(t[An]=u=new En(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Cn,e=ln?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)dn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function xn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)xn(t,e[o],n,r,i);return null}return n=Mn(n),t&&t[mn]?t.wa(e,n,Ee(r)?!!r.capture:!!r,i):Dn(t,e,n,!0,r,i)}function kn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)kn(t,e[o],n,r,i);else r=Ee(r)?!!r.capture:!!r,n=Mn(n),t&&t[mn]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=Tn(o=t.a[e],n,r,i))&&(In(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Rn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Tn(e,n,r,i)),(n=-1<t?e[t]:null)&&On(n))}function On(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[mn])_n(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Rn(e))?(_n(n,t),0==n.b&&(n.src=null,e[An]=null)):In(t)}}}function Pn(t){return t in Nn?Nn[t]:Nn[t]="on"+t}function Ln(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&On(t),n.call(r,e)}function Cn(t,e){if(t.Y)return!0;if(!ln){if(!e)t:{e=["window","event"];for(var n=me,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ln(t,e=new yn(e,this))}return Ln(t,new yn(e,this))}function Rn(t){return(t=t[An])instanceof En?t:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mn(t){return"function"==we(t)?t:(t[Vn]||(t[Vn]=function(e){return t.handleEvent(e)}),t[Vn])}function Un(){Oe.call(this),this.c=new En(this),this.J=this,this.C=null}function jn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&_n(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}ke(Un,Oe),Un.prototype[mn]=!0,(ve=Un.prototype).addEventListener=function(t,e,n,r){Sn(this,t,e,n,r)},ve.removeEventListener=function(t,e,n,r){kn(this,t,e,n,r)},ve.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new vn(t,n);else if(t instanceof vn)t.target=t.target||n;else{var i=t;He(t=new vn(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=jn(s,r,!0,t)&&i}if(i=jn(s=t.a=n,r,!0,t)&&i,i=jn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=jn(s=t.a=e[o],r,!1,t)&&i;return i},ve.G=function(){if(Un.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)In(n[r]);delete e.a[t],e.b--}}this.C=null},ve.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ve.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Fn=me.JSON.stringify;function qn(){this.b=this.a=null}var Bn,Gn=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new $n}),(function(t){t.reset()}),100);function zn(){var t=Xn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function $n(){this.next=this.b=this.a=null}function Hn(t){me.setTimeout((function(){throw t}),0)}function Kn(t,e){Bn||function(){var t=me.Promise.resolve(void 0);Bn=function(){t.then(Yn)}}(),Wn||(Bn(),Wn=!0),Xn.add(t,e)}qn.prototype.add=function(t,e){var n=Gn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},$n.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},$n.prototype.reset=function(){this.next=this.b=this.a=null};var Wn=!1,Xn=new qn;function Yn(){for(var t;t=zn();){try{t.a.call(t.b)}catch(t){Hn(t)}var e=Gn;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Wn=!1}function Qn(t,e){Un.call(this),this.b=t||1,this.a=e||me,this.f=Se(this.Ya,this),this.g=xe()}function Jn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Zn(t,e,n){if("function"==we(t))n&&(t=Se(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Se(t.handleEvent,t)}return 2147483647<Number(e)?-1:me.setTimeout(t,e||0)}function tr(t){t.a=Zn((function(){t.a=null,t.c&&(t.c=!1,tr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ke(Qn,Un),(ve=Qn.prototype).aa=!1,ve.M=null,ve.Ya=function(){if(this.aa){var t=xe()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Jn(this),this.start()))}},ve.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=xe())},ve.G=function(){Qn.S.G.call(this),Jn(this),delete this.a};var er=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}pe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:tr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(me.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Oe);function nr(t){Oe.call(this),this.b=t,this.a={}}ke(nr,Oe);var rr=[];function ir(t,e,n,r){Array.isArray(n)||(n&&(rr[0]=n.toString()),n=rr);for(var i=0;i<n.length;i++){var o=Sn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function or(t){Ge(t.a,(function(t,e){this.a.hasOwnProperty(e)&&On(t)}),t),t.a={}}function sr(){this.a=!0}function ur(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Fn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}nr.prototype.G=function(){nr.S.G.call(this),or(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sr.prototype.info=function(){};var ar=null;function cr(){return ar=ar||new Un}function hr(t){vn.call(this,"serverreachability",t)}function fr(t){var e=cr();e.dispatchEvent(new hr(e,t))}function lr(t){vn.call(this,"statevent",t)}function pr(t){var e=cr();e.dispatchEvent(new lr(e,t))}function dr(t){vn.call(this,"timingevent",t)}function vr(t,e){if("function"!=we(t))throw Error("Fn must not be null and must be a function");return me.setTimeout((function(){t()}),e)}ke(hr,vn),ke(lr,vn),ke(dr,vn);var yr={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},gr={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function mr(){}function br(t){var e;return(e=t.a)||(e=t.a={}),e}function wr(){}mr.prototype.a=null;var Ir,Er={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function _r(){vn.call(this,"d")}function Tr(){vn.call(this,"c")}function Ar(){}function Nr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new nr(this),this.P=Sr,t=Ze?125:void 0,this.R=new Qn(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}ke(_r,vn),ke(Tr,vn),ke(Ar,mr),Ir=new Ar;var Sr=45e3,Dr={},xr={};function kr(t,e,n){t.H=1,t.i=Jr(Hr(e)),t.j=n,t.I=!0,Or(t,null)}function Or(t,e){t.u=xe(),Cr(t),t.l=Hr(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),fi(n.b,"t",r),t.D=0,t.a=oo(t.g,t.g.C?e:null),0<t.O&&(t.F=new er(Se(t.Ca,t,t.a),t.O)),ir(t.J,t.a,"readystatechange",t.Wa),e=t.B?ze(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),fr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function Pr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Lr(t,n);if(i==xr){4==e&&(t.h=4,pr(14),r=!1),ur(t.c,t.f,null,"[Incomplete Response]");break}if(i==Dr){t.h=4,pr(15),ur(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ur(t.c,t.f,i,null),jr(t,i)}4==e&&0==n.length&&(t.h=1,pr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qi(e),e.F=!0)):(ur(t.c,t.f,n,"[Invalid Chunked Response]"),Ur(t),Mr(t))}function Lr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?xr:(n=Number(e.substring(n,r)),isNaN(n)?Dr:(r+=1)+n>e.length?xr:(e=e.substr(r,n),t.D=r+n,e))}function Cr(t){t.U=xe()+t.P,Rr(t,t.P)}function Rr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=vr(Se(t.Ua,t),e)}function Vr(t){t.o&&(me.clearTimeout(t.o),t.o=null)}function Mr(t){0==t.g.v||t.A||to(t.g,t)}function Ur(t){Vr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Jn(t.R),or(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function jr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||mi(n.b,t)))if(n.I=t.N,!t.C&&mi(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Zi(n),Bi(n)}Yi(n),pr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=vr(Se(n.Ra,n),6e3));if(1>=gi(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else no(n,11)}else if((t.C||n.a==t)&&Zi(n),!Ve(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(je(h,"spdy")||je(h,"quic")||je(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(bi(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Qr(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=xe()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=io(a,a.C?a.ga:null,a.fa),p.C){wi(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(Vr(d),Cr(d)),a.a=p}else Xi(a);0<n.g.length&&$i(n)}else"stop"!=i[0]&&"close"!=i[0]||no(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?no(n,7):qi(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);fr(4)}catch(t){}}function Fr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ie(t)||"string"==typeof t)Le(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ie(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ie(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function qr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof qr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Br(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Gr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Gr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Gr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ve=Nr.prototype).setTimeout=function(t){this.P=t},ve.Wa=function(t){t=t.target;var e=this.F;e&&3==Mi(t)?e.f():this.Ca(t)},ve.Ca=function(t){try{if(t==this.a)t:{var e=Mi(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!Ze&&!this.a.$())){this.A||4!=e||7==n||fr(8==n||0>=r?3:2),Vr(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ve(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,pr(12),Ur(this),Mr(this);break t}ur(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,jr(this,a)}this.I?(Pr(this,e,o),Ze&&this.b&&3==e&&(ir(this.J,this.R,"tick",this.Va),this.R.start())):(ur(this.c,this.f,o,null),jr(this,o)),4==e&&Ur(this),this.b&&!this.A&&(4==e?to(this.g,this):(this.b=!1,Cr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,pr(12)):(this.h=0,pr(13)),Ur(this),Mr(this)}}}catch(t){}},ve.Va=function(){if(this.a){var t=Mi(this.a),e=this.a.$();this.D<e.length&&(Vr(this),Pr(this,t,e),this.b&&4!=t&&Cr(this))}},ve.cancel=function(){this.A=!0,Ur(this)},ve.Ua=function(){this.o=null;var t=xe();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(fr(3),pr(17)),Ur(this),this.h=2,Mr(this)):Rr(this,this.U-t)},(ve=qr.prototype).K=function(){Br(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ve.L=function(){return Br(this),this.a.concat()},ve.get=function(t,e){return Gr(this.b,t)?this.b[t]:e},ve.set=function(t,e){Gr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ve.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var zr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $r(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof $r){this.a=void 0!==e?e:t.a,Kr(this,t.f),this.j=t.j,Wr(this,t.c),Xr(this,t.h),this.g=t.g,e=t.b;var n=new ui;n.c=e.c,e.a&&(n.a=new qr(e.a),n.b=e.b),Yr(this,n),this.i=t.i}else t&&(n=String(t).match(zr))?(this.a=!!e,Kr(this,n[1]||"",!0),this.j=Zr(n[2]||""),Wr(this,n[3]||"",!0),Xr(this,n[4]),this.g=Zr(n[5]||"",!0),Yr(this,n[6]||"",!0),this.i=Zr(n[7]||"")):(this.a=!!e,this.b=new ui(null,this.a))}function Hr(t){return new $r(t)}function Kr(t,e,n){t.f=n?Zr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Wr(t,e,n){t.c=n?Zr(e,!0):e}function Xr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Yr(t,e,n){e instanceof ui?(t.b=e,function(t,e){e&&!t.f&&(ai(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ci(this,e),fi(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ti(e,oi)),t.b=new ui(e,t.a))}function Qr(t,e,n){t.b.set(e,n)}function Jr(t){return Qr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^xe()).toString(36)),t}function Zr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ti(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ei),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ei(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}$r.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ti(e,ni,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ti(e,ni,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ti(n,"/"==n.charAt(0)?ii:ri,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ti(n,si)),t.join("")};var ni=/[#\/\?@]/g,ri=/[#\?:]/g,ii=/[#\?]/g,oi=/[#\?@]/g,si=/#/g;function ui(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ai(t){t.a||(t.a=new qr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ci(t,e){ai(t),e=li(t,e),Gr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Gr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Br(t)))}function hi(t,e){return ai(t),e=li(t,e),Gr(t.a.b,e)}function fi(t,e,n){ci(t,e),0<n.length&&(t.c=null,t.a.set(li(t,e),Re(n)),t.b+=n.length)}function li(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function pi(t,e){this.b=t,this.a=e}function di(t){this.g=t||vi,me.PerformanceNavigationTiming?t=0<(t=me.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(me.ia&&me.ia.ya&&me.ia.ya()&&me.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(ve=ui.prototype).add=function(t,e){ai(this),this.c=null,t=li(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ve.forEach=function(t,e){ai(this),this.a.forEach((function(n,r){Le(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ve.L=function(){ai(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ve.K=function(t){ai(this);var e=[];if("string"==typeof t)hi(this,t)&&(e=Ce(e,this.a.get(li(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ce(e,t[n])}return e},ve.set=function(t,e){return ai(this),this.c=null,hi(this,t=li(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ve.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ve.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var vi=10;function yi(t){return!!t.b||!!t.a&&t.a.size>=t.f}function gi(t){return t.b?1:t.a?t.a.size:0}function mi(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function bi(t,e){t.a?t.a.add(e):t.b=e}function wi(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ii(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=de(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Re(t.c)}function Ei(){}function _i(){this.a=new Ei}function Ti(t,e,n){var r=n||"";try{Fr(t,(function(t,n){var i=t;Ee(t)&&(i=Fn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Ai(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}di.prototype.cancel=function(){var t,e;if(this.c=Ii(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=de(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ei.prototype.stringify=function(t){return me.JSON.stringify(t,void 0)},Ei.prototype.parse=function(t){return me.JSON.parse(t,void 0)};var Ni=me.JSON.parse;function Si(t){Un.call(this),this.headers=new qr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Di,this.D=this.F=!1}ke(Si,Un);var Di="",xi=/^https?$/i,ki=["POST","PUT"];function Oi(t){return"content-type"==t.toLowerCase()}function Pi(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Li(t),Ri(t)}function Li(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ci(t){if(t.b&&void 0!==ge&&(!t.s[1]||4!=Mi(t)||2!=t.X()))if(t.l&&4==Mi(t))Zn(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==Mi(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(zr)[1]||null;if(!o&&me.self&&me.self.location){var s=me.self.location.protocol;o=s.substr(0,s.length-1)}i=!xi.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var u=2<Mi(t)?t.a.statusText:""}catch(t){u=""}t.f=u+" ["+t.X()+"]",Li(t)}}finally{Ri(t)}}}function Ri(t,e){if(t.a){Vi(t);var n=t.a,r=t.s[0]?be:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Vi(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(me.clearTimeout(t.m),t.m=null)}function Mi(t){return t.a?t.a.readyState:0}function Ui(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ge(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Qr(t,e,n))}function ji(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fi(t){this.pa=0,this.g=[],this.c=new sr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=ji("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=ji("baseRetryDelayMs",5e3,t),this.Ma=ji("retryDelaySeedMs",1e4,t),this.Ja=ji("forwardChannelMaxRetries",2,t),this.ma=ji("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new di(t&&t.concurrentRequestLimit),this.ka=new _i,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function qi(t){if(Gi(t),3==t.v){var e=t.R++,n=Hr(t.B);Qr(n,"SID",t.J),Qr(n,"RID",e),Qr(n,"TYPE","terminate"),Ki(t,n),(e=new Nr(t,t.c,e,void 0)).H=2,e.i=Jr(Hr(n)),n=!1,me.navigator&&me.navigator.sendBeacon&&(n=me.navigator.sendBeacon(e.i.toString(),"")),!n&&me.Image&&((new Image).src=e.i,n=!0),n||(e.a=oo(e.g,null),e.a.ba(e.i)),e.u=xe(),Cr(e)}ro(t)}function Bi(t){t.a&&(Qi(t),t.a.cancel(),t.a=null)}function Gi(t){Bi(t),t.j&&(me.clearTimeout(t.j),t.j=null),Zi(t),t.b.cancel(),t.h&&("number"==typeof t.h&&me.clearTimeout(t.h),t.h=null)}function zi(t,e){t.g.push(new pi(t.La++,e)),3==t.v&&$i(t)}function $i(t){yi(t.b)||t.h||(t.h=!0,Kn(t.Ba,t),t.u=0)}function Hi(t,e){var n;n=e?e.f:t.R++;var r=Hr(t.B);Qr(r,"SID",t.J),Qr(r,"RID",n),Qr(r,"AID",t.P),Ki(t,r),t.i&&t.l&&Ui(r,t.i,t.l),n=new Nr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Wi(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),bi(t.b,n),kr(n,r,e)}function Ki(t,e){t.f&&Fr({},(function(t,n){Qr(e,n,t)}))}function Wi(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Se(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Ti(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Xi(t){t.a||t.j||(t.U=1,Kn(t.Aa,t),t.o=0)}function Yi(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=vr(Se(t.Aa,t),eo(t,t.o)),t.o++,!0)}function Qi(t){null!=t.s&&(me.clearTimeout(t.s),t.s=null)}function Ji(t){t.a=new Nr(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Hr(t.la);Qr(e,"RID","rpc"),Qr(e,"SID",t.J),Qr(e,"CI",t.H?"0":"1"),Qr(e,"AID",t.P),Ki(t,e),Qr(e,"TYPE","xmlhttp"),t.i&&t.l&&Ui(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Jr(Hr(e)),n.j=null,n.I=!0,Or(n,t)}function Zi(t){null!=t.m&&(me.clearTimeout(t.m),t.m=null)}function to(t,e){var n=null;if(t.a==e){Zi(t),Qi(t),t.a=null;var r=2}else{if(!mi(t.b,e))return;n=e.s,wi(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=xe()-e.u;var i=t.u;(r=cr()).dispatchEvent(new dr(r,n,e,i)),$i(t)}else Xi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(gi(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=vr(Se(t.Ba,t,e),eo(t,t.u)),t.u++,0)))}(t,e)||2==r&&Yi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:no(t,5);break;case 4:no(t,10);break;case 3:no(t,6);break;default:no(t,2)}}function eo(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function no(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Se(t.Xa,t);n||(n=new $r("//www.google.com/images/cleardot.gif"),me.location&&"http"==me.location.protocol||Kr(n,"https"),Jr(n)),function(t,e){var n=new sr;if(me.Image){var r=new Image;r.onload=De(Ai,n,r,"TestLoadImage: loaded",!0,e),r.onerror=De(Ai,n,r,"TestLoadImage: error",!1,e),r.onabort=De(Ai,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=De(Ai,n,r,"TestLoadImage: timeout",!1,e),me.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else pr(2);t.v=0,t.f&&t.f.ra(e),ro(t),Gi(t)}function ro(t){t.v=0,t.I=-1,t.f&&(0==Ii(t.b).length&&0==t.g.length||(t.b.c.length=0,Re(t.g),t.g.length=0),t.f.qa())}function io(t,e,n){var r=function(t){return t instanceof $r?Hr(t):new $r(t,void 0)}(n);if(""!=r.c)e&&Wr(r,e+"."+r.c),Xr(r,r.h);else{var i=me.location;r=function(t,e,n,r){var i=new $r(null,void 0);return t&&Kr(i,t),e&&Wr(i,e),n&&Xr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&Ge(t.W,(function(t,e){Qr(r,e,t)})),e=t.A,n=t.na,e&&n&&Qr(r,e,n),Qr(r,"VER",t.ha),Ki(t,r),r}function oo(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Si(t.Ka)).F=t.C,e}function so(){}function uo(){if(Qe&&!(10<=Number(fn)))throw Error("Environmental error: no available transport.")}function ao(t,e){Un.call(this),this.a=new Fi(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ve(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ve(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new fo(this)}function co(t){_r.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ho(){Tr.call(this),this.status=1}function fo(t){this.a=t}(ve=Si.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?br(this.H):br(Ir),this.a.onreadystatechange=Se(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Pi(this,t)}t=n||"";var i=new qr(this.headers);r&&Fr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Oi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=me.FormData&&t instanceof me.FormData,!(0<=Pe(ki,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Vi(this),0<this.o&&((this.D=function(t){return Qe&&cn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Se(this.xa,this)):this.m=Zn(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Pi(this,t)}},ve.xa=function(){void 0!==ge&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},ve.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ri(this))},ve.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ri(this,!0)),Si.S.G.call(this)},ve.za=function(){this.j||(this.A||this.l||this.g?Ci(this):this.Ta())},ve.Ta=function(){Ci(this)},ve.X=function(){try{return 2<Mi(this)?this.a.status:-1}catch(t){return-1}},ve.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ve.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ni(e)}},ve.ua=function(){return this.h},ve.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ve=Fi.prototype).ha=8,ve.v=1,ve.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Nr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?He(r=ze(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Wi(this,n,e),Qr(i=Hr(this.B),"RID",t),Qr(i,"CVER",22),this.A&&Qr(i,"X-HTTP-Session-Id",this.A),Ki(this,i),this.i&&r&&Ui(i,this.i,r),bi(this.b,n),this.Ga&&Qr(i,"TYPE","init"),this.da?(Qr(i,"$req",e),Qr(i,"SID","null"),n.V=!0,kr(n,i,null)):kr(n,i,e),this.v=2}}else 3==this.v&&(t?Hi(this,t):0==this.g.length||yi(this.b)||Hi(this))},ve.Aa=function(){if(this.j=null,Ji(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=vr(Se(this.Sa,this),t)}},ve.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Bi(this),Ji(this))},ve.Ra=function(){null!=this.m&&(this.m=null,Bi(this),Yi(this),pr(19))},ve.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),pr(2)):(this.c.info("Failed to ping google.com"),pr(1))},(ve=so.prototype).ta=function(){},ve.sa=function(){},ve.ra=function(){},ve.qa=function(){},ve.Ha=function(){},uo.prototype.a=function(t,e){return new ao(t,e)},ke(ao,Un),(ve=ao.prototype).addEventListener=function(t,e,n,r){ao.S.addEventListener.call(this,t,e,n,r)},ve.removeEventListener=function(t,e,n,r){ao.S.removeEventListener.call(this,t,e,n,r)},ve.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;pr(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=io(t,null,t.fa),$i(t)},ve.close=function(){qi(this.a)},ve.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,zi(this.a,e)}else this.g?((e={}).__data__=Fn(t),zi(this.a,e)):zi(this.a,t)},ve.G=function(){this.a.f=null,delete this.f,qi(this.a),delete this.a,ao.S.G.call(this)},ke(co,_r),ke(ho,Tr),ke(fo,so),fo.prototype.ta=function(){this.a.dispatchEvent("a")},fo.prototype.sa=function(t){this.a.dispatchEvent(new co(t))},fo.prototype.ra=function(t){this.a.dispatchEvent(new ho(t))},fo.prototype.qa=function(){this.a.dispatchEvent("b")},uo.prototype.createWebChannel=uo.prototype.a,ao.prototype.send=ao.prototype.Pa,ao.prototype.open=ao.prototype.Oa,ao.prototype.close=ao.prototype.close,yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,gr.COMPLETE="complete",wr.EventType=Er,Er.OPEN="a",Er.CLOSE="b",Er.ERROR="c",Er.MESSAGE="d",Un.prototype.listen=Un.prototype.va,Si.prototype.listenOnce=Si.prototype.wa,Si.prototype.getLastError=Si.prototype.Qa,Si.prototype.getLastErrorCode=Si.prototype.ua,Si.prototype.getStatus=Si.prototype.X,Si.prototype.getResponseJson=Si.prototype.Na,Si.prototype.getResponseText=Si.prototype.$,Si.prototype.send=Si.prototype.ba;var lo=yr,po=gr,vo=wr,yo=Si,go={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return mt(e,t),e}(Error),bo=new Qt("@firebase/firestore");function wo(){return bo.logLevel}function Io(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(bo.logLevel<=zt.DEBUG){var r=e.map(To);bo.debug.apply(bo,At(["Firestore (8.0.0): "+t],r))}}function Eo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(bo.logLevel<=zt.ERROR){var r=e.map(To);bo.error.apply(bo,At(["Firestore (8.0.0): "+t],r))}}function _o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(bo.logLevel<=zt.WARN){var r=e.map(To);bo.warn.apply(bo,At(["Firestore (8.0.0): "+t],r))}}function To(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ao(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.0) INTERNAL ASSERTION FAILED: "+t;throw Eo(e),new Error(e)}function No(t,e){t||Ao()}function So(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Do(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xo=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Do(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ko(t,e){return t<e?-1:t>e?1:0}function Oo(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Po(t){return t+"\0"}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lo=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.h=function(t){return ko(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Lo.u=new Lo("");var Co=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Lo.fromBase64String(e))}catch(e){throw new mo(go.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Lo.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ro(){if("undefined"==typeof Uint8Array)throw new mo(go.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Vo(){if("undefined"==typeof atob)throw new mo(go.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.fromBase64String=function(t){Vo();try{return new e(Lo.fromBase64String(t))}catch(t){throw new mo(go.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return Ro(),new e(Lo.fromUint8Array(t))},e.prototype.toBase64=function(){return Vo(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return Ro(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Co),Uo=function(t,e,n,r,i,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.T=o},jo=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"I",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.h=function(t){return ko(this.projectId,t.projectId)||ko(this.database,t.database)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Go=function(){function t(t,e){this.m=t,this.A=e,this.R={}}return t.prototype.get=function(t){var e=this.m(t),n=this.R[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.A(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.m(t),r=this.R[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.A(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.R[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.m(t),n=this.R[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.A(n[r][0],t))return 1===n.length?delete this.R[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){qo(this.R,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.P=function(){return Bo(this.R)},t}(),zo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mo(go.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mo(go.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new mo(go.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mo(go.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.g=function(t){return this.seconds===t.seconds?ko(this.nanoseconds,t.nanoseconds):ko(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),$o=function(){function t(t){this.timestamp=t}return t.V=function(e){return new t(e)},t.min=function(){return new t(new zo(0,0))},t.prototype.h=function(t){return this.timestamp.g(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.v=function(){return this.timestamp},t}(),Ho=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ao(),void 0===n?n=t.length-e:n>t.length-e&&Ao(),this.segments=t,this.offset=e,this.S=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.S},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.D(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.C(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.N=function(t){return t=void 0===t?1:t,this.C(this.segments,this.offset+t,this.length-t)},t.prototype.F=function(){return this.C(this.segments,this.offset,this.length-1)},t.prototype.k=function(){return this.segments[this.offset]},t.prototype.O=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.P=function(){return 0===this.length},t.prototype.M=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.$=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},t.D=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.prototype.B=function(){return this.L().join("/")},e.prototype.toString=function(){return this.B()},e.q=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new mo(go.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.U=function(){return new e([])},e}(Ho),Wo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.K=function(t){return Wo.test(t)},e.prototype.B=function(){return this.L().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.K(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.B()},e.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},e.j=function(){return new e(["__name__"])},e.G=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new mo(go.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new mo(go.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new mo(go.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new mo(go.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.U=function(){return new e([])},e}(Ho),Yo=function(){function t(t){this.path=t}return t.H=function(e){return new t(Ko.q(e))},t.J=function(e){return new t(Ko.q(e).N(5))},t.prototype.Y=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ko.D(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.D=function(t,e){return Ko.D(t.path,e.path)},t.X=function(t){return t.length%2==0},t.Z=function(e){return new t(new Ko(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Qo(t){return null==t}function Jo(t){return 0===t&&1/t==-1/0}function Zo(t){return"number"==typeof t&&Number.isInteger(t)&&!Jo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ts=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function es(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ts(t,e,n,r,i,o,s)}function ns(t){var e=So(t);if(null===e.tt){var n=e.path.B();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.B()+t.op.toString()+Ks(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.B()+e.dir;var e})).join(","),Qo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Qa(e.startAt)),e.endAt&&(n+="|ub:",n+=Qa(e.endAt)),e.tt=n}return e.tt}function rs(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!nc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Gs(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Za(t.startAt,e.startAt)&&Za(t.endAt,e.endAt)}function is(t){return Yo.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var os,ss,us=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=$o.min()),void 0===o&&(o=$o.min()),void 0===s&&(s=Lo.u),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),as=function(t){this.count=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function cs(t){switch(t){case go.OK:return Ao();case go.CANCELLED:case go.UNKNOWN:case go.DEADLINE_EXCEEDED:case go.RESOURCE_EXHAUSTED:case go.INTERNAL:case go.UNAVAILABLE:case go.UNAUTHENTICATED:return!1;case go.INVALID_ARGUMENT:case go.NOT_FOUND:case go.ALREADY_EXISTS:case go.PERMISSION_DENIED:case go.FAILED_PRECONDITION:case go.ABORTED:case go.OUT_OF_RANGE:case go.UNIMPLEMENTED:case go.DATA_LOSS:return!0;default:return Ao()}}function hs(t){if(void 0===t)return Eo("GRPC error has no .code"),go.UNKNOWN;switch(t){case os.OK:return go.OK;case os.CANCELLED:return go.CANCELLED;case os.UNKNOWN:return go.UNKNOWN;case os.DEADLINE_EXCEEDED:return go.DEADLINE_EXCEEDED;case os.RESOURCE_EXHAUSTED:return go.RESOURCE_EXHAUSTED;case os.INTERNAL:return go.INTERNAL;case os.UNAVAILABLE:return go.UNAVAILABLE;case os.UNAUTHENTICATED:return go.UNAUTHENTICATED;case os.INVALID_ARGUMENT:return go.INVALID_ARGUMENT;case os.NOT_FOUND:return go.NOT_FOUND;case os.ALREADY_EXISTS:return go.ALREADY_EXISTS;case os.PERMISSION_DENIED:return go.PERMISSION_DENIED;case os.FAILED_PRECONDITION:return go.FAILED_PRECONDITION;case os.ABORTED:return go.ABORTED;case os.OUT_OF_RANGE:return go.OUT_OF_RANGE;case os.UNIMPLEMENTED:return go.UNIMPLEMENTED;case os.DATA_LOSS:return go.DATA_LOSS;default:return Ao()}}(ss=os||(os={}))[ss.OK=0]="OK",ss[ss.CANCELLED=1]="CANCELLED",ss[ss.UNKNOWN=2]="UNKNOWN",ss[ss.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ss[ss.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ss[ss.NOT_FOUND=5]="NOT_FOUND",ss[ss.ALREADY_EXISTS=6]="ALREADY_EXISTS",ss[ss.PERMISSION_DENIED=7]="PERMISSION_DENIED",ss[ss.UNAUTHENTICATED=16]="UNAUTHENTICATED",ss[ss.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ss[ss.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ss[ss.ABORTED=10]="ABORTED",ss[ss.OUT_OF_RANGE=11]="OUT_OF_RANGE",ss[ss.UNIMPLEMENTED=12]="UNIMPLEMENTED",ss[ss.INTERNAL=13]="INTERNAL",ss[ss.UNAVAILABLE=14]="UNAVAILABLE",ss[ss.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var fs=function(){function t(t,e){this.D=t,this.root=e||ps.EMPTY}return t.prototype.ot=function(e,n){return new t(this.D,this.root.ot(e,n,this.D).copy(null,null,ps.at,null,null))},t.prototype.remove=function(e){return new t(this.D,this.root.remove(e,this.D).copy(null,null,ps.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.D(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var r=this.D(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.P=function(){return this.root.P()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ht=function(){return this.root.ht()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new ls(this.root,null,this.D,!1)},t.prototype.ft=function(t){return new ls(this.root,t,this.D,!1)},t.prototype.dt=function(){return new ls(this.root,null,this.D,!0)},t.prototype.wt=function(t){return new ls(this.root,t,this.D,!0)},t}(),ls=function(){function t(t,e,n,r){this.Et=r,this.Tt=[];for(var i=1;!t.P();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}return t.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},t.prototype.At=function(){return this.Tt.length>0},t.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),ps=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.P=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.P()?this:this.left.min()},t.prototype.ht=function(){return this.min().key},t.prototype.ct=function(){return this.right.P()?this.key:this.right.ct()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).Pt()},t.prototype.gt=function(){if(this.left.P())return t.EMPTY;var e=this;return e.left.Vt()||e.left.left.Vt()||(e=e.yt()),(e=e.copy(null,null,null,e.left.gt(),null)).Pt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.P()||i.left.Vt()||i.left.left.Vt()||(i=i.yt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Vt()&&(i=i.bt()),i.right.P()||i.right.Vt()||i.right.left.Vt()||(i=i.vt()),0===n(e,i.key)){if(i.right.P())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.gt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Pt()},t.prototype.Vt=function(){return this.color},t.prototype.Pt=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.St()),t.left.Vt()&&t.left.left.Vt()&&(t=t.bt()),t.left.Vt()&&t.right.Vt()&&(t=t.Dt()),t},t.prototype.yt=function(){var t=this.Dt();return t.right.left.Vt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.Vt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.Vt()&&this.left.Vt())throw Ao();if(this.right.Vt())throw Ao();var t=this.left.Nt();if(t!==this.right.Nt())throw Ao();return t+(this.Vt()?0:1)},t}();ps.EMPTY=null,ps.RED=!0,ps.at=!1,ps.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ao()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ao()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ao()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ao()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ao()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new ps(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.P=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ht=function(){return null},t.prototype.ct=function(){return null},t.prototype.Vt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ds=function(){function t(t){this.D=t,this.data=new fs(this.D)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ht()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.xt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.D(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.kt=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new vs(this.data._t())},t.prototype.ft=function(t){return new vs(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.P=function(){return this.data.P()},t.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.D(i,o))return!1}return!0},t.prototype.L=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.D);return n.data=e,n},t}(),vs=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),ys=new fs(Yo.D);function gs(){return ys}function ms(){return gs()}var bs=new fs(Yo.D);function ws(){return bs}var Is=new fs(Yo.D),Es=new ds(Yo.D);function _s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Es,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ts=new ds(ko);function As(){return Ts}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ns=function(){function t(t){this.D=t?function(e,n){return t(e,n)||Yo.D(e.key,n.key)}:function(t,e){return Yo.D(t.key,e.key)},this.$t=ws(),this.Lt=new fs(this.D)}return t.Bt=function(e){return new t(e.D)},t.prototype.has=function(t){return null!=this.$t.get(t)},t.prototype.get=function(t){return this.$t.get(t)},t.prototype.first=function(){return this.Lt.ht()},t.prototype.last=function(){return this.Lt.ct()},t.prototype.P=function(){return this.Lt.P()},t.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.D=this.D,r.$t=e,r.Lt=n,r},t}(),Ss=function(){function t(){this.qt=new fs(Yo.D)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):Ao():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ut((function(e,n){t.push(n)})),t},t}(),Ds=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Kt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.jt=u}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ns.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&Va(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Kt.isEqual(t.Kt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),xs=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Jt=r,this.Yt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,ks.Zt(e,n)),new t($o.min(),r,As(),gs(),_s())},t}(),ks=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(Lo.u,n,_s(),_s(),_s())},t}(),Os=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Ps=function(t,e){this.targetId=t,this.oe=e},Ls=function(t,e,n,r){void 0===n&&(n=Lo.u),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Cs=function(){function t(){this.ae=0,this.he=Ms(),this.ce=Lo.u,this.ue=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.o()>0&&(this.le=!0,this.ce=t)},t.prototype.we=function(){var t=_s(),e=_s(),n=_s();return this.he.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ao()}})),new ks(this.ce,this.ue,t,e,n)},t.prototype.Ee=function(){this.le=!1,this.he=Ms()},t.prototype.Te=function(t,e){this.le=!0,this.he=this.he.ot(t,e)},t.prototype.Ie=function(t){this.le=!0,this.he=this.he.remove(t)},t.prototype.me=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.ue=!0},t}(),Rs=function(){function t(t){this.Pe=t,this.ge=new Map,this.Ve=gs(),this.ye=Vs(),this.pe=new ds(ko)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof wa?this.ve(r,t.re):t.re instanceof Ia&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Se(s,t.key,t.re)}},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.xe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.Ee(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.xe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.xe(n)&&(e.Fe(n),r.de(t.resumeToken));break;default:Ao()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ge.forEach((function(t,r){n.xe(r)&&e(r)}))},t.prototype.ke=function(t){var e=t.targetId,n=t.oe.count,r=this.Oe(e);if(r){var i=r.target;if(is(i))if(0===n){var o=new Yo(i.path);this.Se(e,o,new Ia(o,$o.min()))}else No(1===n);else this.Me(e)!==n&&(this.Fe(e),this.pe=this.pe.add(e))}},t.prototype.$e=function(t){var e=this,n=new Map;this.ge.forEach((function(r,i){var o=e.Oe(i);if(o){if(r.te&&is(o.target)){var s=new Yo(o.target.path);null!==e.Ve.get(s)||e.Le(i,s)||e.Se(i,s,new Ia(s,t))}r.fe&&(n.set(i,r.we()),r.Ee())}}));var r=_s();this.ye.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.Oe(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new xs(t,n,this.pe,this.Ve,r);return this.Ve=gs(),this.ye=Vs(),this.pe=new ds(ko),i},t.prototype.ve=function(t,e){if(this.xe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.Ve=this.Ve.ot(e.key,e),this.ye=this.ye.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.xe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ie(e),this.ye=this.ye.ot(e,this.Be(e).delete(t)),n&&(this.Ve=this.Ve.ot(e,n))}},t.prototype.removeTarget=function(t){this.ge.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.Pe.qe(t).size+e.ee.size-e.se.size},t.prototype.me=function(t){this.Ne(t).me()},t.prototype.Ne=function(t){var e=this.ge.get(t);return e||(e=new Cs,this.ge.set(t,e)),e},t.prototype.Be=function(t){var e=this.ye.get(t);return e||(e=new ds(ko),this.ye=this.ye.ot(t,e)),e},t.prototype.xe=function(t){var e=null!==this.Oe(t);return e||Io("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Oe=function(t){var e=this.ge.get(t);return e&&e._e?null:this.Pe.Ue(t)},t.prototype.Fe=function(t){var e=this;this.ge.set(t,new Cs),this.Pe.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.Pe.qe(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vs(){return new fs(Yo.D)}function Ms(){return new fs(Yo.D)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Us(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function js(t){var e=t.mapValue.fields.__previous_value__;return Us(e)?js(e):e}function Fs(t){var e=Xs(t.mapValue.fields.__local_write_time__.timestampValue);return new zo(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Us(t)?4:10:Ao()}function Gs(t,e){var n=Bs(t);if(n!==Bs(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fs(t).isEqual(Fs(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Xs(t.timestampValue),r=Xs(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Qs(t.bytesValue).isEqual(Qs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ys(t.geoPointValue.latitude)===Ys(e.geoPointValue.latitude)&&Ys(t.geoPointValue.longitude)===Ys(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ys(t.integerValue)===Ys(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ys(t.doubleValue),r=Ys(e.doubleValue);return n===r?Jo(n)===Jo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Oo(t.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Fo(n)!==Fo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gs(n[i],r[i])))return!1;return!0}(t,e);default:return Ao()}}function zs(t,e){return void 0!==(t.values||[]).find((function(t){return Gs(t,e)}))}function $s(t,e){var n=Bs(t),r=Bs(e);if(n!==r)return ko(n,r);switch(n){case 0:return 0;case 1:return ko(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ys(t.integerValue||t.doubleValue),r=Ys(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Hs(t.timestampValue,e.timestampValue);case 4:return Hs(Fs(t),Fs(e));case 5:return ko(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Qs(t),r=Qs(e);return n.h(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ko(n[i],r[i]);if(0!==o)return o}return ko(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ko(Ys(t.latitude),Ys(e.latitude));return 0!==n?n:ko(Ys(t.longitude),Ys(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=$s(n[i],r[i]);if(o)return o}return ko(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=ko(r[s],o[s]);if(0!==u)return u;var a=$s(n[r[s]],i[o[s]]);if(0!==a)return a}return ko(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ao()}}function Hs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ko(t,e);var n=Xs(t),r=Xs(e),i=ko(n.seconds,r.seconds);return 0!==i?i:ko(n.nanos,r.nanos)}function Ks(t){return Ws(t)}function Ws(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Xs(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Yo.J(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ws(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ws(t.fields[o])}return e+"}"}(t.mapValue):Ao();var e,n}function Xs(t){if(No(!!t),"string"==typeof t){var e=0,n=qs.exec(t);if(No(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ys(t.seconds),nanos:Ys(t.nanos)}}function Ys(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Qs(t){return"string"==typeof t?Lo.fromBase64String(t):Lo.fromUint8Array(t)}function Js(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.B()}}function Zs(t){return!!t&&"integerValue"in t}function tu(t){return!!t&&"arrayValue"in t}function eu(t){return!!t&&"nullValue"in t}function nu(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ru(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var iu={asc:"ASCENDING",desc:"DESCENDING"},ou={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},su=function(t,e){this._=t,this.Ke=e};function uu(t){return{integerValue:""+t}}function au(t,e){if(t.Ke){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jo(e)?"-0":e}}function cu(t,e){return Zo(e)?uu(e):au(t,e)}function hu(t,e){return t.Ke?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function fu(t,e){return t.Ke?e.toBase64():e.toUint8Array()}function lu(t,e){return hu(t,e.v())}function pu(t){return No(!!t),$o.V(function(t){var e=Xs(t);return new zo(e.seconds,e.nanos)}(t))}function du(t,e){return function(t){return new Ko(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).B()}function vu(t){var e=Ko.q(t);return No(Uu(e)),e}function yu(t,e){return du(t._,e.path)}function gu(t,e){var n=vu(e);return No(n.get(1)===t._.projectId),No(!n.get(3)&&!t._.database||n.get(3)===t._.database),new Yo(Iu(n))}function mu(t,e){return du(t._,e)}function bu(t){var e=vu(t);return 4===e.length?Ko.U():Iu(e)}function wu(t){return new Ko(["projects",t._.projectId,"databases",t._.database]).B()}function Iu(t){return No(t.length>4&&"documents"===t.get(4)),t.N(5)}function Eu(t,e,n){return{name:yu(t,e),fields:n.proto.mapValue.fields}}function _u(t,e){var n;if(e instanceof aa)n={update:Eu(t,e.key,e.value)};else if(e instanceof da)n={delete:yu(t,e.key)};else if(e instanceof ca)n={update:Eu(t,e.key,e.data),updateMask:Mu(e.Qe)};else if(e instanceof fa)n={transform:{document:yu(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Gu)return{fieldPath:e.field.B(),setToServerValue:"REQUEST_TIME"};if(n instanceof zu)return{fieldPath:e.field.B(),appendMissingElements:{values:n.elements}};if(n instanceof Hu)return{fieldPath:e.field.B(),removeAllFromArray:{values:n.elements}};if(n instanceof Wu)return{fieldPath:e.field.B(),increment:n.We};throw Ao()}(0,t)}))}};else{if(!(e instanceof va))return Ao();n={verify:yu(t,e.key)}}return e.Ge.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:lu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ao()}(t,e.Ge)),n}function Tu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ta.updateTime(pu(t.updateTime)):void 0!==t.exists?ta.exists(t.exists):ta.ze()}(e.currentDocument):ta.ze();if(e.update){e.update.name;var r=gu(t,e.update.name),i=new ya({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Qu(e.map((function(t){return Xo.G(t)})))}(e.updateMask);return new ca(r,i,o,n)}return new aa(r,i,n)}if(e.delete){var s=gu(t,e.delete);return new da(s,n)}if(e.transform){var u=gu(t,e.transform.document),a=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)No("REQUEST_TIME"===e.setToServerValue),n=new Gu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new zu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Hu(i)}else"increment"in e?n=new Wu(t,e.increment):Ao();var o=Xo.G(e.fieldPath);return new Ju(o,n)}(t,e)}));return No(!0===n.exists),new fa(u,a)}if(e.verify){var c=gu(t,e.verify);return new va(c,n)}return Ao()}function Au(t,e){return{documents:[mu(t,e.path)]}}function Nu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=mu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=mu(t,r.F()),n.structuredQuery.from=[{collectionId:r.O()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(nu(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NAN"}};if(eu(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(nu(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NOT_NAN"}};if(eu(t.value))return{unaryFilter:{field:Lu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(t.field),op:Pu(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Lu(t.field),direction:Ou(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ke||Qo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=xu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=xu(e.endAt)),n}function Su(t){var e=bu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){No(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Du(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new tc(Cu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return Qo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ku(n.startAt));var h=null;return n.endAt&&(h=ku(n.endAt)),Pa(Ta(e,i,u,s,a,"F",c,h))}function Du(t){return t?void 0!==t.unaryFilter?[Vu(t)]:void 0!==t.fieldFilter?[Ru(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Du(t)})).reduce((function(t,e){return t.concat(e)})):Ao():[]}function xu(t){return{before:t.before,values:t.position}}function ku(t){var e=!!t.before,n=t.values||[];return new Ya(n,e)}function Ou(t){return iu[t]}function Pu(t){return ou[t]}function Lu(t){return{fieldPath:t.B()}}function Cu(t){return Xo.G(t.fieldPath)}function Ru(t){return qa.create(Cu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ao()}}(t.fieldFilter.op),t.fieldFilter.value)}function Vu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Cu(t.unaryFilter.field);return qa.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Cu(t.unaryFilter.field);return qa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cu(t.unaryFilter.field);return qa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cu(t.unaryFilter.field);return qa.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ao()}}function Mu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.B())})),{fieldPaths:e}}function Uu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ju=function(){this.He=void 0};function Fu(t,e,n){return t instanceof Gu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof zu?$u(t,e):t instanceof Hu?Ku(t,e):function(t,e){var n=Bu(t,e),r=Xu(n)+Xu(t.We);return Zs(n)&&Zs(t.We)?uu(r):au(t.serializer,r)}(t,e)}function qu(t,e,n){return t instanceof zu?$u(t,e):t instanceof Hu?Ku(t,e):n}function Bu(t,e){return t instanceof Wu?Zs(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e}(ju),zu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return mt(e,t),e}(ju);function $u(t,e){for(var n=Yu(e),r=function(t){n.some((function(e){return Gs(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Hu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return mt(e,t),e}(ju);function Ku(t,e){for(var n=Yu(e),r=function(t){n=n.filter((function(e){return!Gs(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Wu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.We=n,r}return mt(e,t),e}(ju);function Xu(t){return Ys(t.integerValue||t.doubleValue)}function Yu(t){return tu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qu=function(){function t(t){this.fields=t,t.sort(Xo.D)}return t.prototype.Je=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].M(t))return!0;return!1},t.prototype.isEqual=function(t){return Oo(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ju=function(t,e){this.field=t,this.transform=e},Zu=function(t,e){this.version=t,this.transformResults=e},ta=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ea(t,e){return void 0!==t.updateTime?e instanceof wa&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof wa}var na=function(){};function ra(t,e,n){return t instanceof aa?function(t,e,n){return new wa(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof ca?function(t,e,n){if(!ea(t.Ge,e))return new Ea(t.key,n.version);var r=ha(t,e);return new wa(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof fa?function(t,e,n){if(No(null!=n.transformResults),!ea(t.Ge,e))return new Ea(t.key,n.version);var r=la(t,e),i=function(t,e,n){var r=[];No(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof wa&&(u=e.field(o.field)),r.push(qu(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=pa(t,r.data(),i);return new wa(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Ia(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function ia(t,e,n,r){return t instanceof aa?function(t,e){if(!ea(t.Ge,e))return e;var n=ua(e);return new wa(t.key,n,t.value,{Ye:!0})}(t,e):t instanceof ca?function(t,e){if(!ea(t.Ge,e))return e;var n=ua(e),r=ha(t,e);return new wa(t.key,n,r,{Ye:!0})}(t,e):t instanceof fa?function(t,e,n,r){if(!ea(t.Ge,e))return e;var i=la(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof wa&&(c=n.field(u.field)),null===c&&r instanceof wa&&(c=r.field(u.field)),i.push(Fu(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=pa(t,i.data(),o);return new wa(t.key,i.version,s,{Ye:!0})}(t,e,r,n):function(t,e){return ea(t.Ge,e)?new Ia(t.key,$o.min()):e}(t,e)}function oa(t,e){return t instanceof fa?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof wa?e.field(o.field):void 0,u=Bu(o.transform,s||null);null!=u&&(n=null==n?(new ga).set(o.field,u):n.set(o.field,u))}return n?n.Xe():null}(t,e):null}function sa(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||Oo(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof zu&&e instanceof zu||t instanceof Hu&&e instanceof Hu?Oo(t.elements,e.elements,Gs):t instanceof Wu&&e instanceof Wu?Gs(t.We,e.We):t instanceof Gu&&e instanceof Gu}(t.transform,e.transform)}(t,e)})))}function ua(t){return t instanceof wa?t.version:$o.min()}var aa=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return mt(e,t),e}(na),ca=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ge=i,o.type=1,o}return mt(e,t),e}(na);function ha(t,e){return function(t,e){var n=new ga(e);return t.Qe.fields.forEach((function(e){if(!e.P()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof wa?e.data():ya.empty())}var fa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=ta.exists(!0),r}return mt(e,t),e}(na);function la(t,e){return e}function pa(t,e,n){for(var r=new ga(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var da=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return mt(e,t),e}(na),va=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return mt(e,t),e}(na),ya=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!ru(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.O()])||null},t.prototype.isEqual=function(t){return Gs(this.proto,t.proto)},t}(),ga=function(){function t(t){void 0===t&&(t=ya.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Bs(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.O(),e)},t.prototype.Xe=function(){var t=this.nn(Xo.U(),this.tn);return null!=t?new ya(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=ru(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.nn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function ma(t){var e=[];return qo(t.fields||{},(function(t,n){var r=new Xo([t]);if(ru(n)){var i=ma(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Qu(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var ba=function(t,e){this.key=t,this.version=e},wa=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Ye=!!i.Ye,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return mt(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ye===t.Ye&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ba),Ia=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return mt(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ba),Ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ba),_a=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=u,this.hn=null,this.cn=null,this.startAt,this.endAt};function Ta(t,e,n,r,i,o,s,u){return new _a(t,e,n,r,i,o,s,u)}function Aa(t){return new _a(t)}function Na(t){return!Qo(t.limit)&&"F"===t.an}function Sa(t){return!Qo(t.limit)&&"L"===t.an}function Da(t){return t.on.length>0?t.on[0].field:null}function xa(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.un())return r.field}return null}function ka(t){return null!==t.collectionGroup}function Oa(t){var e=So(t);if(null===e.hn){e.hn=[];var n=xa(e),r=Da(e);if(null!==n&&null===r)n.W()||e.hn.push(new tc(n)),e.hn.push(new tc(Xo.j(),"asc"));else{for(var i=!1,o=0,s=e.on;o<s.length;o++){var u=s[o];e.hn.push(u),u.field.W()&&(i=!0)}if(!i){var a=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.hn.push(new tc(Xo.j(),a))}}}return e.hn}function Pa(t){var e=So(t);if(!e.cn)if("F"===e.an)e.cn=es(e.path,e.collectionGroup,Oa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Oa(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new tc(o.field,s))}var u=e.endAt?new Ya(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ya(e.startAt.position,!e.startAt.before):null;e.cn=es(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.cn}function La(t,e,n){return new _a(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ca(t,e){return new _a(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Ra(t,e){return new _a(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Va(t,e){return rs(Pa(t),Pa(e))&&t.an===e.an}function Ma(t){return ns(Pa(t))+"|lt:"+t.an}function Ua(t){return"Query(target="+function(t){var e=t.path.B();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.B()+" "+e.op+" "+Ks(e.value);var e})).join(", ")+"]"),Qo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.B()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Qa(t.startAt)),t.endAt&&(e+=", endAt: "+Qa(t.endAt)),"Target("+e+")"}(Pa(t))+"; limitType="+t.an+")"}function ja(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.Y(t.collectionGroup)&&t.path.M(n):Yo.X(t.path)?t.path.isEqual(n):t.path.$(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.W()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ja(t.startAt,Oa(t),e)||t.endAt&&Ja(t.endAt,Oa(t),e))}(t,e)}function Fa(t){return function(e,n){for(var r=!1,i=0,o=Oa(t);i<o.length;i++){var s=o[i],u=ec(s,e,n);if(0!==u)return u;r=r||s.field.W()}return 0}}var qa=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return mt(e,t),e.create=function(t,n,r){return t.W()?"in"===n||"not-in"===n?this.ln(t,n,r):new Ba(t,n,r):"array-contains"===n?new Ha(t,r):"in"===n?new Ka(t,r):"not-in"===n?new Wa(t,r):"array-contains-any"===n?new Xa(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new Ga(t,n):new za(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n($s(e,this.value)):null!==e&&Bs(this.value)===Bs(e)&&this._n($s(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ao()}},e.prototype.un=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ba=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Yo.J(r.referenceValue),i}return mt(e,t),e.prototype.matches=function(t){var e=Yo.D(t.key,this.key);return this._n(e)},e}(qa),Ga=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=$a("in",n),r}return mt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(qa),za=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=$a("not-in",n),r}return mt(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(qa);function $a(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Yo.J(t.referenceValue)}))}var Ha=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return mt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return tu(e)&&zs(e.arrayValue,this.value)},e}(qa),Ka=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return mt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&zs(this.value.arrayValue,e)},e}(qa),Wa=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return mt(e,t),e.prototype.matches=function(t){if(zs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!zs(this.value.arrayValue,e)},e}(qa),Xa=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return mt(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return zs(e.value.arrayValue,t)}))},e}(qa),Ya=function(t,e){this.position=t,this.before=e};function Qa(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ks(t)})).join(",")}function Ja(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.W()?Yo.D(Yo.J(s.referenceValue),n.key):$s(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Za(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Gs(t.position[n],e.position[n]))return!1;return!0}var tc=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ec(t,e,n){var r=t.field.W()?Yo.D(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?$s(r,i):Ao()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ao()}}function nc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ic=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.En=r,this.Tn=i,this.In=0,this.mn=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.In=0},t.prototype.Rn=function(){this.In=this.Tn},t.prototype.Pn=function(t){var e=this;this.cancel();var n=Math.floor(this.In+this.gn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&Io("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.In+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mn=this.fn.Vn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.In*=this.En,this.In<this.wn&&(this.In=this.wn),this.In>this.Tn&&(this.In=this.Tn)},t.prototype.yn=function(){null!==this.mn&&(this.mn.pn(),this.mn=null)},t.prototype.cancel=function(){null!==this.mn&&(this.mn.cancel(),this.mn=null)},t.prototype.gn=function(){return(Math.random()-.5)*this.In},t}(),oc=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&Ao(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.xn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.kn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.On=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.kn(r)},t}(),sc=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.$n(Dt())&&Eo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Io("SimpleDb","Removing database:",t),lc(window.indexedDB.deleteDatabase(t)).xn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=Dt(),n=t.$n(e),r=0<n&&n<10,i=t.qn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},t.Kn=function(t,e){return t.store(e)},t.$n=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(t){return wt(this,void 0,void 0,(function(){var e,n=this;return It(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Io("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ac(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new mo(go.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ac(t,n))},i.onupgradeneeded=function(t){Io("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Mn.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){Io("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return n.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s,u,a;return It(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return It(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Qn(t)];case 2:return u.db=f.sent(),e=hc.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),oc.reject(t)})).xn(),a={},s.catch((function(){})),[4,e.Gn];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,Io("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),uc=function(){function t(t){this.zn=t,this.Hn=!1,this.Jn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yn",{get:function(){return this.Jn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Jn=t},t.prototype.delete=function(){return lc(this.zn.delete())},t}(),ac=function(t){function e(e,n){var r=this;return(r=t.call(this,go.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return mt(e,t),e}(mo);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function cc(t){return"IndexedDbTransactionError"===t.name}var hc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new rc,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new ac(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=dc(e.target.error);n.Zn.reject(new ac(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ac(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(Io("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new fc(e)},t}(),fc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Io("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Io("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),lc(n)},t.prototype.add=function(t){return Io("SimpleDb","ADD",this.store.name,t,t),lc(this.store.add(t))},t.prototype.get=function(t){var e=this;return lc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Io("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Io("SimpleDb","DELETE",this.store.name,t),lc(this.store.delete(t))},t.prototype.count=function(){return Io("SimpleDb","COUNT",this.store.name),lc(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){Io("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new oc((function(n,r){e.onerror=function(t){var e=dc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new oc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new uc(i),s=e(i.primaryKey,i.value,o);if(s instanceof oc){var u=s.catch((function(t){return o.done(),oc.reject(t)}));n.push(u)}o.Sn?r():null===o.Yn?i.continue():i.continue(o.Yn)}else r()}})).next((function(){return oc.kn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function lc(t){return new oc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=dc(t.target.error);n(e)}}))}var pc=!1;function dc(t){var e=sc.$n(Dt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new mo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pc||(pc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vc(){return"undefined"!=typeof window?window:null}function yc(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gc=function(){function t(t,e,n,r,i){this.hs=t,this.dn=e,this.cs=n,this.op=r,this.us=i,this.ls=new rc,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new mo(go.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.hs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.us(this),clearTimeout(this.fs),this.fs=null)},t}(),mc=function(){function t(){var t=this;this.Es=Promise.resolve(),this.Ts=[],this.Is=!1,this.As=[],this.Rs=null,this.Ps=!1,this.gs=[],this.Vs=new ic(this,"async_queue_retry"),this.ys=function(){var e=yc();e&&Io("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.Vs.yn()};var e=yc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ys)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=yc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ys)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Ts.push(t),e.Ns()}))},t.prototype.Ns=function(){return wt(this,void 0,void 0,(function(){var t,e=this;return It(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.Vs.reset(),[3,4];case 3:if(!cc(t=n.sent()))throw t;return Io("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.Vs.Pn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Es.then((function(){return e.Ps=!0,t().catch((function(t){throw e.Rs=t,e.Ps=!1,Eo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ps=!1,t}))}));return this.Es=n,n},t.prototype.Vn=function(t,e,n){var r=this;this.vs(),this.gs.indexOf(t)>-1&&(e=0);var i=gc._s(this,t,e,n,(function(t){return r.xs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&Ao()},t.prototype.Fs=function(){},t.prototype.ks=function(){return wt(this,void 0,void 0,(function(){var t;return It(this,(function(e){switch(e.label){case 0:return[4,t=this.Es];case 1:e.sent(),e.label=2;case 2:if(t!==this.Es)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Os=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.ks().then((function(){e.As.sort((function(t,e){return t.cs-e.cs}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.ks()}))},t.prototype.$s=function(t){this.gs.push(t)},t.prototype.xs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function bc(t,e){if(Eo("AsyncQueue",e+": "+t),cc(t))return new mo(go.UNAVAILABLE,e+": "+t);throw t}var wc=function(){this.Ls=void 0,this.listeners=[]},Ic=function(){this.Bs=new Go((function(t){return Ma(t)}),Va),this.onlineState="Unknown",this.qs=new Set};function Ec(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return It(this,(function(c){switch(c.label){case 0:if(n=So(t),r=e.query,i=!1,(o=n.Bs.get(r))||(i=!0,o=new wc),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Us(r)];case 2:return s.Ls=c.sent(),[3,4];case 3:return u=c.sent(),a=bc(u,"Initialization of query '"+Ua(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.Bs.set(r,o),o.listeners.push(e),e.Ks(n.onlineState),o.Ls&&e.Qs(o.Ls)&&Nc(n),[2]}}))}))}function _c(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s;return It(this,(function(u){return n=So(t),r=e.query,i=!1,(o=n.Bs.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.Bs.delete(r),n.Ws(r))]:[2]}))}))}function Tc(t,e){for(var n=So(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.Bs.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Qs(s)&&(r=!0);a.Ls=s}}r&&Nc(n)}function Ac(t,e,n){var r=So(t),i=r.Bs.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Bs.delete(e)}function Nc(t){t.qs.forEach((function(t){t.next()}))}var Sc=function(){function t(t,e,n){this.query=t,this.js=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ds(t.query,t.docs,t.Kt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.js.next(t),o=!0):this.Js(t,this.onlineState)&&(this.Ys(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Ks=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Js(this.zs,t)&&(this.Ys(this.zs),e=!0),e},t.prototype.Js=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.P()&&"Offline"!==e)},t.prototype.Hs=function(t){if(t.docChanges.length>0)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.Wt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Ys=function(t){t=Ds.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Gs=!0,this.js.next(t)},t}(),Dc=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Dc.UNAUTHENTICATED=new Dc(null),Dc.ei=new Dc("google-credentials-uid"),Dc.ni=new Dc("first-party-uid");
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();function kc(t,e){return"firestore_clients_"+t+"_"+e}function Oc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function Pc(t,e){return"firestore_targets_"+t+"_"+e}xc.ai=-1;var Lc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.hi=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new mo(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Eo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Cc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.hi=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new mo(r.error.code,r.error.message)),i?new t(e,r.state,o):(Eo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.hi=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=As(),s=0;i&&s<r.activeTargetIds.length;++s)i=Zo(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Eo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Vc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.hi=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Eo("SharedClientState","Failed to parse online state: "+e),null)},t}(),Mc=function(){function t(){this.activeTargetIds=As()}return t.prototype.ui=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ci=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Uc=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.Ei.bind(this),this.Ti=new fs(ko),this.Ii=!1,this.mi=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=kc(this.persistenceKey,this._i),this.Ri=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new Mc),this.Pi=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.gi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Vi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.yi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return wt(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h,f=this;return It(this,(function(l){switch(l.label){case 0:return[4,this.fi.pi()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._i&&(i=this.getItem(kc(this.persistenceKey,r)))&&(o=Rc.hi(r,i))&&(this.Ti=this.Ti.ot(o.clientId,o));for(this.bi(),(s=this.storage.getItem(this.yi))&&(u=this.vi(s))&&this.Si(u),a=0,c=this.mi;a<c.length;a++)h=c[a],this.Ei(h);return this.mi=[],this.window.addEventListener("unload",(function(){return f.Di()})),this.Ii=!0,[2]}}))}))},t.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},t.prototype.Ci=function(){return this.Ni(this.Ti)},t.prototype.xi=function(t){var e=!1;return this.Ti.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Fi=function(t){this.ki(t,"pending")},t.prototype.Oi=function(t,e,n){this.ki(t,e,n),this.Mi(t)},t.prototype.$i=function(t){var e="not-current";if(this.xi(t)){var n=this.storage.getItem(Pc(this.persistenceKey,t));if(n){var r=Cc.hi(t,n);r&&(e=r.state)}}return this.Li.ui(t),this.bi(),e},t.prototype.Bi=function(t){this.Li.li(t),this.bi()},t.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},t.prototype.Ui=function(t){this.removeItem(Pc(this.persistenceKey,t))},t.prototype.Ki=function(t,e,n){this.Qi(t,e,n)},t.prototype.Wi=function(t,e,n){var r=this;e.forEach((function(t){r.Mi(t)})),this.currentUser=t,n.forEach((function(t){r.Fi(t)}))},t.prototype.ji=function(t){this.Gi(t)},t.prototype.Di=function(){this.Ii&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ii=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Io("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Io("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Io("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ei=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Io("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void Eo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return wt(e,void 0,void 0,(function(){var t,e,r,i,o,s;return It(this,(function(u){if(this.Ii){if(null!==n.key)if(this.Pi.test(n.key)){if(null==n.newValue)return t=this.zi(n.key),[2,this.Hi(t,null)];if(e=this.Ji(n.key,n.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.gi.test(n.key)){if(null!==n.newValue&&(r=this.Yi(n.key,n.newValue)))return[2,this.Xi(r)]}else if(this.Vi.test(n.key)){if(null!==n.newValue&&(i=this.Zi(n.key,n.newValue)))return[2,this.tr(i)]}else if(n.key===this.yi){if(null!==n.newValue&&(o=this.vi(n.newValue)))return[2,this.Si(o)]}else n.key===this.Ri&&(s=function(t){var e=xc.ai;if(null!=t)try{var n=JSON.parse(t);No("number"==typeof n),e=n}catch(t){Eo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==xc.ai&&this.si(s)}else this.mi.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),t.prototype.bi=function(){this.setItem(this.Ai,this.Li.ci())},t.prototype.ki=function(t,e,n){var r=new Lc(this.currentUser,t,e,n),i=Oc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ci())},t.prototype.Mi=function(t){var e=Oc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Gi=function(t){var e={clientId:this._i,onlineState:t};this.storage.setItem(this.yi,JSON.stringify(e))},t.prototype.Qi=function(t,e,n){var r=Pc(this.persistenceKey,t),i=new Cc(t,e,n);this.setItem(r,i.ci())},t.prototype.zi=function(t){var e=this.Pi.exec(t);return e?e[1]:null},t.prototype.Ji=function(t,e){var n=this.zi(t);return Rc.hi(n,e)},t.prototype.Yi=function(t,e){var n=this.gi.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Lc.hi(new Dc(i),r,e)},t.prototype.Zi=function(t,e){var n=this.Vi.exec(t),r=Number(n[1]);return Cc.hi(r,e)},t.prototype.vi=function(t){return Vc.hi(t)},t.prototype.Xi=function(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(Io("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},t.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.fi.sr(s,u).then((function(){n.Ti=r}))},t.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},t.prototype.Ni=function(t){var e=As();return t.forEach((function(t,n){e=e.Ot(n.activeTargetIds)})),e},t}(),jc=function(){function t(){this.ir=new Mc,this.rr={},this.di=null,this.si=null}return t.prototype.Fi=function(t){},t.prototype.Oi=function(t,e,n){},t.prototype.$i=function(t){return this.ir.ui(t),this.rr[t]||"not-current"},t.prototype.Ki=function(t,e,n){this.rr[t]=e},t.prototype.Bi=function(t){this.ir.li(t)},t.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.Ui=function(t){delete this.rr[t]},t.prototype.Ci=function(){return this.ir.activeTargetIds},t.prototype.xi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.start=function(){return this.ir=new Mc,Promise.resolve()},t.prototype.Wi=function(t,e,n){},t.prototype.ji=function(t){},t.prototype.Di=function(){},t.prototype.oi=function(t){},t}(),Fc=function(){function t(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}return t.prototype.hr=function(t,e,n){for(var r=n.cr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=ra(o,e,r[i]))}return e},t.prototype.ur=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=ia(i,e,e,this.ar))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=ia(a,e,o,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ur(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),_s())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Oo(this.mutations,t.mutations,(function(t,e){return sa(t,e)}))&&Oo(this.baseMutations,t.baseMutations,(function(t,e){return sa(t,e)}))},t}(),qc=function(){function t(t,e,n,r){this.batch=t,this._r=e,this.cr=n,this.dr=r}return t.from=function(e,n,r){No(e.mutations.length===r.length);for(var i=Is,o=e.mutations,s=0;s<o.length;s++)i=i.ot(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Bc=function(){function t(){this.wr=new Go((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Er=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Ir=function(t,e){this.mr(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.mr(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.mr();var n=this.wr.get(e);return void 0!==n?oc.resolve(n):this.Pr(t,e)},t.prototype.getEntries=function(t,e){return this.gr(t,e)},t.prototype.apply=function(t){return this.mr(),this.Er=!0,this.Vr(t)},t.prototype.mr=function(){},t}(),Gc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zc=function(){function t(){this.yr=[]}return t.prototype.pr=function(t){this.yr.push(t)},t.prototype.br=function(){this.yr.forEach((function(t){return t()}))},t}(),$c=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next((function(r){return n.Fr(t,e,r)}))},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ur(e,t);return t}))},t.prototype.kr=function(t,e,n){var r=ms();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ur(t,e);r=r.ot(t,e)})),r},t.prototype.Or=function(t,e){var n=this;return this.vr.getEntries(t,e).next((function(e){return n.Mr(t,e)}))},t.prototype.Mr=function(t,e){var n=this;return this.Sr.$r(t,e).next((function(r){var i=n.kr(t,e,r),o=gs();return i.forEach((function(t,e){e||(e=new Ia(t,$o.min())),o=o.ot(t,e)})),o}))},t.prototype.Lr=function(t,e,n){return function(t){return Yo.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):ka(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new Yo(e)).next((function(t){var e=ws();return t instanceof wa&&(e=e.ot(t.key,t)),e}))},t.prototype.qr=function(t,e,n){var r=this,i=e.collectionGroup,o=ws();return this.Dr.Kr(t,i).next((function(s){return oc.forEach(s,(function(s){var u=function(t,e){return new _a(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(i));return r.Ur(t,u,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Ur=function(t,e,n){var r,i,o=this;return this.vr.Lr(t,e,n).next((function(n){return r=n,o.Sr.Qr(t,e)})).next((function(e){return i=e,o.Wr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=ia(a,h,h,o.ar);r=f instanceof wa?r.ot(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){ja(e,n)||(r=r.remove(t))})),r}))},t.prototype.Wr=function(t,e,n){for(var r=_s(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof ca&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.vr.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof wa&&(c=c.ot(t,e))})),c}))},t}(),Hc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.jr=n,this.Gr=r}return t.zr=function(e,n){for(var r=_s(),i=_s(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}();
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=ko(n,i);return 0===s?ko(r,o):s}var Wc=function(){function t(t){this.Hr=t,this.buffer=new ds(Kc),this.Jr=0}return t.prototype.Yr=function(){return++this.Jr},t.prototype.Xr=function(t){var e=[t,this.Yr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Kc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Xc={Zr:!1,eo:0,no:0,so:0},Yc=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.ho,t.co)},t}();Yc.uo=-1,Yc.lo=1048576,Yc._o=41943040,Yc.ho=10,Yc.co=1e3,Yc.fo=new Yc(Yc._o,Yc.ho,Yc.co),Yc.do=new Yc(Yc.uo,0,0);var Qc=function(){function t(t,e){this.wo=t,this.hs=e,this.Eo=!1,this.To=null}return t.prototype.start=function(t){this.wo.params.io!==Yc.uo&&this.Io(t)},t.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(t.prototype,"Ii",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),t.prototype.Io=function(t){var e=this,n=this.Eo?3e5:6e4;Io("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.hs.Vn("lru_garbage_collection",n,(function(){return wt(e,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:this.To=null,this.Eo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mo(this.wo)];case 2:return n.sent(),[3,7];case 3:return cc(e=n.sent())?(Io("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,gf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Io(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Jc=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vo=function(t,e){var n=this;if(0===e)return oc.resolve(xc.ai);var r=new Wc(e);return this.Ao.Ce(t,(function(t){return r.Xr(t.sequenceNumber)})).next((function(){return n.Ao.yo(t,(function(t){return r.Xr(t)}))})).next((function(){return r.maxValue}))},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===Yc.uo?(Io("LruGarbageCollector","Garbage collection skipped; disabled"),oc.resolve(Xc)):this.So(t).next((function(r){return r<n.params.io?(Io("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.io),Xc):n.Do(t,e)}))},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.Ro(t,this.params.ro).next((function(e){return e>c.params.oo?(Io("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.oo+" from "+e),r=c.params.oo):r=e,o=Date.now(),c.Vo(t,r)})).next((function(r){return n=r,s=Date.now(),c.po(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.bo(t,n)})).next((function(t){return a=Date.now(),wo()<=zt.DEBUG&&Io("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),oc.resolve({Zr:!0,eo:r,no:i,so:t})}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Zc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=eh(e)),e=th(t.get(n),e);return eh(e)}function th(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function eh(t){return t+""}function nh(t){var e=t.length;if(No(e>=2),2===e)return No(""===t.charAt(0)&&""===t.charAt(1)),Ko.U();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Ao(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Ao()}o=s+2}return new Ko(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rh=function(t){this.Co=t};function ih(t,e){if(e.document)return function(t,e,n){var r=gu(t,e.name),i=pu(e.updateTime),o=new ya({mapValue:{fields:e.fields}});return new wa(r,i,o,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Yo.Z(e.noDocument.path),r=ch(e.noDocument.readTime);return new Ia(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Yo.Z(e.unknownDocument.path),o=ch(e.unknownDocument.version);return new Ea(i,o)}return Ao()}function oh(t,e,n){var r=sh(n),i=e.key.path.F().L();if(e instanceof wa){var o=function(t,e){return{name:yu(t,e.key),fields:e.rn().mapValue.fields,updateTime:hu(t,e.version.v())}}(t.Co,e),s=e.hasCommittedMutations;return new Rh(null,null,o,s,r,i)}if(e instanceof Ia){var u=e.key.path.L(),a=ah(e.version),c=e.hasCommittedMutations;return new Rh(null,new Lh(u,a),null,c,r,i)}if(e instanceof Ea){var h=e.key.path.L(),f=ah(e.version);return new Rh(new Ch(h,f),null,null,!0,r,i)}return Ao()}function sh(t){var e=t.v();return[e.seconds,e.nanoseconds]}function uh(t){var e=new zo(t[0],t[1]);return $o.V(e)}function ah(t){var e=t.v();return new Dh(e.seconds,e.nanoseconds)}function ch(t){var e=new zo(t.seconds,t.nanoseconds);return $o.V(e)}function hh(t,e){var n=(e.baseMutations||[]).map((function(e){return Tu(t.Co,e)})),r=e.mutations.map((function(e){return Tu(t.Co,e)})),i=zo.fromMillis(e.localWriteTimeMs);return new Fc(e.batchId,i,n,r)}function fh(t){var e,n,r=ch(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ch(t.lastLimboFreeSnapshotVersion):$o.min();return void 0!==t.query.documents?(No(1===(n=t.query).documents.length),e=Pa(Aa(bu(n.documents[0])))):e=Su(t.query),new us(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Lo.fromBase64String(t.resumeToken))}function lh(t,e){var n,r=ah(e.nt),i=ah(e.lastLimboFreeSnapshotVersion);n=is(e.target)?Au(t.Co,e.target):Nu(t.Co,e.target);var o=e.resumeToken.toBase64();return new Mh(e.targetId,ns(e.target),r,o,e.sequenceNumber,i,n)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ph=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.xo={}}return t.Fo=function(e,n,r,i){return No(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.ko=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yh(t).rs({index:Oh.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Oo=function(t,e,n,r){var i=this,o=gh(t),s=yh(t);return s.add({}).next((function(u){No("number"==typeof u);for(var a=new Fc(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return _u(t.Co,e)})),i=n.mutations.map((function(e){return _u(t.Co,e)}));return new Oh(e,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,a),h=[],f=new ds((function(t,e){return ko(t.B(),e.B())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Ph.key(i.userId,d.key.path,u);f=f.add(d.key.path.F()),h.push(s.put(c)),h.push(o.put(v,Ph.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Dr.Mo(t,e))})),t.pr((function(){i.xo[u]=a.keys()})),oc.kn(h).next((function(){return a}))}))},t.prototype.$o=function(t,e){var n=this;return yh(t).get(e).next((function(t){return t?(No(t.userId===n.userId),hh(n.serializer,t)):null}))},t.prototype.Lo=function(t,e){var n=this;return this.xo[e]?oc.resolve(this.xo[e]):this.$o(t,e).next((function(t){if(t){var r=t.keys();return n.xo[e]=r,r}return null}))},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return yh(t).rs({index:Oh.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(No(e.batchId>=r),o=hh(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return yh(t).rs({index:Oh.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yh(t).ts(Oh.userMutationsIndex,n).next((function(t){return t.map((function(t){return hh(e.serializer,t)}))}))},t.prototype.Nr=function(t,e){var n=this,r=Ph.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return gh(t).rs({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=nh(a);if(u===n.userId&&e.path.isEqual(h))return yh(t).get(c).next((function(t){if(!t)throw Ao();No(t.userId===n.userId),o.push(hh(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.$r=function(t,e){var n=this,r=new ds(ko),i=[];return e.forEach((function(e){var o=Ph.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=gh(t).rs({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=nh(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),oc.kn(i).next((function(){return n.Ko(t,r)}))},t.prototype.Qr=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ph.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new ds(ko);return gh(t).rs({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=nh(a);s===n.userId&&r.M(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Ko(t,u)}))},t.prototype.Ko=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(yh(t).get(e).next((function(t){if(null===t)throw Ao();No(t.userId===n.userId),r.push(hh(n.serializer,t))})))})),oc.kn(i).next((function(){return r}))},t.prototype.Qo=function(t,e){var n=this;return vh(t.Wo,this.userId,e).next((function(r){return t.pr((function(){n.jo(e.batchId)})),oc.forEach(r,(function(e){return n.No.Go(t,e)}))}))},t.prototype.jo=function(t){delete this.xo[t]},t.prototype.zo=function(t){var e=this;return this.ko(t).next((function(n){if(!n)return oc.resolve();var r=IDBKeyRange.lowerBound(Ph.prefixForUser(e.userId)),i=[];return gh(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=nh(t[1]);i.push(o)}else r.done()})).next((function(){No(0===i.length)}))}))},t.prototype.Ho=function(t,e){return dh(t,this.userId,e)},t.prototype.Jo=function(t){var e=this;return mh(t).get(this.userId).next((function(t){return t||new kh(e.userId,-1,"")}))},t}();function dh(t,e,n){var r=Ph.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return gh(t).rs({range:o,ss:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function vh(t,e,n){var r=t.store(Oh.store),i=t.store(Ph.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.rs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){No(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Ph.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return oc.kn(o).next((function(){return c}))}function yh(t){return Zh.Kn(t,Oh.store)}function gh(t){return Zh.Kn(t,Ph.store)}function mh(t){return Zh.Kn(t,kh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var bh=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Ir=function(t,e,n){return Eh(t).put(_h(e),n)},t.prototype.Ar=function(t,e){var n=Eh(t),r=_h(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Yo(t,r)}))},t.prototype.Rr=function(t,e){var n=this;return Eh(t).get(_h(e)).next((function(t){return n.Xo(t)}))},t.prototype.Zo=function(t,e){var n=this;return Eh(t).get(_h(e)).next((function(t){var e=n.Xo(t);return e?{ta:e,size:Th(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ms();return this.ea(t,e,(function(t,e){var i=n.Xo(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype.na=function(t,e){var n=this,r=ms(),i=new fs(Yo.D);return this.ea(t,e,(function(t,e){var o=n.Xo(e);o?(r=r.ot(t,o),i=i.ot(t,Th(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{sa:r,ia:i}}))},t.prototype.ea=function(t,e,n){if(e.P())return oc.resolve();var r=IDBKeyRange.bound(e.first().path.L(),e.last().path.L()),i=e._t(),o=i.It();return Eh(t).rs({range:r},(function(t,e,r){for(var s=Yo.Z(t);o&&Yo.D(o,s)<0;)n(o,null),o=i.It();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.L()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Lr=function(t,e,n){var r=this,i=ws(),o=e.path.length+1,s={};if(n.isEqual($o.min())){var u=e.path.L();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.L(),c=sh(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Rh.collectionReadTimeIndex}return Eh(t).rs(s,(function(t,n,s){if(t.length===o){var u=ih(r.serializer,n);e.path.M(u.key.path)?u instanceof wa&&ja(e,u)&&(i=i.ot(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.ra=function(t){return new wh(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ih(t).get(Vh.key).next((function(t){return No(!!t),t}))},t.prototype.Yo=function(t,e){return Ih(t).put(Vh.key,e)},t.prototype.Xo=function(t){if(t){var e=ih(this.serializer,t);return e instanceof Ia&&e.version.isEqual($o.min())?null:e}return null},t}(),wh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ha=e,r.oa=n,r.ca=new Go((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return mt(e,t),e.prototype.Vr=function(t){var e=this,n=[],r=0,i=new ds((function(t,e){return ko(t.B(),e.B())}));return this.wr.forEach((function(o,s){var u=e.ca.get(o);if(s){var a=oh(e.ha.serializer,s,e.readTime);i=i.add(o.path.F());var c=Th(a);r+=c-u,n.push(e.ha.Ir(t,o,a))}else if(r-=u,e.oa){var h=oh(e.ha.serializer,new Ia(o,$o.min()),e.readTime);n.push(e.ha.Ir(t,o,h))}else n.push(e.ha.Ar(t,o))})),i.forEach((function(r){n.push(e.ha.Dr.Mo(t,r))})),n.push(this.ha.updateMetadata(t,r)),oc.kn(n)},e.prototype.Pr=function(t,e){var n=this;return this.ha.Zo(t,e).next((function(t){return null===t?(n.ca.set(e,0),null):(n.ca.set(e,t.size),t.ta)}))},e.prototype.gr=function(t,e){var n=this;return this.ha.na(t,e).next((function(t){var e=t.sa;return t.ia.forEach((function(t,e){n.ca.set(t,e)})),e}))},e}(Bc);function Ih(t){return Zh.Kn(t,Vh.store)}function Eh(t){return Zh.Kn(t,Rh.store)}function _h(t){return t.path.L()}function Th(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ao();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ah=function(){function t(){this.ua=new Nh}return t.prototype.Mo=function(t,e){return this.ua.add(e),oc.resolve()},t.prototype.Kr=function(t,e){return oc.resolve(this.ua.getEntries(e))},t}(),Nh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.O(),n=t.F(),r=this.index[e]||new ds(Ko.D),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.O(),n=t.F(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ds(Ko.D)).L()},t}(),Sh=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;No(n<r&&n>=0&&r<=10);var o=new hc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(xh.store)}(t),function(t){t.createObjectStore(kh.store,{keyPath:kh.keyPath}),t.createObjectStore(Oh.store,{keyPath:Oh.keyPath,autoIncrement:!0}).createIndex(Oh.userMutationsIndex,Oh.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ph.store)}(t),qh(t),function(t){t.createObjectStore(Rh.store)}(t));var s=oc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Uh.store),t.deleteObjectStore(Mh.store),t.deleteObjectStore(jh.store)}(t),qh(t)),s=s.next((function(){return function(t){var e=t.store(jh.store),n=new jh(0,0,$o.min().v(),0);return e.put(jh.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Oh.store).ts().next((function(n){t.deleteObjectStore(Oh.store),t.createObjectStore(Oh.store,{keyPath:Oh.keyPath,autoIncrement:!0}).createIndex(Oh.userMutationsIndex,Oh.userMutationsKeyPath,{unique:!0});var r=e.store(Oh.store),i=n.map((function(t){return r.put(t)}));return oc.kn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Bh.store,{keyPath:Bh.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Vh.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Rh.store);e.createIndex(Rh.readTimeIndex,Rh.readTimeIndexPath,{unique:!1}),e.createIndex(Rh.collectionReadTimeIndex,Rh.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Rh.store).rs((function(t,n){e+=Th(n)})).next((function(){var n=new Vh(e);return t.store(Vh.store).put(Vh.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(kh.store),r=t.store(Oh.store);return n.ts().next((function(n){return oc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(Oh.userMutationsIndex,i).next((function(r){return oc.forEach(r,(function(r){No(r.userId===n.userId);var i=hh(e.serializer,r);return vh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Uh.store),n=t.store(Rh.store);return t.store(jh.store).get(jh.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new Ko(n),s=function(t){return[0,Zc(t)]}(o);r.push(e.get(s).next((function(n){return n?oc.resolve():function(n){return e.put(new Uh(0,Zc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return oc.kn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Fh.store,{keyPath:Fh.keyPath});var n=e.store(Fh.store),r=new Nh,i=function(t){if(r.add(t)){var e=t.O(),i=t.F();return n.put({collectionId:e,parent:Zc(i)})}};return e.store(Rh.store).rs({ss:!0},(function(t,e){var n=new Ko(t);return i(n.F())})).next((function(){return e.store(Ph.store).rs({ss:!0},(function(t,e){t[0];var n=t[1],r=(t[2],nh(n));return i(r.F())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Mh.store);return n.rs((function(t,r){var i=fh(r),o=lh(e.serializer,i);return n.put(o)}))},t}(),Dh=function(t,e){this.seconds=t,this.nanoseconds=e},xh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};xh.store="owner",xh.key="owner";var kh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};kh.store="mutationQueues",kh.keyPath="userId";var Oh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Oh.store="mutations",Oh.keyPath="batchId",Oh.userMutationsIndex="userMutationsIndex",Oh.userMutationsKeyPath=["userId","batchId"];var Ph=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Zc(e)]},t.key=function(t,e,n){return[t,Zc(e),n]},t}();Ph.store="documentMutations",Ph.PLACEHOLDER=new Ph;var Lh=function(t,e){this.path=t,this.readTime=e},Ch=function(t,e){this.path=t,this.version=e},Rh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Rh.store="remoteDocuments",Rh.readTimeIndex="readTimeIndex",Rh.readTimeIndexPath="readTime",Rh.collectionReadTimeIndex="collectionReadTimeIndex",Rh.collectionReadTimeIndexPath=["parentPath","readTime"];var Vh=function(t){this.byteSize=t};Vh.store="remoteDocumentGlobal",Vh.key="remoteDocumentGlobalKey";var Mh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Mh.store="targets",Mh.keyPath="targetId",Mh.queryTargetsIndexName="queryTargetsIndex",Mh.queryTargetsKeyPath=["canonicalId","targetId"];var Uh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Uh.store="targetDocuments",Uh.keyPath=["targetId","path"],Uh.documentTargetsIndex="documentTargetsIndex",Uh.documentTargetsKeyPath=["path","targetId"];var jh=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};jh.key="targetGlobalKey",jh.store="targetGlobal";var Fh=function(t,e){this.collectionId=t,this.parent=e};function qh(t){t.createObjectStore(Uh.store,{keyPath:Uh.keyPath}).createIndex(Uh.documentTargetsIndex,Uh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Mh.store,{keyPath:Mh.keyPath}).createIndex(Mh.queryTargetsIndexName,Mh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(jh.store)}Fh.store="collectionParents",Fh.keyPath=["collectionId","parent"];var Bh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Bh.store="clientMetadata",Bh.keyPath="clientId";var Gh=At(At(At([kh.store,Oh.store,Ph.store,Rh.store,Mh.store,xh.store,jh.store,Uh.store],[Bh.store]),[Vh.store]),[Fh.store]),zh=function(){function t(){this.la=new Nh}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var r=e.O(),i=e.F();t.pr((function(){n.la.add(e)}));var o={collectionId:r,parent:Zc(i)};return $h(t).put(o)}return oc.resolve()},t.prototype.Kr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Po(e),""],!1,!0);return $h(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(nh(o.parent))}return n}))},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $h(t){return Zh.Kn(t,Fh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Hh=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),Kh=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.Ea(t).next((function(n){var r=new Hh(n.highestTargetId);return n.highestTargetId=r.next(),e.Ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ia=function(t){return this.Ea(t).next((function(t){return $o.V(new zo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ma=function(t){return this.Ea(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Aa=function(t,e,n){var r=this;return this.Ea(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.v()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ta(t,i)}))},t.prototype.Ra=function(t,e){var n=this;return this.Pa(t,e).next((function(){return n.Ea(t).next((function(r){return r.targetCount+=1,n.ga(e,r),n.Ta(t,r)}))}))},t.prototype.Va=function(t,e){return this.Pa(t,e)},t.prototype.ya=function(t,e){var n=this;return this.pa(t,e.targetId).next((function(){return Wh(t).delete(e.targetId)})).next((function(){return n.Ea(t)})).next((function(e){return No(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)}))},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return Wh(t).rs((function(s,u){var a=fh(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.ya(t,a)))})).next((function(){return oc.kn(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return Wh(t).rs((function(t,n){var r=fh(n);e(r)}))},t.prototype.Ea=function(t){return Xh(t).get(jh.key).next((function(t){return No(null!==t),t}))},t.prototype.Ta=function(t,e){return Xh(t).put(jh.key,e)},t.prototype.Pa=function(t,e){return Wh(t).put(lh(this.serializer,e))},t.prototype.ga=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.Ea(t).next((function(t){return t.targetCount}))},t.prototype.va=function(t,e){var n=ns(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Wh(t).rs({range:r,index:Mh.queryTargetsIndexName},(function(t,n,r){var o=fh(n);rs(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Sa=function(t,e,n){var r=this,i=[],o=Yh(t);return e.forEach((function(e){var s=Zc(e.path);i.push(o.put(new Uh(n,s))),i.push(r.No.Da(t,n,e))})),oc.kn(i)},t.prototype.Ca=function(t,e,n){var r=this,i=Yh(t);return oc.forEach(e,(function(e){var o=Zc(e.path);return oc.kn([i.delete([n,o]),r.No.Na(t,n,e)])}))},t.prototype.pa=function(t,e){var n=Yh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Yh(t),i=_s();return r.rs({range:n,ss:!0},(function(t,e,n){var r=nh(t[1]),o=new Yo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ho=function(t,e){var n=Zc(e.path),r=IDBKeyRange.bound([n],[Po(n)],!1,!0),i=0;return Yh(t).rs({index:Uh.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return Wh(t).get(e).next((function(t){return t?fh(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wh(t){return Zh.Kn(t,Mh.store)}function Xh(t){return Zh.Kn(t,jh.store)}function Yh(t){return Zh.Kn(t,Uh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Jh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wo=e,r.Fa=n,r}return mt(e,t),e}(zc),Zh=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=s,this.document=u,this.ka=c,this.Oa=h,this.Ma=null,this.$a=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Ka=function(t){return Promise.resolve()},!t.Ln())throw new mo(go.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new nf(this,i),this.Qa=n+"main",this.serializer=new rh(a),this.Wa=new sc(this.Qa,10,new Sh(this.serializer)),this.ja=new Kh(this.No,this.serializer),this.Dr=new zh,this.vr=function(t,e){return new bh(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===h&&Eo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Kn=function(t,e){if(t instanceof Jh)return sc.Kn(t.Wo,e);throw Ao()},t.prototype.start=function(){var t=this;return this.za().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new mo(go.FAILED_PRECONDITION,Qh);return t.Ha(),t.Ja(),t.Ya(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ja.ma(e)}))})).then((function(e){t.Ma=new xc(e,t.ka)})).then((function(){t.$a=!0})).catch((function(e){return t.Wa&&t.Wa.close(),Promise.reject(e)}))},t.prototype.Xa=function(t){var e=this;return this.Ka=function(n){return wt(e,void 0,void 0,(function(){return It(this,(function(e){return this.Ii?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Za=function(t){var e=this;this.Wa.jn((function(n){return wt(e,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.th=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return wt(e,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return this.Ii?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ef(e).put(new Bh(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.eh(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.Ka(!1)})))}))})).next((function(){return t.nh(e)})).next((function(n){return t.isPrimary&&!n?t.sh(e).next((function(){return!1})):!!n&&t.ih(e).next((function(){return!0}))}))})).catch((function(e){if(cc(e))return Io("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Io("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.Ka(e)})),t.isPrimary=e}))},t.prototype.eh=function(t){var e=this;return tf(t).get(xh.key).next((function(t){return oc.resolve(e.rh(t))}))},t.prototype.oh=function(t){return ef(t).delete(this.clientId)},t.prototype.ah=function(){return wt(this,void 0,void 0,(function(){var e,n,r,i,o=this;return It(this,(function(s){switch(s.label){case 0:return!this.isPrimary||this.hh(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Kn(e,Bh.store);return n.ts().next((function(t){var e=o.uh(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return oc.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=s.sent(),this.Ga)for(n=0,r=e;n<r.length;n++)i=r[n],this.Ga.removeItem(this.lh(i.clientId));s.label=2;case 2:return[2]}}))}))},t.prototype.Ya=function(){var t=this;this.qa=this.fn.Vn("client_metadata_refresh",4e3,(function(){return t.za().then((function(){return t.ah()})).then((function(){return t.Ya()}))}))},t.prototype.rh=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.nh=function(t){var e=this;return this.Oa?oc.resolve(!0):tf(t).get(xh.key).next((function(n){if(null!==n&&e.hh(n.leaseTimestampMs,5e3)&&!e._h(n.ownerId)){if(e.rh(n)&&e.networkEnabled)return!0;if(!e.rh(n)){if(!n.allowTabSynchronization)throw new mo(go.FAILED_PRECONDITION,Qh);return!1}}return!(!e.networkEnabled||!e.inForeground)||ef(t).ts().next((function(t){return void 0===e.uh(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Io("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Di=function(){return wt(this,void 0,void 0,(function(){var t=this;return It(this,(function(e){switch(e.label){case 0:return this.$a=!1,this.fh(),this.qa&&(this.qa.cancel(),this.qa=null),this.dh(),this.wh(),[4,this.Wa.runTransaction("shutdown","readwrite",[xh.store,Bh.store],(function(e){var n=new Jh(e,xc.ai);return t.sh(n).next((function(){return t.oh(n)}))}))];case 1:return e.sent(),this.Wa.close(),this.Eh(),[2]}}))}))},t.prototype.uh=function(t,e){var n=this;return t.filter((function(t){return n.hh(t.updateTimeMs,e)&&!n._h(t.clientId)}))},t.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ef(e).ts().next((function(e){return t.uh(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),t.prototype.Th=function(t){return ph.Fo(t,this.serializer,this.Dr,this.No)},t.prototype.Ih=function(){return this.ja},t.prototype.mh=function(){return this.vr},t.prototype.Ah=function(){return this.Dr},t.prototype.runTransaction=function(t,e,n){var r=this;Io("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Wa.runTransaction(t,o,Gh,(function(o){return i=new Jh(o,r.Ma?r.Ma.next():xc.ai),"readwrite-primary"===e?r.eh(i).next((function(t){return!!t||r.nh(i)})).next((function(e){if(!e)throw Eo("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.Ka(!1)})),new mo(go.FAILED_PRECONDITION,Gc);return n(i)})).next((function(t){return r.ih(i).next((function(){return t}))})):r.Rh(i).next((function(){return n(i)}))})).then((function(t){return i.br(),t}))},t.prototype.Rh=function(t){var e=this;return tf(t).get(xh.key).next((function(t){if(null!==t&&e.hh(t.leaseTimestampMs,5e3)&&!e._h(t.ownerId)&&!e.rh(t)&&!(e.Oa||e.allowTabSynchronization&&t.allowTabSynchronization))throw new mo(go.FAILED_PRECONDITION,Qh)}))},t.prototype.ih=function(t){var e=new xh(this.clientId,this.allowTabSynchronization,Date.now());return tf(t).put(xh.key,e)},t.Ln=function(){return sc.Ln()},t.prototype.sh=function(t){var e=this,n=tf(t);return n.get(xh.key).next((function(t){return e.rh(t)?(Io("IndexedDbPersistence","Releasing primary lease."),n.delete(xh.key)):oc.resolve()}))},t.prototype.hh=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Eo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.za()}))},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},t.prototype.dh=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},t.prototype.Ja=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e.fh(),e.fn.ws((function(){return e.Di()}))},this.window.addEventListener("unload",this.La))},t.prototype.wh=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},t.prototype._h=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.lh(t)));return Io("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Eo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.fh=function(){if(this.Ga)try{this.Ga.setItem(this.lh(this.clientId),String(Date.now()))}catch(t){Eo("Failed to set zombie client id.",t)}},t.prototype.Eh=function(){if(this.Ga)try{this.Ga.removeItem(this.lh(this.clientId))}catch(t){}},t.prototype.lh=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function tf(t){return Zh.Kn(t,xh.store)}function ef(t){return Zh.Kn(t,Bh.store)}var nf=function(){function t(t,e){this.db=t,this.wo=new Jc(this,e)}return t.prototype.Po=function(t){var e=this.Ph(t);return this.db.Ih().ba(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Ph=function(t){var e=0;return this.yo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Ih().Ce(t,e)},t.prototype.yo=function(t,e){return this.gh(t,(function(t,n){return e(n)}))},t.prototype.Da=function(t,e,n){return rf(t,n)},t.prototype.Na=function(t,e,n){return rf(t,n)},t.prototype.po=function(t,e,n){return this.db.Ih().po(t,e,n)},t.prototype.Go=function(t,e){return rf(t,e)},t.prototype.Vh=function(t,e){return function(t,e){var n=!1;return mh(t).os((function(r){return dh(t,r,e).next((function(t){return t&&(n=!0),oc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.bo=function(t,e){var n=this,r=this.db.mh().ra(),i=[],o=0;return this.gh(t,(function(s,u){if(u<=e){var a=n.Vh(t,s).next((function(e){if(!e)return o++,r.Rr(t,s).next((function(){return r.Ar(s),Yh(t).delete([0,Zc(s.path)])}))}));i.push(a)}})).next((function(){return oc.kn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.Fa);return this.db.Ih().Va(t,n)},t.prototype.yh=function(t,e){return rf(t,e)},t.prototype.gh=function(t,e){var n,r=Yh(t),i=xc.ai;return r.rs({index:Uh.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==xc.ai&&e(new Yo(nh(n)),i),i=u,n=s):i=xc.ai})).next((function(){i!==xc.ai&&e(new Yo(nh(n)),i)}))},t.prototype.So=function(t){return this.db.mh().aa(t)},t}();function rf(t,e){return Yh(t).put(function(t,e){return new Uh(0,Zc(t.path),e)}(e,t.Fa))}function of(t,e){var n=t.projectId;return t.I||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var sf=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new fs(ko),this.Sh=new Go((function(t){return ns(t)}),rs),this.Dh=$o.min(),this.Sr=t.Th(n),this.Ch=t.mh(),this.ja=t.Ih(),this.Nh=new $c(this.Ch,this.Sr,this.persistence.Ah()),this.ph.xh(this.Nh)}return t.prototype.mo=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.vo(n,e.bh)}))},t}();function uf(t,e){var n=So(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ch.ra({oa:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=oc.resolve();return o.forEach((function(t){s=s.next((function(){return r.Rr(e,t)})).next((function(e){var o=e,s=n.dr.get(t);No(null!==s),(!o||o.version.h(s)<0)&&(o=i.hr(t,o,n))&&r.Ir(o,n._r)}))})),s.next((function(){return t.Sr.Qo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Nh.Or(t,r)}))}))}function af(t){var e=So(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ja.Ia(t)}))}function cf(t,e){var n=So(t),r=e.nt,i=n.bh;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ch.ra({oa:!0});i=n.bh;var s=[];e.zt.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.ja.Ca(t,e.se,o).next((function(){return n.ja.Sa(t,e.ee,o)})));var a=e.resumeToken;if(a.o()>0){var c=u.it(a,r).st(t.Fa);i=i.ot(o,c),function(t,e,n){return No(e.resumeToken.o()>0),0===t.resumeToken.o()||e.nt.p()-t.nt.p()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(u,c,e)&&s.push(n.ja.Va(t,c))}}}));var u=gs(),a=_s();if(e.Jt.forEach((function(t,e){a=a.add(t)})),s.push(o.getEntries(t,a).next((function(i){e.Jt.forEach((function(a,c){var h=i.get(a);c instanceof Ia&&c.version.isEqual($o.min())?(o.Ar(a,r),u=u.ot(a,c)):null==h||c.version.h(h.version)>0||0===c.version.h(h.version)&&h.hasPendingWrites?(o.Ir(c,r),u=u.ot(a,c)):Io("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version),e.Yt.has(a)&&s.push(n.persistence.No.yh(t,a))}))}))),!r.isEqual($o.min())){var c=n.ja.Ia(t).next((function(e){return n.ja.Aa(t,t.Fa,r)}));s.push(c)}return oc.kn(s).next((function(){return o.apply(t)})).next((function(){return n.Nh.Mr(t,u)}))})).then((function(t){return n.bh=i,t}))}function hf(t,e){var n=So(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)}))}function ff(t,e){var n=So(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ja.va(t,e).next((function(i){return i?(r=i,oc.resolve(r)):n.ja.wa(t).next((function(i){return r=new us(e,i,0,t.Fa),n.ja.Ra(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.bh.get(t.targetId);return(null===r||t.nt.h(r.nt)>0)&&(n.bh=n.bh.ot(t.targetId,t),n.Sh.set(e,t.targetId)),t}))}function lf(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return It(this,(function(u){switch(u.label){case 0:r=So(t),i=r.bh.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.No.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!cc(s=u.sent()))throw s;return Io("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.bh=r.bh.remove(e),r.Sh.delete(i.target),[2]}}))}))}function pf(t,e,n){var r=So(t),i=$o.min(),o=_s();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=So(t),i=r.Sh.get(n);return void 0!==i?oc.resolve(r.bh.get(i)):r.ja.va(e,n)}(r,t,Pa(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ja.xa(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.ph.Lr(t,e,n?i:$o.min(),n?o:_s())})).next((function(t){return{documents:t,Fh:o}}))}))}function df(t,e){var n=So(t),r=So(n.ja),i=n.bh.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function vf(t){var e=So(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=So(t),i=gs(),o=sh(n),s=Eh(e),u=IDBKeyRange.lowerBound(o,!0);return s.rs({index:Rh.readTimeIndex,range:u},(function(t,e){var n=ih(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{kh:i,readTime:uh(o)}}))}(e.Ch,t,e.Dh)})).then((function(t){var n=t.kh,r=t.readTime;return e.Dh=r,n}))}function yf(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){return[2,(e=So(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Eh(t),n=$o.min();return e.rs({index:Rh.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=uh(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Dh=t}))]}))}))}function gf(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){if(t.code!==go.FAILED_PRECONDITION||t.message!==Gc)throw t;return Io("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var mf=function(){function t(){this.Oh=new ds(bf.Mh),this.$h=new ds(bf.Lh)}return t.prototype.P=function(){return this.Oh.P()},t.prototype.Da=function(t,e){var n=new bf(t,e);this.Oh=this.Oh.add(n),this.$h=this.$h.add(n)},t.prototype.Bh=function(t,e){var n=this;t.forEach((function(t){return n.Da(t,e)}))},t.prototype.Na=function(t,e){this.qh(new bf(t,e))},t.prototype.Uh=function(t,e){var n=this;t.forEach((function(t){return n.Na(t,e)}))},t.prototype.Kh=function(t){var e=this,n=new Yo(new Ko([])),r=new bf(n,t),i=new bf(n,t+1),o=[];return this.$h.xt([r,i],(function(t){e.qh(t),o.push(t.key)})),o},t.prototype.Qh=function(){var t=this;this.Oh.forEach((function(e){return t.qh(e)}))},t.prototype.qh=function(t){this.Oh=this.Oh.delete(t),this.$h=this.$h.delete(t)},t.prototype.Wh=function(t){var e=new Yo(new Ko([])),n=new bf(e,t),r=new bf(e,t+1),i=_s();return this.$h.xt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ho=function(t){var e=new bf(t,0),n=this.Oh.kt(e);return null!==n&&t.isEqual(n.key)},t}(),bf=function(){function t(t,e){this.key=t,this.jh=e}return t.Mh=function(t,e){return Yo.D(t.key,e.key)||ko(t.jh,e.jh)},t.Lh=function(t,e){return ko(t.jh,e.jh)||Yo.D(t.key,e.key)},t}(),wf=function(t,e){this.user=e,this.type="OAuth",this.Gh={},this.Gh.Authorization="Bearer "+t},If=function(){function t(){this.zh=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Hh=function(){},t.prototype.Jh=function(t){this.zh=t,t(Dc.UNAUTHENTICATED)},t.prototype.Yh=function(){this.zh=null},t}(),Ef=function(){function t(t){var e=this;this.Xh=null,this.currentUser=Dc.UNAUTHENTICATED,this.Zh=!1,this.tc=0,this.zh=null,this.forceRefresh=!1,this.Xh=function(){e.tc++,e.currentUser=e.ec(),e.Zh=!0,e.zh&&e.zh(e.currentUser)},this.tc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Xh):(this.Xh(null),t.get().then((function(t){e.auth=t,e.Xh&&e.auth.addAuthTokenListener(e.Xh)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.tc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.tc!==e?(Io("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(No("string"==typeof n.accessToken),new wf(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Hh=function(){this.forceRefresh=!0},t.prototype.Jh=function(t){this.zh=t,this.Zh&&t(this.currentUser)},t.prototype.Yh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Xh),this.Xh=null,this.zh=null},t.prototype.ec=function(){var t=this.auth&&this.auth.getUid();return No(null===t||"string"==typeof t),new Dc(t)},t}(),_f=function(){function t(t,e){this.nc=t,this.sc=e,this.type="FirstParty",this.user=Dc.ni}return Object.defineProperty(t.prototype,"Gh",{get:function(){var t={"X-Goog-AuthUser":this.sc},e=this.nc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Tf=function(){function t(t,e){this.nc=t,this.sc=e}return t.prototype.getToken=function(){return Promise.resolve(new _f(this.nc,this.sc))},t.prototype.Jh=function(t){t(Dc.ni)},t.prototype.Yh=function(){},t.prototype.Hh=function(){},t}(),Af=function(){function t(t,e,n,r,i,o){this.fn=t,this.ic=n,this.rc=r,this.oc=i,this.listener=o,this.state=0,this.ac=0,this.hc=null,this.stream=null,this.Vs=new ic(t,e)}return t.prototype.cc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.uc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.lc()},t.prototype.stop=function(){return wt(this,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return this.cc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype._c=function(){this.state=0,this.Vs.reset()},t.prototype.fc=function(){var t=this;this.uc()&&null===this.hc&&(this.hc=this.fn.Vn(this.ic,6e4,(function(){return t.dc()})))},t.prototype.wc=function(t){this.Ec(),this.stream.send(t)},t.prototype.dc=function(){return wt(this,void 0,void 0,(function(){return It(this,(function(t){return this.uc()?[2,this.close(0)]:[2]}))}))},t.prototype.Ec=function(){this.hc&&(this.hc.cancel(),this.hc=null)},t.prototype.close=function(t,e){return wt(this,void 0,void 0,(function(){return It(this,(function(n){switch(n.label){case 0:return this.Ec(),this.Vs.cancel(),this.ac++,3!==t?this.Vs.reset():e&&e.code===go.RESOURCE_EXHAUSTED?(Eo(e.toString()),Eo("Using maximum backoff delay to prevent overloading the backend."),this.Vs.Rn()):e&&e.code===go.UNAUTHENTICATED&&this.oc.Hh(),null!==this.stream&&(this.Tc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ic(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Tc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.mc(this.ac),n=this.ac;this.oc.getToken().then((function(e){t.ac===n&&t.Ac(e)}),(function(n){e((function(){var e=new mo(go.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Rc(e)}))}))},t.prototype.Ac=function(t){var e=this,n=this.mc(this.ac);this.stream=this.Pc(t),this.stream.gc((function(){n((function(){return e.state=2,e.listener.gc()}))})),this.stream.Ic((function(t){n((function(){return e.Rc(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.lc=function(){var t=this;this.state=4,this.Vs.Pn((function(){return wt(t,void 0,void 0,(function(){return It(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Rc=function(t){return Io("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.mc=function(t){var e=this;return function(n){e.fn.ws((function(){return e.ac===t?n():(Io("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Nf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return mt(e,t),e.prototype.Pc=function(t){return this.rc.Vc("Listen",t)},e.prototype.onMessage=function(t){this.Vs.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ao()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ke?(No(void 0===e||"string"==typeof e),Lo.fromBase64String(e||"")):(No(void 0===e||e instanceof Uint8Array),Lo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?go.UNKNOWN:hs(t.code);return new mo(e,t.message||"")}(s);n=new Ls(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var c=gu(t,a.document.name),h=pu(a.document.updateTime),f=new ya({mapValue:{fields:a.document.fields}}),l=new wa(c,h,f,{}),p=a.targetIds||[],d=a.removedTargetIds||[];n=new Os(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=gu(t,v.document),g=v.readTime?pu(v.readTime):$o.min(),m=new Ia(y,g),b=v.removedTargetIds||[];n=new Os([],b,m.key,m)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var I=gu(t,w.document),E=w.removedTargetIds||[];n=new Os([],E,I,null)}else{if(!("filter"in e))return Ao();e.filter;var _=e.filter;_.targetId;var T=_.count||0,A=new as(T),N=_.targetId;n=new Ps(N,A)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return $o.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?$o.min():e.readTime?pu(e.readTime):$o.min()}(t);return this.listener.yc(e,n)},e.prototype.bc=function(t){var e={};e.database=wu(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=is(r)?{documents:Au(t,r)}:{query:Nu(t,r)}).targetId=e.targetId,e.resumeToken.o()>0&&(n.resumeToken=fu(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ao()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.wc(e)},e.prototype.vc=function(t){var e={};e.database=wu(this.serializer),e.removeTarget=t,this.wc(e)},e}(Af),Sf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Sc=!1,s}return mt(e,t),Object.defineProperty(e.prototype,"Dc",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Sc=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Tc=function(){this.Sc&&this.Cc([])},e.prototype.Pc=function(t){return this.rc.Vc("Write",t)},e.prototype.onMessage=function(t){if(No(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Sc){this.Vs.reset();var e=function(t,e){return t&&t.length>0?(No(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?pu(t.updateTime):pu(e);n.isEqual($o.min())&&(n=pu(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Zu(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=pu(t.commitTime);return this.listener.Nc(n,e)}return No(!t.writeResults||0===t.writeResults.length),this.Sc=!0,this.listener.xc()},e.prototype.Fc=function(){var t={};t.database=wu(this.serializer),this.wc(t)},e.prototype.Cc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return _u(e.serializer,t)}))};this.wc(n)},e}(Af),Df=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.rc=n,i.serializer=r,i.kc=!1,i}return mt(e,t),e.prototype.Oc=function(){if(this.kc)throw new mo(go.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mc=function(t,e,n){var r=this;return this.Oc(),this.credentials.getToken().then((function(i){return r.rc.Mc(t,e,n,i)})).catch((function(t){throw t.code===go.UNAUTHENTICATED&&r.credentials.Hh(),t}))},e.prototype.$c=function(t,e,n){var r=this;return this.Oc(),this.credentials.getToken().then((function(i){return r.rc.$c(t,e,n,i)})).catch((function(t){throw t.code===go.UNAUTHENTICATED&&r.credentials.Hh(),t}))},e.prototype.terminate=function(){this.kc=!1},e}((function(){})),xf=function(){function t(t,e){this.hs=t,this.di=e,this.state="Unknown",this.Lc=0,this.Bc=null,this.qc=!0}return t.prototype.Uc=function(){var t=this;0===this.Lc&&(this.Kc("Unknown"),this.Bc=this.hs.Vn("online_state_timeout",1e4,(function(){return t.Bc=null,t.Qc("Backend didn't respond within 10 seconds."),t.Kc("Offline"),Promise.resolve()})))},t.prototype.Wc=function(t){"Online"===this.state?this.Kc("Unknown"):(this.Lc++,this.Lc>=1&&(this.jc(),this.Qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Kc("Offline")))},t.prototype.set=function(t){this.jc(),this.Lc=0,"Online"===t&&(this.qc=!1),this.Kc(t)},t.prototype.Kc=function(t){t!==this.state&&(this.state=t,this.di(t))},t.prototype.Qc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.qc?(Eo(e),this.qc=!1):Io("OnlineStateTracker",e)},t.prototype.jc=function(){null!==this.Bc&&(this.Bc.cancel(),this.Bc=null)},t}(),kf=function(t,e,n,r,i){var o=this;this.Gc=t,this.zc=e,this.hs=n,this.Hc={},this.Jc=[],this.Yc=new Map,this.Xc=new Set,this.Zc=[],this.tu=i,this.tu.eu((function(t){n.ws((function(){return wt(o,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return Ff(this)?(Io("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return(e=So(t)).Xc.add(4),[4,Pf(e)];case 1:return n.sent(),e.nu.set("Unknown"),e.Xc.delete(4),[4,Of(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.nu=new xf(n,r)};function Of(t){return wt(this,void 0,void 0,(function(){var e,n;return It(this,(function(r){switch(r.label){case 0:if(!Ff(t))return[3,4];e=0,n=t.Zc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Pf(t){return wt(this,void 0,void 0,(function(){var e,n;return It(this,(function(r){switch(r.label){case 0:e=0,n=t.Zc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Lf(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return e=So(t),Io("RemoteStore","RemoteStore shutting down."),e.Xc.add(5),[4,Pf(e)];case 1:return n.sent(),e.tu.Di(),e.nu.set("Unknown"),[2]}}))}))}function Cf(t,e){var n=So(t);n.Yc.has(e.targetId)||(n.Yc.set(e.targetId,e),jf(n)?Uf(n):el(n).uc()&&Vf(n,e))}function Rf(t,e){var n=So(t),r=el(n);n.Yc.delete(e),r.uc()&&Mf(n,e),0===n.Yc.size&&(r.uc()?r.fc():Ff(n)&&n.nu.set("Unknown"))}function Vf(t,e){t.su.me(e.targetId),el(t).bc(e)}function Mf(t,e){t.su.me(e),el(t).vc(e)}function Uf(t){t.su=new Rs({qe:function(e){return t.Hc.qe(e)},Ue:function(e){return t.Yc.get(e)||null}}),el(t).start(),t.nu.Uc()}function jf(t){return Ff(t)&&!el(t).cc()&&t.Yc.size>0}function Ff(t){return 0===So(t).Xc.size}function qf(t){t.su=void 0}function Bf(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){return t.Yc.forEach((function(e,n){Vf(t,e)})),[2]}))}))}function Gf(t,e){return wt(this,void 0,void 0,(function(){return It(this,(function(n){return qf(t),jf(t)?(t.nu.Wc(e),Uf(t)):t.nu.set("Unknown"),[2]}))}))}function zf(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o;return It(this,(function(s){switch(s.label){case 0:if(t.nu.set("Online"),!(e instanceof Ls&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o;return It(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.Yc.has(o)?[4,t.Hc.iu(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.Yc.delete(o),t.su.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Io("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,$f(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Os?t.su.be(e):e instanceof Ps?t.su.ke(e):t.su.De(e),n.isEqual($o.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,af(t.Gc)];case 8:return i=s.sent(),n.h(i)>=0?[4,function(t,e){var n=t.su.$e(e);return n.zt.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Yc.get(r);i&&t.Yc.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Yc.get(e);if(n){t.Yc.set(e,n.it(Lo.u,n.nt)),Mf(t,e);var r=new us(n.target,e,1,n.sequenceNumber);Vf(t,r)}})),t.Hc.ru(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Io("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,$f(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function $f(t,e,n){return wt(this,void 0,void 0,(function(){var r=this;return It(this,(function(i){switch(i.label){case 0:if(!cc(e))throw e;return t.Xc.add(1),[4,Pf(t)];case 1:return i.sent(),t.nu.set("Offline"),n||(n=function(){return af(t.Gc)}),t.hs.Cs((function(){return wt(r,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return Io("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Xc.delete(1),[4,Of(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Hf(t,e){return e().catch((function(n){return $f(t,n,e)}))}function Kf(t){return wt(this,void 0,void 0,(function(){var e,n,r,i,o;return It(this,(function(s){switch(s.label){case 0:e=So(t),n=nl(e),r=e.Jc.length>0?e.Jc[e.Jc.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Ff(t)&&t.Jc.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,hf(e.Gc,r)];case 3:return null===(i=s.sent())?(0===e.Jc.length&&n.fc(),[3,7]):(r=i.batchId,function(t,e){t.Jc.push(e);var n=nl(t);n.uc()&&n.Dc&&n.Cc(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,$f(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Wf(e)&&Xf(e),[2]}}))}))}function Wf(t){return Ff(t)&&!nl(t).cc()&&t.Jc.length>0}function Xf(t){nl(t).start()}function Yf(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){return nl(t).Fc(),[2]}))}))}function Qf(t){return wt(this,void 0,void 0,(function(){var e,n,r,i;return It(this,(function(o){for(e=nl(t),n=0,r=t.Jc;n<r.length;n++)i=r[n],e.Cc(i.mutations);return[2]}))}))}function Jf(t,e,n){return wt(this,void 0,void 0,(function(){var r,i;return It(this,(function(o){switch(o.label){case 0:return r=t.Jc.shift(),i=qc.from(r,e,n),[4,Hf(t,(function(){return t.Hc.ou(i)}))];case 1:return o.sent(),[4,Kf(t)];case 2:return o.sent(),[2]}}))}))}function Zf(t,e){return wt(this,void 0,void 0,(function(){return It(this,(function(n){switch(n.label){case 0:return e&&nl(t).Dc?[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r;return It(this,(function(i){switch(i.label){case 0:return cs(r=e.code)&&r!==go.ABORTED?(n=t.Jc.shift(),nl(t)._c(),[4,Hf(t,(function(){return t.Hc.au(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Kf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Wf(t)&&Xf(t),[2]}}))}))}function tl(t,e){return wt(this,void 0,void 0,(function(){var n;return It(this,(function(r){switch(r.label){case 0:return n=So(t),e?(n.Xc.delete(2),[4,Of(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Xc.add(2),[4,Pf(n)]);case 3:r.sent(),n.nu.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function el(t){var e=this;return t.hu||(t.hu=function(t,e,n){var r=So(t);return r.Oc(),new Nf(e,r.rc,r.credentials,r.serializer,n)}(t.zc,t.hs,{gc:Bf.bind(null,t),Ic:Gf.bind(null,t),yc:zf.bind(null,t)}),t.Zc.push((function(n){return wt(e,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return n?(t.hu._c(),jf(t)?Uf(t):t.nu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.hu.stop()];case 2:e.sent(),qf(t),e.label=3;case 3:return[2]}}))}))}))),t.hu}function nl(t){var e=this;return t.cu||(t.cu=function(t,e,n){var r=So(t);return r.Oc(),new Sf(e,r.rc,r.credentials,r.serializer,n)}(t.zc,t.hs,{gc:Yf.bind(null,t),Ic:Zf.bind(null,t),xc:Qf.bind(null,t),Nc:Jf.bind(null,t)}),t.Zc.push((function(n){return wt(e,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return n?(t.cu._c(),[4,Kf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.cu.stop()];case 3:e.sent(),t.Jc.length>0&&(Io("RemoteStore","Stopping write stream with "+t.Jc.length+" pending writes"),t.Jc=[]),e.label=4;case 4:return[2]}}))}))}))),t.cu
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var rl=function(t){this.key=t},il=function(t){this.key=t},ol=function(){function t(t,e){this.query=t,this.uu=e,this.lu=null,this.te=!1,this._u=_s(),this.Qt=_s(),this.fu=Fa(t),this.du=new Ns(this.fu)}return Object.defineProperty(t.prototype,"wu",{get:function(){return this.uu},enumerable:!1,configurable:!0}),t.prototype.Eu=function(t,e){var n=this,r=e?e.Tu:new Ss,i=e?e.du:this.du,o=e?e.Qt:this.Qt,s=i,u=!1,a=Na(this.query)&&i.size===this.query.limit?i.last():null,c=Sa(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var h=i.get(t),f=e instanceof wa?e:null;f&&(f=ja(n.query,f)?f:null);var l=!!h&&n.Qt.has(h.key),p=!!f&&(f.Ye||n.Qt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Iu(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.fu(f,a)>0||c&&n.fu(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Na(this.query)||Sa(this.query))for(;s.size>this.query.limit;){var h=Na(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{du:s,Tu:r,mu:u,Qt:o}},t.prototype.Iu=function(t,e){return t.Ye&&e.hasCommittedMutations&&!e.Ye},t.prototype.Vr=function(t,e,n){var r=this,i=this.du;this.du=t.du,this.Qt=t.Qt;var o=t.Tu.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ao()}};return n(t)-n(e)}(t.type,e.type)||r.fu(t.doc,e.doc)})),this.Au(n);var s=e?this.Ru():[],u=0===this._u.size&&this.te?1:0,a=u!==this.lu;return this.lu=u,0!==o.length||a?{snapshot:new Ds(this.query,t.du,i,o,t.Qt,0===u,a,!1),Pu:s}:{Pu:s}},t.prototype.Ks=function(t){return this.te&&"Offline"===t?(this.te=!1,this.Vr({du:this.du,Tu:new Ss,Qt:this.Qt,mu:!1},!1)):{Pu:[]}},t.prototype.gu=function(t){return!this.uu.has(t)&&!!this.du.has(t)&&!this.du.get(t).Ye},t.prototype.Au=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uu=e.uu.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uu=e.uu.delete(t)})),this.te=t.te)},t.prototype.Ru=function(){var t=this;if(!this.te)return[];var e=this._u;this._u=_s(),this.du.forEach((function(e){t.gu(e.key)&&(t._u=t._u.add(e.key))}));var n=[];return e.forEach((function(e){t._u.has(e)||n.push(new il(e))})),this._u.forEach((function(t){e.has(t)||n.push(new rl(t))})),n},t.prototype.Vu=function(t){this.uu=t.Fh,this._u=_s();var e=this.Eu(t.documents);return this.Vr(e,!0)},t.prototype.yu=function(){return Ds.Gt(this.query,this.du,this.Qt,0===this.lu)},t}(),sl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ul=function(t){this.key=t,this.pu=!1},al=function(){function t(t,e,n,r,i,o){this.Gc=t,this.bu=e,this.vu=n,this.Su=r,this.currentUser=i,this.Du=o,this.Cu={},this.Nu=new Go((function(t){return Ma(t)}),Va),this.xu=new Map,this.Fu=[],this.ku=new fs(Yo.D),this.Ou=new Map,this.Mu=new mf,this.$u={},this.Lu=new Map,this.Bu=Hh.da(),this.onlineState="Unknown",this.qu=void 0}return Object.defineProperty(t.prototype,"Uu",{get:function(){return!0===this.qu},enumerable:!1,configurable:!0}),t}();function cl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return It(this,(function(a){switch(a.label){case 0:return n=Rl(t),(o=n.Nu.get(e))?(r=o.targetId,n.Su.$i(r),i=o.view.yu(),[3,4]):[3,1];case 1:return[4,ff(n.Gc,Pa(e))];case 2:return s=a.sent(),u=n.Su.$i(s.targetId),r=s.targetId,[4,hl(n,e,r,"current"===u)];case 3:i=a.sent(),n.Uu&&Cf(n.bu,s),a.label=4;case 4:return[2,i]}}))}))}function hl(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s,u,a,c;return It(this,(function(h){switch(h.label){case 0:return t.Ku=function(e,n,r){return function(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s;return It(this,(function(u){switch(u.label){case 0:return(i=e.view.Eu(n)).mu?[4,pf(t.Gc,e.query,!1).then((function(t){var n=t.documents;return e.view.Eu(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.zt.get(e.targetId),s=e.view.Vr(i,t.Uu,o),[2,(Il(t,e.targetId,s.Pu),s.snapshot)]}}))}))}(t,e,n,r)},[4,pf(t.Gc,e,!0)];case 1:return i=h.sent(),o=new ol(e,i.Fh),s=o.Eu(i.documents),u=ks.Zt(n,r&&"Offline"!==t.onlineState),a=o.Vr(s,t.Uu,u),Il(t,n,a.Pu),c=new sl(e,n,o),[2,(t.Nu.set(e,c),t.xu.has(n)?t.xu.get(n).push(e):t.xu.set(n,[e]),a.snapshot)]}}))}))}function fl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return It(this,(function(o){switch(o.label){case 0:return n=So(t),r=n.Nu.get(e),(i=n.xu.get(r.targetId)).length>1?[2,(n.xu.set(r.targetId,i.filter((function(t){return!Va(t,e)}))),void n.Nu.delete(e))]:n.Uu?(n.Su.Bi(r.targetId),n.Su.xi(r.targetId)?[3,2]:[4,lf(n.Gc,r.targetId,!1).then((function(){n.Su.Ui(r.targetId),Rf(n.bu,r.targetId),bl(n,r.targetId)})).catch(gf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return bl(n,r.targetId),[4,lf(n.Gc,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function ll(t,e){return wt(this,void 0,void 0,(function(){var n,r;return It(this,(function(i){switch(i.label){case 0:n=So(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,cf(n.Gc,e)];case 2:return r=i.sent(),e.zt.forEach((function(t,e){var r=n.Ou.get(e);r&&(No(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.pu=!0:t.ne.size>0?No(r.pu):t.se.size>0&&(No(r.pu),r.pu=!1))})),[4,Tl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,gf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function pl(t,e,n){var r=So(t);if(r.Uu&&0===n||!r.Uu&&1===n){var i=[];r.Nu.forEach((function(t,n){var r=n.view.Ks(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=So(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Ks(e)&&(r=!0)})),r&&Nc(n)}(r.vu,e),i.length&&r.Cu.yc(i),r.onlineState=e,r.Uu&&r.Su.ji(e)}}function dl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s,u,a;return It(this,(function(c){switch(c.label){case 0:return(r=So(t)).Su.Ki(e,"rejected",n),i=r.Ou.get(e),(o=i&&i.key)?(s=(s=new fs(Yo.D)).ot(o,new Ia(o,$o.min())),u=_s().add(o),a=new xs($o.min(),new Map,new ds(ko),s,u),[4,ll(r,a)]):[3,2];case 1:return c.sent(),r.ku=r.ku.remove(o),r.Ou.delete(e),_l(r),[3,4];case 2:return[4,lf(r.Gc,e,!1).then((function(){return bl(r,e,n)})).catch(gf)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function vl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return It(this,(function(o){switch(o.label){case 0:n=So(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,uf(n.Gc,e)];case 2:return i=o.sent(),ml(n,r,null),gl(n,r),n.Su.Oi(r,"acknowledged"),[4,Tl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,gf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function yl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i;return It(this,(function(o){switch(o.label){case 0:r=So(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=So(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Sr.$o(t,e).next((function(e){return No(null!==e),r=e.keys(),n.Sr.Qo(t,e)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Nh.Or(t,r)}))}))}(r.Gc,e)];case 2:return i=o.sent(),ml(r,e,n),gl(r,e),r.Su.Oi(e,"rejected",n),[4,Tl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,gf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function gl(t,e){(t.Lu.get(e)||[]).forEach((function(t){t.resolve()})),t.Lu.delete(e)}function ml(t,e,n){var r=So(t),i=r.$u[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$u[r.currentUser.ti()]=i}}function bl(t,e,n){void 0===n&&(n=null),t.Su.Bi(e);for(var r=0,i=t.xu.get(e);r<i.length;r++){var o=i[r];t.Nu.delete(o),n&&t.Cu.Qu(o,n)}t.xu.delete(e),t.Uu&&t.Mu.Kh(e).forEach((function(e){t.Mu.Ho(e)||wl(t,e)}))}function wl(t,e){var n=t.ku.get(e);null!==n&&(Rf(t.bu,n),t.ku=t.ku.remove(e),t.Ou.delete(n),_l(t))}function Il(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof rl?(t.Mu.Da(o.key,e),El(t,o)):o instanceof il?(Io("SyncEngine","Document no longer in limbo: "+o.key),t.Mu.Na(o.key,e),t.Mu.Ho(o.key)||wl(t,o.key)):Ao()}}function El(t,e){var n=e.key;t.ku.get(n)||(Io("SyncEngine","New document in limbo: "+n),t.Fu.push(n),_l(t))}function _l(t){for(;t.Fu.length>0&&t.ku.size<t.Du;){var e=t.Fu.shift(),n=t.Bu.next();t.Ou.set(n,new ul(e)),t.ku=t.ku.ot(e,n),Cf(t.bu,new us(Pa(Aa(e.path)),n,2,xc.ai))}}function Tl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return It(this,(function(u){switch(u.label){case 0:return r=So(t),i=[],o=[],s=[],r.Nu.P()?[3,3]:(r.Nu.forEach((function(t,u){s.push(r.Ku(u,e,n).then((function(t){if(t){r.Uu&&r.Su.Ki(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Hc.zr(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.Cu.yc(i),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h;return It(this,(function(f){switch(f.label){case 0:n=So(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return oc.forEach(e,(function(e){return oc.forEach(e.jr,(function(r){return n.persistence.No.Da(t,e.targetId,r)})).next((function(){return oc.forEach(e.Gr,(function(r){return n.persistence.No.Na(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!cc(r=f.sent()))throw r;return Io("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.bh.get(u),c=a.nt,h=a.rt(c),n.bh=n.bh.ot(u,h));return[2]}}))}))}(r.Gc,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Al(t,e){return wt(this,void 0,void 0,(function(){var n,r;return It(this,(function(i){switch(i.label){case 0:return(n=So(t)).currentUser.isEqual(e)?[3,3]:(Io("SyncEngine","User change. New user:",e.ti()),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o;return It(this,(function(s){switch(s.label){case 0:return n=So(t),r=n.Sr,i=n.Nh,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Sr.Uo(t).next((function(s){return o=s,r=n.persistence.Th(e),i=new $c(n.Ch,r,n.persistence.Ah()),r.Uo(t)})).next((function(e){for(var n=[],r=[],s=_s(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Or(t,s).next((function(t){return{Wu:t,ju:n,Gu:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Sr=r,n.Nh=i,n.ph.xh(n.Nh),o)]}}))}))}(n.Gc,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Lu.forEach((function(t){t.forEach((function(t){t.reject(new mo(go.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lu.clear()}(n),n.Su.Wi(e,r.ju,r.Gu),[4,Tl(n,r.Wu)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Nl(t,e){var n=So(t),r=n.Ou.get(e);if(r&&r.pu)return _s().add(r.key);var i=_s(),o=n.xu.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Nu.get(a);i=i.Ot(c.view.wu)}return i}function Sl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return It(this,(function(o){switch(o.label){case 0:return[4,pf((n=So(t)).Gc,e.query,!0)];case 1:return r=o.sent(),i=e.view.Vu(r),[2,(n.Uu&&Il(n,e.targetId,i.Pu),i)]}}))}))}function Dl(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o;return It(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=So(t),r=So(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Lo(t,e).next((function(e){return e?n.Nh.Or(t,e):oc.resolve(null)}))}))}((i=So(t)).Gc,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Kf(i.bu)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ml(i,e,r||null),gl(i,e),function(t,e){So(So(t).Sr).jo(e)}(i.Gc,e)):Ao(),s.label=4;case 4:return[4,Tl(i,o)];case 5:return s.sent(),[3,7];case 6:Io("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function xl(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return It(this,(function(h){switch(h.label){case 0:return Rl(n=So(t)),Vl(n),!0!==e||!0===n.qu?[3,3]:(r=n.Su.Ci(),[4,kl(n,r.L())]);case 1:return i=h.sent(),n.qu=!0,[4,tl(n.bu,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)u=s[o],Cf(n.bu,u);return[3,7];case 3:return!1!==e||!1===n.qu?[3,7]:(a=[],c=Promise.resolve(),n.xu.forEach((function(t,e){n.Su.qi(e)?a.push(e):c=c.then((function(){return bl(n,e),lf(n.Gc,e,!0)})),Rf(n.bu,e)})),[4,c]);case 4:return h.sent(),[4,kl(n,a)];case 5:return h.sent(),function(t){var e=So(t);e.Ou.forEach((function(t,n){Rf(e.bu,n)})),e.Mu.Qh(),e.Ou=new Map,e.ku=new fs(Yo.D)}(n),n.qu=!1,[4,tl(n.bu,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function kl(t,e,n){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d,v;return It(this,(function(y){switch(y.label){case 0:n=So(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.xu.get(u))&&0!==c.length?[4,ff(n.Gc,Pa(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.Nu.get(l),[4,Sl(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,df(n.Gc,u)];case 8:return v=y.sent(),[4,ff(n.Gc,v)];case 9:return a=y.sent(),[4,hl(n,Ol(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Cu.yc(i),r)]}}))}))}function Ol(t){return Ta(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Pl(t){var e=So(t);return So(So(e.Gc).persistence).pi()}function Ll(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s;return It(this,(function(u){switch(u.label){case 0:return(i=So(t)).qu?(Io("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.xu.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,vf(i.Gc)];case 3:return o=u.sent(),s=xs.Xt(e,"current"===n),[4,Tl(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,lf(i.Gc,e,!0)];case 6:return u.sent(),bl(i,e,r),[3,8];case 7:Ao(),u.label=8;case 8:return[2]}}))}))}function Cl(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l;return It(this,(function(p){switch(p.label){case 0:if(!(r=Rl(t)).qu)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.xu.has(s)?(Io("SyncEngine","Adding an already active target "+s),[3,5]):[4,df(r.Gc,s)]):[3,6];case 2:return u=p.sent(),[4,ff(r.Gc,u)];case 3:return a=p.sent(),[4,hl(r,Ol(u),a.targetId,!1)];case 4:p.sent(),Cf(r.bu,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return It(this,(function(e){switch(e.label){case 0:return r.xu.has(t)?[4,lf(r.Gc,t,!1).then((function(){Rf(r.bu,t),bl(r,t)})).catch(gf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Rl(t){var e=So(t);return e.bu.Hc.ru=ll.bind(null,e),e.bu.Hc.qe=Nl.bind(null,e),e.bu.Hc.iu=dl.bind(null,e),e.Cu.yc=Tc.bind(null,e.vu),e.Cu.Qu=Ac.bind(null,e.vu),e}function Vl(t){var e=So(t);return e.bu.Hc.ou=vl.bind(null,e),e.bu.Hc.au=yl.bind(null,e),e}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ml=function(){function t(){}return t.prototype.xh=function(t){this.zu=t},t.prototype.Lr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.W())}(e)||n.isEqual($o.min())?this.Hu(t,e):this.zu.Or(t,r).next((function(o){var s=i.Ju(e,o);return(Na(e)||Sa(e))&&i.mu(e.an,s,r,n)?i.Hu(t,e):(wo()<=zt.DEBUG&&Io("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ua(e)),i.zu.Lr(t,e,n).next((function(t){return s.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Ju=function(t,e){var n=new ds(Fa(t));return e.forEach((function(e,r){r instanceof wa&&ja(t,r)&&(n=n.add(r))})),n},t.prototype.mu=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.h(r)>0)},t.prototype.Hu=function(t,e){return wo()<=zt.DEBUG&&Io("IndexFreeQueryEngine","Using full collection scan to execute query:",Ua(e)),this.zu.Lr(t,e,$o.min())},t}(),Ul=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Yu=1,this.Xu=new ds(bf.Mh)}return t.prototype.ko=function(t){return oc.resolve(0===this.Sr.length)},t.prototype.Oo=function(t,e,n,r){var i=this.Yu;this.Yu++,this.Sr.length>0&&this.Sr[this.Sr.length-1];var o=new Fc(i,e,n,r);this.Sr.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.Xu=this.Xu.add(new bf(a.key,i)),this.Dr.Mo(t,a.key.path.F())}return oc.resolve(o)},t.prototype.$o=function(t,e){return oc.resolve(this.Zu(e))},t.prototype.Bo=function(t,e){var n=e+1,r=this.tl(n),i=r<0?0:r;return oc.resolve(this.Sr.length>i?this.Sr[i]:null)},t.prototype.qo=function(){return oc.resolve(0===this.Sr.length?-1:this.Yu-1)},t.prototype.Uo=function(t){return oc.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,r=new bf(e,0),i=new bf(e,Number.POSITIVE_INFINITY),o=[];return this.Xu.xt([r,i],(function(t){var e=n.Zu(t.jh);o.push(e)})),oc.resolve(o)},t.prototype.$r=function(t,e){var n=this,r=new ds(ko);return e.forEach((function(t){var e=new bf(t,0),i=new bf(t,Number.POSITIVE_INFINITY);n.Xu.xt([e,i],(function(t){r=r.add(t.jh)}))})),oc.resolve(this.el(r))},t.prototype.Qr=function(t,e){var n=e.path,r=n.length+1,i=n;Yo.X(i)||(i=i.child(""));var o=new bf(new Yo(i),0),s=new ds(ko);return this.Xu.Ft((function(t){var e=t.key.path;return!!n.M(e)&&(e.length===r&&(s=s.add(t.jh)),!0)}),o),oc.resolve(this.el(s))},t.prototype.el=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Zu(t);null!==r&&n.push(r)})),n},t.prototype.Qo=function(t,e){var n=this;No(0===this.nl(e.batchId,"removed")),this.Sr.shift();var r=this.Xu;return oc.forEach(e.mutations,(function(i){var o=new bf(i.key,e.batchId);return r=r.delete(o),n.No.Go(t,i.key)})).next((function(){n.Xu=r}))},t.prototype.jo=function(t){},t.prototype.Ho=function(t,e){var n=new bf(e,0),r=this.Xu.kt(n);return oc.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return this.Sr.length,oc.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zu=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),jl=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new fs(Yo.D),this.size=0}return t.prototype.Ir=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:s,readTime:n}),this.size+=s-o,this.Dr.Mo(t,r.path.F())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return oc.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,r=ms();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)})),oc.resolve(r)},t.prototype.Lr=function(t,e,n){for(var r=ws(),i=new Yo(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),u=s.key,a=s.value,c=a.ta,h=a.readTime;if(!e.path.M(u.path))break;h.h(n)<=0||c instanceof wa&&ja(e,c)&&(r=r.ot(c.key,c))}return oc.resolve(r)},t.prototype.il=function(t,e){return oc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ra=function(t){return new Fl(this)},t.prototype.aa=function(t){return oc.resolve(this.size)},t}(),Fl=function(t){function e(e){var n=this;return(n=t.call(this)||this).ha=e,n}return mt(e,t),e.prototype.Vr=function(t){var e=this,n=[];return this.wr.forEach((function(r,i){i?n.push(e.ha.Ir(t,i,e.readTime)):e.ha.Ar(r)})),oc.kn(n)},e.prototype.Pr=function(t,e){return this.ha.Rr(t,e)},e.prototype.gr=function(t,e){return this.ha.getEntries(t,e)},e}(Bc),ql=function(){function t(t){this.persistence=t,this.rl=new Go((function(t){return ns(t)}),rs),this.lastRemoteSnapshotVersion=$o.min(),this.highestTargetId=0,this.ol=0,this.al=new mf,this.targetCount=0,this.hl=Hh.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach((function(t,n){return e(n)})),oc.resolve()},t.prototype.Ia=function(t){return oc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ma=function(t){return oc.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.hl.next(),oc.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),oc.resolve()},t.prototype.Pa=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.hl=new Hh(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.Pa(e),this.targetCount+=1,oc.resolve()},t.prototype.Va=function(t,e){return this.Pa(e),oc.resolve()},t.prototype.ya=function(t,e){return this.rl.delete(e.target),this.al.Kh(e.targetId),this.targetCount-=1,oc.resolve()},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return this.rl.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.rl.delete(s),o.push(r.pa(t,u.targetId)),i++)})),oc.kn(o).next((function(){return i}))},t.prototype.ba=function(t){return oc.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return oc.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Bh(e,n),oc.resolve()},t.prototype.Ca=function(t,e,n){this.al.Uh(e,n);var r=this.persistence.No,i=[];return r&&e.forEach((function(e){i.push(r.Go(t,e))})),oc.kn(i)},t.prototype.pa=function(t,e){return this.al.Kh(e),oc.resolve()},t.prototype.xa=function(t,e){var n=this.al.Wh(e);return oc.resolve(n)},t.prototype.Ho=function(t,e){return oc.resolve(this.al.Ho(e))},t}(),Bl=function(){function t(t){var e=this;this.cl={},this.Ma=new xc(0),this.$a=!1,this.$a=!0,this.No=t(this),this.ja=new ql(this),this.Dr=new Ah,this.vr=function(t,n){return new jl(t,(function(t){return e.No.ul(t)}))}(this.Dr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Di=function(){return this.$a=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),t.prototype.Za=function(){},t.prototype.th=function(){},t.prototype.Ah=function(){return this.Dr},t.prototype.Th=function(t){var e=this.cl[t.ti()];return e||(e=new Ul(this.Dr,this.No),this.cl[t.ti()]=e),e},t.prototype.Ih=function(){return this.ja},t.prototype.mh=function(){return this.vr},t.prototype.runTransaction=function(t,e,n){var r=this;Io("MemoryPersistence","Starting transaction:",t);var i=new Gl(this.Ma.next());return this.No.ll(),n(i).next((function(t){return r.No._l(i).next((function(){return t}))})).xn().then((function(t){return i.br(),t}))},t.prototype.fl=function(t,e){return oc.On(Object.values(this.cl).map((function(n){return function(){return n.Ho(t,e)}})))},t}(),Gl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fa=e,n}return mt(e,t),e}(zc),zl=function(){function t(t){this.persistence=t,this.dl=new mf,this.wl=null}return t.El=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw Ao()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),oc.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),oc.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),oc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Kh(e.targetId).forEach((function(t){return n.Tl.add(t.toString())}));var r=this.persistence.Ih();return r.xa(t,e.targetId).next((function(t){t.forEach((function(t){return n.Tl.add(t.toString())}))})).next((function(){return r.ya(t,e)}))},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.mh().ra();return oc.forEach(this.Tl,(function(r){var i=Yo.H(r);return e.Il(t,i).next((function(t){t||n.Ar(i)}))})).next((function(){return e.wl=null,n.apply(t)}))},t.prototype.yh=function(t,e){var n=this;return this.Il(t,e).next((function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())}))},t.prototype.ul=function(t){return 0},t.prototype.Il=function(t,e){var n=this;return oc.On([function(){return oc.resolve(n.dl.Ho(e))},function(){return n.persistence.Ih().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),$l=function(){function t(t){this.ml=t.ml,this.Al=t.Al}return t.prototype.gc=function(t){this.Rl=t},t.prototype.Ic=function(t){this.Pl=t},t.prototype.onMessage=function(t){this.gl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.ml(t)},t.prototype.Vl=function(){this.Rl()},t.prototype.yl=function(t){this.Pl(t)},t.prototype.pl=function(t){this.gl(t)},t}(),Hl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Kl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.T=e.T,n}return mt(e,t),e.prototype.Nl=function(t,e,n,r){return new Promise((function(i,o){var s=new yo;s.listenOnce(po.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case lo.NO_ERROR:var e=s.getResponseJson();Io("Connection","XHR received:",JSON.stringify(e)),i(e);break;case lo.TIMEOUT:Io("Connection",'RPC "'+t+'" timed out'),o(new mo(go.DEADLINE_EXCEEDED,"Request time out"));break;case lo.HTTP_ERROR:var n=s.getStatus();if(Io("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(go).indexOf(e)>=0?e:go.UNKNOWN}(r.status);o(new mo(u,r.message))}else o(new mo(go.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new mo(go.UNAVAILABLE,"Connection failed."));break;default:Ao()}}finally{Io("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Vc=function(t,e){var n,r=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new uo,o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.T};this.Cl(o.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())||"object"==typeof navigator&&"ReactNative"===navigator.product||Dt().indexOf("Electron/")>=0||function(){var t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||Dt().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Io("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),a=!1,c=!1,h=new $l({ml:function(t){c?Io("Connection","Not sending because WebChannel is closed:",t):(a||(Io("Connection","Opening WebChannel transport."),u.open(),a=!0),Io("Connection","WebChannel sending:",t),u.send(t))},Al:function(){return u.close()}}),f=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(vo.EventType.OPEN,(function(){c||Io("Connection","WebChannel transport opened.")})),f(vo.EventType.CLOSE,(function(){c||(c=!0,Io("Connection","WebChannel transport closed"),h.yl())})),f(vo.EventType.ERROR,(function(t){c||(c=!0,_o("Connection","WebChannel transport errored:",t),h.yl(new mo(go.UNAVAILABLE,"The operation could not be completed")))})),f(vo.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];No(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Io("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=os[t];if(void 0!==e)return hs(e)}(o),a=i.message;void 0===s&&(s=go.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),c=!0,h.yl(new mo(s,a)),u.close()}else Io("Connection","WebChannel received:",n),h.pl(n)}})),setTimeout((function(){h.Vl()}),0),h},e}(function(){function t(t){this.bl=t,this._=t._;var e=t.ssl?"https":"http";this.vl=e+"://"+t.host,this.Sl="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}return t.prototype.Mc=function(t,e,n,r){var i=this.Dl(t,e);Io("RestConnection","Sending: ",i,n);var o={};return this.Cl(o,r),this.Nl(t,i,o,n).then((function(t){return Io("RestConnection","Received: ",t),t}),(function(e){throw _o("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$c=function(t,e,n,r){return this.Mc(t,e,n,r)},t.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.0",t["Content-Type"]="text/plain",e)for(var n in e.Gh)e.Gh.hasOwnProperty(n)&&(t[n]=e.Gh[n])},t.prototype.Dl=function(t,e){var n=Hl[t];return this.vl+"/v1/"+e+":"+n},t}()),Wl=function(){function t(){var t=this;this.xl=function(){return t.Fl()},this.kl=function(){return t.Ol()},this.Ml=[],this.$l()}return t.prototype.eu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener("online",this.xl),window.removeEventListener("offline",this.kl)},t.prototype.$l=function(){window.addEventListener("online",this.xl),window.addEventListener("offline",this.kl)},t.prototype.Fl=function(){Io("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.Ol=function(){Io("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Xl=function(){function t(){}return t.prototype.eu=function(t){},t.prototype.Di=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Yl(t){return new su(t,!0)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ql=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return wt(this,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return this.Su=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return e.sent(),this.ql=this.Ul(t),this.Gc=this.Kl(t),[2]}}))}))},t.prototype.Ul=function(t){return null},t.prototype.Kl=function(t){return e=this.persistence,n=new Ml,r=t.Ql,new sf(e,n,r);var e,n,r},t.prototype.Bl=function(t){return new Bl(zl.El)},t.prototype.Ll=function(t){return new jc},t.prototype.terminate=function(){return wt(this,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Su.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}}))}))},t}(),Jl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return mt(e,t),e.prototype.initialize=function(e){return wt(this,void 0,void 0,(function(){return It(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,yf(this.Gc)];case 2:return n.sent(),[4,this.Wl.initialize(this,e)];case 3:return n.sent(),[4,Vl(this.Wl.fi)];case 4:return n.sent(),[4,Kf(this.Wl.bu)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ul=function(t){var e=this.persistence.No.wo;return new Qc(e,t.hs)},e.prototype.Bl=function(t){var e=of(t.bl._,t.bl.persistenceKey),n=void 0!==this.cacheSizeBytes?Yc.ao(this.cacheSizeBytes):Yc.fo,r=Yl(t.bl._);return new Zh(this.synchronizeTabs,e,t.clientId,n,t.hs,vc(),yc(),r,this.Su,!!this.forceOwnership)},e.prototype.Ll=function(t){return new jc},e}(Ql),Zl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Wl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return mt(e,t),e.prototype.initialize=function(e){return wt(this,void 0,void 0,(function(){var n,r=this;return It(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Wl.fi,this.Su instanceof Uc?(this.Su.fi={er:Dl.bind(null,n),nr:Ll.bind(null,n),sr:Cl.bind(null,n),pi:Pl.bind(null,n)},[4,this.Su.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Xa((function(t){return wt(r,void 0,void 0,(function(){return It(this,(function(e){switch(e.label){case 0:return[4,xl(this.Wl.fi,t)];case 1:return e.sent(),this.ql&&(t&&!this.ql.Ii?this.ql.start(this.Gc):t||this.ql.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Ll=function(t){var e=vc();if(!Uc.Ln(e))throw new mo(go.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=of(t.bl._,t.bl.persistenceKey);return new Uc(e,t.hs,n,t.clientId,t.Ql)},e}(Jl),tp=function(){function t(){}return t.prototype.initialize=function(t,e){return wt(this,void 0,void 0,(function(){var n=this;return It(this,(function(r){switch(r.label){case 0:return this.Gc?[3,2]:(this.Gc=t.Gc,this.Su=t.Su,this.zc=this.jl(e),this.bu=this.Gl(e),this.vu=this.zl(e),this.fi=this.Hl(e,!t.synchronizeTabs),this.Su.di=function(t){return pl(n.fi,t,1)},this.bu.Hc.Jl=Al.bind(null,this.fi),[4,tl(this.bu,this.fi.Uu)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.zl=function(t){return new Ic},t.prototype.jl=function(t){var e,n=Yl(t.bl._),r=(e=t.bl,new Kl(e));return function(t,e,n){return new Df(t,e,n)}(t.credentials,r,n)},t.prototype.Gl=function(t){var e,n,r,i,o,s=this;return e=this.Gc,n=this.zc,r=t.hs,i=function(t){return pl(s.fi,t,0)},o=Wl.Ln()?new Wl:new Xl,new kf(e,n,r,i,o)},t.prototype.Hl=function(t,e){return function(t,e,n,r,i,o,s){var u=new al(t,e,n,r,i,o);return s&&(u.qu=!0),u}(this.Gc,this.bu,this.vu,this.Su,t.Ql,t.Du,e)},t.prototype.terminate=function(){return Lf(this.bu)},t}(),ep=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xl=function(){this.muted=!0},t.prototype.Yl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function np(t,e,n){if(!n)throw new mo(go.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function rp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new mo(go.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ip(t,e,n,r){if(!0===e&&!0===r)throw new mo(go.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function op(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ao()}function sp(t,e){if(e<=0)throw new mo(go.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var up=function(t){for(var e=0;e<t.length;++e)if(0===t[e].length)throw new mo(go.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Zl=new Xo(t)},ap=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return mt(e,t),e.documentId=function(){return new e(Xo.j().B())},e.prototype.isEqual=function(t){return t instanceof e&&this.Zl.isEqual(t.Zl)},e}(up),cp=new RegExp("[~\\*/\\[\\]]"),hp=function(t){this.t_=t},fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.e_=function(t){if(2!==t.n_)throw 1===t.n_?t.s_(this.t_+"() can only appear at the top level of your update data"):t.s_(this.t_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(hp);function lp(t,e,n){return new Tp({n_:3,i_:e.settings.i_,methodName:t.t_,r_:n},e._,e.serializer,e.ignoreUndefinedProperties)}var pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.e_=function(t){return new Ju(t.path,new Gu)},e.prototype.isEqual=function(t){return t instanceof e},e}(hp),dp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return mt(e,t),e.prototype.e_=function(t){var e=lp(this,t,!0),n=this.o_.map((function(t){return kp(t,e)})),r=new zu(n);return new Ju(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(hp),vp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return mt(e,t),e.prototype.e_=function(t){var e=lp(this,t,!0),n=this.o_.map((function(t){return kp(t,e)})),r=new Hu(n);return new Ju(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(hp),yp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return mt(e,t),e.prototype.e_=function(t){var e=new Wu(t.serializer,cu(t.serializer,this.a_));return new Ju(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(hp),gp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new mo(go.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mo(go.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.h_=t,this.c_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.c_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.h_===t.h_&&this.c_===t.c_},t.prototype.toJSON=function(){return{latitude:this.h_,longitude:this.c_}},t.prototype.g=function(t){return ko(this.h_,t.h_)||ko(this.c_,t.c_)},t}(),mp=function(t){this.u_=t},bp=/^__.*__$/,wp=function(t,e,n){this.l_=t,this.__=e,this.f_=n},Ip=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[];return null!==this.Qe?n.push(new ca(t,this.data,this.Qe,e)):n.push(new aa(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new fa(t,this.fieldTransforms)),n},t}(),Ep=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[new ca(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new fa(t,this.fieldTransforms)),n},t}();function _p(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ao()}}var Tp=function(){function t(t,e,n,r,i,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.w_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"n_",{get:function(){return this.settings.n_},enumerable:!1,configurable:!0}),t.prototype.E_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.T_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.E_({path:n,r_:!1});return r.I_(t),r},t.prototype.m_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.E_({path:n,r_:!1});return r.w_(),r},t.prototype.A_=function(t){return this.E_({path:void 0,r_:!0})},t.prototype.s_=function(t){return Vp(t,this.settings.methodName,this.settings.R_||!1,this.path,this.settings.i_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.M(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.M(e.field)}))},t.prototype.w_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.s_("Document fields must not be empty");if(_p(this.n_)&&bp.test(t))throw this.s_('Document fields cannot begin and end with "__"')},t}(),Ap=function(){function t(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||Yl(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new Tp({n_:t,methodName:e,i_:n,path:Xo.U(),r_:!1,R_:r},this._,this.serializer,this.ignoreUndefinedProperties)},t}();function Np(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);Lp("Data must be an object, but it was:",s,r);var u,a,c=Op(r,s);if(o.merge)u=new Qu(s.Qe),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=l[f],d=void 0;if(p instanceof up)d=p.Zl;else{if("string"!=typeof p)throw Ao();d=Rp(e,p,n)}if(!s.contains(d))throw new mo(go.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Mp(h,d)||h.push(d)}u=new Qu(h),a=s.fieldTransforms.filter((function(t){return u.Je(t.field)}))}else u=null,a=s.fieldTransforms;return new Ip(new ya(c),u,a)}function Sp(t,e,n,r){var i=t.P_(1,e,n);Lp("Data must be an object, but it was:",i,r);var o=[],s=new ga;qo(r,(function(t,r){var u=Rp(e,t,n),a=i.m_(u);if(r instanceof fp||r instanceof mp&&r.u_ instanceof fp)o.push(u);else{var c=kp(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Qu(o);return new Ep(s.Xe(),u,i.fieldTransforms)}function Dp(t,e,n,r,i,o){var s=t.P_(1,e,n),u=[Cp(e,r,n)],a=[i];if(o.length%2!=0)throw new mo(go.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Cp(e,o[c])),a.push(o[c+1]);for(var h=[],f=new ga,l=u.length-1;l>=0;--l)if(!Mp(h,u[l])){var p=u[l],d=a[l],v=s.m_(p);if(d instanceof fp||d instanceof mp&&d.u_ instanceof fp)h.push(p);else{var y=kp(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new Qu(h);return new Ep(f.Xe(),g,s.fieldTransforms)}function xp(t,e,n,r){return void 0===r&&(r=!1),kp(n,t.P_(r?4:3,e))}function kp(t,e){if(t instanceof mp&&(t=t.u_),Pp(t))return Lp("Unsupported field value:",e,t),Op(t,e);if(t instanceof hp)return function(t,e){if(!_p(e.n_))throw e.s_(t.t_+"() can only be used with update() and set()");if(!e.path)throw e.s_(t.t_+"() is not currently supported inside arrays");var n=t.e_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.r_&&4!==e.n_)throw e.s_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=kp(o[i],e.A_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cu(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=zo.fromDate(t);return{timestampValue:hu(e.serializer,n)}}if(t instanceof zo){var r=new zo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:hu(e.serializer,r)}}if(t instanceof gp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Co)return{bytesValue:fu(e.serializer,t.l)};if(t instanceof wp){var i=e._,o=t.l_;if(!o.isEqual(i))throw e.s_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:du(t.l_||e._,t.__.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.s_("Unsupported field value: "+op(t))}(t,e)}function Op(t,e){var n={};return Bo(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):qo(t,(function(t,r){var i=kp(r,e.T_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Pp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof zo||t instanceof gp||t instanceof Co||t instanceof wp||t instanceof hp)}function Lp(t,e,n){if(!Pp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=op(n);throw"an object"===r?e.s_(t+" a custom object"):e.s_(t+" "+r)}}function Cp(t,e,n){if(e instanceof up)return e.Zl;if("string"==typeof e)return Rp(t,e);throw Vp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Rp(t,e,n){try{return function(t){if(t.search(cp)>=0)throw new mo(go.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ap.bind.apply(ap,At([void 0],t.split("."))))}catch(e){throw new mo(go.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Zl}catch(e){throw Vp((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function Vp(t,e,n,r,i){var o=r&&!r.P(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new mo(go.INVALID_ARGUMENT,(u+=". ")+t+a)}function Mp(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Up=function(){function t(t){this.zc=t,this.g_=new Map,this.mutations=[],this.V_=!1,this.y_=null,this.p_=new Set}return t.prototype.b_=function(t){return wt(this,void 0,void 0,(function(){var e,n=this;return It(this,(function(r){switch(r.label){case 0:if(this.v_(),this.mutations.length>0)throw new mo(go.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,u;return It(this,(function(a){switch(a.label){case 0:return n=So(t),r=wu(n.serializer)+"/documents",i={documents:e.map((function(t){return yu(n.serializer,t)}))},[4,n.$c("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){No(!!e.found),e.found.name,e.found.updateTime;var n=gu(t,e.found.name),r=pu(e.found.updateTime),i=new ya({mapValue:{fields:e.found.fields}});return new wa(n,r,i,{})}(t,e):"missing"in e?function(t,e){No(!!e.missing),No(!!e.readTime);var n=gu(t,e.missing),r=pu(e.readTime);return new Ia(n,r)}(t,e):Ao()}(n.serializer,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());No(!!e),u.push(e)})),u)]}}))}))}(this.zc,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Ia||t instanceof wa?n.S_(t):Ao()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.d_(t,this.Ge(t))),this.p_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.d_(t,this.D_(t)))}catch(t){this.y_=t}this.p_.add(t.toString())},t.prototype.delete=function(t){this.write([new da(t,this.Ge(t))]),this.p_.add(t.toString())},t.prototype.commit=function(){return wt(this,void 0,void 0,(function(){var t,e=this;return It(this,(function(n){switch(n.label){case 0:if(this.v_(),this.y_)throw this.y_;return t=this.g_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Yo.H(n);e.mutations.push(new va(r,e.Ge(r)))})),[4,function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return It(this,(function(o){switch(o.label){case 0:return n=So(t),r=wu(n.serializer)+"/documents",i={writes:e.map((function(t){return _u(n.serializer,t)}))},[4,n.Mc("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.zc,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}}))}))},t.prototype.S_=function(t){var e;if(t instanceof wa)e=t.version;else{if(!(t instanceof Ia))throw Ao();e=$o.min()}var n=this.g_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new mo(go.ABORTED,"Document version changed between two reads.")}else this.g_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.g_.get(t.toString());return!this.p_.has(t.toString())&&e?ta.updateTime(e):ta.ze()},t.prototype.D_=function(t){var e=this.g_.get(t.toString());if(!this.p_.has(t.toString())&&e){if(e.isEqual($o.min()))throw new mo(go.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ta.updateTime(e)}return ta.exists(!0)},t.prototype.write=function(t){this.v_(),this.mutations=this.mutations.concat(t)},t.prototype.v_=function(){},t}(),jp=function(){function t(t,e,n,r){this.hs=t,this.zc=e,this.updateFunction=n,this.ls=r,this.C_=5,this.Vs=new ic(this.hs,"transaction_retry")}return t.prototype.run=function(){this.N_()},t.prototype.N_=function(){var t=this;this.Vs.Pn((function(){return wt(t,void 0,void 0,(function(){var t,e,n=this;return It(this,(function(r){return t=new Up(this.zc),(e=this.x_(t))&&e.then((function(e){n.hs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.F_(t)}))}))})).catch((function(t){n.F_(t)})),[2]}))}))}))},t.prototype.x_=function(t){try{var e=this.updateFunction(t);return!Qo(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.F_=function(t){var e=this;this.C_>0&&this.k_(t)?(this.C_-=1,this.hs.ws((function(){return e.N_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.k_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!cs(e)}return!1},t}(),Fp=function(){function t(t,e){this.credentials=t,this.hs=e,this.clientId=xo.t(),this.O_=new rc}return t.prototype.start=function(t,e,n){var r=this;this.M_(),this.bl=t;var i=new rc,o=!1;return this.credentials.Jh((function(t){if(!o)return o=!0,Io("FirestoreClient","Initializing. user=",t.uid),r.L_(e,n,t,i).then(r.O_.resolve,r.O_.reject);r.hs.Cs((function(){return function(t,e){return wt(this,void 0,void 0,(function(){var n,r;return It(this,(function(i){switch(i.label){case 0:return(n=So(t)).hs.Fs(),Io("RemoteStore","RemoteStore received new credentials"),r=Ff(n),n.Xc.add(3),[4,Pf(n)];case 1:return i.sent(),r&&n.nu.set("Unknown"),[4,n.Hc.Jl(e)];case 2:return i.sent(),n.Xc.delete(3),[4,Of(n)];case 3:return i.sent(),[2]}}))}))}(r.bu,t)}))})),this.hs.ws((function(){return r.O_.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.M_(),this.hs.enqueue((function(){return t.persistence.th(!0),function(t){var e=So(t);return e.Xc.delete(0),Of(e)}(t.bu)}))},t.prototype.L_=function(t,e,n,r){return wt(this,void 0,void 0,(function(){var i,o,s=this;return It(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),i={hs:this.hs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Ql:n,Du:100},[4,t.initialize(i)];case 1:return u.sent(),[4,e.initialize(t,i)];case 2:return u.sent(),this.persistence=t.persistence,this.Su=t.Su,this.Gc=t.Gc,this.ql=t.ql,this.zc=e.zc,this.bu=e.bu,this.fi=e.fi,this.B_=e.vu,this.B_.Us=cl.bind(null,this.fi),this.B_.Ws=fl.bind(null,this.fi),this.persistence.Za((function(){return wt(s,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(o=u.sent(),r.reject(o),!function(t){return"FirebaseError"===t.name?t.code===go.FAILED_PRECONDITION||t.code===go.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(o))throw o;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),this.L_(new Ql,new tp,n,r))];case 4:return[2]}}))}))},t.prototype.M_=function(){if(this.hs.ps)throw new mo(go.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.M_(),this.hs.enqueue((function(){return t.persistence.th(!1),function(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return(e=So(t)).Xc.add(0),[4,Pf(e)];case 1:return n.sent(),e.nu.set("Offline"),[2]}}))}))}(t.bu)}))},t.prototype.terminate=function(){var t=this;this.hs.Ds();var e=new rc;return this.hs.bs((function(){return wt(t,void 0,void 0,(function(){var t,n;return It(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,Lf(this.bu)];case 1:return r.sent(),[4,this.Su.Di()];case 2:return r.sent(),[4,this.persistence.Di()];case 3:return r.sent(),this.credentials.Yh(),e.resolve(),[3,5];case 4:return t=r.sent(),n=bc(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.M_();var e=new rc;return this.hs.ws((function(){return function(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s;return It(this,(function(u){switch(u.label){case 0:Ff((n=So(t)).bu)||Io("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=So(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Sr.qo(t)}))}(n.Gc)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Lu.get(r)||[]).push(e),n.Lu.set(r,i),[3,4]);case 3:return o=u.sent(),s=bc(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}(t.fi,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.M_();var i=new ep(n),o=new Sc(t,i,e);return this.hs.ws((function(){return Ec(r.B_,o)})),function(){i.Xl(),r.hs.ws((function(){return _c(r.B_,o)}))}},t.prototype.q_=function(t){return wt(this,void 0,void 0,(function(){var e,n=this;return It(this,(function(r){switch(r.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return r.sent(),e=new rc,[2,(this.hs.ws((function(){return function(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o;return It(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=So(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Nh.Cr(t,e)}))}(t,e)];case 1:return(r=s.sent())instanceof wa?n.resolve(r):r instanceof Ia?n.resolve(null):n.reject(new mo(go.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=bc(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))}(n.Gc,t,e)})),e.promise)]}}))}))},t.prototype.U_=function(t,e){return void 0===e&&(e={}),wt(this,void 0,void 0,(function(){var n,r=this;return It(this,(function(i){switch(i.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return i.sent(),n=new rc,[2,(this.hs.ws((function(){return function(t,e,n,r,i){var o=new ep({next:function(o){e.ws((function(){return _c(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new mo(go.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new mo(go.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Sc(Aa(n.path),o,{includeMetadataChanges:!0,Xs:!0});return Ec(t,s)}(r.B_,r.hs,t,e,n)})),n.promise)]}}))}))},t.prototype.K_=function(t){return wt(this,void 0,void 0,(function(){var e,n=this;return It(this,(function(r){switch(r.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return r.sent(),e=new rc,[2,(this.hs.ws((function(){return function(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s,u,a;return It(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,pf(t,e,!0)];case 1:return r=c.sent(),i=new ol(e,r.Fh),o=i.Eu(r.documents),s=i.Vr(o,!1),n.resolve(s.snapshot),[3,3];case 2:return u=c.sent(),a=bc(u,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))}(n.Gc,t,e)})),e.promise)]}}))}))},t.prototype.Q_=function(t,e){return void 0===e&&(e={}),wt(this,void 0,void 0,(function(){var n,r=this;return It(this,(function(i){switch(i.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return i.sent(),n=new rc,[2,(this.hs.ws((function(){return function(t,e,n,r,i){var o=new ep({next:function(n){e.ws((function(){return _c(t,s)})),n.fromCache&&"server"===r.source?i.reject(new mo(go.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Sc(n,o,{includeMetadataChanges:!0,Xs:!0});return Ec(t,s)}(r.B_,r.hs,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.M_();var n=new rc;return this.hs.ws((function(){return function(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return It(this,(function(u){switch(u.label){case 0:r=Vl(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=So(t),i=zo.now(),o=e.reduce((function(t,e){return t.add(e.key)}),_s());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Nh.Or(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=oa(c,n.get(c.key));null!=h&&s.push(new ca(c.key,h,ma(h.proto.mapValue),ta.exists(!0)))}return r.Sr.Oo(t,i,s,e)}))})).then((function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}}))}(r.Gc,e)];case 2:return i=u.sent(),r.Su.Fi(i.batchId),function(t,e,n){var r=t.$u[t.currentUser.ti()];r||(r=new fs(ko)),r=r.ot(e,n),t.$u[t.currentUser.ti()]=r}(r,i.batchId,n),[4,Tl(r,i.wr)];case 3:return u.sent(),[4,Kf(r.bu)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=bc(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}(e.fi,t,n)})),n.promise},t.prototype._=function(){return this.bl._},t.prototype.W_=function(t){var e=this;this.M_();var n=new ep(t);return this.hs.ws((function(){return wt(e,void 0,void 0,(function(){return It(this,(function(t){return[2,function(t,e){So(t).qs.add(e),e.next()}(this.B_,n)]}))}))})),function(){n.Xl(),e.hs.ws((function(){return wt(e,void 0,void 0,(function(){return It(this,(function(t){return[2,function(t,e){So(t).qs.delete(e)}(this.B_,n)]}))}))}))}},Object.defineProperty(t.prototype,"j_",{get:function(){return this.hs.ps},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.M_();var n=new rc;return this.hs.ws((function(){return new jp(e.hs,e.zc,t,n).run(),Promise.resolve()})),n.promise},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Bp=function(){function t(t,e,n,r){this._=t,this.G_=e,this.z_=n,this.H_=r}return t.prototype.J_=function(t){switch(Bs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ys(t.integerValue||t.doubleValue);case 3:return this.Y_(t.timestampValue);case 4:return this.X_(t);case 5:return t.stringValue;case 6:return this.H_(Qs(t.bytesValue));case 7:return this.Z_(t.referenceValue);case 8:return this.tf(t.geoPointValue);case 9:return this.ef(t.arrayValue);case 10:return this.nf(t.mapValue);default:throw Ao()}},t.prototype.nf=function(t){var e=this,n={};return qo(t.fields||{},(function(t,r){n[t]=e.J_(r)})),n},t.prototype.tf=function(t){return new gp(Ys(t.latitude),Ys(t.longitude))},t.prototype.ef=function(t){var e=this;return(t.values||[]).map((function(t){return e.J_(t)}))},t.prototype.X_=function(t){switch(this.G_){case"previous":var e=js(t);return null==e?null:this.J_(e);case"estimate":return this.Y_(Fs(t));default:return null}},t.prototype.Y_=function(t){var e=Xs(t);return new zo(e.seconds,e.nanos)},t.prototype.Z_=function(t){var e=Ko.q(t);No(Uu(e));var n=new jo(e.get(1),e.get(3)),r=new Yo(e.N(5));return n.isEqual(this._)||Eo("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.z_(r)},t}(),Gp=Yc.uo,zp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new mo(go.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=Yc._o;else{if(t.cacheSizeBytes!==Gp&&t.cacheSizeBytes<Yc.lo)throw new mo(go.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Yc.lo);this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ip("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),$p="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Hp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){throw new mo(go.FAILED_PRECONDITION,$p)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new mo(go.FAILED_PRECONDITION,$p)},t.prototype.clearIndexedDbPersistence=function(t){throw new mo(go.FAILED_PRECONDITION,$p)},t}(),Kp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){var n=new tp,r=new Jl(n,t.sf().cacheSizeBytes,e);return t.if(r,n)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){var e=new tp,n=new Zl(e,t.sf().cacheSizeBytes);return t.if(n,e)},t.prototype.clearIndexedDbPersistence=function(t){var e=this,n=new rc;return t.rf.bs((function(){return wt(e,void 0,void 0,(function(){var e;return It(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return wt(this,void 0,void 0,(function(){var e;return It(this,(function(n){switch(n.label){case 0:return sc.Ln()?(e=t+"main",[4,sc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(of(t.l_,t.af))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},t}(),Wp=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new Hp),this.hf=r,this.cf=null,this.rf=new mc,this.INTERNAL={delete:function(){return wt(i,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return this.uf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.cf=o,this.l_=t._f(o),this.af=o.name,this.ff=new Ef(n)}else{var s=e;if(!s.projectId)throw new mo(go.INVALID_ARGUMENT,"Must provide projectId");this.l_=new jo(s.projectId,s.database),this.af="[DEFAULT]",this.ff=new If}this.df=new zp({})}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.Ef||(this.Ef=new Ap(this.l_,this.df.ignoreUndefinedProperties)),this.Ef},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.df),t)).merge;var e=new zp(t);if(this.lf&&!this.df.isEqual(e))throw new mo(go.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.df=e,void 0!==e.credentials&&(this.ff=function(t){if(!t)return new If;switch(t.type){case"gapi":var e=t.client;return No(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Tf(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new mo(go.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.df.host&&_o("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},t.prototype.enableNetwork=function(){return this.uf(),this.lf.enableNetwork()},t.prototype.disableNetwork=function(){return this.uf(),this.lf.disableNetwork()},t.prototype.enablePersistence=function(t){if(this.lf)throw new mo(go.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1,n=!1;return t&&ip("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.hf.enableMultiTabIndexedDbPersistence(this):this.hf.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return wt(this,void 0,void 0,(function(){return It(this,(function(t){if(void 0!==this.lf&&!this.lf.j_)throw new mo(go.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return[2,this.hf.clearIndexedDbPersistence(this)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Tf",{get:function(){return this.uf(),this.lf.j_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.uf(),this.lf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.uf(),qp(t))return this.lf.W_(t);var e={next:t};return this.lf.W_(e)},t.prototype.uf=function(){return this.lf||this.if(new Ql,new tp),this.lf},t.prototype.If=function(){return new Uo(this.l_,this.af,this.df.host,this.df.ssl,this.df.experimentalForceLongPolling,this.df.experimentalAutoDetectLongPolling)},t.prototype.if=function(t,e){var n=this.If();return this.lf=new Fp(this.ff,this.rf),this.lf.start(n,t,e)},t._f=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new mo(go.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new mo(go.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new jo(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.cf)throw new mo(go.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return np("Firestore.collection","path",t),this.uf(),new ud(Ko.q(t),this,null)},t.prototype.doc=function(t){return np("Firestore.doc","path",t),this.uf(),Qp.mf(Ko.q(t),this,null)},t.prototype.collectionGroup=function(t){if(np("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new mo(go.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.uf(),new od(function(t){return new _a(Ko.U(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return this.uf().transaction((function(n){return t(new Xp(e,n))}))},t.prototype.batch=function(){return this.uf(),new Yp(this)},t.prototype.sf=function(){return this.df},t}(),Xp=function(){function t(t,e){this.Af=t,this.Rf=e}return t.prototype.get=function(t){var e=this,n=ad("Transaction.get",t,this.Af);return this.Rf.b_([n.__]).then((function(t){if(!t||1!==t.length)return Ao();var r=t[0];if(r instanceof Ia)return new Zp(e.Af,n.__,null,!1,!1,n.f_);if(r instanceof wa)return new Zp(e.Af,n.__,r,!1,!1,n.f_);throw Ao()}))},t.prototype.set=function(t,e,n){var r=ad("Transaction.set",t,this.Af);n=rp("Transaction.set",n);var i=hd(r.f_,e,n),o=Np(this.Af.wf,"Transaction.set",r.__,i,null!==r.f_,n);return this.Rf.set(r.__,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof ap?(r=ad("Transaction.update",t,this.Af),i=Dp(this.Af.wf,"Transaction.update",r.__,e,n,o)):(r=ad("Transaction.update",t,this.Af),i=Sp(this.Af.wf,"Transaction.update",r.__,e)),this.Rf.update(r.__,i),this},t.prototype.delete=function(t){var e=ad("Transaction.delete",t,this.Af);return this.Rf.delete(e.__),this},t}(),Yp=function(){function t(t){this.Af=t,this.Pf=[],this.gf=!1}return t.prototype.set=function(t,e,n){this.Vf();var r=ad("WriteBatch.set",t,this.Af);n=rp("WriteBatch.set",n);var i=hd(r.f_,e,n),o=Np(this.Af.wf,"WriteBatch.set",r.__,i,null!==r.f_,n);return this.Pf=this.Pf.concat(o.d_(r.__,ta.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Vf(),"string"==typeof e||e instanceof ap?(r=ad("WriteBatch.update",t,this.Af),i=Dp(this.Af.wf,"WriteBatch.update",r.__,e,n,o)):(r=ad("WriteBatch.update",t,this.Af),i=Sp(this.Af.wf,"WriteBatch.update",r.__,e)),this.Pf=this.Pf.concat(i.d_(r.__,ta.exists(!0))),this},t.prototype.delete=function(t){this.Vf();var e=ad("WriteBatch.delete",t,this.Af);return this.Pf=this.Pf.concat(new da(e.__,ta.ze())),this},t.prototype.commit=function(){return this.Vf(),this.gf=!0,this.Pf.length>0?this.Af.uf().write(this.Pf):Promise.resolve()},t.prototype.Vf=function(){if(this.gf)throw new mo(go.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Qp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.l_,e,r)||this).__=e,i.firestore=n,i.f_=r,i.lf=i.firestore.uf(),i}return mt(e,t),e.mf=function(t,n,r){if(t.length%2!=0)throw new mo(go.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.B()+" has "+t.length);return new e(new Yo(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ud(this.__.path.F(),this.firestore,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.__.path.B()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(np("DocumentReference.collection","path",t),!t)throw new mo(go.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Ko.q(t);return new ud(this.__.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof e&&this.firestore===t.firestore&&this.__.isEqual(t.__)&&this.f_===t.f_},e.prototype.set=function(t,e){e=rp("DocumentReference.set",e);var n=hd(this.f_,t,e),r=Np(this.firestore.wf,"DocumentReference.set",this.__,n,null!==this.f_,e);return this.lf.write(r.d_(this.__,ta.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof ap?Dp(this.firestore.wf,"DocumentReference.update",this.__,t,e,r):Sp(this.firestore.wf,"DocumentReference.update",this.__,t),this.lf.write(n.d_(this.__,ta.exists(!0)))},e.prototype.delete=function(){return this.lf.write([new da(this.__,ta.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||qp(i[u])||(s=i[u],u++);var a={includeMetadataChanges:s.includeMetadataChanges};if(qp(i[u])){var c=i[u];i[u]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[u+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[u+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}var h={next:function(t){i[u]&&i[u](r.yf(t))},error:i[u+1],complete:i[u+2]};return this.lf.listen(Aa(this.__.path),a,h)},e.prototype.get=function(t){var e=this,n=this.firestore.uf();return t&&"cache"===t.source?n.q_(this.__).then((function(t){return new Zp(e.firestore,e.__,t,!0,t instanceof wa&&t.Ye,e.f_)})):n.U_(this.__,t).then((function(t){return e.yf(t)}))},e.prototype.withConverter=function(t){return new e(this.__,this.firestore,t)},e.prototype.yf=function(t){var e=t.docs.get(this.__);return new Zp(this.firestore,this.__,e,t.fromCache,t.hasPendingWrites,this.f_)},e}(wp),Jp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Zp=function(){function t(t,e,n,r,i,o){this.Af=t,this.__=e,this.pf=n,this.bf=r,this.vf=i,this.f_=o}return t.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.pf){if(this.f_){var n=new td(this.Af,this.__,this.pf,this.bf,this.vf,null);return this.f_.fromFirestore(n,t)}return new Bp(this.Af.l_,t.serverTimestamps||"none",(function(t){return new Qp(t,e.Af,null)}),(function(t){return new Mo(t)})).J_(this.pf.rn())}},t.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.pf){var r=this.pf.data().field(Cp("DocumentSnapshot.get",t,this.__));if(null!==r)return new Bp(this.Af.l_,e.serverTimestamps||"none",(function(t){return new Qp(t,n.Af,n.f_)}),(function(t){return new Mo(t)})).J_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Qp(this.__,this.Af,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.pf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Jp(this.vf,this.bf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.Af===e.Af&&this.bf===e.bf&&this.__.isEqual(e.__)&&(null===this.pf?null===e.pf:this.pf.isEqual(e.pf))&&this.f_===e.f_},t}(),td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Zp);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ed(t,e,n){if("string"==typeof n){if(""===n)throw new mo(go.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ka(e)&&-1!==n.indexOf("/"))throw new mo(go.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ko.q(n));if(!Yo.X(r))throw new mo(go.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Js(t,new Yo(r))}if(n instanceof wp)return Js(t,n.__);throw new mo(go.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+op(n)+".")}function nd(t,e){if(!Array.isArray(t)||0===t.length)throw new mo(go.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new mo(go.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function rd(t,e,n){if(!n.isEqual(e))throw new mo(go.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function id(t){if(Sa(t)&&0===t.on.length)throw new mo(go.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var od=function(){function t(t,e,n){this.Sf=t,this.firestore=e,this.f_=n}return t.prototype.where=function(e,n,r){var i=Cp("Query.where",e),o=function(t,e,n,r,i,o,s){var u;if(i.W()){if("array-contains"===o||"array-contains-any"===o)throw new mo(go.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){nd(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(ed(r,t,f))}u={arrayValue:{values:a}}}else u=ed(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||nd(s,o),u=xp(n,"Query.where",s,"in"===o||"not-in"===o);var l=qa.create(i,o,u);return function(t,e){if(e.un()){var n=xa(t);if(null!==n&&!n.isEqual(e.field))throw new mo(go.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Da(t);null!==r&&rd(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new mo(go.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new mo(go.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(this.Sf,0,this.firestore.wf,this.firestore.l_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new _a(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Sf,o),this.firestore,this.f_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new mo(go.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Cp("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new mo(go.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new mo(go.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new tc(e,n);return function(t,e){if(null===Da(t)){var n=xa(t);null!==n&&rd(0,n,e.field)}}(t,r),r}(this.Sf,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new _a(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Sf,o),this.firestore,this.f_)},t.prototype.limit=function(e){return sp("Query.limit",e),new t(La(this.Sf,e,"F"),this.firestore,this.f_)},t.prototype.limitToLast=function(e){return sp("Query.limitToLast",e),new t(La(this.Sf,e,"L"),this.firestore,this.f_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.startAt",e,n,!0);return new t(Ca(this.Sf,i),this.firestore,this.f_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.startAfter",e,n,!1);return new t(Ca(this.Sf,i),this.firestore,this.f_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.endBefore",e,n,!0);return new t(Ra(this.Sf,i),this.firestore,this.f_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.endAt",e,n,!1);return new t(Ra(this.Sf,i),this.firestore,this.f_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&Va(this.Sf,e.Sf)&&this.f_===e.f_},t.prototype.withConverter=function(e){return new t(this.Sf,this.firestore,e)},t.prototype.Df=function(t,e,n,r){if(e instanceof Zp)return function(t,e,n,r,i){if(!r)throw new mo(go.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Oa(t);s<u.length;s++){var a=u[s];if(a.field.W())o.push(Js(e,r.key));else{var c=r.field(a.field);if(Us(c))throw new mo(go.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.B();throw new mo(go.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ya(o,i)}(this.Sf,this.firestore.l_,t,e.pf,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new mo(go.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.W()){if("string"!=typeof c)throw new mo(go.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ka(t)&&-1!==c.indexOf("/"))throw new mo(go.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Ko.q(c));if(!Yo.X(h))throw new mo(go.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Yo(h);u.push(Js(e,f))}else{var l=xp(n,r,c);u.push(l)}}return new Ya(u,o)}(this.Sf,this.firestore.l_,this.firestore.wf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={},u=0;if("object"!=typeof i[u]||qp(i[u])||(s=i[u],u++),qp(i[u])){var a=i[u];i[u]=null===(t=a.next)||void 0===t?void 0:t.bind(a),i[u+1]=null===(e=a.error)||void 0===e?void 0:e.bind(a),i[u+2]=null===(n=a.complete)||void 0===n?void 0:n.bind(a)}var c={next:function(t){i[u]&&i[u](new sd(r.firestore,r.Sf,t,r.f_))},error:i[u+1],complete:i[u+2]};return id(this.Sf),this.firestore.uf().listen(this.Sf,s,c)},t.prototype.get=function(t){var e=this;id(this.Sf);var n=this.firestore.uf();return(t&&"cache"===t.source?n.K_(this.Sf):n.Q_(this.Sf,t)).then((function(t){return new sd(e.firestore,e.Sf,t,e.f_)}))},t}(),sd=function(){function t(t,e,n,r){this.Af=t,this.Cf=e,this.Nf=n,this.f_=r,this.xf=null,this.Ff=null,this.metadata=new Jp(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Nf.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Nf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Nf.docs.forEach((function(r){t.call(e,n.kf(r,n.metadata.fromCache,n.Nf.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new od(this.Cf,this.Af,this.f_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=!(!t||!t.includeMetadataChanges);if(e&&this.Nf.jt)throw new mo(go.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.xf&&this.Ff===e||(this.xf=function(t,e,n){if(t.Kt.P()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Kt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:cd(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.Nf,e,this.kf.bind(this)),this.Ff=e),this.xf},t.prototype.isEqual=function(e){return e instanceof t&&this.Af===e.Af&&Va(this.Cf,e.Cf)&&this.Nf.isEqual(e.Nf)&&this.f_===e.f_},t.prototype.kf=function(t,e,n){return new td(this.Af,t.key,t,e,n,this.f_)},t}(),ud=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Aa(e),n,r)||this).Of=e,e.length%2!=1)throw new mo(go.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.B()+" has "+e.length);return i}return mt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Sf.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Sf.path.F();return t.P()?null:new Qp(new Yo(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Sf.path.B()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=xo.t()),np("CollectionReference.doc","path",t);var e=Ko.q(t);return Qp.mf(this.Sf.path.child(e),this.firestore,this.f_)},e.prototype.add=function(t){var e=this.f_?this.f_.toFirestore(t):t,n=this.doc();return new Qp(n.__,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Of,this.firestore,t)},e}(od);function ad(t,e,n){var r=function(t,e){if(!(t instanceof e)){if(e.name===t.constructor.name)throw new mo(go.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=op(t);throw new mo(go.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}(e,Qp);if(r.firestore!==n)throw new mo(go.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function cd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ao()}}function hd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fd,ld=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.serverTimestamp=function(){var t=new pp("serverTimestamp");return t.t_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new fp("deleteField");return t.t_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dp("arrayUnion",t)}.apply(void 0,t);return r.t_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vp("arrayRemove",t)}.apply(void 0,t);return r.t_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new yp("increment",t)}(t);return n.t_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.u_.isEqual(t.u_)},e}(mp),pd={Firestore:Wp,GeoPoint:gp,Timestamp:zo,Blob:Mo,Transaction:Xp,WriteBatch:Yp,DocumentReference:Qp,DocumentSnapshot:Zp,Query:od,QueryDocumentSnapshot:td,QuerySnapshot:sd,CollectionReference:ud,FieldPath:ap,FieldValue:ld,setLogLevel:function(t){var e;e=t,bo.setLogLevel(e)},CACHE_SIZE_UNLIMITED:Gp};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(function(t,e){t.INTERNAL.registerComponent(new Ut("firestore",(function(t){return function(t,e){return new Wp(t,e,new Kp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},pd)))})(fd=le),fd.registerVersion("@firebase/firestore","2.0.0");le.initializeApp({projectId:"sample-project-294713"});const dd=function(){const t=window.location.search;let e;if(t)e=t.substring(1);else{const t=yt();window.location.hash=t,window.history.replaceState("","","?"+t),e=t}return e}(),vd=le.firestore().collection("rooms").doc(dd),yd=function(){const{subscribe:t,set:e}=at([]);return{subscribe:t,set:e,append:(t,e)=>{vd.get().then((n=>{let r=[],i={closed:!0};if(n&&n.exists){const e=n.data();r=[...e.estimates.filter((e=>e.name!==t))],i=e.tableState}r.push({name:t,point:e,appendedAt:le.firestore.Timestamp.now()}),vd.set({estimates:r,tableState:i})}))},remove:(t,e=null)=>{vd.get().then((n=>{if(n&&n.exists){const r=n.data();r.estimates=r.estimates.filter((e=>e.name!==t)),vd.set(r).then(e)}else e()}))},clear:()=>{vd.delete()}}}(),gd=function(){const{subscribe:t,set:e,update:n}=at({closed:!0});return{subscribe:t,set:e,open:()=>{vd.get().then((t=>{if(t&&t.exists){const e=t.data();e.tableState={closed:!1},vd.set(e)}}))},close:()=>{vd.delete()}}}(),md=new Promise((t=>{vd.onSnapshot((t=>{if(t&&t.exists){const e=t.data(),n=(t,e)=>t.appendedAt.seconds-e.appendedAt.seconds;yd.set(e.estimates.sort(n)),gd.set(e.tableState)}else yd.set([]),gd.set({closed:!0})})),t()}));function bd(e){let n,r,i,o,s=(e[2]?"":e[0])+"";return{c(){n=y("div"),r=g(s),w(n,"class","card svelte-tq9sw8"),E(n,"closed",e[2]),E(n,"selected",e[1])},m(t,s){d(t,n,s),p(n,r),i||(o=b(n,"click",e[3]),i=!0)},p(t,[e]){5&e&&s!==(s=(t[2]?"":t[0])+"")&&I(r,s),4&e&&E(n,"closed",t[2]),2&e&&E(n,"selected",t[1])},i:t,o:t,d(t){t&&v(n),i=!1,o()}}}function wd(t,e,n){let{point:r}=e,{selected:i=!1}=e,{closed:o=!1}=e;const s=function(){const t=k();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=_(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}();return t.$$set=t=>{"point"in t&&n(0,r=t.point),"selected"in t&&n(1,i=t.selected),"closed"in t&&n(2,o=t.closed)},[r,i,o,function(){s("selectCard",{point:r})}]}class Id extends it{constructor(t){super(),rt(this,t,wd,bd,s,{point:0,selected:1,closed:2})}}function Ed(t,e,n){const r=t.slice();return r[5]=e[n],r}function _d(t,e){let n,r,i,o,s,u,a,c,h=e[5].name+"";return r=new Id({props:{point:e[5].point,closed:e[0].closed}}),{key:t,first:null,c(){n=y("div"),Z(r.$$.fragment),i=m(),o=y("div"),s=g(h),u=m(),w(o,"class","name svelte-1i3m1i5"),w(n,"class","estimate svelte-1i3m1i5"),this.first=n},m(t,e){d(t,n,e),tt(r,n,null),p(n,i),p(n,o),p(o,s),p(n,u),c=!0},p(t,e){const n={};2&e&&(n.point=t[5].point),1&e&&(n.closed=t[0].closed),r.$set(n),(!c||2&e)&&h!==(h=t[5].name+"")&&I(s,h)},i(t){c||(W(r.$$.fragment,t),M((()=>{a||(a=Q(n,st,{y:100},!0)),a.run(1)})),c=!0)},o(t){X(r.$$.fragment,t),a||(a=Q(n,st,{y:100},!1)),a.run(0),c=!1},d(t){t&&v(n),et(r),t&&a&&a.end()}}}function Td(t){let e,n,r,i,o=t[0].closed?"open":"return";return{c(){e=y("div"),n=g(o),w(e,"class","open-button svelte-1i3m1i5")},m(o,s){d(o,e,s),p(e,n),r||(i=b(e,"click",t[2]),r=!0)},p(t,e){1&e&&o!==(o=t[0].closed?"open":"return")&&I(n,o)},d(t){t&&v(e),r=!1,i()}}}function Ad(e){let n,r,i;return{c(){n=y("div"),n.textContent="Copy",w(n,"class","copy-button svelte-1i3m1i5")},m(t,o){d(t,n,o),r||(i=b(n,"click",e[3]),r=!0)},p:t,d(t){t&&v(n),r=!1,i()}}}function Nd(t){let e,n,r,i,o,s=[],u=new Map,a=t[1];const c=t=>t[5].name;for(let e=0;e<a.length;e+=1){let n=Ed(t,a,e),r=c(n);u.set(r,s[e]=_d(r,n))}let h=(t[1].length>0||!t[0].closed)&&Td(t),f=!t[0].closed&&Ad(t);return{c(){e=y("div"),n=y("div");for(let t=0;t<s.length;t+=1)s[t].c();r=m(),h&&h.c(),i=m(),f&&f.c(),w(n,"class","estimates svelte-1i3m1i5"),w(e,"class","table svelte-1i3m1i5")},m(t,u){d(t,e,u),p(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);p(e,r),h&&h.m(e,null),p(e,i),f&&f.m(e,null),o=!0},p(t,[r]){if(3&r){const e=t[1];H(),s=function(t,e,n,r,i,o,s,u,a,c,h,f){let l=t.length,p=o.length,d=l;const v={};for(;d--;)v[t[d].key]=d;const y=[],g=new Map,m=new Map;for(d=p;d--;){const t=f(i,o,d),u=n(t);let a=s.get(u);a?r&&a.p(t,e):(a=c(u,t),a.c()),g.set(u,y[d]=a),u in v&&m.set(u,Math.abs(d-v[u]))}const b=new Set,w=new Set;function I(t){W(t,1),t.m(u,h),s.set(t.key,t),h=t.first,p--}for(;l&&p;){const e=y[p-1],n=t[l-1],r=e.key,i=n.key;e===n?(h=e.first,l--,p--):g.has(i)?!s.has(r)||b.has(r)?I(e):w.has(i)?l--:m.get(r)>m.get(i)?(w.add(r),I(e)):(b.add(i),l--):(a(n,s),l--)}for(;l--;){const e=t[l];g.has(e.key)||a(e,s)}for(;p;)I(y[p-1]);return y}(s,r,c,1,t,e,u,n,J,_d,null,Ed),K()}t[1].length>0||!t[0].closed?h?h.p(t,r):(h=Td(t),h.c(),h.m(e,i)):h&&(h.d(1),h=null),t[0].closed?f&&(f.d(1),f=null):f?f.p(t,r):(f=Ad(t),f.c(),f.m(e,null))},i(t){if(!o){for(let t=0;t<a.length;t+=1)W(s[t]);o=!0}},o(t){for(let t=0;t<s.length;t+=1)X(s[t]);o=!1},d(t){t&&v(e);for(let t=0;t<s.length;t+=1)s[t].d();h&&h.d(),f&&f.d()}}}function Sd(t,e,n){let r,i;return u(t,gd,(t=>n(0,r=t))),u(t,yd,(t=>n(1,i=t))),[r,i,function(t){r.closed?i.length>0&&gd.open():(yd.clear(),gd.close())},function(t){const e=function(){if(0===i.length)return"empty.";const t=new Date;return"["+t.toLocaleDateString()+" "+t.toLocaleTimeString()+"] "+i.sort(((t,e)=>t.name>e.name?1:-1)).reduce(((t,e)=>(t?t+" ":"")+`${e.name}(${e.point})`),null)}();navigator.clipboard.writeText(e)}]}class Dd extends it{constructor(t){super(),rt(this,t,Sd,Nd,s,{})}}function xd(t,e,n){const r=t.slice();return r[5]=e[n],r}function kd(t){let e,n;return e=new Id({props:{point:t[5],selected:t[1]===t[5]}}),e.$on("selectCard",t[3]),{c(){Z(e.$$.fragment)},m(t,r){tt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.selected=t[1]===t[5]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){X(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Od(t){let e,n,r,i,o,s=t[2],u=[];for(let e=0;e<s.length;e+=1)u[e]=kd(xd(t,s,e));const a=t=>X(u[t],1,1,(()=>{u[t]=null}));return{c(){e=y("div"),n=y("div"),r=g(t[0]),i=m();for(let t=0;t<u.length;t+=1)u[t].c();w(n,"class","user-name svelte-4f78du"),w(e,"class","svelte-4f78du")},m(t,s){d(t,e,s),p(e,n),p(n,r),p(e,i);for(let t=0;t<u.length;t+=1)u[t].m(e,null);o=!0},p(t,[n]){if((!o||1&n)&&I(r,t[0]),14&n){let r;for(s=t[2],r=0;r<s.length;r+=1){const i=xd(t,s,r);u[r]?(u[r].p(i,n),W(u[r],1)):(u[r]=kd(i),u[r].c(),W(u[r],1),u[r].m(e,null))}for(H(),r=s.length;r<u.length;r+=1)a(r);K()}},i(t){if(!o){for(let t=0;t<s.length;t+=1)W(u[t]);o=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)X(u[t]);o=!1},d(t){t&&v(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(u,t)}}}function Pd(t,e,n){let r;u(t,yd,(t=>n(4,r=t)));let i,o;for(;!(i=window.prompt("your name")););return t.$$.update=()=>{17&t.$$.dirty&&n(1,o=r.filter((t=>t.name===i)).map((t=>t.point)).pop())},[i,o,["0","1","2","3","5","8","13","21","34","55","?","∞"],function(t){const e=()=>yd.append(i,t.detail.point);o?yd.remove(i,o===t.detail.point?null:()=>setTimeout(e,300)):e()}]}class Ld extends it{constructor(t){super(),rt(this,t,Pd,Od,s,{})}}function Cd(e){return{c:t,m:t,i:t,o:t,d:t}}function Rd(t){let e,n,r,i,o,s,u,a;return o=new Dd({}),u=new Ld({}),{c(){e=y("h1"),e.textContent="Planning Poker",n=m(),r=y("p"),r.textContent="share the URL of this page with your team members.",i=m(),Z(o.$$.fragment),s=m(),Z(u.$$.fragment),w(e,"class","svelte-atxnar")},m(t,c){d(t,e,c),d(t,n,c),d(t,r,c),d(t,i,c),tt(o,t,c),d(t,s,c),tt(u,t,c),a=!0},i(t){a||(W(o.$$.fragment,t),W(u.$$.fragment,t),a=!0)},o(t){X(o.$$.fragment,t),X(u.$$.fragment,t),a=!1},d(t){t&&v(e),t&&v(n),t&&v(r),t&&v(i),et(o,t),t&&v(s),et(u,t)}}}function Vd(e){let n;return{c(){n=y("p"),n.textContent="...waiting"},m(t,e){d(t,n,e)},i:t,o:t,d(t){t&&v(n)}}}function Md(t){let e,n,r,i,o,s;document.title=e=t[0];let u={ctx:t,current:null,token:null,hasCatch:!1,pending:Vd,then:Rd,catch:Cd,blocks:[,,,]};return function(t,e){const n=e.token={};function r(t,r,i,o){if(e.token!==n)return;e.resolved=o;let s=e.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const u=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(H(),X(t,1,1,(()=>{e.blocks[n]=null})),K())})):e.block.d(1),u.c(),W(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[r]=u),a&&F()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=k();if(t.then((t=>{x(n),r(e.then,1,e.value,t),x(null)}),(t=>{if(x(n),r(e.catch,2,e.error,t),x(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var i}(o=md,u),{c(){n=y("link"),r=m(),i=y("main"),u.block.c(),w(n,"href","https://fonts.googleapis.com/css?family=M+PLUS+1p"),w(n,"rel","stylesheet"),w(i,"class","svelte-atxnar")},m(t,e){p(document.head,n),d(t,r,e),d(t,i,e),u.block.m(i,u.anchor=null),u.mount=()=>i,u.anchor=null,s=!0},p(n,[r]){t=n,(!s||1&r)&&e!==(e=t[0])&&(document.title=e)},i(t){s||(W(u.block),s=!0)},o(t){for(let t=0;t<3;t+=1){X(u.blocks[t])}s=!1},d(t){v(n),t&&v(r),t&&v(i),u.block.d(),u.token=null,u=null}}}function Ud(t,e,n){let{name:r}=e;return t.$$set=t=>{"name"in t&&n(0,r=t.name)},[r]}return new class extends it{constructor(t){super(),rt(this,t,Ud,Md,s,{name:0})}}({target:document.body,props:{name:"Planning Poker"}})}();
//# sourceMappingURL=bundle.js.map
